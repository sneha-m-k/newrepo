
/* /web_editor/static/lib/summernote/src/js/enable_summernote.js defined in bundle 'web_editor.assets_summernote' */
odoo.__enable_summernote__=true;;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
(function(){"use strict";odoo.define('jquery',function(){return $;});var uniqId=0;odoo.__define__=window.define;window.define=function(id){if(!odoo.__enable_summernote__)return;var args=Array.prototype.slice.call(arguments);var factorie=args.pop();var id=args[0];if(id instanceof Array){var name="summernote_factorie_"+(++uniqId);odoo[name]=factorie;var head='';var fn='var fn = odoo.'+name+';\ndelete odoo.'+name+';\n';fn+='return fn(';for(var k=0;k<id.length;k++){head+='var a'+(++uniqId)+' = require("'+id[k]+'");\n';fn+='a'+uniqId+', ';}
fn+='null);';odoo.define(odoo.website_next_define,new Function('require',head+fn));}else{odoo.define(id,factorie);}};})();;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/async';;

/* /web_editor/static/lib/summernote/src/js/core/async.js defined in bundle 'web_editor.assets_summernote' */
define('summernote/core/async',function(){var async=(function(){var readFileAsDataURL=function(file){return $.Deferred(function(deferred){$.extend(new FileReader(),{onload:function(e){var sDataURL=e.target.result;deferred.resolve(sDataURL);},onerror:function(){deferred.reject(this);}}).readAsDataURL(file);}).promise();};var createImage=function(sUrl,filename){return $.Deferred(function(deferred){var $img=$('<img>');$img.one('load',function(){$img.off('error abort');deferred.resolve($img);}).one('error abort',function(){$img.off('load').detach();deferred.reject($img);}).css({display:'none'}).appendTo(document.body).attr({'src':sUrl,'data-filename':filename});}).promise();};return{readFileAsDataURL:readFileAsDataURL,createImage:createImage};})();return async;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/func';;

/* /web_editor/static/lib/summernote/src/js/core/func.js defined in bundle 'web_editor.assets_summernote' */
define('summernote/core/func',function(){var func=(function(){var eq=function(itemA){return function(itemB){return itemA===itemB;};};var eq2=function(itemA,itemB){return itemA===itemB;};var peq2=function(propName){return function(itemA,itemB){return itemA[propName]===itemB[propName];};};var ok=function(){return true;};var fail=function(){return false;};var not=function(f){return function(){return!f.apply(f,arguments);};};var and=function(fA,fB){return function(item){return fA(item)&&fB(item);};};var self=function(a){return a;};var idCounter=0;var uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};var rect2bnd=function(rect){var $document=$(document);return{top:rect.top+$document.scrollTop(),left:rect.left+$document.scrollLeft(),width:rect.right-rect.left,height:rect.bottom-rect.top};};var invertObject=function(obj){var inverted={};for(var key in obj){if(obj.hasOwnProperty(key)){inverted[obj[key]]=key;}}
return inverted;};var namespaceToCamel=function(namespace,prefix){prefix=prefix||'';return prefix+namespace.split('.').map(function(name){return name.substring(0,1).toUpperCase()+name.substring(1);}).join('');};return{eq:eq,eq2:eq2,peq2:peq2,ok:ok,fail:fail,self:self,not:not,and:and,uniqueId:uniqueId,rect2bnd:rect2bnd,invertObject:invertObject,namespaceToCamel:namespaceToCamel};})();return func;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/agent';;

/* /web_editor/static/lib/summernote/src/js/core/agent.js defined in bundle 'web_editor.assets_summernote' */
define(['jquery'],function($){if(!Array.prototype.reduce){Array.prototype.reduce=function(callback){var t=Object(this),len=t.length>>>0,k=0,value;if(arguments.length===2){value=arguments[1];}else{while(k<len&&!(k in t)){k++;}
if(k>=len){throw new TypeError('Reduce of empty array with no initial value');}
value=t[k++];}
for(;k<len;k++){if(k in t){value=callback(value,t[k],k,t);}}
return value;};}
if('function'!==typeof Array.prototype.filter){Array.prototype.filter=function(func){var t=Object(this),len=t.length>>>0;var res=[];var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){var val=t[i];if(func.call(thisArg,val,i,t)){res.push(val);}}}
return res;};}
if(!Array.prototype.map){Array.prototype.map=function(callback,thisArg){var T,A,k;if(this===null){throw new TypeError(' this is null or not defined');}
var O=Object(this);var len=O.length>>>0;if(typeof callback!=='function'){throw new TypeError(callback+' is not a function');}
if(arguments.length>1){T=thisArg;}
A=new Array(len);k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue;}
k++;}
return A;};}
var isSupportAmd=typeof define==='function'&&define.amd;var isFontInstalled=function(fontName){var testFontName=fontName==='Comic Sans MS'?'Courier New':'Comic Sans MS';var $tester=$('<div>').css({position:'absolute',left:'-9999px',top:'-9999px',fontSize:'200px'}).text('mmmmmmmmmwwwwwww').appendTo(document.body);var originalWidth=$tester.css('fontFamily',testFontName).width();var width=$tester.css('fontFamily',fontName+','+testFontName).width();$tester.remove();return originalWidth!==width;};var userAgent=navigator.userAgent;var isMSIE=/MSIE|Trident/i.test(userAgent);var browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1]);}
matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1]);}}
var agent={isMac:navigator.appVersion.indexOf('Mac')>-1,isMSIE:isMSIE,isFF:/firefox/i.test(userAgent),isWebkit:/webkit/i.test(userAgent),isSafari:/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:isSupportAmd?require.specified('CodeMirror'):!!window.CodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange};return agent;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/list';;

/* /web_editor/static/lib/summernote/src/js/core/list.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/func'],function(func){var list=(function(){var head=function(array){return array[0];};var last=function(array){return array[array.length-1];};var initial=function(array){return array.slice(0,array.length-1);};var tail=function(array){return array.slice(1);};var find=function(array,pred){for(var idx=0,len=array.length;idx<len;idx++){var item=array[idx];if(pred(item)){return item;}}};var all=function(array,pred){for(var idx=0,len=array.length;idx<len;idx++){if(!pred(array[idx])){return false;}}
return true;};var indexOf=function(array,item){return $.inArray(item,array);};var contains=function(array,item){return indexOf(array,item)!==-1;};var sum=function(array,fn){fn=fn||func.self;return array.reduce(function(memo,v){return memo+fn(v);},0);};var from=function(collection){var result=[],idx=-1,length=collection.length;while(++idx<length){result[idx]=collection[idx];}
return result;};var clusterBy=function(array,fn){if(!array.length){return[];}
var aTail=tail(array);return aTail.reduce(function(memo,v){var aLast=last(memo);if(fn(last(aLast),v)){aLast[aLast.length]=v;}else{memo[memo.length]=[v];}
return memo;},[[head(array)]]);};var compact=function(array){var aResult=[];for(var idx=0,len=array.length;idx<len;idx++){if(array[idx]){aResult.push(array[idx]);}}
return aResult;};var unique=function(array){var results=[];for(var idx=0,len=array.length;idx<len;idx++){if(!contains(results,array[idx])){results.push(array[idx]);}}
return results;};var next=function(array,item){var idx=indexOf(array,item);if(idx===-1){return null;}
return array[idx+1];};var prev=function(array,item){var idx=indexOf(array,item);if(idx===-1){return null;}
return array[idx-1];};return{head:head,last:last,initial:initial,tail:tail,prev:prev,next:next,find:find,contains:contains,all:all,sum:sum,from:from,clusterBy:clusterBy,compact:compact,unique:unique};})();return list;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/dom';;

/* /web_editor/static/lib/summernote/src/js/core/dom.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/func','summernote/core/list','summernote/core/agent'],function(func,list,agent){var NBSP_CHAR=String.fromCharCode(160);var ZERO_WIDTH_NBSP_CHAR='\ufeff';var dom=(function(){var isEditable=function(node){return node&&$(node).hasClass('note-editable');};var isControlSizing=function(node){return node&&$(node).hasClass('note-control-sizing');};var buildLayoutInfo=function($editor){var makeFinder;if($editor.hasClass('note-air-editor')){var id=list.last($editor.attr('data-note-id').split('-'));makeFinder=function(sIdPrefix){return function(){return $(sIdPrefix+id);};};return{editor:function(){return $editor;},holder:function(){return $editor.data('holder');},editable:function(){return $editor;},popover:makeFinder('#note-popover-'),handle:makeFinder('#note-handle-'),dialog:makeFinder('#note-dialog-')};}else{makeFinder=function(className,$base){$base=$base||$editor;return function(){return $base.find(className);};};var options=$editor.data('options');var $dialogHolder=(options&&options.dialogsInBody)?$(document.body):null;return{editor:function(){return $editor;},holder:function(){return $editor.data('holder');},dropzone:makeFinder('.note-dropzone'),toolbar:makeFinder('.note-toolbar'),editable:makeFinder('.note-editable'),codable:makeFinder('.note-codable'),statusbar:makeFinder('.note-statusbar'),popover:makeFinder('.note-popover'),handle:makeFinder('.note-handle'),dialog:makeFinder('.note-dialog',$dialogHolder)};}};var makeLayoutInfo=function(descendant){var $target=$(descendant).closest('.note-editor, .note-air-editor, .note-air-layout');if(!$target.length){return null;}
var $editor;if($target.is('.note-editor, .note-air-editor')){$editor=$target;}else{$editor=$('[data-note-id="'+list.last($target.attr('id').split('-'))+'"]');}
return buildLayoutInfo($editor);};var makePredByNodeName=function(nodeName){nodeName=nodeName.toUpperCase();return function(node){return node&&node.nodeName.toUpperCase()===nodeName;};};var isText=function(node){return node&&node.nodeType===3;};var isVoid=function(node){return node&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(node.nodeName.toUpperCase());};var isPara=function(node){if(isEditable(node)){return false;}
return node&&/^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase());};var isLi=makePredByNodeName('LI');var isPurePara=function(node){return isPara(node)&&!isLi(node);};var isTable=makePredByNodeName('TABLE');var isInline=function(node){return!isBodyContainer(node)&&!isList(node)&&!isHr(node)&&!isPara(node)&&!isTable(node)&&!isBlockquote(node);};var isList=function(node){return node&&/^UL|^OL/.test(node.nodeName.toUpperCase());};var isHr=makePredByNodeName('HR');var isCell=function(node){return node&&/^TD|^TH/.test(node.nodeName.toUpperCase());};var isBlockquote=makePredByNodeName('BLOCKQUOTE');var isBodyContainer=function(node){return isCell(node)||isBlockquote(node)||isEditable(node);};var isAnchor=makePredByNodeName('A');var isParaInline=function(node){return isInline(node)&&!!ancestor(node,isPara);};var isBodyInline=function(node){return isInline(node)&&!ancestor(node,isPara);};var isBody=makePredByNodeName('BODY');var isClosestSibling=function(nodeA,nodeB){return nodeA.nextSibling===nodeB||nodeA.previousSibling===nodeB;};var withClosestSiblings=function(node,pred){pred=pred||func.ok;var siblings=[];if(node.previousSibling&&pred(node.previousSibling)){siblings.push(node.previousSibling);}
siblings.push(node);if(node.nextSibling&&pred(node.nextSibling)){siblings.push(node.nextSibling);}
return siblings;};var blankHTML=agent.isMSIE&&agent.browserVersion<11?'&nbsp;':'<br>';var nodeLength=function(node){if(isText(node)){return node.nodeValue.length;}
return node.childNodes.length;};var isEmpty=function(node){var len=nodeLength(node);if(len===0){return true;}else if(!isText(node)&&len===1&&node.innerHTML===blankHTML){return true;}else if(list.all(node.childNodes,isText)&&node.innerHTML===''){return true;}
return false;};var paddingBlankHTML=function(node){if(!isVoid(node)&&!nodeLength(node)){node.innerHTML=blankHTML;}};var ancestor=function(node,pred){while(node){if(pred(node)){return node;}
if(isEditable(node)){break;}
node=node.parentNode;}
return null;};var singleChildAncestor=function(node,pred){node=node.parentNode;while(node){if(nodeLength(node)!==1){break;}
if(pred(node)){return node;}
if(isEditable(node)){break;}
node=node.parentNode;}
return null;};var listAncestor=function(node,pred){pred=pred||func.fail;var ancestors=[];ancestor(node,function(el){if(!isEditable(el)){ancestors.push(el);}
return pred(el);});return ancestors;};var lastAncestor=function(node,pred){var ancestors=listAncestor(node);return list.last(ancestors.filter(pred));};var commonAncestor=function(nodeA,nodeB){var ancestors=listAncestor(nodeA);for(var n=nodeB;n;n=n.parentNode){if($.inArray(n,ancestors)>-1){return n;}}
return null;};var listPrev=function(node,pred){pred=pred||func.fail;var nodes=[];while(node){if(pred(node)){break;}
nodes.push(node);node=node.previousSibling;}
return nodes;};var listNext=function(node,pred){pred=pred||func.fail;var nodes=[];while(node){if(pred(node)){break;}
nodes.push(node);node=node.nextSibling;}
return nodes;};var listDescendant=function(node,pred){var descendents=[];pred=pred||func.ok;(function fnWalk(current){if(node!==current&&pred(current)){descendents.push(current);}
for(var idx=0,len=current.childNodes.length;idx<len;idx++){fnWalk(current.childNodes[idx]);}})(node);return descendents;};var wrap=function(node,wrapperName){var parent=node.parentNode;var wrapper=$('<'+wrapperName+'>')[0];parent.insertBefore(wrapper,node);wrapper.appendChild(node);return wrapper;};var insertAfter=function(node,preceding){var next=preceding.nextSibling,parent=preceding.parentNode;if(next){parent.insertBefore(node,next);}else{parent.appendChild(node);}
return node;};var appendChildNodes=function(node,aChild){$.each(aChild,function(idx,child){node.appendChild(child);});return node;};var isLeftEdgePoint=function(point){return point.offset===0;};var isRightEdgePoint=function(point){return point.offset===nodeLength(point.node);};var isEdgePoint=function(point){return isLeftEdgePoint(point)||isRightEdgePoint(point);};var isLeftEdgeOf=function(node,ancestor){while(node&&node!==ancestor){if(position(node)!==0){return false;}
node=node.parentNode;}
return true;};var isRightEdgeOf=function(node,ancestor){while(node&&node!==ancestor){if(position(node)!==nodeLength(node.parentNode)-1){return false;}
node=node.parentNode;}
return true;};var isLeftEdgePointOf=function(point,ancestor){return isLeftEdgePoint(point)&&isLeftEdgeOf(point.node,ancestor);};var isRightEdgePointOf=function(point,ancestor){return isRightEdgePoint(point)&&isRightEdgeOf(point.node,ancestor);};var position=function(node){var offset=0;while((node=node.previousSibling)){offset+=1;}
return offset;};var hasChildren=function(node){return!!(node&&node.childNodes&&node.childNodes.length);};var prevPoint=function(point,isSkipInnerOffset){var node,offset;if(point.offset===0){if(isEditable(point.node)){return null;}
node=point.node.parentNode;offset=position(point.node);}else if(hasChildren(point.node)){node=point.node.childNodes[point.offset-1];offset=nodeLength(node);}else{node=point.node;offset=isSkipInnerOffset?0:point.offset-1;}
return{node:node,offset:offset};};var nextPoint=function(point,isSkipInnerOffset){var node,offset;if(nodeLength(point.node)===point.offset){if(isEditable(point.node)){return null;}
node=point.node.parentNode;offset=position(point.node)+1;}else if(hasChildren(point.node)){node=point.node.childNodes[point.offset];offset=0;}else{node=point.node;offset=isSkipInnerOffset?nodeLength(point.node):point.offset+1;}
return{node:node,offset:offset};};var isSamePoint=function(pointA,pointB){return pointA.node===pointB.node&&pointA.offset===pointB.offset;};var isVisiblePoint=function(point){if(isText(point.node)||!hasChildren(point.node)||isEmpty(point.node)){return true;}
var leftNode=point.node.childNodes[point.offset-1];var rightNode=point.node.childNodes[point.offset];if((!leftNode||isVoid(leftNode))&&(!rightNode||isVoid(rightNode))){return true;}
return false;};var prevPointUntil=function(point,pred){while(point){if(pred(point)){return point;}
point=prevPoint(point);}
return null;};var nextPointUntil=function(point,pred){while(point){if(pred(point)){return point;}
point=nextPoint(point);}
return null;};var isCharPoint=function(point){if(!isText(point.node)){return false;}
var ch=point.node.nodeValue.charAt(point.offset-1);return ch&&(ch!==' '&&ch!==NBSP_CHAR);};var walkPoint=function(startPoint,endPoint,handler,isSkipInnerOffset){var point=startPoint;while(point){handler(point);if(isSamePoint(point,endPoint)){break;}
var isSkipOffset=isSkipInnerOffset&&startPoint.node!==point.node&&endPoint.node!==point.node;point=nextPoint(point,isSkipOffset);}};var makeOffsetPath=function(ancestor,node){var ancestors=listAncestor(node,func.eq(ancestor));return ancestors.map(position).reverse();};var fromOffsetPath=function(ancestor,offsets){var current=ancestor;for(var i=0,len=offsets.length;i<len;i++){if(current.childNodes.length<=offsets[i]){current=current.childNodes[current.childNodes.length-1];}else{current=current.childNodes[offsets[i]];}}
return current;};var splitNode=function(point,options){var isSkipPaddingBlankHTML=options&&options.isSkipPaddingBlankHTML;var isNotSplitEdgePoint=options&&options.isNotSplitEdgePoint;if(isEdgePoint(point)&&(isText(point.node)||isNotSplitEdgePoint)){if(isLeftEdgePoint(point)){return point.node;}else if(isRightEdgePoint(point)){return point.node.nextSibling;}}
if(isText(point.node)){return point.node.splitText(point.offset);}else{var childNode=point.node.childNodes[point.offset];var clone=insertAfter(point.node.cloneNode(false),point.node);appendChildNodes(clone,listNext(childNode));if(!isSkipPaddingBlankHTML){paddingBlankHTML(point.node);paddingBlankHTML(clone);}
return clone;}};var splitTree=function(root,point,options){var ancestors=listAncestor(point.node,func.eq(root));if(!ancestors.length){return null;}else if(ancestors.length===1){return splitNode(point,options);}
return ancestors.reduce(function(node,parent){if(node===point.node){node=splitNode(point,options);}
return splitNode({node:parent,offset:node?dom.position(node):nodeLength(parent)},options);});};var splitPoint=function(point,isInline){var pred=isInline?isPara:isBodyContainer;var ancestors=listAncestor(point.node,pred);var topAncestor=list.last(ancestors)||point.node;var splitRoot,container;if(pred(topAncestor)){splitRoot=ancestors[ancestors.length-2];container=topAncestor;}else{splitRoot=topAncestor;container=splitRoot.parentNode;}
var pivot=splitRoot&&splitTree(splitRoot,point,{isSkipPaddingBlankHTML:isInline,isNotSplitEdgePoint:isInline});if(!pivot&&container===point.node){pivot=point.node.childNodes[point.offset];}
return{rightNode:pivot,container:container};};var create=function(nodeName){return document.createElement(nodeName);};var createText=function(text){return document.createTextNode(text);};var remove=function(node,isRemoveChild){if(!node||!node.parentNode){return;}
if(node.removeNode){return node.removeNode(isRemoveChild);}
var parent=node.parentNode;if(!isRemoveChild){var nodes=[];var i,len;for(i=0,len=node.childNodes.length;i<len;i++){nodes.push(node.childNodes[i]);}
for(i=0,len=nodes.length;i<len;i++){parent.insertBefore(nodes[i],node);}}
parent.removeChild(node);};var removeWhile=function(node,pred){while(node){if(isEditable(node)||!pred(node)){break;}
var parent=node.parentNode;remove(node);node=parent;}};var replace=function(node,nodeName){if(node.nodeName.toUpperCase()===nodeName.toUpperCase()){return node;}
var newNode=create(nodeName);if(node.style.cssText){newNode.style.cssText=node.style.cssText;}
appendChildNodes(newNode,list.from(node.childNodes));insertAfter(newNode,node);remove(node);return newNode;};var isTextarea=makePredByNodeName('TEXTAREA');var value=function($node,stripLinebreaks){var val=isTextarea($node[0])?$node.val():$node.html();if(stripLinebreaks){return val.replace(/[\n\r]/g,'');}
return val;};var html=function($node,isNewlineOnBlock){var markup=value($node);if(isNewlineOnBlock){var regexTag=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;markup=markup.replace(regexTag,function(match,endSlash,name){name=name.toUpperCase();var isEndOfInlineContainer=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name)&&!!endSlash;var isBlockNode=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name);return match+((isEndOfInlineContainer||isBlockNode)?'\n':'');});markup=$.trim(markup);}
return markup;};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:blankHTML,emptyPara:'<p>'+blankHTML+'</p>',makePredByNodeName:makePredByNodeName,isEditable:isEditable,isControlSizing:isControlSizing,buildLayoutInfo:buildLayoutInfo,makeLayoutInfo:makeLayoutInfo,isText:isText,isVoid:isVoid,isPara:isPara,isPurePara:isPurePara,isInline:isInline,isBlock:func.not(isInline),isBodyInline:isBodyInline,isBody:isBody,isParaInline:isParaInline,isList:isList,isTable:isTable,isCell:isCell,isBlockquote:isBlockquote,isBodyContainer:isBodyContainer,isAnchor:isAnchor,isDiv:makePredByNodeName('DIV'),isLi:isLi,isBR:makePredByNodeName('BR'),isSpan:makePredByNodeName('SPAN'),isB:makePredByNodeName('B'),isU:makePredByNodeName('U'),isS:makePredByNodeName('S'),isI:makePredByNodeName('I'),isImg:makePredByNodeName('IMG'),isTextarea:isTextarea,isEmpty:isEmpty,isEmptyAnchor:func.and(isAnchor,isEmpty),isClosestSibling:isClosestSibling,withClosestSiblings:withClosestSiblings,nodeLength:nodeLength,isLeftEdgePoint:isLeftEdgePoint,isRightEdgePoint:isRightEdgePoint,isEdgePoint:isEdgePoint,isLeftEdgeOf:isLeftEdgeOf,isRightEdgeOf:isRightEdgeOf,isLeftEdgePointOf:isLeftEdgePointOf,isRightEdgePointOf:isRightEdgePointOf,prevPoint:prevPoint,nextPoint:nextPoint,isSamePoint:isSamePoint,isVisiblePoint:isVisiblePoint,prevPointUntil:prevPointUntil,nextPointUntil:nextPointUntil,isCharPoint:isCharPoint,walkPoint:walkPoint,ancestor:ancestor,singleChildAncestor:singleChildAncestor,listAncestor:listAncestor,lastAncestor:lastAncestor,listNext:listNext,listPrev:listPrev,listDescendant:listDescendant,commonAncestor:commonAncestor,wrap:wrap,insertAfter:insertAfter,appendChildNodes:appendChildNodes,position:position,hasChildren:hasChildren,makeOffsetPath:makeOffsetPath,fromOffsetPath:fromOffsetPath,splitTree:splitTree,splitPoint:splitPoint,create:create,createText:createText,remove:remove,removeWhile:removeWhile,replace:replace,html:html,value:value};})();return dom;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/key';;

/* /web_editor/static/lib/summernote/src/js/core/key.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/list','summernote/core/func'],function(list,func){var key=(function(){var keyMap={'BACKSPACE':8,'TAB':9,'ENTER':13,'SPACE':32,'LEFT':37,'UP':38,'RIGHT':39,'DOWN':40,'NUM0':48,'NUM1':49,'NUM2':50,'NUM3':51,'NUM4':52,'NUM5':53,'NUM6':54,'NUM7':55,'NUM8':56,'B':66,'E':69,'I':73,'J':74,'K':75,'L':76,'R':82,'S':83,'U':85,'V':86,'Y':89,'Z':90,'SLASH':191,'LEFTBRACKET':219,'BACKSLASH':220,'RIGHTBRACKET':221};return{isEdit:function(keyCode){return list.contains([keyMap.BACKSPACE,keyMap.TAB,keyMap.ENTER,keyMap.SPACe],keyCode);},isMove:function(keyCode){return list.contains([keyMap.LEFT,keyMap.UP,keyMap.RIGHT,keyMap.DOWN],keyCode);},nameFromCode:func.invertObject(keyMap),code:keyMap};})();return key;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/core/range';;

/* /web_editor/static/lib/summernote/src/js/core/range.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/func','summernote/core/list','summernote/core/dom'],function(agent,func,list,dom){var range=(function(){var textRangeToPoint=function(textRange,isStart){var container=textRange.parentElement(),offset;var tester=document.body.createTextRange(),prevContainer;var childNodes=list.from(container.childNodes);for(offset=0;offset<childNodes.length;offset++){if(dom.isText(childNodes[offset])){continue;}
tester.moveToElementText(childNodes[offset]);if(tester.compareEndPoints('StartToStart',textRange)>=0){break;}
prevContainer=childNodes[offset];}
if(offset!==0&&dom.isText(childNodes[offset-1])){var textRangeStart=document.body.createTextRange(),curTextNode=null;textRangeStart.moveToElementText(prevContainer||container);textRangeStart.collapse(!prevContainer);curTextNode=prevContainer?prevContainer.nextSibling:container.firstChild;var pointTester=textRange.duplicate();pointTester.setEndPoint('StartToStart',textRangeStart);var textCount=pointTester.text.replace(/[\r\n]/g,'').length;while(textCount>curTextNode.nodeValue.length&&curTextNode.nextSibling){textCount-=curTextNode.nodeValue.length;curTextNode=curTextNode.nextSibling;}
var dummy=curTextNode.nodeValue;if(isStart&&curTextNode.nextSibling&&dom.isText(curTextNode.nextSibling)&&textCount===curTextNode.nodeValue.length){textCount-=curTextNode.nodeValue.length;curTextNode=curTextNode.nextSibling;}
container=curTextNode;offset=textCount;}
return{cont:container,offset:offset};};var pointToTextRange=function(point){var textRangeInfo=function(container,offset){var node,isCollapseToStart;if(dom.isText(container)){var prevTextNodes=dom.listPrev(container,func.not(dom.isText));var prevContainer=list.last(prevTextNodes).previousSibling;node=prevContainer||container.parentNode;offset+=list.sum(list.tail(prevTextNodes),dom.nodeLength);isCollapseToStart=!prevContainer;}else{node=container.childNodes[offset]||container;if(dom.isText(node)){return textRangeInfo(node,0);}
offset=0;isCollapseToStart=false;}
return{node:node,collapseToStart:isCollapseToStart,offset:offset};};var textRange=document.body.createTextRange();var info=textRangeInfo(point.node,point.offset);textRange.moveToElementText(info.node);textRange.collapse(info.collapseToStart);textRange.moveStart('character',info.offset);return textRange;};var WrappedRange=function(sc,so,ec,eo){this.sc=sc;this.so=so;this.ec=ec;this.eo=eo;var nativeRange=function(){if(agent.isW3CRangeSupport){var w3cRange=document.createRange();w3cRange.setStart(sc,so);w3cRange.setEnd(ec,eo);return w3cRange;}else{var textRange=pointToTextRange({node:sc,offset:so});textRange.setEndPoint('EndToEnd',pointToTextRange({node:ec,offset:eo}));return textRange;}};this.getPoints=function(){return{sc:sc,so:so,ec:ec,eo:eo};};this.getStartPoint=function(){return{node:sc,offset:so};};this.getEndPoint=function(){return{node:ec,offset:eo};};this.select=function(){var nativeRng=nativeRange();if(agent.isW3CRangeSupport){var selection=document.getSelection();if(selection.rangeCount>0){selection.removeAllRanges();}
selection.addRange(nativeRng);}else{nativeRng.select();}
return this;};this.normalize=function(){var getVisiblePoint=function(point,isLeftToRight){if((dom.isVisiblePoint(point)&&!dom.isEdgePoint(point))||(dom.isVisiblePoint(point)&&dom.isRightEdgePoint(point)&&!isLeftToRight)||(dom.isVisiblePoint(point)&&dom.isLeftEdgePoint(point)&&isLeftToRight)||(dom.isVisiblePoint(point)&&dom.isBlock(point.node)&&dom.isEmpty(point.node))){return point;}
var block=dom.ancestor(point.node,dom.isBlock);if(((dom.isLeftEdgePointOf(point,block)||dom.isVoid(dom.prevPoint(point).node))&&!isLeftToRight)||((dom.isRightEdgePointOf(point,block)||dom.isVoid(dom.nextPoint(point).node))&&isLeftToRight)){if(dom.isVisiblePoint(point)){return point;}
isLeftToRight=!isLeftToRight;}
var nextPoint=isLeftToRight?dom.nextPointUntil(dom.nextPoint(point),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(point),dom.isVisiblePoint);return nextPoint||point;};var endPoint=getVisiblePoint(this.getEndPoint(),false);var startPoint=this.isCollapsed()?endPoint:getVisiblePoint(this.getStartPoint(),true);return new WrappedRange(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset);};this.nodes=function(pred,options){pred=pred||func.ok;var includeAncestor=options&&options.includeAncestor;var fullyContains=options&&options.fullyContains;var startPoint=this.getStartPoint();var endPoint=this.getEndPoint();var nodes=[];var leftEdgeNodes=[];dom.walkPoint(startPoint,endPoint,function(point){if(dom.isEditable(point.node)){return;}
var node;if(fullyContains){if(dom.isLeftEdgePoint(point)){leftEdgeNodes.push(point.node);}
if(dom.isRightEdgePoint(point)&&list.contains(leftEdgeNodes,point.node)){node=point.node;}}else if(includeAncestor){node=dom.ancestor(point.node,pred);}else{node=point.node;}
if(node&&pred(node)){nodes.push(node);}},true);return list.unique(nodes);};this.commonAncestor=function(){return dom.commonAncestor(sc,ec);};this.expand=function(pred){var startAncestor=dom.ancestor(sc,pred);var endAncestor=dom.ancestor(ec,pred);if(!startAncestor&&!endAncestor){return new WrappedRange(sc,so,ec,eo);}
var boundaryPoints=this.getPoints();if(startAncestor){boundaryPoints.sc=startAncestor;boundaryPoints.so=0;}
if(endAncestor){boundaryPoints.ec=endAncestor;boundaryPoints.eo=dom.nodeLength(endAncestor);}
return new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo);};this.collapse=function(isCollapseToStart){if(isCollapseToStart){return new WrappedRange(sc,so,sc,so);}else{return new WrappedRange(ec,eo,ec,eo);}};this.splitText=function(){var isSameContainer=sc===ec;var boundaryPoints=this.getPoints();if(dom.isText(ec)&&!dom.isEdgePoint(this.getEndPoint())){ec.splitText(eo);}
if(dom.isText(sc)&&!dom.isEdgePoint(this.getStartPoint())){boundaryPoints.sc=sc.splitText(so);boundaryPoints.so=0;if(isSameContainer){boundaryPoints.ec=boundaryPoints.sc;boundaryPoints.eo=eo-so;}}
return new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo);};if(_.isUndefined(this.deleteContents))
this.deleteContents=function(){if(this.isCollapsed()){return this;}
var rng=this.splitText();var nodes=rng.nodes(null,{fullyContains:true});var point=dom.prevPointUntil(rng.getStartPoint(),function(point){return!list.contains(nodes,point.node);});var emptyParents=[];$.each(nodes,function(idx,node){var parent=node.parentNode;if(point.node!==parent&&dom.nodeLength(parent)===1){emptyParents.push(parent);}
dom.remove(node,false);});$.each(emptyParents,function(idx,node){dom.remove(node,false);});return new WrappedRange(point.node,point.offset,point.node,point.offset).normalize();};var makeIsOn=function(pred){return function(){var ancestor=dom.ancestor(sc,pred);return!!ancestor&&(ancestor===dom.ancestor(ec,pred));};};this.isOnEditable=makeIsOn(dom.isEditable);this.isOnList=makeIsOn(dom.isList);this.isOnAnchor=makeIsOn(dom.isAnchor);this.isOnCell=makeIsOn(dom.isCell);this.isLeftEdgeOf=function(pred){if(!dom.isLeftEdgePoint(this.getStartPoint())){return false;}
var node=dom.ancestor(this.sc,pred);return node&&dom.isLeftEdgeOf(this.sc,node);};this.isCollapsed=function(){return sc===ec&&so===eo;};this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(sc)&&dom.isEmpty(sc)){sc.innerHTML=dom.emptyPara;return new WrappedRange(sc.firstChild,0,sc.firstChild,0);}
var rng=this.normalize();if(dom.isParaInline(sc)||dom.isPara(sc)){return rng;}
if(dom.isText(sc)){var node=sc;while(node.parentNode!==document){node=node.parentNode;if(/^(P|LI|H[1-7]|BUTTON|A|SPAN)/.test(node.nodeName.toUpperCase())){return this.normalize();}}}
var topAncestor;if(dom.isInline(rng.sc)){var ancestors=dom.listAncestor(rng.sc,func.not(dom.isInline));topAncestor=list.last(ancestors);if(!dom.isInline(topAncestor)){topAncestor=ancestors[ancestors.length-2]||rng.sc.childNodes[rng.so];}}else{topAncestor=rng.sc.childNodes[rng.so>0?rng.so-1:0];}
var inlineSiblings=dom.listPrev(topAncestor,dom.isParaInline).reverse();inlineSiblings=inlineSiblings.concat(dom.listNext(topAncestor.nextSibling,dom.isParaInline));if(inlineSiblings.length){var para=dom.wrap(list.head(inlineSiblings),'p');dom.appendChildNodes(para,list.tail(inlineSiblings));}
return this.normalize();};this.insertNode=function(node){var rng=this.wrapBodyInlineWithPara().deleteContents();var info=dom.splitPoint(rng.getStartPoint(),!dom.isBodyContainer(dom.ancestor(rng.sc,function(node){return dom.isBodyContainer(node)||dom.isPara(node)})));if(info.rightNode){info.rightNode.parentNode.insertBefore(node,info.rightNode);}else{info.container.appendChild(node);}
return node;};this.pasteHTML=function(markup){var contentsContainer=$('<div></div>').html(markup)[0];var childNodes=list.from(contentsContainer.childNodes);var rng=this.wrapBodyInlineWithPara().deleteContents();return childNodes.reverse().map(function(childNode){return rng.insertNode(childNode);}).reverse();};this.toString=function(){var nativeRng=nativeRange();return agent.isW3CRangeSupport?nativeRng.toString():nativeRng.text;};this.getWordRange=function(findAfter){var endPoint=this.getEndPoint();if(!dom.isCharPoint(endPoint)){return this;}
var startPoint=dom.prevPointUntil(endPoint,function(point){return!dom.isCharPoint(point);});if(findAfter){endPoint=dom.nextPointUntil(endPoint,function(point){return!dom.isCharPoint(point);});}
return new WrappedRange(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset);};this.bookmark=function(editable){return{s:{path:dom.makeOffsetPath(editable,sc),offset:so},e:{path:dom.makeOffsetPath(editable,ec),offset:eo}};};this.paraBookmark=function(paras){return{s:{path:list.tail(dom.makeOffsetPath(list.head(paras),sc)),offset:so},e:{path:list.tail(dom.makeOffsetPath(list.last(paras),ec)),offset:eo}};};this.getClientRects=function(){var nativeRng=nativeRange();return nativeRng.getClientRects();};};return{WrappedRange:WrappedRange,create:function(sc,so,ec,eo){if(!arguments.length){if(agent.isW3CRangeSupport){var selection=document.getSelection();if(!selection||selection.rangeCount===0){return null;}else{try{if(dom.isBody(selection.anchorNode)){return null;}}catch(e){return null;}}
var nativeRng=selection.getRangeAt(0);sc=nativeRng.startContainer;so=nativeRng.startOffset;ec=nativeRng.endContainer;eo=nativeRng.endOffset;}else{var textRange=document.selection.createRange();var textRangeEnd=textRange.duplicate();textRangeEnd.collapse(false);var textRangeStart=textRange;textRangeStart.collapse(true);var startPoint=textRangeToPoint(textRangeStart,true),endPoint=textRangeToPoint(textRangeEnd,false);if(dom.isText(startPoint.node)&&dom.isLeftEdgePoint(startPoint)&&dom.isTextNode(endPoint.node)&&dom.isRightEdgePoint(endPoint)&&endPoint.node.nextSibling===startPoint.node){startPoint=endPoint;}
sc=startPoint.cont;so=startPoint.offset;ec=endPoint.cont;eo=endPoint.offset;}}else if(arguments.length===2){ec=sc;eo=so;}
return new WrappedRange(sc,so,ec,eo);},createFromNode:function(node){var sc=node;var so=0;var ec=node;var eo=dom.nodeLength(ec);if(dom.isVoid(sc)){so=dom.listPrev(sc).length-1;sc=sc.parentNode;}
if(dom.isBR(ec)){eo=dom.listPrev(ec).length-1;ec=ec.parentNode;}else if(dom.isVoid(ec)){eo=dom.listPrev(ec).length;ec=ec.parentNode;}
return this.create(sc,so,ec,eo);},createFromNodeBefore:function(node){return this.createFromNode(node).collapse(true);},createFromNodeAfter:function(node){return this.createFromNode(node).collapse();},createFromBookmark:function(editable,bookmark){var sc=dom.fromOffsetPath(editable,bookmark.s.path);var so=bookmark.s.offset;var ec=dom.fromOffsetPath(editable,bookmark.e.path);var eo=bookmark.e.offset;return new WrappedRange(sc,so,ec,eo);},createFromParaBookmark:function(bookmark,paras){var so=bookmark.s.offset;var eo=bookmark.e.offset;var sc=dom.fromOffsetPath(list.head(paras),bookmark.s.path);var ec=dom.fromOffsetPath(list.last(paras),bookmark.e.path);return new WrappedRange(sc,so,ec,eo);}};})();return range;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/editing/Bullet';;

/* /web_editor/static/lib/summernote/src/js/editing/Bullet.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/list','summernote/core/func','summernote/core/dom','summernote/core/range'],function(list,func,dom,range){var Bullet=function(){this.insertOrderedList=function(){this.toggleList('OL');};this.insertUnorderedList=function(){this.toggleList('UL');};this.indent=function(){var self=this;var rng=range.create().wrapBodyInlineWithPara();var paras=rng.nodes(dom.isPara,{includeAncestor:true});var clustereds=list.clusterBy(paras,func.peq2('parentNode'));$.each(clustereds,function(idx,paras){var head=list.head(paras);if(dom.isLi(head)){self.wrapList(paras,head.parentNode.nodeName);}else{$.each(paras,function(idx,para){$(para).css('marginLeft',function(idx,val){return(parseInt(val,10)||0)+25;});});}});rng.select();};this.outdent=function(){var self=this;var rng=range.create().wrapBodyInlineWithPara();var paras=rng.nodes(dom.isPara,{includeAncestor:true});var clustereds=list.clusterBy(paras,func.peq2('parentNode'));$.each(clustereds,function(idx,paras){var head=list.head(paras);if(dom.isLi(head)){self.releaseList([paras]);}else{$.each(paras,function(idx,para){$(para).css('marginLeft',function(idx,val){val=(parseInt(val,10)||0);return val>25?val-25:'';});});}});rng.select();};this.toggleList=function(listName){var self=this;var rng=range.create().wrapBodyInlineWithPara();var paras=rng.nodes(dom.isPara,{includeAncestor:true});var bookmark=rng.paraBookmark(paras);var clustereds=list.clusterBy(paras,func.peq2('parentNode'));if(list.find(paras,dom.isPurePara)){var wrappedParas=[];$.each(clustereds,function(idx,paras){wrappedParas=wrappedParas.concat(self.wrapList(paras,listName));});paras=wrappedParas;}else{var diffLists=rng.nodes(dom.isList,{includeAncestor:true}).filter(function(listNode){return!$.nodeName(listNode,listName);});if(diffLists.length){$.each(diffLists,function(idx,listNode){dom.replace(listNode,listName);});}else{paras=this.releaseList(clustereds,true);}}
range.createFromParaBookmark(bookmark,paras).select();};this.wrapList=function(paras,listName){var head=list.head(paras);var last=list.last(paras);var prevList=dom.isList(head.previousSibling)&&head.previousSibling;var nextList=dom.isList(last.nextSibling)&&last.nextSibling;var listNode=prevList||dom.insertAfter(dom.create(listName||'UL'),last);paras=paras.map(function(para){return dom.isPurePara(para)?dom.replace(para,'LI'):para;});dom.appendChildNodes(listNode,paras);if(nextList){dom.appendChildNodes(listNode,list.from(nextList.childNodes));dom.remove(nextList);}
return paras;};this.releaseList=function(clustereds,isEscapseToBody){var releasedParas=[];$.each(clustereds,function(idx,paras){var head=list.head(paras);var last=list.last(paras);var headList=isEscapseToBody?dom.lastAncestor(head,dom.isList):head.parentNode;var lastList=headList.childNodes.length>1?dom.splitTree(headList,{node:last.parentNode,offset:dom.position(last)+1},{isSkipPaddingBlankHTML:true}):null;var middleList=dom.splitTree(headList,{node:head.parentNode,offset:dom.position(head)},{isSkipPaddingBlankHTML:true});paras=isEscapseToBody?dom.listDescendant(middleList,dom.isLi):list.from(middleList.childNodes).filter(dom.isLi);if(isEscapseToBody||!dom.isList(headList.parentNode)){paras=paras.map(function(para){return dom.replace(para,'P');});}
$.each(list.from(paras).reverse(),function(idx,para){dom.insertAfter(para,headList);});var rootLists=list.compact([headList,middleList,lastList]);$.each(rootLists,function(idx,rootList){var listNodes=[rootList].concat(dom.listDescendant(rootList,dom.isList));$.each(listNodes.reverse(),function(idx,listNode){if(!dom.nodeLength(listNode)){dom.remove(listNode,true);}});});releasedParas=releasedParas.concat(paras);});return releasedParas;};};return Bullet;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/editing/History';;

/* /web_editor/static/lib/summernote/src/js/editing/History.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/range','summernote/core/dom'],function(range,dom){var History=function($editable){var stack=[],stackOffset=-1;var editable=$editable[0];var makeSnapshot=function(){var rng=range.create();var emptyBookmark={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:$editable.html(),bookmark:(rng&&dom.ancestor(rng.sc,dom.isEditable)?rng.bookmark(editable):emptyBookmark)};};var applySnapshot=function(snapshot){if(snapshot.contents!==null){$editable.html(snapshot.contents);}
if(snapshot.bookmark!==null){range.createFromBookmark(editable,snapshot.bookmark).select();}};this.undo=function(){if($editable.html()!==stack[stackOffset].contents){this.recordUndo();}
if(0<stackOffset){stackOffset--;applySnapshot(stack[stackOffset]);}};this.hasUndo=function(){return 0<stackOffset;};this.redo=function(){if(stack.length-1>stackOffset){stackOffset++;applySnapshot(stack[stackOffset]);}};this.hasRedo=function(){return stack.length-1>stackOffset;};var last;this.recordUndo=function(){var key=typeof event!=='undefined'?event:false;if(key&&!event.metaKey&&!event.ctrlKey&&!event.altKey&&event.type==="keydown"){key=event.type+"-";if(event.which===8||event.which===46)key+='delete';else if(event.which===13)key+='enter';else key+='other';if(key===last)return;hasUndo=true;}
last=key;if(stack.length>stackOffset+1){stack=stack.slice(0,stackOffset+1);}
if(stack[stackOffset]&&stack[stackOffset].contents===$editable.html()){return;}
stackOffset++;stack.push(makeSnapshot());};this.splitNext=function(){last=false;};this.reset=function(){last=false;stack=[];stackOffset=-1;this.recordUndo();};this.recordUndo();};return History;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/editing/Style';;

/* /web_editor/static/lib/summernote/src/js/editing/Style.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/func','summernote/core/list','summernote/core/dom'],function(agent,func,list,dom){var Style=function(){var jQueryCSS=function($obj,propertyNames){if(agent.jqueryVersion<1.9){var result={};$.each(propertyNames,function(idx,propertyName){result[propertyName]=$obj.css(propertyName);});return result;}
return $obj.css.call($obj,propertyNames);};this.fromNode=function($node){var properties=['font-family','font-size','text-align','list-style-type','line-height'];var styleInfo=jQueryCSS($node,properties)||{};styleInfo['font-size']=parseInt(styleInfo['font-size'],10);return styleInfo;};this.stylePara=function(rng,styleInfo){$.each(rng.nodes(dom.isPara,{includeAncestor:true}),function(idx,para){$(para).css(styleInfo);});};this.styleNodes=function(rng,options){rng=rng.splitText();var nodeName=options&&options.nodeName||'SPAN';var expandClosestSibling=!!(options&&options.expandClosestSibling);var onlyPartialContains=!!(options&&options.onlyPartialContains);if(rng.isCollapsed()){return[rng.insertNode(dom.create(nodeName))];}
var pred=dom.makePredByNodeName(nodeName);var nodes=rng.nodes(dom.isText,{fullyContains:true}).map(function(text){return dom.singleChildAncestor(text,pred)||dom.wrap(text,nodeName);});if(expandClosestSibling){if(onlyPartialContains){var nodesInRange=rng.nodes();pred=func.and(pred,function(node){return list.contains(nodesInRange,node);});}
return nodes.map(function(node){var siblings=dom.withClosestSiblings(node,pred);var head=list.head(siblings);var tails=list.tail(siblings);$.each(tails,function(idx,elem){dom.appendChildNodes(head,elem.childNodes);dom.remove(elem);});return list.head(siblings);});}else{return nodes;}};this.current=function(rng){var $cont=$(dom.isText(rng.sc)?rng.sc.parentNode:rng.sc);var styleInfo=this.fromNode($cont);styleInfo['font-bold']=document.queryCommandState('bold')?'bold':'normal';styleInfo['font-italic']=document.queryCommandState('italic')?'italic':'normal';styleInfo['font-underline']=document.queryCommandState('underline')?'underline':'normal';styleInfo['font-strikethrough']=document.queryCommandState('strikeThrough')?'strikethrough':'normal';styleInfo['font-superscript']=document.queryCommandState('superscript')?'superscript':'normal';styleInfo['font-subscript']=document.queryCommandState('subscript')?'subscript':'normal';if(!rng.isOnList()){styleInfo['list-style']='none';}else{var aOrderedType=['circle','disc','disc-leading-zero','square'];var isUnordered=$.inArray(styleInfo['list-style-type'],aOrderedType)>-1;styleInfo['list-style']=isUnordered?'unordered':'ordered';}
var para=dom.ancestor(rng.sc,dom.isPara);if(para&&para.style['line-height']){styleInfo['line-height']=para.style.lineHeight;}else{var lineHeight=parseInt(styleInfo['line-height'],10)/parseInt(styleInfo['font-size'],10);styleInfo['line-height']=lineHeight.toFixed(1);}
styleInfo.anchor=rng.isOnAnchor()&&dom.ancestor(rng.sc,dom.isAnchor);styleInfo.ancestors=dom.listAncestor(rng.sc,dom.isEditable);styleInfo.range=rng;return styleInfo;};};return Style;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/editing/Table';;

/* /web_editor/static/lib/summernote/src/js/editing/Table.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/dom','summernote/core/range','summernote/core/list'],function(dom,range,list){var Table=function(){this.tab=function(rng,isShift){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);var table=dom.ancestor(cell,dom.isTable);var cells=dom.listDescendant(table,dom.isCell);var nextCell=list[isShift?'prev':'next'](cells,cell);if(nextCell){range.create(nextCell,0).select();}};this.createTable=function(colCount,rowCount){var tds=[],tdHTML;for(var idxCol=0;idxCol<colCount;idxCol++){tds.push('<td>'+dom.blank+'</td>');}
tdHTML=tds.join('');var trs=[],trHTML;for(var idxRow=0;idxRow<rowCount;idxRow++){trs.push('<tr>'+tdHTML+'</tr>');}
trHTML=trs.join('');return $('<table class="table table-bordered">'+trHTML+'</table>')[0];};};return Table;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/editing/Typing';;

/* /web_editor/static/lib/summernote/src/js/editing/Typing.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/dom','summernote/core/range','summernote/editing/Bullet'],function(dom,range,Bullet){var Typing=function(){var bullet=new Bullet();this.insertTab=function($editable,rng,tabsize){var tab=dom.createText(new Array(tabsize+1).join(dom.NBSP_CHAR));rng=rng.deleteContents();rng.insertNode(tab,true);rng=range.create(tab,tabsize);rng.select();};this.insertParagraph=function(){var rng=range.create();rng=rng.deleteContents();rng=rng.wrapBodyInlineWithPara();var splitRoot=dom.ancestor(rng.sc,dom.isPara);var nextPara;if(splitRoot){if(dom.isEmpty(splitRoot)&&dom.isLi(splitRoot)){bullet.toggleList(splitRoot.parentNode.nodeName);return;}else{nextPara=dom.splitTree(splitRoot,rng.getStartPoint());var emptyAnchors=dom.listDescendant(splitRoot,dom.isEmptyAnchor);emptyAnchors=emptyAnchors.concat(dom.listDescendant(nextPara,dom.isEmptyAnchor));$.each(emptyAnchors,function(idx,anchor){dom.remove(anchor);});}}else{var next=rng.sc.childNodes[rng.so];nextPara=$(dom.emptyPara)[0];if(next){rng.sc.insertBefore(nextPara,next);}else{rng.sc.appendChild(nextPara);}}
range.create(nextPara,0).normalize().select();};};return Typing;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Editor';;

/* /web_editor/static/lib/summernote/src/js/module/Editor.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/func','summernote/core/list','summernote/core/dom','summernote/core/range','summernote/core/async','summernote/editing/Style','summernote/editing/Typing','summernote/editing/Table','summernote/editing/Bullet'],function(agent,func,list,dom,range,async,Style,Typing,Table,Bullet){var KEY_BOGUS='bogus';var Editor=function(handler){var self=this;var style=new Style();var table=new Table();var typing=new Typing();var bullet=new Bullet();this.style=style;this.table=table;this.typing=typing;this.bullet=bullet;this.createRange=function($editable){this.focus($editable);return range.create();};this.saveRange=function($editable,thenCollapse){var r=range.create();if(!r||($editable[0]!==r.sc&&!$.contains($editable[0],r.sc))){$editable.focus();}
$editable.data('range',range.create());if(thenCollapse){range.create().collapse().select();}};this.saveNode=function($editable){var copy=[];for(var key=0,len=$editable[0].childNodes.length;key<len;key++){copy.push($editable[0].childNodes[key]);}
$editable.data('childNodes',copy);};this.restoreRange=function($editable){var rng=$editable.data('range');if(rng){rng.select();this.focus($editable);}};this.restoreNode=function($editable){$editable.html('');var child=$editable.data('childNodes');for(var index=0,len=child.length;index<len;index++){$editable[0].appendChild(child[index]);}};this.currentStyle=function(target){var rng=range.create();var styleInfo=rng&&rng.isOnEditable()?style.current(rng.normalize()):{};if(dom.isImg(target)){styleInfo.image=target;}
return styleInfo;};this.styleFromNode=function($node){return style.fromNode($node);};var triggerOnBeforeChange=function($editable){var $holder=dom.makeLayoutInfo($editable).holder();handler.bindCustomEvent($holder,$editable.data('callbacks'),'before.command')($editable.html(),$editable);};var triggerOnChange=function($editable){var $holder=dom.makeLayoutInfo($editable).holder();handler.bindCustomEvent($holder,$editable.data('callbacks'),'change')($editable.html(),$editable);};this.undo=function($editable){triggerOnBeforeChange($editable);$editable.data('NoteHistory').undo();triggerOnChange($editable);};this.redo=function($editable){triggerOnBeforeChange($editable);$editable.data('NoteHistory').redo();triggerOnChange($editable);};var beforeCommand=this.beforeCommand=function($editable){triggerOnBeforeChange($editable);self.focus($editable);};var afterCommand=this.afterCommand=function($editable,isPreventTrigger){$editable.data('NoteHistory').recordUndo();if(!isPreventTrigger){triggerOnChange($editable);}};var commands=['bold','italic','underline','strikethrough','superscript','subscript','justifyLeft','justifyCenter','justifyRight','justifyFull','formatBlock','removeFormat','backColor','foreColor','fontName'];for(var idx=0,len=commands.length;idx<len;idx++){this[commands[idx]]=(function(sCmd){return function($editable,value){beforeCommand($editable);document.execCommand(sCmd,false,value);afterCommand($editable,true);};})(commands[idx]);}
this.tab=function($editable,options){var rng=this.createRange($editable);if(rng.isCollapsed()&&rng.isOnCell()){table.tab(rng);}else{beforeCommand($editable);typing.insertTab($editable,rng,options.tabsize);afterCommand($editable);}};this.untab=function($editable){var rng=this.createRange($editable);if(rng.isCollapsed()&&rng.isOnCell()){table.tab(rng,true);}};this.insertParagraph=function($editable){beforeCommand($editable);typing.insertParagraph($editable);afterCommand($editable);};this.insertOrderedList=function($editable){beforeCommand($editable);bullet.insertOrderedList($editable);afterCommand($editable);};this.insertUnorderedList=function($editable){beforeCommand($editable);bullet.insertUnorderedList($editable);afterCommand($editable);};this.indent=function($editable){beforeCommand($editable);bullet.indent($editable);afterCommand($editable);};this.outdent=function($editable){beforeCommand($editable);bullet.outdent($editable);afterCommand($editable);};this.insertImage=function($editable,sUrl,filename){async.createImage(sUrl,filename).then(function($image){beforeCommand($editable);$image.css({display:'',width:Math.min($editable.width(),$image.width())});range.create().insertNode($image[0]);range.createFromNodeAfter($image[0]).select();afterCommand($editable);}).fail(function(){var $holder=dom.makeLayoutInfo($editable).holder();handler.bindCustomEvent($holder,$editable.data('callbacks'),'image.upload.error')();});};this.insertNode=function($editable,node){beforeCommand($editable);range.create().insertNode(node);range.createFromNodeAfter(node).select();afterCommand($editable);};this.insertText=function($editable,text){beforeCommand($editable);var textNode=range.create().insertNode(dom.createText(text));range.create(textNode,dom.nodeLength(textNode)).select();afterCommand($editable);};this.pasteHTML=function($editable,markup){beforeCommand($editable);var contents=range.create().pasteHTML(markup);range.createFromNodeAfter(list.last(contents)).select();afterCommand($editable);};this.formatBlock=function($editable,tagName){beforeCommand($editable);tagName=agent.isMSIE?'<'+tagName+'>':tagName;document.execCommand('FormatBlock',false,tagName);afterCommand($editable);};this.formatPara=function($editable){beforeCommand($editable);this.formatBlock($editable,'P');afterCommand($editable);};for(var idx=1;idx<=6;idx++){this['formatH'+idx]=function(idx){return function($editable){this.formatBlock($editable,'H'+idx);};}(idx);};this.fontSize=function($editable,value){var rng=range.create();if(rng.isCollapsed()){var spans=style.styleNodes(rng);var firstSpan=list.head(spans);$(spans).css({'font-size':value+'px'});if(firstSpan&&!dom.nodeLength(firstSpan)){firstSpan.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR;range.createFromNodeAfter(firstSpan.firstChild).select();$editable.data(KEY_BOGUS,firstSpan);}}else{beforeCommand($editable);$(style.styleNodes(rng)).css({'font-size':value+'px'});afterCommand($editable);}};this.insertHorizontalRule=function($editable){beforeCommand($editable);var rng=range.create();var hrNode=rng.insertNode($('<HR/>')[0]);if(hrNode.nextSibling){range.create(hrNode.nextSibling,0).normalize().select();}
afterCommand($editable);};this.removeBogus=function($editable){var bogusNode=$editable.data(KEY_BOGUS);if(!bogusNode){return;}
var textNode=list.find(list.from(bogusNode.childNodes),dom.isText);var bogusCharIdx=textNode.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);if(bogusCharIdx!==-1){textNode.deleteData(bogusCharIdx,1);}
if(dom.isEmpty(bogusNode)){dom.remove(bogusNode);}
$editable.removeData(KEY_BOGUS);};this.lineHeight=function($editable,value){beforeCommand($editable);style.stylePara(range.create(),{lineHeight:value});afterCommand($editable);};this.unlink=function($editable){var rng=this.createRange($editable);if(rng.isOnAnchor()){var anchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.createFromNode(anchor);rng.select();beforeCommand($editable);document.execCommand('unlink');afterCommand($editable);}};this.createLink=function($editable,linkInfo,options){var linkUrl=linkInfo.url;var linkText=linkInfo.text;var isNewWindow=linkInfo.isNewWindow;var rng=linkInfo.range||this.createRange($editable);var isTextChanged=rng.toString()!==linkText;options=options||dom.makeLayoutInfo($editable).editor().data('options');beforeCommand($editable);if(options.onCreateLink){linkUrl=options.onCreateLink(linkUrl);}
var anchors=[];var ancestor_anchor=dom.ancestor(rng.sc,dom.isAnchor);if(ancestor_anchor&&ancestor_anchor===dom.ancestor(rng.ec,dom.isAnchor)){anchors.push($(ancestor_anchor).html(linkText).get(0));}else if(isTextChanged){var anchor=rng.insertNode($('<A>'+linkText+'</A>')[0]);anchors.push(anchor);}else{anchors=style.styleNodes(rng,{nodeName:'A',expandClosestSibling:true,onlyPartialContains:true});}
$.each(anchors,function(idx,anchor){$(anchor).attr('href',linkUrl);$(anchor).attr('class',linkInfo.className||null);$(anchor).css(linkInfo.style||{});if(isNewWindow){$(anchor).attr('target','_blank');}else{$(anchor).removeAttr('target');}});var startRange=range.createFromNodeBefore(list.head(anchors));var startPoint=startRange.getStartPoint();var endRange=range.createFromNodeAfter(list.last(anchors));var endPoint=endRange.getEndPoint();range.create(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset).select();afterCommand($editable);};this.getLinkInfo=function($editable){this.focus($editable);var rng=range.create().expand(dom.isAnchor);var $anchor=$(list.head(rng.nodes(dom.isAnchor)));return{range:rng,text:rng.toString(),isNewWindow:$anchor.length?$anchor.attr('target')==='_blank':false,url:$anchor.length?$anchor.attr('href'):''};};this.color=function($editable,sObjColor){var oColor=JSON.parse(sObjColor);var foreColor=oColor.foreColor,backColor=oColor.backColor;beforeCommand($editable);if(foreColor){document.execCommand('foreColor',false,foreColor);}
if(backColor){document.execCommand('backColor',false,backColor);}
afterCommand($editable);};this.insertTable=function($editable,sDim){var dimension=sDim.split('x');beforeCommand($editable);var rng=range.create().deleteContents();rng.insertNode(table.createTable(dimension[0],dimension[1]));afterCommand($editable);};this.floatMe=function($editable,value,$target){beforeCommand($editable);$target.removeClass('float-left float-right');if(value&&value!=='none'){$target.addClass('pull-'+value);}
$target.css('float',value);afterCommand($editable);};this.imageShape=function($editable,value,$target){beforeCommand($editable);$target.removeClass('rounded rounded-circle img-thumbnail');if(value){$target.addClass(value);}
afterCommand($editable);};this.resize=function($editable,value,$target){beforeCommand($editable);$target.css({width:value*100+'%',height:''});afterCommand($editable);};this.resizeTo=function(pos,$target,bKeepRatio){var imageSize;if(bKeepRatio){var newRatio=pos.y/pos.x;var ratio=$target.data('ratio');imageSize={width:ratio>newRatio?pos.x:pos.y/ratio,height:ratio>newRatio?pos.x*ratio:pos.y};}else{imageSize={width:pos.x,height:pos.y};}
$target.css(imageSize);};this.removeMedia=function($editable,value,$target){beforeCommand($editable);$target.detach();handler.bindCustomEvent($(),$editable.data('callbacks'),'media.delete')($target,$editable);afterCommand($editable);};this.focus=function($editable){$editable.focus();if(agent.isFF){var rng=range.create();if(!rng||rng.isOnEditable()){return;}
range.createFromNode($editable[0]).normalize().collapse().select();}};this.isEmpty=function($editable){return dom.isEmpty($editable[0])||dom.emptyPara===$editable.html();};};return Editor;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Button';;

/* /web_editor/static/lib/summernote/src/js/module/Button.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/list','summernote/core/agent'],function(list,agent){var Button=function(){this.update=function($container,styleInfo){var checkDropdownMenu=function($btn,value){$btn.find('.dropdown-menu .dropdown-item').each(function(){var isChecked=($(this).data('value')+'')===(value+'');this.className='dropdown-item'+(isChecked?' checked':'');});};var btnState=function(selector,pred){var $btn=$container.find(selector);$btn.toggleClass('active',pred());};if(styleInfo.image){var $img=$(styleInfo.image);btnState('button[data-event="imageShape"][data-value="rounded"]',function(){return $img.hasClass('rounded');});btnState('button[data-event="imageShape"][data-value="rounded-circle"]',function(){return $img.hasClass('rounded-circle');});btnState('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return $img.hasClass('img-thumbnail');});btnState('button[data-event="imageShape"]:not([data-value])',function(){return!$img.is('.rounded, .rounded-circle, .img-thumbnail');});var imgFloat=$img.css('float');btnState('button[data-event="floatMe"][data-value="left"]',function(){return imgFloat==='left';});btnState('button[data-event="floatMe"][data-value="right"]',function(){return imgFloat==='right';});btnState('button[data-event="floatMe"][data-value="none"]',function(){return imgFloat!=='left'&&imgFloat!=='right';});var style=$img.attr('style');btnState('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(style);});btnState('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(style);});btnState('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(style);});return;}
var $fontname=$container.find('.note-fontname');if($fontname.length){var selectedFont=styleInfo['font-family'];if(!!selectedFont){var list=selectedFont.split(',');for(var i=0,len=list.length;i<len;i++){selectedFont=list[i].replace(/[\'\"]/g,'').replace(/\s+$/,'').replace(/^\s+/,'');if(agent.isFontInstalled(selectedFont)){break;}}
$fontname.find('.note-current-fontname').text(selectedFont);checkDropdownMenu($fontname,selectedFont);}}
var $fontsize=$container.find('.note-fontsize');$fontsize.find('.note-current-fontsize').text(styleInfo['font-size']);checkDropdownMenu($fontsize,parseFloat(styleInfo['font-size']));var $lineHeight=$container.find('.note-height');checkDropdownMenu($lineHeight,parseFloat(styleInfo['line-height']));btnState('button[data-event="bold"]',function(){return styleInfo['font-bold']==='bold';});btnState('button[data-event="italic"]',function(){return styleInfo['font-italic']==='italic';});btnState('button[data-event="underline"]',function(){return styleInfo['font-underline']==='underline';});btnState('button[data-event="strikethrough"]',function(){return styleInfo['font-strikethrough']==='strikethrough';});btnState('button[data-event="superscript"]',function(){return styleInfo['font-superscript']==='superscript';});btnState('button[data-event="subscript"]',function(){return styleInfo['font-subscript']==='subscript';});btnState('button[data-event="justifyLeft"]',function(){return styleInfo['text-align']==='left'||styleInfo['text-align']==='start';});btnState('button[data-event="justifyCenter"]',function(){return styleInfo['text-align']==='center';});btnState('button[data-event="justifyRight"]',function(){return styleInfo['text-align']==='right';});btnState('button[data-event="justifyFull"]',function(){return styleInfo['text-align']==='justify';});btnState('button[data-event="insertUnorderedList"]',function(){return styleInfo['list-style']==='unordered';});btnState('button[data-event="insertOrderedList"]',function(){return styleInfo['list-style']==='ordered';});};this.updateRecentColor=function(button,eventName,value){var $color=$(button).closest('.note-color');var $recentColor=$color.find('.note-recent-color');var colorInfo=JSON.parse($recentColor.attr('data-value'));colorInfo[eventName]=value;$recentColor.attr('data-value',JSON.stringify(colorInfo));var sKey=eventName==='backColor'?'background-color':'color';$recentColor.find('i').css(sKey,value);};};return Button;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Clipboard';;

/* /web_editor/static/lib/summernote/src/js/module/Clipboard.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/list','summernote/core/dom','summernote/core/key','summernote/core/agent','summernote/core/range'],function(list,dom,key,agent,range){var Clipboard=function(handler){var pasteByEvent=function(event){if(["INPUT","TEXTAREA"].indexOf(event.target.tagName)!==-1){return;}
var clipboardData=event.originalEvent.clipboardData;var layoutInfo=dom.makeLayoutInfo(event.currentTarget||event.target);var $editable=layoutInfo.editable();if(clipboardData&&clipboardData.items&&clipboardData.items.length){var item=list.head(clipboardData.items);if(item.kind==='file'&&item.type.indexOf('image/')!==-1){handler.insertImages(layoutInfo,[item.getAsFile()]);event.preventDefault();}
handler.invoke('editor.afterCommand',$editable);}};this.attach=function(layoutInfo){layoutInfo.editable().on('paste',pasteByEvent);};};return Clipboard;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Codeview';;

/* /web_editor/static/lib/summernote/src/js/module/Codeview.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/dom'],function(agent,dom){var CodeMirror;if(agent.hasCodeMirror){if(agent.isSupportAmd){require(['CodeMirror'],function(cm){CodeMirror=cm;});}else{CodeMirror=window.CodeMirror;}}
var Codeview=function(handler){this.sync=function(layoutInfo){var isCodeview=handler.invoke('codeview.isActivated',layoutInfo);if(isCodeview&&agent.hasCodeMirror){layoutInfo.codable().data('cmEditor').save();}};this.isActivated=function(layoutInfo){var $editor=layoutInfo.editor();return $editor.hasClass('codeview');};this.toggle=function(layoutInfo){if(this.isActivated(layoutInfo)){this.deactivate(layoutInfo);}else{this.activate(layoutInfo);}};this.activate=function(layoutInfo){var $editor=layoutInfo.editor(),$toolbar=layoutInfo.toolbar(),$editable=layoutInfo.editable(),$codable=layoutInfo.codable(),$popover=layoutInfo.popover(),$handle=layoutInfo.handle();var options=$editor.data('options');$codable.val(dom.html($editable,options.prettifyHtml));$codable.height($editable.height());handler.invoke('toolbar.updateCodeview',$toolbar,true);handler.invoke('popover.hide',$popover);handler.invoke('handle.hide',$handle);$editor.addClass('codeview');$codable.focus();if(agent.hasCodeMirror){var cmEditor=CodeMirror.fromTextArea($codable[0],options.codemirror);if(options.codemirror.tern){var server=new CodeMirror.TernServer(options.codemirror.tern);cmEditor.ternServer=server;cmEditor.on('cursorActivity',function(cm){server.updateArgHints(cm);});}
cmEditor.setSize(null,$editable.outerHeight());$codable.data('cmEditor',cmEditor);}};this.deactivate=function(layoutInfo){var $holder=layoutInfo.holder(),$editor=layoutInfo.editor(),$toolbar=layoutInfo.toolbar(),$editable=layoutInfo.editable(),$codable=layoutInfo.codable();var options=$editor.data('options');if(agent.hasCodeMirror){var cmEditor=$codable.data('cmEditor');$codable.val(cmEditor.getValue());cmEditor.toTextArea();}
var value=dom.value($codable,options.prettifyHtml)||dom.emptyPara;var isChange=$editable.html()!==value;$editable.html(value);$editable.height(options.height?$codable.height():'auto');$editor.removeClass('codeview');if(isChange){handler.bindCustomEvent($holder,$editable.data('callbacks'),'change')($editable.html(),$editable);}
$editable.focus();handler.invoke('toolbar.updateCodeview',$toolbar,false);};};return Codeview;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/DragAndDrop';;

/* /web_editor/static/lib/summernote/src/js/module/DragAndDrop.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/dom'],function(dom){var DragAndDrop=function(handler){var $document=$(document);this.attach=function(layoutInfo,options){if(options.airMode||options.disableDragAndDrop){$document.on('drop',function(e){e.preventDefault();});}else{this.attachDragAndDropEvent(layoutInfo,options);}};this.attachDragAndDropEvent=function(layoutInfo,options){var collection=$(),$editor=layoutInfo.editor(),$dropzone=layoutInfo.dropzone(),$dropzoneMessage=$dropzone.find('.note-dropzone-message');$document.on('dragenter',function(e){var isCodeview=handler.invoke('codeview.isActivated',layoutInfo);var hasEditorSize=$editor.width()>0&&$editor.height()>0;if(!isCodeview&&!collection.length&&hasEditorSize){$editor.addClass('dragover');$dropzone.width($editor.width());$dropzone.height($editor.height());$dropzoneMessage.text(options.langInfo.image.dragImageHere);}
collection=collection.add(e.target);}).on('dragleave',function(e){collection=collection.not(e.target);if(!collection.length){$editor.removeClass('dragover');}}).on('drop',function(){collection=$();$editor.removeClass('dragover');});$dropzone.on('dragenter',function(){$dropzone.addClass('hover');$dropzoneMessage.text(options.langInfo.image.dropImage);}).on('dragleave',function(){$dropzone.removeClass('hover');$dropzoneMessage.text(options.langInfo.image.dragImageHere);});$dropzone.on('drop',function(event){var dataTransfer=event.originalEvent.dataTransfer;var layoutInfo=dom.makeLayoutInfo(event.currentTarget||event.target);event.preventDefault();if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){event.preventDefault();layoutInfo.editable().focus();handler.insertImages(layoutInfo,dataTransfer.files);}else{var insertNodefunc=function(){layoutInfo.holder().summernote('insertNode',this);};for(var i=0,len=dataTransfer.types.length;i<len;i++){var type=dataTransfer.types[i];var content=dataTransfer.getData(type);if(type.toLowerCase().indexOf('_moz_')>-1){return;}
if(type.toLowerCase().indexOf('text')>-1){layoutInfo.holder().summernote('pasteHTML',content);}else{$(content).each(insertNodefunc);}}}}).on('dragover',false);};};return DragAndDrop;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Fullscreen';;

/* /web_editor/static/lib/summernote/src/js/module/Fullscreen.js defined in bundle 'web_editor.assets_summernote' */
define([],function(){var Fullscreen=function(handler){var $window=$(window);var $scrollbar=$('html, body');this.toggle=function(layoutInfo){var $editor=layoutInfo.editor(),$toolbar=layoutInfo.toolbar(),$editable=layoutInfo.editable(),$codable=layoutInfo.codable();var resize=function(size){$editable.css('height',size.h);$codable.css('height',size.h);if($codable.data('cmeditor')){$codable.data('cmeditor').setsize(null,size.h);}};$editor.toggleClass('fullscreen');var isFullscreen=$editor.hasClass('fullscreen');if(isFullscreen){$editable.data('orgheight',$editable.css('height'));$window.on('resize',function(){resize({h:$window.height()-$toolbar.outerHeight()});}).trigger('resize');$scrollbar.css('overflow','hidden');}else{$window.off('resize');resize({h:$editable.data('orgheight')});$scrollbar.css('overflow','visible');}
handler.invoke('toolbar.updateFullscreen',$toolbar,isFullscreen);};};return Fullscreen;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Handle';;

/* /web_editor/static/lib/summernote/src/js/module/Handle.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/dom'],function(dom){var Handle=function(handler){var $document=$(document);var hHandleMousedown=function(event){if(dom.isControlSizing(event.target)){event.preventDefault();event.stopPropagation();var layoutInfo=dom.makeLayoutInfo(event.target),$handle=layoutInfo.handle(),$popover=layoutInfo.popover(),$editable=layoutInfo.editable(),$editor=layoutInfo.editor();var target=$handle.find('.note-control-selection').data('target'),$target=$(target),posStart=$target.offset(),scrollTop=$document.scrollTop();var isAirMode=$editor.data('options').airMode;$document.on('mousemove',function(event){handler.invoke('editor.resizeTo',{x:event.clientX-posStart.left,y:event.clientY-(posStart.top-scrollTop)},$target,!event.shiftKey);handler.invoke('handle.update',$handle,{image:target},isAirMode);handler.invoke('popover.update',$popover,{image:target},isAirMode);}).one('mouseup',function(){$document.off('mousemove');handler.invoke('editor.afterCommand',$editable);});if(!$target.data('ratio')){$target.data('ratio',$target.height()/$target.width());}}};this.attach=function(layoutInfo){layoutInfo.handle().on('mousedown',hHandleMousedown);};this.update=function($handle,styleInfo,isAirMode){var $selection=$handle.find('.note-control-selection');if(styleInfo.image){var $image=$(styleInfo.image);var pos=isAirMode?$image.offset():$image.position();var imageSize={w:$image.outerWidth(true),h:$image.outerHeight(true)};$selection.css({display:'block',left:pos.left,top:pos.top,width:imageSize.w,height:imageSize.h}).data('target',styleInfo.image);var sizingText=imageSize.w+'x'+imageSize.h;$selection.find('.note-control-selection-info').text(sizingText);}else{$selection.hide();}};this.hide=function($handle){$handle.children().hide();};};return Handle;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/HelpDialog';;

/* /web_editor/static/lib/summernote/src/js/module/HelpDialog.js defined in bundle 'web_editor.assets_summernote' */
define([],function(){var HelpDialog=function(handler){this.showHelpDialog=function($editable,$dialog){return $.Deferred(function(deferred){var $helpDialog=$dialog.find('.note-help-dialog');$helpDialog.one('hidden.bs.modal',function(){deferred.resolve();}).modal('show');}).promise();};this.show=function(layoutInfo){var $dialog=layoutInfo.dialog(),$editable=layoutInfo.editable();handler.invoke('editor.saveRange',$editable,true);this.showHelpDialog($editable,$dialog).then(function(){handler.invoke('editor.restoreRange',$editable);});};};return HelpDialog;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/ImageDialog';;

/* /web_editor/static/lib/summernote/src/js/module/ImageDialog.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/key'],function(key){var ImageDialog=function(handler){var toggleBtn=function($btn,isEnable){$btn.toggleClass('disabled',!isEnable);$btn.attr('disabled',!isEnable);};var bindEnterKey=function($input,$btn){$input.on('keypress',function(event){if(event.keyCode===key.code.ENTER){$btn.trigger('click');}});};this.show=function(layoutInfo){var $dialog=layoutInfo.dialog(),$editable=layoutInfo.editable();handler.invoke('editor.saveRange',$editable);this.showImageDialog($editable,$dialog).then(function(data){handler.invoke('editor.restoreRange',$editable);if(typeof data==='string'){handler.invoke('editor.insertImage',$editable,data);}else{handler.insertImages(layoutInfo,data);}}).fail(function(){handler.invoke('editor.restoreRange',$editable);});};this.showImageDialog=function($editable,$dialog){return $.Deferred(function(deferred){var $imageDialog=$dialog.find('.note-image-dialog');var $imageInput=$dialog.find('.note-image-input'),$imageUrl=$dialog.find('.note-image-url'),$imageBtn=$dialog.find('.note-image-btn');$imageDialog.one('shown.bs.modal',function(){$imageInput.replaceWith($imageInput.clone().on('change',function(){deferred.resolve(this.files||this.value);$imageDialog.modal('hide');}).val(''));$imageBtn.click(function(event){event.preventDefault();deferred.resolve($imageUrl.val());$imageDialog.modal('hide');});$imageUrl.on('keyup paste',function(event){var url;if(event.type==='paste'){url=event.originalEvent.clipboardData.getData('text');}else{url=$imageUrl.val();}
toggleBtn($imageBtn,url);}).val('').trigger('focus');bindEnterKey($imageUrl,$imageBtn);}).one('hidden.bs.modal',function(){$imageInput.off('change');$imageUrl.off('keyup paste keypress');$imageBtn.off('click');if(deferred.state()==='pending'){deferred.reject();}}).modal('show');});};};return ImageDialog;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/LinkDialog';;

/* /web_editor/static/lib/summernote/src/js/module/LinkDialog.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/key'],function(key){var LinkDialog=function(handler){var toggleBtn=function($btn,isEnable){$btn.toggleClass('disabled',!isEnable);$btn.attr('disabled',!isEnable);};var bindEnterKey=function($input,$btn){$input.on('keypress',function(event){if(event.keyCode===key.code.ENTER){$btn.trigger('click');}});};this.showLinkDialog=function($editable,$dialog,linkInfo){return $.Deferred(function(deferred){var $linkDialog=$dialog.find('.note-link-dialog');var $linkText=$linkDialog.find('.note-link-text'),$linkUrl=$linkDialog.find('.note-link-url'),$linkBtn=$linkDialog.find('.note-link-btn'),$openInNewWindow=$linkDialog.find('input[type=checkbox]');$linkDialog.one('shown.bs.modal',function(){$linkText.val(linkInfo.text);$linkText.on('input',function(){toggleBtn($linkBtn,$linkText.val()&&$linkUrl.val());linkInfo.text=$linkText.val();});if(!linkInfo.url){linkInfo.url=linkInfo.text||'http://';toggleBtn($linkBtn,linkInfo.text);}
$linkUrl.on('input',function(){toggleBtn($linkBtn,$linkText.val()&&$linkUrl.val());if(!linkInfo.text){$linkText.val($linkUrl.val());}}).val(linkInfo.url).trigger('focus').trigger('select');bindEnterKey($linkUrl,$linkBtn);bindEnterKey($linkText,$linkBtn);$openInNewWindow.prop('checked',linkInfo.isNewWindow);$linkBtn.one('click',function(event){event.preventDefault();deferred.resolve({range:linkInfo.range,url:$linkUrl.val(),text:$linkText.val(),isNewWindow:$openInNewWindow.is(':checked')});$linkDialog.modal('hide');});}).one('hidden.bs.modal',function(){$linkText.off('input keypress');$linkUrl.off('input keypress');$linkBtn.off('click');if(deferred.state()==='pending'){deferred.reject();}}).modal('show');}).promise();};this.show=function(layoutInfo){var $editor=layoutInfo.editor(),$dialog=layoutInfo.dialog(),$editable=layoutInfo.editable(),$popover=layoutInfo.popover(),linkInfo=handler.invoke('editor.getLinkInfo',$editable);var options=$editor.data('options');handler.invoke('editor.saveRange',$editable);this.showLinkDialog($editable,$dialog,linkInfo).then(function(linkInfo){handler.invoke('editor.restoreRange',$editable);handler.invoke('editor.createLink',$editable,linkInfo,options);handler.invoke('popover.hide',$popover);}).fail(function(){handler.invoke('editor.restoreRange',$editable);});};};return LinkDialog;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Popover';;

/* /web_editor/static/lib/summernote/src/js/module/Popover.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/func','summernote/core/list','summernote/module/Button'],function(func,list,Button){var Popover=function(){var button=new Button();this.button=button;var posFromPlaceholder=function(placeholder,options){var isAirMode=options&&options.isAirMode;var isLeftTop=options&&options.isLeftTop;var $placeholder=$(placeholder);var pos=isAirMode?$placeholder.offset():$placeholder.position();var height=isLeftTop?0:$placeholder.outerHeight(true);return{left:pos.left,top:pos.top+height};};var showPopover=function($popover,pos){$popover.css({display:'block',left:pos.left,top:pos.top});};var PX_POPOVER_ARROW_OFFSET_X=20;this.update=function($popover,styleInfo,isAirMode){button.update($popover,styleInfo);var $linkPopover=$popover.find('.note-link-popover');if(styleInfo.anchor){var $anchor=$linkPopover.find('a');var href=$(styleInfo.anchor).attr('href');var target=$(styleInfo.anchor).attr('target');$anchor.attr('href',href).text(href);if(!target){$anchor.removeAttr('target');}else{$anchor.attr('target','_blank');}
showPopover($linkPopover,posFromPlaceholder(styleInfo.anchor,{isAirMode:isAirMode}));}else{$linkPopover.hide();}
var $imagePopover=$popover.find('.note-image-popover');if(styleInfo.image){showPopover($imagePopover,posFromPlaceholder(styleInfo.image,{isAirMode:isAirMode,isLeftTop:true}));}else{$imagePopover.hide();}
var $airPopover=$popover.find('.note-air-popover');if(isAirMode&&styleInfo.range&&!styleInfo.range.isCollapsed()){var rect=list.last(styleInfo.range.getClientRects());if(rect){var bnd=func.rect2bnd(rect);showPopover($airPopover,{left:Math.max(bnd.left+bnd.width/2-PX_POPOVER_ARROW_OFFSET_X,0),top:bnd.top+bnd.height});}}else{$airPopover.hide();}};this.updateRecentColor=function(button,eventName,value){button.updateRecentColor(button,eventName,value);};this.hide=function($popover){$popover.children().hide();};};return Popover;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Statusbar';;

/* /web_editor/static/lib/summernote/src/js/module/Statusbar.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/dom'],function(dom){var EDITABLE_PADDING=24;var Statusbar=function(){var $document=$(document);this.attach=function(layoutInfo,options){if(!options.disableResizeEditor){layoutInfo.statusbar().on('mousedown',hStatusbarMousedown);}};var hStatusbarMousedown=function(event){event.preventDefault();event.stopPropagation();var $editable=dom.makeLayoutInfo(event.target).editable();var editableTop=$editable.offset().top-$document.scrollTop();var layoutInfo=dom.makeLayoutInfo(event.currentTarget||event.target);var options=layoutInfo.editor().data('options');$document.on('mousemove',function(event){var nHeight=event.clientY-(editableTop+EDITABLE_PADDING);nHeight=(options.minHeight>0)?Math.max(nHeight,options.minHeight):nHeight;nHeight=(options.maxHeight>0)?Math.min(nHeight,options.maxHeight):nHeight;$editable.height(nHeight);}).one('mouseup',function(){$document.off('mousemove');});};};return Statusbar;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/module/Toolbar';;

/* /web_editor/static/lib/summernote/src/js/module/Toolbar.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/list','summernote/core/dom','summernote/module/Button'],function(list,dom,Button){var Toolbar=function(){var button=new Button();this.button=button;this.update=function($toolbar,styleInfo){button.update($toolbar,styleInfo);};this.updateRecentColor=function(buttonNode,eventName,value){button.updateRecentColor(buttonNode,eventName,value);};this.activate=function($toolbar){$toolbar.find('button').not('button[data-event="codeview"]').removeClass('disabled');};this.deactivate=function($toolbar){$toolbar.find('button').not('button[data-event="codeview"]').addClass('disabled');};this.updateFullscreen=function($container,bFullscreen){var $btn=$container.find('button[data-event="fullscreen"]');$btn.toggleClass('active',bFullscreen);};this.updateCodeview=function($container,isCodeview){var $btn=$container.find('button[data-event="codeview"]');$btn.toggleClass('active',isCodeview);if(isCodeview){this.deactivate($container);}else{this.activate($container);}};this.get=function($editable,name){var $toolbar=dom.makeLayoutInfo($editable).toolbar();return $toolbar.find('[data-name='+name+']');};this.setButtonState=function($editable,name,isActive){isActive=(isActive===false)?false:true;var $button=this.get($editable,name);$button.toggleClass('active',isActive);};};return Toolbar;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/Renderer';;

/* /web_editor/static/lib/summernote/src/js/Renderer.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/dom','summernote/core/func','summernote/core/list'],function(agent,dom,func,list){var Renderer=function(){var tplButton=function(label,options){var event=options.event;var value=options.value;var title=options.title;var className=options.className;var dropdown=options.dropdown;var hide=options.hide;return(dropdown?'<div class="btn-group'+
(className?' '+className:'')+'">':'')+'<button type="button"'+' class="btn btn-secondary btn-sm'+
((!dropdown&&className)?' '+className:'')+
(dropdown?' dropdown-toggle':'')+'"'+
(dropdown?' data-toggle="dropdown"':'')+
(title?' title="'+title+'"':'')+
(event?' data-event="'+event+'"':'')+
(value?' data-value=\''+value+'\'':'')+
(hide?' data-hide=\''+hide+'\'':'')+' tabindex="-1">'+
label+
(dropdown?' <span class="caret"></span>':'')+'</button>'+
(dropdown||'')+
(dropdown?'</div>':'');};var tplIconButton=function(iconClassName,options){var label='<i class="'+iconClassName+'"></i>';return tplButton(label,options);};var tplPopover=function(className,content){var $popover=$('<div class="'+className+' popover bottom in" style="display: none;">'+'<div class="arrow"></div>'+'<div class="popover-body">'+'</div>'+'</div>');$popover.find('.popover-body').append(content);return $popover;};var tplDialog=function(className,title,body,footer){return'<div class="'+className+' modal" role="dialog" aria-hidden="false">'+'<div class="modal-dialog">'+'<div class="modal-content">'+
(title?'<header class="modal-header">'+'<h4 class="modal-title">'+title+'</h4>'+'<button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button>'+'</header>':'')+'<main class="modal-body">'+body+'</main>'+
(footer?'<header class="modal-footer">'+footer+'</header>':'')+'</div>'+'</div>'+'</div>';};var tplDropdown=function(contents,className,nodeName){var classes='dropdown-menu'+(className?' '+className:'');nodeName=nodeName||'ul';if(contents instanceof Array){contents=contents.join('');}
return'<'+nodeName+' class="'+classes+'">'+contents+'</'+nodeName+'>';};var tplButtonInfo={picture:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.image.image,{event:'showImageDialog',title:lang.image.image,hide:true});},link:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.link.link,{event:'showLinkDialog',title:lang.link.link,hide:true});},table:function(lang,options){var dropdown=['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>','</div>','<div class="note-dimension-display"> 1 x 1 </div>'];return tplIconButton(options.iconPrefix+options.icons.table.table,{title:lang.table.table,dropdown:tplDropdown(dropdown,'note-table')});},style:function(lang,options){var items=options.styleTags.reduce(function(memo,v){var label=lang.style[v==='p'?'normal':v];return memo+'<li><a class="dropdown-item" data-event="formatBlock" href="#" data-value="'+v+'">'+
((v==='p'||v==='pre')?label:'<'+v+'>'+label+'</'+v+'>')+'</a></li>';},'');return tplIconButton(options.iconPrefix+options.icons.style.style,{title:lang.style.style,dropdown:tplDropdown(items)});},fontname:function(lang,options){var realFontList=[];var items=options.fontNames.reduce(function(memo,v){if(!agent.isFontInstalled(v)&&!list.contains(options.fontNamesIgnoreCheck,v)){return memo;}
realFontList.push(v);return memo+'<li><a data-event="fontName" href="#" data-value="'+v+'" style="font-family:\''+v+'\'">'+'<i class="'+options.iconPrefix+options.icons.misc.check+'"></i> '+v+'</a></li>';},'');var hasDefaultFont=agent.isFontInstalled(options.defaultFontName);var defaultFontName=(hasDefaultFont)?options.defaultFontName:realFontList[0];var label='<span class="note-current-fontname">'+
defaultFontName+'</span>';return tplButton(label,{title:lang.font.name,className:'note-fontname',dropdown:tplDropdown(items,'note-check')});},fontsize:function(lang,options){var items=options.fontSizes.reduce(function(memo,v){return memo+'<li><a data-event="fontSize" href="#" data-value="'+v+'">'+'<i class="'+options.iconPrefix+options.icons.misc.check+'"></i> '+v+'</a></li>';},'');var label='<span class="note-current-fontsize">11</span>';return tplButton(label,{title:lang.font.size,className:'note-fontsize',dropdown:tplDropdown(items,'note-check')});},color:function(lang,options){var colorButtonLabel='<i class="'+
options.iconPrefix+options.icons.color.recent+'" id="colors_preview" style="color:white;background-color:#B35E9B"></i>';var colorButton=tplButton(colorButtonLabel,{className:'note-recent-color',title:lang.color.recent,event:'color',value:'{"backColor":"#B35E9B"}'});var items=['<li class="flex"><div class="btn-group flex-column">','<div class="note-palette-title">'+lang.color.background+'</div>','<div class="note-color-reset" data-event="backColor"',' data-value="inherit" title="'+lang.color.transparent+'">'+lang.color.setTransparent+'</div>','<div class="note-color-palette" data-target-event="backColor"></div>','</div><div class="btn-group flex-column">','<div class="note-palette-title">'+lang.color.foreground+'</div>','<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+lang.color.reset+'">',lang.color.resetToDefault,'</div>','<div class="note-color-palette" data-target-event="foreColor"></div>','</div></li>'];var moreButton=tplButton('',{title:lang.color.more,dropdown:tplDropdown(items)});return colorButton+moreButton;},bold:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.bold,{event:'bold',title:lang.font.bold});},italic:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.italic,{event:'italic',title:lang.font.italic});},underline:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.underline,{event:'underline',title:lang.font.underline});},strikethrough:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.strikethrough,{event:'strikethrough',title:lang.font.strikethrough});},superscript:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.superscript,{event:'superscript',title:lang.font.superscript});},subscript:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.subscript,{event:'subscript',title:lang.font.subscript});},clear:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.font.clear,{event:'removeFormat',title:lang.font.clear});},ul:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.lists.unordered,{event:'insertUnorderedList',title:lang.lists.unordered});},ol:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.lists.ordered,{event:'insertOrderedList',title:lang.lists.ordered});},paragraph:function(lang,options){var leftButton=tplIconButton(options.iconPrefix+options.icons.paragraph.left,{title:lang.paragraph.left,event:'justifyLeft'});var centerButton=tplIconButton(options.iconPrefix+options.icons.paragraph.center,{title:lang.paragraph.center,event:'justifyCenter'});var rightButton=tplIconButton(options.iconPrefix+options.icons.paragraph.right,{title:lang.paragraph.right,event:'justifyRight'});var justifyButton=tplIconButton(options.iconPrefix+options.icons.paragraph.justify,{title:lang.paragraph.justify,event:'justifyFull'});var outdentButton=tplIconButton(options.iconPrefix+options.icons.paragraph.outdent,{title:lang.paragraph.outdent,event:'outdent'});var indentButton=tplIconButton(options.iconPrefix+options.icons.paragraph.indent,{title:lang.paragraph.indent,event:'indent'});var dropdown=['<div class="note-align btn-group">',leftButton+centerButton+rightButton+justifyButton,'</div><div class="note-list btn-group">',indentButton+outdentButton,'</div>'];return tplIconButton(options.iconPrefix+options.icons.paragraph.paragraph,{title:lang.paragraph.paragraph,dropdown:tplDropdown(dropdown,'','div')});},height:function(lang,options){var items=options.lineHeights.reduce(function(memo,v){return memo+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(v)+'">'+'<i class="'+options.iconPrefix+options.icons.misc.check+'"></i> '+v+'</a></li>';},'');return tplIconButton(options.iconPrefix+options.icons.font.height,{title:lang.font.height,dropdown:tplDropdown(items,'note-check')});},help:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.options.help,{event:'showHelpDialog',title:lang.options.help,hide:true});},fullscreen:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.options.fullscreen,{event:'fullscreen',title:lang.options.fullscreen});},codeview:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.options.codeview,{event:'codeview',title:lang.options.codeview});},undo:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.history.undo,{event:'undo',title:lang.history.undo});},redo:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.history.redo,{event:'redo',title:lang.history.redo});},hr:function(lang,options){return tplIconButton(options.iconPrefix+options.icons.hr.insert,{event:'insertHorizontalRule',title:lang.hr.insert});}};var tplPopovers=function(lang,options){var tplLinkPopover=function(){var linkButton=tplIconButton(options.iconPrefix+options.icons.link.edit,{title:lang.link.edit,event:'showLinkDialog',hide:true});var unlinkButton=tplIconButton(options.iconPrefix+options.icons.link.unlink,{title:lang.link.unlink,event:'unlink'});var content='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;'+'<div class="note-insert btn-group">'+
linkButton+unlinkButton+'</div>';return tplPopover('note-link-popover',content);};var tplImagePopover=function(){var autoButton=tplButton('<span class="note-fontsize-10">Auto</span>',{event:'resize',value:'auto'});var fullButton=tplButton('<span class="note-fontsize-10">100%</span>',{title:lang.image.resizeFull,event:'resize',value:'1'});var halfButton=tplButton('<span class="note-fontsize-10">50%</span>',{title:lang.image.resizeHalf,event:'resize',value:'0.5'});var quarterButton=tplButton('<span class="note-fontsize-10">25%</span>',{title:lang.image.resizeQuarter,event:'resize',value:'0.25'});var leftButton=tplIconButton(options.iconPrefix+options.icons.image.floatLeft,{title:lang.image.floatLeft,event:'floatMe',value:'left'});var rightButton=tplIconButton(options.iconPrefix+options.icons.image.floatRight,{title:lang.image.floatRight,event:'floatMe',value:'right'});var justifyButton=tplIconButton(options.iconPrefix+options.icons.image.floatNone,{title:lang.image.floatNone,event:'floatMe',value:'none'});var roundedButton=tplIconButton(options.iconPrefix+options.icons.image.shapeRounded,{title:lang.image.shapeRounded,event:'imageShape',value:'rounded'});var circleButton=tplIconButton(options.iconPrefix+options.icons.image.shapeCircle,{title:lang.image.shapeCircle,event:'imageShape',value:'rounded-circle'});var thumbnailButton=tplIconButton(options.iconPrefix+options.icons.image.shapeThumbnail,{title:lang.image.shapeThumbnail,event:'imageShape',value:'img-thumbnail'});var noneButton=tplIconButton(options.iconPrefix+options.icons.image.shapeNone,{title:lang.image.shapeNone,event:'imageShape',value:''});var removeButton=tplIconButton(options.iconPrefix+options.icons.image.remove,{title:lang.image.remove,event:'removeMedia',value:'none'});var content=(options.disableResizeImage?'':'<div class="btn-group">'+autoButton+fullButton+halfButton+quarterButton+'</div>')+'<div class="btn-group">'+leftButton+rightButton+justifyButton+'</div>'+'<div class="btn-group">'+roundedButton+circleButton+thumbnailButton+noneButton+'</div>'+'<div class="btn-group">'+removeButton+'</div>';return tplPopover('note-image-popover',content);};var tplAirPopover=function(){var $content=$('<div />');for(var idx=0,len=options.airPopover.length;idx<len;idx++){var group=options.airPopover[idx];var $group=$('<div class="note-'+group[0]+' btn-group">');for(var i=0,lenGroup=group[1].length;i<lenGroup;i++){var $button=$(tplButtonInfo[group[1][i]](lang,options));$button.attr('data-name',group[1][i]);$group.append($button);}
$content.append($group);}
return tplPopover('note-air-popover',$content.children());};var $notePopover=$('<div class="note-popover" />');$notePopover.append(tplLinkPopover());$notePopover.append(tplImagePopover());if(options.airMode){$notePopover.append(tplAirPopover());}
return $notePopover;};this.tplButtonInfo=tplButtonInfo;this.tplPopovers=tplPopovers;var tplHandles=function(options){return'<div class="note-handle">'+'<div class="note-control-selection">'+'<div class="note-control-selection-bg"></div>'+'<div class="note-control-holder note-control-nw"></div>'+'<div class="note-control-holder note-control-ne"></div>'+'<div class="note-control-holder note-control-sw"></div>'+'<div class="'+
(options.disableResizeImage?'note-control-holder':'note-control-sizing')+' note-control-se"></div>'+
(options.disableResizeImage?'':'<div class="note-control-selection-info"></div>')+'</div>'+'</div>';};var tplShortcut=function(title,keys){var keyClass='note-shortcut-col col-6 note-shortcut-';var body=[];for(var i in keys){if(keys.hasOwnProperty(i)){body.push('<div class="'+keyClass+'key">'+keys[i].kbd+'</div>'+'<div class="'+keyClass+'name">'+keys[i].text+'</div>');}}
return'<div class="note-shortcut-row row"><div class="'+keyClass+'title offset-6">'+title+'</div></div>'+'<div class="note-shortcut-row row">'+body.join('</div><div class="note-shortcut-row row">')+'</div>';};var tplShortcutText=function(lang){var keys=[{kbd:' + B',text:lang.font.bold},{kbd:' + I',text:lang.font.italic},{kbd:' + U',text:lang.font.underline},{kbd:' + \\',text:lang.font.clear}];return tplShortcut(lang.shortcut.textFormatting,keys);};var tplShortcutAction=function(lang){var keys=[{kbd:' + Z',text:lang.history.undo},{kbd:' +  + Z',text:lang.history.redo},{kbd:' + ]',text:lang.paragraph.indent},{kbd:' + [',text:lang.paragraph.outdent},{kbd:' + ENTER',text:lang.hr.insert}];return tplShortcut(lang.shortcut.action,keys);};var tplShortcutPara=function(lang){var keys=[{kbd:' +  + L',text:lang.paragraph.left},{kbd:' +  + E',text:lang.paragraph.center},{kbd:' +  + R',text:lang.paragraph.right},{kbd:' +  + J',text:lang.paragraph.justify},{kbd:' +  + NUM7',text:lang.lists.ordered},{kbd:' +  + NUM8',text:lang.lists.unordered}];return tplShortcut(lang.shortcut.paragraphFormatting,keys);};var tplShortcutStyle=function(lang){var keys=[{kbd:' + NUM0',text:lang.style.normal},{kbd:' + NUM1',text:lang.style.h1},{kbd:' + NUM2',text:lang.style.h2},{kbd:' + NUM3',text:lang.style.h3},{kbd:' + NUM4',text:lang.style.h4},{kbd:' + NUM5',text:lang.style.h5},{kbd:' + NUM6',text:lang.style.h6}];return tplShortcut(lang.shortcut.documentStyle,keys);};var tplExtraShortcuts=function(lang,options){var extraKeys=options.extraKeys;var keys=[];for(var key in extraKeys){if(extraKeys.hasOwnProperty(key)){keys.push({kbd:key,text:extraKeys[key]});}}
return tplShortcut(lang.shortcut.extraKeys,keys);};var tplShortcutTable=function(lang,options){var colClass='class="note-shortcut note-shortcut-col col-md-6 col-12"';var template=['<div '+colClass+'>'+tplShortcutAction(lang,options)+'</div>'+'<div '+colClass+'>'+tplShortcutText(lang,options)+'</div>','<div '+colClass+'>'+tplShortcutStyle(lang,options)+'</div>'+'<div '+colClass+'>'+tplShortcutPara(lang,options)+'</div>'];if(options.extraKeys){template.push('<div '+colClass+'>'+tplExtraShortcuts(lang,options)+'</div>');}
return'<div class="note-shortcut-row row">'+
template.join('</div><div class="note-shortcut-row row">')+'</div>';};var replaceMacKeys=function(sHtml){return sHtml.replace(//g,'Ctrl').replace(//g,'Shift');};var tplDialogInfo={image:function(lang,options){var imageLimitation='';if(options.maximumImageFileSize){var unit=Math.floor(Math.log(options.maximumImageFileSize)/Math.log(1024));var readableSize=(options.maximumImageFileSize/Math.pow(1024,unit)).toFixed(2)*1+' '+' KMGTP'[unit]+'B';imageLimitation='<small>'+lang.image.maximumFileSize+' : '+readableSize+'</small>';}
var body='<div class="form-group row note-group-select-from-files">'+'<label>'+lang.image.selectFromFiles+'</label>'+'<input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+
imageLimitation+'</div>'+'<div class="form-group row">'+'<label>'+lang.image.url+'</label>'+'<input class="note-image-url form-control col-md-12" type="text" />'+'</div>';var footer='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+lang.image.insert+'</button>';return tplDialog('note-image-dialog',lang.image.insert,body,footer);},link:function(lang,options){var body='<div class="form-group row">'+'<label>'+lang.link.textToDisplay+'</label>'+'<input class="note-link-text form-control col-md-12" type="text" />'+'</div>'+'<div class="form-group row">'+'<label>'+lang.link.url+'</label>'+'<input class="note-link-url form-control col-md-12" type="text" value="http://" />'+'</div>'+
(!options.disableLinkTarget?'<div class="checkbox">'+'<label>'+'<input type="checkbox" checked> '+
lang.link.openInNewWindow+'</label>'+'</div>':'');var footer='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+lang.link.insert+'</button>';return tplDialog('note-link-dialog',lang.link.insert,body,footer);},help:function(lang,options){var body='<a class="modal-close float-right" aria-hidden="true" tabindex="-1">'+lang.shortcut.close+'</a>'+'<div class="title">'+lang.shortcut.shortcuts+'</div>'+
(agent.isMac?tplShortcutTable(lang,options):replaceMacKeys(tplShortcutTable(lang,options)))+'<p class="text-center">'+'<a href="//summernote.org/" target="_blank">Summernote @VERSION</a>  '+'<a href="//github.com/summernote/summernote" target="_blank">Project</a>  '+'<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>'+'</p>';return tplDialog('note-help-dialog','',body,'');}};var tplDialogs=function(lang,options){var dialogs='';$.each(tplDialogInfo,function(idx,tplDialog){dialogs+=tplDialog(lang,options);});return'<div class="note-dialog">'+dialogs+'</div>';};var tplStatusbar=function(){return'<div class="note-resizebar">'+'<div class="note-icon-bar"></div>'+'<div class="note-icon-bar"></div>'+'<div class="note-icon-bar"></div>'+'</div>';};var representShortcut=function(str){if(agent.isMac){str=str.replace('CMD','').replace('SHIFT','');}
return str.replace('BACKSLASH','\\').replace('SLASH','/').replace('LEFTBRACKET','[').replace('RIGHTBRACKET',']');};var createTooltip=function($container,keyMap,sPlacement){var invertedKeyMap=func.invertObject(keyMap);var $buttons=$container.find('button');$buttons.each(function(i,elBtn){var $btn=$(elBtn);var sShortcut=invertedKeyMap[$btn.data('event')];if(sShortcut){$btn.attr('title',function(i,v){return v+' ('+representShortcut(sShortcut)+')';});}}).tooltip({container:'body',trigger:'hover',placement:sPlacement||'top'}).on('click',function(){$(this).tooltip('hide');});};var createPalette=function($container,options){var colorInfo=options.colors;$container.find('.note-color-palette').each(function(){var $palette=$(this),eventName=$palette.attr('data-target-event');var paletteContents=[];for(var row=0,lenRow=colorInfo.length;row<lenRow;row++){var colors=colorInfo[row];var buttons=[];for(var col=0,lenCol=colors.length;col<lenCol;col++){var color=colors[col];buttons.push(['<button type="button" class="note-color-btn" style="background-color:',color,';" data-event="',eventName,'" data-value="',color,'" title="',color,'" data-toggle="button" tabindex="-1"></button>'].join(''));}
paletteContents.push('<div class="note-color-row">'+buttons.join('')+'</div>');}
$palette.html(paletteContents.join(''));});};this.createPalette=createPalette;this.createLayoutByAirMode=function($holder,options){var langInfo=options.langInfo;var keyMap=options.keyMap[agent.isMac?'mac':'pc'];var id=func.uniqueId();$holder.addClass('note-air-editor note-editable');$holder.attr({'data-note-id':id,'contentEditable':true});var body=document.body;var $container=$('#web_editor-toolbars')
var $popover=$(this.tplPopovers(langInfo,options));$popover.addClass('note-air-layout');$popover.attr('id','note-popover-'+id);$popover.appendTo($container);createTooltip($popover,keyMap);this.createPalette($popover,options);var $handle=$(tplHandles(options));$handle.addClass('note-air-layout');$handle.attr('id','note-handle-'+id);$handle.appendTo($container);var $dialog=$(tplDialogs(langInfo,options));$dialog.addClass('note-air-layout');$dialog.attr('id','note-dialog-'+id);$dialog.find('button.close, a.modal-close').click(function(){$(this).closest('.modal').modal('hide');});$dialog.appendTo($container);};this.createLayoutByFrame=function($holder,options){var langInfo=options.langInfo;var $editor=$('<div class="note-editor panel panel-default" />');if(options.width){$editor.width(options.width);}
if(options.height>0){$('<div class="note-statusbar">'+(options.disableResizeEditor?'':tplStatusbar())+'</div>').prependTo($editor);}
var $editingArea=$('<div class="note-editing-area" />');var isContentEditable=!$holder.is(':disabled');var $editable=$('<div class="note-editable panel-body" contentEditable="'+isContentEditable+'"></div>').prependTo($editingArea);if(options.height){$editable.height(options.height);}
if(options.direction){$editable.attr('dir',options.direction);}
var placeholder=$holder.attr('placeholder')||options.placeholder;if(placeholder){$editable.attr('data-placeholder',placeholder);}
$editable.html(dom.html($holder)||dom.emptyPara);$('<textarea class="note-codable"></textarea>').prependTo($editingArea);var $popover=$(this.tplPopovers(langInfo,options)).prependTo($editingArea);this.createPalette($popover,options);createTooltip($popover,keyMap);$(tplHandles(options)).prependTo($editingArea);$editingArea.prependTo($editor);var $toolbar=$('<div class="note-toolbar panel-heading" />');for(var idx=0,len=options.toolbar.length;idx<len;idx++){var groupName=options.toolbar[idx][0];var groupButtons=options.toolbar[idx][1];var $group=$('<div class="note-'+groupName+' btn-group" />');for(var i=0,btnLength=groupButtons.length;i<btnLength;i++){var buttonInfo=tplButtonInfo[groupButtons[i]];if(!$.isFunction(buttonInfo)){continue;}
var $button=$(buttonInfo(langInfo,options));$button.attr('data-name',groupButtons[i]);$group.append($button);}
$toolbar.append($group);}
var keyMap=options.keyMap[agent.isMac?'mac':'pc'];this.createPalette($toolbar,options);createTooltip($toolbar,keyMap,'bottom');$toolbar.prependTo($editor);$('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo($editor);var $dialogContainer=options.dialogsInBody?$(document.body):$editor;var $dialog=$(tplDialogs(langInfo,options)).prependTo($dialogContainer);$dialog.find('button.close, a.modal-close').click(function(){$(this).closest('.modal').modal('hide');});$editor.insertAfter($holder);$holder.hide();};this.hasNoteEditor=function($holder){return this.noteEditorFromHolder($holder).length>0;};this.noteEditorFromHolder=function($holder){if($holder.hasClass('note-air-editor')){return $holder;}else if($holder.next().hasClass('note-editor')){return $holder.next();}else{return $();}};this.createLayout=function($holder,options){if(options.airMode){this.createLayoutByAirMode($holder,options);}else{this.createLayoutByFrame($holder,options);}};this.layoutInfoFromHolder=function($holder){var $editor=this.noteEditorFromHolder($holder);if(!$editor.length){return;}
$editor.data('holder',$holder);return dom.buildLayoutInfo($editor);};this.removeLayout=function($holder,layoutInfo,options){if(options.airMode){$holder.removeClass('note-air-editor note-editable').removeAttr('contentEditable');layoutInfo.popover().remove();layoutInfo.handle().remove();layoutInfo.dialog().remove();}else{$holder.html(layoutInfo.editable().html());if(options.dialogsInBody){layoutInfo.dialog().remove();}
layoutInfo.editor().remove();$holder.show();}};this.getTemplate=function(){return{button:tplButton,iconButton:tplIconButton,dialog:tplDialog,dropdown:tplDropdown};};this.addButtonInfo=function(name,buttonInfo){tplButtonInfo[name]=buttonInfo;};this.addDialogInfo=function(name,dialogInfo){tplDialogInfo[name]=dialogInfo;};};return Renderer;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/EventHandler';;

/* /web_editor/static/lib/summernote/src/js/EventHandler.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/func','summernote/core/dom','summernote/core/async','summernote/core/key','summernote/core/list','summernote/editing/History','summernote/module/Editor','summernote/module/Toolbar','summernote/module/Statusbar','summernote/module/Popover','summernote/module/Handle','summernote/module/Fullscreen','summernote/module/Codeview','summernote/module/DragAndDrop','summernote/module/Clipboard','summernote/module/LinkDialog','summernote/module/ImageDialog','summernote/module/HelpDialog'],function(agent,func,dom,async,key,list,History,Editor,Toolbar,Statusbar,Popover,Handle,Fullscreen,Codeview,DragAndDrop,Clipboard,LinkDialog,ImageDialog,HelpDialog){var EventHandler=function(){var self=this;var modules=this.modules={editor:new Editor(this),toolbar:new Toolbar(this),statusbar:new Statusbar(this),popover:new Popover(this),handle:new Handle(this),fullscreen:new Fullscreen(this),codeview:new Codeview(this),dragAndDrop:new DragAndDrop(this),clipboard:new Clipboard(this),linkDialog:new LinkDialog(this),imageDialog:new ImageDialog(this),helpDialog:new HelpDialog(this)};this.invoke=function(){var moduleAndMethod=list.head(list.from(arguments));var args=list.tail(list.from(arguments));var splits=moduleAndMethod.split('.');var hasSeparator=splits.length>1;var moduleName=hasSeparator&&list.head(splits);var methodName=hasSeparator?list.last(splits):list.head(splits);var module=this.getModule(moduleName);var method=module[methodName];return method&&method.apply(module,args);};this.getModule=function(moduleName){return this.modules[moduleName]||this.modules.editor;};var bindCustomEvent=this.bindCustomEvent=function($holder,callbacks,eventNamespace){return function(){var callback=callbacks[func.namespaceToCamel(eventNamespace,'on')];if(callback){callback.apply($holder[0],arguments);}
return $holder.trigger('summernote.'+eventNamespace,arguments);};};this.insertImages=function(layoutInfo,files){var $editor=layoutInfo.editor(),$editable=layoutInfo.editable(),$holder=layoutInfo.holder();var callbacks=$editable.data('callbacks');var options=$editor.data('options');if(callbacks.onImageUpload){bindCustomEvent($holder,callbacks,'image.upload')(files);}else{$.each(files,function(idx,file){var filename=file.name;if(options.maximumImageFileSize&&options.maximumImageFileSize<file.size){bindCustomEvent($holder,callbacks,'image.upload.error')(options.langInfo.image.maximumFileSizeError);}else{async.readFileAsDataURL(file).then(function(sDataURL){modules.editor.insertImage($editable,sDataURL,filename);}).fail(function(){bindCustomEvent($holder,callbacks,'image.upload.error')(options.langInfo.image.maximumFileSizeError);});}});}};var commands={showLinkDialog:function(layoutInfo){modules.linkDialog.show(layoutInfo);},showImageDialog:function(layoutInfo){modules.imageDialog.show(layoutInfo);},showHelpDialog:function(layoutInfo){modules.helpDialog.show(layoutInfo);},fullscreen:function(layoutInfo){modules.fullscreen.toggle(layoutInfo);},codeview:function(layoutInfo){modules.codeview.toggle(layoutInfo);}};var hMousedown=function(event){if(dom.isImg(event.target)){event.preventDefault();}};var hKeyupAndMouseup=function(event){var layoutInfo=dom.makeLayoutInfo(event.currentTarget||event.target);modules.editor.removeBogus(layoutInfo.editable());hToolbarAndPopoverUpdate(event);};this.updateStyleInfo=function(styleInfo,layoutInfo){if(!styleInfo){return;}
var isAirMode=(layoutInfo.editor().data('options')||{}).airMode;if(!isAirMode){modules.toolbar.update(layoutInfo.toolbar(),styleInfo);}
modules.popover.update(layoutInfo.popover(),styleInfo,isAirMode);modules.handle.update(layoutInfo.handle(),styleInfo,isAirMode);};var hToolbarAndPopoverUpdate=function(event){var target=event.target;setTimeout(function(){var layoutInfo=dom.makeLayoutInfo(target);if(!layoutInfo){return;}
var $editable=layoutInfo.editable();if(event.setStyleInfoFromEditable){var styleInfo=modules.editor.styleFromNode($editable);}else{if(!event.isDefaultPrevented()){modules.editor.saveRange($editable);}
var styleInfo=modules.editor.currentStyle(target);}
self.updateStyleInfo(styleInfo,layoutInfo);},0);};var hScroll=function(event){var layoutInfo=dom.makeLayoutInfo(event.currentTarget||event.target);modules.popover.hide(layoutInfo.popover());modules.handle.hide(layoutInfo.handle());};var hToolbarAndPopoverMousedown=function(event){var $btn=$(event.target).closest('[data-event]');if($btn.length){event.preventDefault();}};var hToolbarAndPopoverClick=function(event){var $btn=$(event.target).closest('[data-event]');if(!$btn.length){return;}
var eventName=$btn.attr('data-event'),value=$btn.attr('data-value'),hide=$btn.attr('data-hide');var layoutInfo=dom.makeLayoutInfo(event.target);var $target;if($.inArray(eventName,['resize','floatMe','removeMedia','imageShape'])!==-1){var $selection=layoutInfo.handle().find('.note-control-selection');$target=$($selection.data('target'));}
if(hide){$btn.parents('.popover').hide();}
if($.isFunction($.summernote.pluginEvents[eventName])){$.summernote.pluginEvents[eventName](event,modules.editor,layoutInfo,value);}else if(modules.editor[eventName]){var $editable=layoutInfo.editable();$editable.focus();modules.editor[eventName]($editable,value,$target);event.preventDefault();}else if(commands[eventName]){commands[eventName].call(this,layoutInfo);event.preventDefault();}
if($.inArray(eventName,['backColor','foreColor'])!==-1){var options=layoutInfo.editor().data('options',options);var module=options.airMode?modules.popover:modules.toolbar;module.updateRecentColor(list.head($btn),eventName,value);}
hToolbarAndPopoverUpdate(event);};var PX_PER_EM=18;var hDimensionPickerMove=function(event,options){var $picker=$(event.target.parentNode);var $dimensionDisplay=$picker.next();var $catcher=$picker.find('.note-dimension-picker-mousecatcher');var $highlighted=$picker.find('.note-dimension-picker-highlighted');var $unhighlighted=$picker.find('.note-dimension-picker-unhighlighted');var posOffset;if(event.offsetX===undefined){var posCatcher=$(event.target).offset();posOffset={x:event.pageX-posCatcher.left,y:event.pageY-posCatcher.top};}else{posOffset={x:event.offsetX,y:event.offsetY};}
var dim={c:Math.ceil(posOffset.x/PX_PER_EM)||1,r:Math.ceil(posOffset.y/PX_PER_EM)||1};$highlighted.css({width:dim.c+'em',height:dim.r+'em'});$catcher.attr('data-value',dim.c+'x'+dim.r);if(3<dim.c&&dim.c<options.insertTableMaxSize.col){$unhighlighted.css({width:dim.c+1+'em'});}
if(3<dim.r&&dim.r<options.insertTableMaxSize.row){$unhighlighted.css({height:dim.r+1+'em'});}
$dimensionDisplay.html(dim.c+' x '+dim.r);};this.bindKeyMap=function(layoutInfo,keyMap){var $editor=layoutInfo.editor();var $editable=layoutInfo.editable();$editable.on('keydown',function(event){var keys=[];if(event.metaKey){keys.push('CMD');}
if(event.ctrlKey&&!event.altKey){keys.push('CTRL');}
if(event.shiftKey){keys.push('SHIFT');}
var keyName=key.nameFromCode[event.keyCode];if(keyName){keys.push(keyName);}
var pluginEvent;var keyString=keys.join('+');var eventName=keyMap[keyString];var keycode=event.keyCode;if(!eventName&&!event.ctrlKey&&!event.metaKey&&((keycode>47&&keycode<58)||keycode==32||keycode==13||(keycode>64&&keycode<91)||(keycode>95&&keycode<112)||(keycode>185&&keycode<193)||(keycode>218&&keycode<223))){eventName='visible';}else if(!keycode&&event.key!=='Dead'){self.invoke('restoreRange',$editable);}
if(eventName){pluginEvent=$.summernote.pluginEvents[keyString];if($.isFunction(pluginEvent)){if(pluginEvent(event,modules.editor,layoutInfo)){return false;}}
pluginEvent=$.summernote.pluginEvents[eventName];if($.isFunction(pluginEvent)){pluginEvent(event,modules.editor,layoutInfo);}else if(modules.editor[eventName]){modules.editor[eventName]($editable,$editor.data('options'));event.preventDefault();}else if(commands[eventName]){commands[eventName].call(this,layoutInfo);event.preventDefault();}}else if(key.isEdit(event.keyCode)){modules.editor.afterCommand($editable);}});};this.attach=function(layoutInfo,options){if(options.shortcuts){this.bindKeyMap(layoutInfo,options.keyMap[agent.isMac?'mac':'pc']);}
layoutInfo.editable().on('mousedown',hMousedown);layoutInfo.editable().on('keyup mouseup',hKeyupAndMouseup);layoutInfo.editable().on('scroll',hScroll);modules.clipboard.attach(layoutInfo,options);modules.handle.attach(layoutInfo,options);layoutInfo.popover().on('click',hToolbarAndPopoverClick);layoutInfo.popover().on('mousedown',hToolbarAndPopoverMousedown);modules.dragAndDrop.attach(layoutInfo,options);if(!options.airMode){layoutInfo.toolbar().on('click',hToolbarAndPopoverClick);layoutInfo.toolbar().on('mousedown',hToolbarAndPopoverMousedown);modules.statusbar.attach(layoutInfo,options);}
var $catcherContainer=options.airMode?layoutInfo.popover():layoutInfo.toolbar();var $catcher=$catcherContainer.find('.note-dimension-picker-mousecatcher');$catcher.css({width:options.insertTableMaxSize.col+'em',height:options.insertTableMaxSize.row+'em'}).on('mousemove',function(event){hDimensionPickerMove(event,options);});layoutInfo.editor().data('options',options);if(!agent.isMSIE){setTimeout(function(){document.execCommand('styleWithCSS',0,options.styleWithSpan);},0);}
var history=new History(layoutInfo.editable());layoutInfo.editable().data('NoteHistory',history);layoutInfo.editable().data('callbacks',{onInit:options.onInit,onFocus:options.onFocus,onBlur:options.onBlur,onKeydown:options.onKeydown,onKeyup:options.onKeyup,onMousedown:options.onMousedown,onEnter:options.onEnter,onPaste:options.onPaste,onBeforeCommand:options.onBeforeCommand,onChange:options.onChange,onImageUpload:options.onImageUpload,onImageUploadError:options.onImageUploadError,onMediaDelete:options.onMediaDelete,onToolbarClick:options.onToolbarClick,onUpload:options.onUpload,});var styleInfo=modules.editor.styleFromNode(layoutInfo.editable());this.updateStyleInfo(styleInfo,layoutInfo);};this.attachCustomEvent=function(layoutInfo,options){var $holder=layoutInfo.holder();var $editable=layoutInfo.editable();var callbacks=$editable.data('callbacks');$editable.focus(bindCustomEvent($holder,callbacks,'focus'));$editable.blur(bindCustomEvent($holder,callbacks,'blur'));$editable.keydown(function(event){if(event.keyCode===key.code.ENTER){bindCustomEvent($holder,callbacks,'enter').call(this,event);}
bindCustomEvent($holder,callbacks,'keydown').call(this,event);});$editable.keyup(bindCustomEvent($holder,callbacks,'keyup'));$editable.on('mousedown',bindCustomEvent($holder,callbacks,'mousedown'));$editable.on('mouseup',bindCustomEvent($holder,callbacks,'mouseup'));$editable.on('scroll',bindCustomEvent($holder,callbacks,'scroll'));$editable.on('paste',bindCustomEvent($holder,callbacks,'paste'));var changeEventName=agent.isMSIE?'DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted':'input';$editable.on(changeEventName,function(){bindCustomEvent($holder,callbacks,'change')($editable.html(),$editable);});if(!options.airMode){layoutInfo.toolbar().click(bindCustomEvent($holder,callbacks,'toolbar.click'));layoutInfo.popover().click(bindCustomEvent($holder,callbacks,'popover.click'));}
if(dom.isTextarea(list.head($holder))){$holder.closest('form').submit(function(e){layoutInfo.holder().val(layoutInfo.holder().code());bindCustomEvent($holder,callbacks,'submit').call(this,e,$holder.code());});}
if(dom.isTextarea(list.head($holder))&&options.textareaAutoSync){$holder.on('summernote.change',function(){layoutInfo.holder().val(layoutInfo.holder().code());});}
bindCustomEvent($holder,callbacks,'init')(layoutInfo);for(var i=0,len=$.summernote.plugins.length;i<len;i++){if($.isFunction($.summernote.plugins[i].init)){$.summernote.plugins[i].init(layoutInfo);}}};this.detach=function(layoutInfo,options){layoutInfo.holder().off();layoutInfo.editable().off();layoutInfo.popover().off();layoutInfo.handle().off();layoutInfo.dialog().off();if(!options.airMode){layoutInfo.dropzone().off();layoutInfo.toolbar().off();layoutInfo.statusbar().off();}};};return EventHandler;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/defaults';;

/* /web_editor/static/lib/summernote/src/js/defaults.js defined in bundle 'web_editor.assets_summernote' */
define('summernote/defaults',function(){var defaults={version:'@VERSION',options:{width:null,height:null,minHeight:null,maxHeight:null,focus:false,tabsize:4,styleWithSpan:true,disableLinkTarget:false,disableDragAndDrop:false,disableResizeEditor:false,disableResizeImage:false,shortcuts:true,textareaAutoSync:true,placeholder:false,prettifyHtml:true,iconPrefix:'fa fa-',icons:{font:{bold:'bold',italic:'italic',underline:'underline',clear:'eraser',height:'text-height',strikethrough:'strikethrough',superscript:'superscript',subscript:'subscript'},image:{image:'picture-o',floatLeft:'align-left',floatRight:'align-right',floatNone:'align-justify',shapeRounded:'square',shapeCircle:'circle-o',shapeThumbnail:'picture-o',shapeNone:'times',remove:'trash-o'},link:{link:'link',unlink:'unlink',edit:'edit'},table:{table:'table'},hr:{insert:'minus'},style:{style:'magic'},lists:{unordered:'list-ul',ordered:'list-ol'},options:{help:'question',fullscreen:'arrows-alt',codeview:'code'},paragraph:{paragraph:'align-left',outdent:'outdent',indent:'indent',left:'align-left',center:'align-center',right:'align-right',justify:'align-justify'},color:{recent:'font'},history:{undo:'undo',redo:'repeat'},misc:{check:'check'}},dialogsInBody:false,codemirror:{mode:'text/html',htmlMode:true,lineNumbers:true},lang:'en-US',direction:null,toolbar:[['style',['style']],['font',['bold','italic','underline','clear']],['fontname',['fontname']],['fontsize',['fontsize']],['color',['color']],['para',['ul','ol','paragraph']],['height',['height']],['table',['table']],['insert',['link','picture','hr']],['view',['fullscreen','codeview']],['help',['help']]],plugin:{},airMode:false,airPopover:[['color',['color']],['font',['bold','underline','clear']],['para',['ul','paragraph']],['table',['table']],['insert',['link','picture']]],styleTags:['p','blockquote','pre','h1','h2','h3','h4','h5','h6'],defaultFontName:'Helvetica Neue',fontNames:['Arial','Arial Black','Comic Sans MS','Courier New','Helvetica Neue','Helvetica','Impact','Lucida Grande','Tahoma','Times New Roman','Verdana'],fontNamesIgnoreCheck:[],fontSizes:['8','9','10','11','12','14','18','24','36'],colors:[['#000000','#424242','#636363','#9C9C94','#CEC6CE','#EFEFEF','#F7F7F7','#FFFFFF'],['#FF0000','#FF9C00','#FFFF00','#00FF00','#00FFFF','#0000FF','#9C00FF','#FF00FF'],['#F7C6CE','#FFE7CE','#FFEFC6','#D6EFD6','#CEDEE7','#CEE7F7','#D6D6E7','#E7D6DE'],['#E79C9C','#FFC69C','#FFE79C','#B5D6A5','#A5C6CE','#9CC6EF','#B5A5D6','#D6A5BD'],['#E76363','#F7AD6B','#FFD663','#94BD7B','#73A5AD','#6BADDE','#8C7BC6','#C67BA5'],['#CE0000','#E79439','#EFC631','#6BA54A','#4A7B8C','#3984C6','#634AA5','#A54A7B'],['#9C0000','#B56308','#BD9400','#397B21','#104A5A','#085294','#311873','#731842'],['#630000','#7B3900','#846300','#295218','#083139','#003163','#21104A','#4A1031']],lineHeights:['1.0','1.2','1.4','1.5','1.6','1.8','2.0','3.0'],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(sLinkUrl){if(sLinkUrl.indexOf('@')!==-1&&sLinkUrl.indexOf(':')===-1){sLinkUrl='mailto:'+sLinkUrl;}
return sLinkUrl;},keyMap:{pc:{'ENTER':'insertParagraph','CTRL+Z':'undo','CTRL+Y':'redo','TAB':'tab','SHIFT+TAB':'untab','CTRL+B':'bold','CTRL+I':'italic','CTRL+U':'underline','CTRL+SHIFT+S':'strikethrough','CTRL+BACKSLASH':'removeFormat','CTRL+SHIFT+L':'justifyLeft','CTRL+SHIFT+E':'justifyCenter','CTRL+SHIFT+R':'justifyRight','CTRL+SHIFT+J':'justifyFull','CTRL+SHIFT+NUM7':'insertUnorderedList','CTRL+SHIFT+NUM8':'insertOrderedList','CTRL+LEFTBRACKET':'outdent','CTRL+RIGHTBRACKET':'indent','CTRL+NUM0':'formatPara','CTRL+NUM1':'formatH1','CTRL+NUM2':'formatH2','CTRL+NUM3':'formatH3','CTRL+NUM4':'formatH4','CTRL+NUM5':'formatH5','CTRL+NUM6':'formatH6','CTRL+ENTER':'insertHorizontalRule','CTRL+K':'showLinkDialog'},mac:{'ENTER':'insertParagraph','CMD+Z':'undo','CMD+SHIFT+Z':'redo','TAB':'tab','SHIFT+TAB':'untab','CMD+B':'bold','CMD+I':'italic','CMD+U':'underline','CMD+SHIFT+S':'strikethrough','CMD+BACKSLASH':'removeFormat','CMD+SHIFT+L':'justifyLeft','CMD+SHIFT+E':'justifyCenter','CMD+SHIFT+R':'justifyRight','CMD+SHIFT+J':'justifyFull','CMD+SHIFT+NUM7':'insertUnorderedList','CMD+SHIFT+NUM8':'insertOrderedList','CMD+LEFTBRACKET':'outdent','CMD+RIGHTBRACKET':'indent','CMD+NUM0':'formatPara','CMD+NUM1':'formatH1','CMD+NUM2':'formatH2','CMD+NUM3':'formatH3','CMD+NUM4':'formatH4','CMD+NUM5':'formatH5','CMD+NUM6':'formatH6','CMD+ENTER':'insertHorizontalRule','CMD+K':'showLinkDialog'}}},lang:{'en-US':{font:{bold:'Bold',italic:'Italic',underline:'Underline',clear:'Remove Font Style',height:'Line Height',name:'Font Family',strikethrough:'Strikethrough',subscript:'Subscript',superscript:'Superscript',size:'Font Size'},image:{image:'Picture',insert:'Insert Image',resizeFull:'Resize Full',resizeHalf:'Resize Half',resizeQuarter:'Resize Quarter',floatLeft:'Float Left',floatRight:'Float Right',floatNone:'Float None',shapeRounded:'Shape: Rounded',shapeCircle:'Shape: Circle',shapeThumbnail:'Shape: Thumbnail',shapeNone:'Shape: None',dragImageHere:'Drag image or text here',dropImage:'Drop image or Text',selectFromFiles:'Select from files',maximumFileSize:'Maximum file size',maximumFileSizeError:'Maximum file size exceeded.',url:'Image URL',remove:'Remove Image'},link:{link:'Link',insert:'Insert Link',unlink:'Unlink',edit:'Edit',textToDisplay:'Text to display',url:'To what URL should this link go?',openInNewWindow:'Open in new window'},table:{table:'Table'},hr:{insert:'Insert Horizontal Rule'},style:{style:'Style',normal:'Paragraph',blockquote:'Quote',pre:'Code',h1:'Header 1',h2:'Header 2',h3:'Header 3',h4:'Header 4',h5:'Header 5',h6:'Header 6'},lists:{unordered:'Unordered list',ordered:'Ordered list'},options:{help:'Help',fullscreen:'Full Screen',codeview:'Code View'},paragraph:{paragraph:'Paragraph',outdent:'Outdent',indent:'Indent',left:'Align left',center:'Align center',right:'Align right',justify:'Justify full'},color:{recent:'Recent Color',more:'More Color',background:'Background Color',foreground:'Foreground Color',transparent:'Transparent',setTransparent:'Set transparent',reset:'Reset',resetToDefault:'Reset to default'},shortcut:{shortcuts:'Keyboard shortcuts',close:'Close',textFormatting:'Text formatting',action:'Action',paragraphFormatting:'Paragraph formatting',documentStyle:'Document Style',extraKeys:'Extra keys'},history:{undo:'Undo',redo:'Redo'}}}};return defaults;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
odoo.website_next_define='summernote/summernote';;

/* /web_editor/static/lib/summernote/src/js/summernote.js defined in bundle 'web_editor.assets_summernote' */
define(['summernote/core/agent','summernote/core/list','summernote/core/dom','summernote/core/range','summernote/defaults','summernote/EventHandler','summernote/Renderer','summernote/core/key'],function(agent,list,dom,range,defaults,EventHandler,Renderer,key){$.summernote=$.summernote||{};$.extend($.summernote,defaults);var renderer=new Renderer();var eventHandler=new EventHandler();$.extend($.summernote,{renderer:renderer,eventHandler:eventHandler,core:{agent:agent,list:list,dom:dom,range:range,key:key},pluginEvents:{},plugins:[]});$.summernote.addPlugin=function(plugin){$.summernote.plugins.push(plugin);if(plugin.buttons){$.each(plugin.buttons,function(name,button){renderer.addButtonInfo(name,button);});}
if(plugin.dialogs){$.each(plugin.dialogs,function(name,dialog){renderer.addDialogInfo(name,dialog);});}
if(plugin.events){$.each(plugin.events,function(name,event){$.summernote.pluginEvents[name]=event;});}
if(plugin.langs){$.each(plugin.langs,function(locale,lang){if($.summernote.lang[locale]){$.extend($.summernote.lang[locale],lang);}});}
if(plugin.options){$.extend($.summernote.options,plugin.options);}};$.fn.extend({summernote:function(){var type=$.type(list.head(arguments));var isExternalAPICalled=type==='string';var hasInitOptions=type==='object';var options=hasInitOptions?list.head(arguments):{};options=$.extend({},$.summernote.options,options);options.icons=$.extend({},$.summernote.options.icons,options.icons);options.langInfo=$.extend(true,{},$.summernote.lang['en-US'],$.summernote.lang[options.lang]);if(!isExternalAPICalled&&hasInitOptions){for(var i=0,len=$.summernote.plugins.length;i<len;i++){var plugin=$.summernote.plugins[i];if(options.plugin[plugin.name]){$.summernote.plugins[i]=$.extend(true,plugin,options.plugin[plugin.name]);}}}
this.each(function(idx,holder){var $holder=$(holder);if(!renderer.hasNoteEditor($holder)){renderer.createLayout($holder,options);var layoutInfo=renderer.layoutInfoFromHolder($holder);$holder.data('layoutInfo',layoutInfo);eventHandler.attach(layoutInfo,options);eventHandler.attachCustomEvent(layoutInfo,options);}});var $first=this.first();if($first.length){var layoutInfo=renderer.layoutInfoFromHolder($first);if(isExternalAPICalled){var moduleAndMethod=list.head(list.from(arguments));var args=list.tail(list.from(arguments));var params=[moduleAndMethod,layoutInfo.editable()].concat(args);return eventHandler.invoke.apply(eventHandler,params);}else if(options.focus){layoutInfo.editable().focus();}}
return this;},code:function(html){if(html===undefined){var $holder=this.first();if(!$holder.length){return;}
var layoutInfo=renderer.layoutInfoFromHolder($holder);var $editable=layoutInfo&&layoutInfo.editable();if($editable&&$editable.length){var isCodeview=eventHandler.invoke('codeview.isActivated',layoutInfo);eventHandler.invoke('codeview.sync',layoutInfo);return isCodeview?layoutInfo.codable().val():layoutInfo.editable().html();}
return dom.value($holder);}
this.each(function(i,holder){var layoutInfo=renderer.layoutInfoFromHolder($(holder));var $editable=layoutInfo&&layoutInfo.editable();if($editable){$editable.html(html);}});return this;},destroy:function(){this.each(function(idx,holder){var $holder=$(holder);if(!renderer.hasNoteEditor($holder)){return;}
var info=renderer.layoutInfoFromHolder($holder);var options=info.editor().data('options');eventHandler.detach(info,options);renderer.removeLayout($holder,info,options);});return this;}});});;

/* /web_editor/static/src/js/editor/summernote.js defined in bundle 'web_editor.assets_summernote' */
odoo.define('web_editor.summernote',function(require){'use strict';var core=require('web.core');require('summernote/summernote');var weDefaultOptions=require('web_editor.wysiwyg.default_options');var _t=core._t;var dom=$.summernote.core.dom;var range=$.summernote.core.range;var list=$.summernote.core.list;var key=$.summernote.core.key;var eventHandler=$.summernote.eventHandler;var editor=eventHandler.modules.editor;var renderer=$.summernote.renderer;var options=$.summernote.options;var oldJustify={};_.each(['Left','Right','Full','Center'],function(align){oldJustify[align]=editor['justify'+align];editor['justify'+align]=function($editable,value){var $align=$editable.find('[align]');_.each($align,function(el){var $el=$(el);$el.data('__align',$el.attr('align'));});oldJustify[align].apply(this,arguments);var $newAlign=$editable.find('[align]');$align.not($newAlign).css('text-align','');_.each($newAlign,function(el){var $el=$(el);var oldAlignValue=$align.data('__align');var alignValue=$el.attr('align');if(oldAlignValue===alignValue){return;}
$el.removeAttr('align');$el.css('text-align',alignValue);$el.find('*').css('text-align','');});$align.removeData('__align');};});dom.hasContentAfter=function(node){var next;if(dom.isEditable(node))return;while(node.nextSibling){next=node.nextSibling;if(next.tagName||dom.isVisibleText(next)||dom.isBR(next))return next;node=next;}};dom.hasContentBefore=function(node){var prev;if(dom.isEditable(node))return;while(node.previousSibling){prev=node.previousSibling;if(prev.tagName||dom.isVisibleText(prev)||dom.isBR(prev))return prev;node=prev;}};dom.ancestorHaveNextSibling=function(node,pred){pred=pred||dom.hasContentAfter;while(!dom.isEditable(node)&&(!node.nextSibling||!pred(node))){node=node.parentNode;}
return node;};dom.ancestorHavePreviousSibling=function(node,pred){pred=pred||dom.hasContentBefore;while(!dom.isEditable(node)&&(!node.previousSibling||!pred(node))){node=node.parentNode;}
return node;};dom.nextElementSibling=function(node){while(node){node=node.nextSibling;if(node&&node.tagName){break;}}
return node;};dom.previousElementSibling=function(node){while(node){node=node.previousSibling;if(node&&node.tagName){break;}}
return node;};dom.lastChild=function(node){while(node.lastChild){node=node.lastChild;}
return node;};dom.firstChild=function(node){while(node.firstChild){node=node.firstChild;}
return node;};dom.lastElementChild=function(node,deep){node=deep?dom.lastChild(node):node.lastChild;return!node||node.tagName?node:dom.previousElementSibling(node);};dom.firstElementChild=function(node,deep){node=deep?dom.firstChild(node):node.firstChild;return!node||node.tagName?node:dom.nextElementSibling(node);};dom.isEqual=function(prev,cur){if(prev.tagName!==cur.tagName){return false;}
if((prev.attributes?prev.attributes.length:0)!==(cur.attributes?cur.attributes.length:0)){return false;}
function strip(text){return text&&text.replace(/^\s+|\s+$/g,'').replace(/\s+/g,' ');}
var att,att2;loop_prev:for(var a in prev.attributes){att=prev.attributes[a];for(var b in cur.attributes){att2=cur.attributes[b];if(att.name===att2.name){if(strip(att.value)!==strip(att2.value))return false;continue loop_prev;}}
return false;}
return true;};dom.hasOnlyStyle=function(node){for(var i=0;i<node.attributes.length;i++){var attr=node.attributes[i];if(attr.attributeName!=='style'){return false;}}
return true;};dom.hasProgrammaticStyle=function(node){var styles=["float","display","position","top","left","right","bottom"];for(var i=0;i<node.style.length;i++){var style=node.style[i];if(styles.indexOf(style)!==-1){return true;}}
return false;};dom.mergeFilter=function(prev,cur,parent){if(prev&&(dom.isText(prev)||(['H1','H2','H3','H4','H5','H6','LI','P'].indexOf(prev.tagName)!==-1&&prev!==cur.parentNode))&&dom.isText(cur)){return true;}
if(prev&&prev.tagName==="P"&&dom.isText(cur)){return true;}
if(prev&&dom.isText(cur)&&!dom.isVisibleText(cur)&&(dom.isText(prev)||dom.isVisibleText(prev))){return true;}
if(prev&&!dom.isBR(prev)&&dom.isEqual(prev,cur)&&((prev.tagName&&dom.getComputedStyle(prev).display==="inline"&&cur.tagName&&dom.getComputedStyle(cur).display==="inline"))){return true;}
if(dom.isEqual(parent,cur)&&((parent.tagName&&dom.getComputedStyle(parent).display==="inline"&&cur.tagName&&dom.getComputedStyle(cur).display==="inline"))){return true;}
if(parent&&cur.tagName==="FONT"&&(!cur.firstChild||(!cur.attributes.getNamedItem('style')&&!cur.className.length))){return true;}
if(parent&&cur.tagName==="SPAN"&&dom.hasOnlyStyle(cur)&&!dom.hasProgrammaticStyle(cur)){return true;}};dom.doMerge=function(prev,cur){if(prev.tagName){if(prev.childNodes.length&&!prev.textContent.match(/\S/)&&dom.firstElementChild(prev)&&dom.isBR(dom.firstElementChild(prev))){prev.removeChild(dom.firstElementChild(prev));}
if(cur.tagName){while(cur.firstChild){prev.appendChild(cur.firstChild);}
cur.parentNode.removeChild(cur);}else{prev.appendChild(cur);}}else{if(cur.tagName){var deep=cur;while(deep.tagName&&deep.firstChild){deep=deep.firstChild;}
prev.appendData(deep.textContent);cur.parentNode.removeChild(cur);}else{prev.appendData(cur.textContent);cur.parentNode.removeChild(cur);}}};dom.merge=function(node,begin,so,end,eo,mergeFilter,all){mergeFilter=mergeFilter||dom.mergeFilter;var _merged=false;var add=all||false;if(!begin){begin=node;while(begin.firstChild){begin=begin.firstChild;}
so=0;}else if(begin.tagName&&begin.childNodes[so]){begin=begin.childNodes[so];so=0;}
if(!end){end=node;while(end.lastChild){end=end.lastChild;}
eo=end.textContent.length-1;}else if(end.tagName&&end.childNodes[so]){end=end.childNodes[so];so=0;}
begin=dom.firstChild(begin);if(dom.isText(begin)&&so>begin.textContent.length){so=0;}
end=dom.firstChild(end);if(dom.isText(end)&&eo>end.textContent.length){eo=0;}
function __merge(node){var merged=false;var prev;for(var k=0;k<node.childNodes.length;k++){var cur=node.childNodes[k];if(cur===begin){if(!all)add=true;}
__merge(cur);dom.orderClass(dom.node(cur));if(!add||!cur)continue;if(cur===end){if(!all)add=false;}
if(!prev){if(mergeFilter.call(dom,prev,cur,node)){prev=prev||cur.previousSibling;dom.moveTo(cur,cur.parentNode,cur);k--;}else{prev=cur;}
continue;}else if(mergeFilter.call(dom,null,cur,node)){prev=prev||cur.previousSibling;dom.moveTo(cur,cur.parentNode,cur);k--;continue;}
if(mergeFilter.call(dom,prev,cur,node)){var p=prev;var c=cur;if(prev.tagName){if(cur.tagName){if(cur===begin)begin=prev;if(cur===end)end=prev;}}else{if(cur.tagName){var deep=cur;while(deep.tagName&&deep.lastChild){deep=deep.lastChild;}
if(deep===begin){so+=prev.textContent.length;begin=prev;}
if(deep===end){eo+=prev.textContent.length;end=prev;}}else{if(cur===begin){so+=prev.textContent.length;begin=prev;}
if(cur===end){eo+=prev.textContent.length;end=prev;}}}
dom.doMerge(p,c);merged=true;k--;continue;}
prev=cur;}
if(merged){_merged=true;__merge(node);}}
if(node){__merge(node);}
return{merged:_merged,sc:begin,ec:end,so:so,eo:eo};};dom.autoMerge=function(target,previous){var node=dom.lastChild(target);var nodes=[];var temp;while(node){nodes.push(node);temp=(previous?dom.hasContentBefore(node):dom.hasContentAfter(node));if(temp){if(!dom.isText(node)&&!dom.isMergable(node)&&temp.tagName!==node.tagName){nodes=[];}
break;}
node=node.parentNode;}
while(nodes.length){node=nodes.pop();if(node&&(temp=(previous?dom.hasContentBefore(node):dom.hasContentAfter(node)))&&temp.tagName===node.tagName&&!dom.isText(node)&&dom.isMergable(node)&&!dom.isNotBreakable(node)&&!dom.isNotBreakable(previous?dom.previousElementSibling(node):dom.nextElementSibling(node))){if(previous){dom.doMerge(temp,node);}else{dom.doMerge(node,temp);}}}};dom.removeSpace=function(node,begin,so,end,eo){var removed=false;var add=node===begin;if(node===begin&&begin===end&&dom.isBR(node)){return{removed:removed,sc:begin,ec:end,so:so,eo:eo};}
(function __remove_space(node){if(!node)return;var t_begin,t_end;for(var k=0;k<node.childNodes.length;k++){var cur=node.childNodes[k];if(cur===begin)add=true;if(cur.tagName&&cur.tagName!=="SCRIPT"&&cur.tagName!=="STYLE"&&dom.getComputedStyle(cur).whiteSpace!=="pre"){__remove_space(cur);}
if(!add)continue;if(cur===end)add=false;if(node.childNodes.length>1&&dom.isText(cur)&&!dom.isVisibleText(cur)){removed=true;if(cur===begin){t_begin=dom.hasContentBefore(dom.ancestorHavePreviousSibling(cur));if(t_begin){so=0;begin=dom.lastChild(t_begin);}}
if(cur===end){t_end=dom.hasContentAfter(dom.ancestorHaveNextSibling(cur));if(t_end){eo=1;end=dom.firstChild(t_end);if(dom.isText(end)){eo=end.textContent.length;}}}
cur.parentNode.removeChild(cur);begin=dom.lastChild(begin);end=dom.lastChild(end);k--;continue;}
if(dom.isText(cur)){var text;var temp;var _temp;var exp1=/[\t\n\r ]+/g;var exp2=/(?!([ ]|\u00A0)|^)\u00A0(?!([ ]|\u00A0)|$)/g;if(cur===begin){temp=cur.textContent.substr(0,so);_temp=temp.replace(exp1,' ').replace(exp2,' ');so-=temp.length-_temp.length;}
if(cur===end){temp=cur.textContent.substr(0,eo);_temp=temp.replace(exp1,' ').replace(exp2,' ');eo-=temp.length-_temp.length;}
text=cur.textContent.replace(exp1,' ').replace(exp2,' ');removed=removed||cur.textContent.length!==text.length;cur.textContent=text;}}})(node);return{removed:removed,sc:begin,ec:end,so:!dom.isBR(begin)&&so>0?so:0,eo:dom.isBR(end)?0:eo};};dom.removeBetween=function(sc,so,ec,eo,towrite){var text;if(ec.tagName){if(ec.childNodes[eo]){ec=ec.childNodes[eo];eo=0;}else{ec=dom.lastChild(ec);eo=dom.nodeLength(ec);}}
if(sc.tagName){sc=sc.childNodes[so]||dom.firstChild(ec);so=0;if(!dom.hasContentBefore(sc)&&towrite){sc.parentNode.insertBefore(document.createTextNode('\u00A0'),sc);}}
if(!eo&&sc!==ec){ec=dom.lastChild(dom.hasContentBefore(dom.ancestorHavePreviousSibling(ec))||ec);eo=ec.textContent.length;}
var ancestor=dom.commonAncestor(sc.tagName?sc.parentNode:sc,ec.tagName?ec.parentNode:ec)||dom.ancestor(sc,dom.isEditable);if(!dom.isContentEditable(ancestor)){return{sc:sc,so:so,ec:sc,eo:eo};}
if(ancestor.tagName){var ancestor_sc=sc;var ancestor_ec=ec;while(ancestor!==ancestor_sc&&ancestor!==ancestor_sc.parentNode){ancestor_sc=ancestor_sc.parentNode;}
while(ancestor!==ancestor_ec&&ancestor!==ancestor_ec.parentNode){ancestor_ec=ancestor_ec.parentNode;}
var node=dom.node(sc);if(!dom.isNotBreakable(node)&&!dom.isVoid(sc)){sc=dom.splitTree(ancestor_sc,{'node':sc,'offset':so});}
var before=dom.hasContentBefore(dom.ancestorHavePreviousSibling(sc));var after;if(ec.textContent.slice(eo,Infinity).match(/\S|\u00A0/)){after=dom.splitTree(ancestor_ec,{'node':ec,'offset':eo});}else{after=dom.hasContentAfter(dom.ancestorHaveNextSibling(ec));}
var nodes=dom.listBetween(sc,ec);var ancestor_first_last=function(node){return node===before||node===after;};for(var i=0;i<nodes.length;i++){if(!dom.ancestor(nodes[i],ancestor_first_last)&&!$.contains(nodes[i],before)&&!$.contains(nodes[i],after)&&!dom.isEditable(nodes[i])){nodes[i].parentNode.removeChild(nodes[i]);}}
if(dom.listAncestor(after).length<=dom.listAncestor(before).length){sc=dom.lastChild(before||ancestor);so=dom.nodeLength(sc);}else{sc=dom.firstChild(after);so=0;}
if(dom.isVoid(node)){}else if(towrite&&!node.firstChild&&node.parentNode&&!dom.isNotBreakable(node)){var br=$("<br/>")[0];node.appendChild(sc);sc=br;so=0;}else if(!ancestor.children.length&&!ancestor.textContent.match(/\S|\u00A0/)){sc=$("<br/>")[0];so=0;$(ancestor).prepend(sc);}else if(dom.isText(sc)){text=sc.textContent.replace(/[ \t\n\r]+$/,'\u00A0');so=Math.min(so,text.length);sc.textContent=text;}}else{text=ancestor.textContent;ancestor.textContent=text.slice(0,so)+text.slice(eo,Infinity).replace(/^[ \t\n\r]+/,'\u00A0');}
eo=so;if(!dom.isBR(sc)&&!dom.isVisibleText(sc)&&!dom.isText(dom.hasContentBefore(sc))&&!dom.isText(dom.hasContentAfter(sc))){ancestor=dom.node(sc);text=document.createTextNode('\u00A0');$(sc).before(text);sc=text;so=0;eo=1;}
var parentNode=sc&&sc.parentNode;if(parentNode&&sc.tagName==='BR'){sc=parentNode;ec=parentNode;}
return{sc:sc,so:so,ec:sc,eo:eo};};dom.indent=function(node){var style=dom.isCell(node)?'paddingLeft':'marginLeft';var margin=parseFloat(node.style[style]||0)+1.5;node.style[style]=margin+"em";return margin;};dom.outdent=function(node){var style=dom.isCell(node)?'paddingLeft':'marginLeft';var margin=parseFloat(node.style[style]||0)-1.5;node.style[style]=margin>0?margin+"em":"";return margin;};dom.scrollIntoViewIfNeeded=function(node){node=dom.node(node);var $span;if(dom.isBR(node)){$span=$('<span/>').text('\u00A0');$(node).after($span);node=$span[0];}
if(node.scrollIntoViewIfNeeded){node.scrollIntoViewIfNeeded(false);}else{var offsetParent=node.offsetParent;while(offsetParent){var elY=0;var elH=node.offsetHeight;var parent=node;while(offsetParent&&parent){elY+=node.offsetTop;parent=node.parentNode;while(parent!==offsetParent&&(parent.tagName==="BODY"||["auto","scroll"].indexOf(dom.getComputedStyle(parent).overflowY)===-1)){parent=parent.parentNode;}
node=parent;if(parent!==offsetParent){elY-=parent.offsetTop;parent=null;}
offsetParent=node.offsetParent;}
if((node.tagName==="BODY"||["auto","scroll"].indexOf(dom.getComputedStyle(node).overflowY)!==-1)&&(node.scrollTop+node.clientHeight)<(elY+elH)){node.scrollTop=(elY+elH)-node.clientHeight;}}}
if($span){$span.remove();}
return;};dom.moveTo=function(node,target,before){var nodes=[];while(node.firstChild){nodes.push(node.firstChild);if(before){target.insertBefore(node.firstChild,before);}else{target.appendChild(node.firstChild);}}
node.parentNode.removeChild(node);return nodes;};dom.isMergable=function(node){return node.tagName&&"h1 h2 h3 h4 h5 h6 p b bold i u code sup strong small li a ul ol font".indexOf(node.tagName.toLowerCase())!==-1;};dom.isSplitable=function(node){return node.tagName&&"h1 h2 h3 h4 h5 h6 p b bold i u code sup strong small li a font".indexOf(node.tagName.toLowerCase())!==-1;};dom.isRemovableEmptyNode=function(node){return"h1 h2 h3 h4 h5 h6 p b bold i u code sup strong small li a ul ol font span br".indexOf(node.tagName.toLowerCase())!==-1;};dom.isForbiddenNode=function(node){return node.tagName==="BR"||$(node).is(".fa, img");};dom.listBetween=function(sc,ec,so,eo){var nodes=[];var ancestor=dom.commonAncestor(sc,ec);dom.walkPoint({'node':sc,'offset':so||0},{'node':ec,'offset':eo||0},function(point){if(ancestor!==point.node||ancestor===sc||ancestor===ec){nodes.push(point.node);}});return list.unique(nodes);};dom.isNotBreakable=function(node){return!dom.isText(node)&&!dom.isBR(dom.firstChild(node))&&dom.isVoid(dom.firstChild(node));};dom.isContentEditable=function(node){return $(node).closest('[contenteditable]').prop('contenteditable')==='true';};dom.isContentEditableFalse=function(node){return $(node).closest('[contenteditable]').prop('contenteditable')==='false';};dom.isFont=function(node){var nodeName=node&&node.nodeName.toUpperCase();return node&&(nodeName==="FONT"||(nodeName==="SPAN"&&(node.className.match(/(^|\s)fa(\s|$)/i)||node.className.match(/(^|\s)(text|bg)-/i)||(node.attributes.style&&node.attributes.style.value.match(/(^|\s)(color|background-color|font-size):/i)))));};dom.isVisibleText=function(textNode){return!!textNode.textContent.match(/\S|\u00A0/);};var old_isVisiblePoint=dom.isVisiblePoint;dom.isVisiblePoint=function(point){return point.node.nodeType!==8&&old_isVisiblePoint.apply(this,arguments);};dom.orderStyle=function(node){var style=node.getAttribute('style');if(!style)return null;style=style.replace(/[\s\n\r]+/,' ').replace(/^ ?;? ?| ?;? ?$/g,'').replace(/ ?; ?/g,';');if(!style.length){node.removeAttribute("style");return null;}
style=style.split(";");style.sort();style=style.join("; ")+";";node.setAttribute('style',style);return style;};dom.orderClass=function(node){var className=node.getAttribute&&node.getAttribute('class');if(!className)return null;className=className.replace(/[\s\n\r]+/,' ').replace(/^ | $/g,'').replace(/ +/g,' ');if(!className.length){node.removeAttribute("class");return null;}
className=className.split(" ");className.sort();className=className.join(" ");node.setAttribute('class',className);return className;};dom.node=function(node){return dom.isText(node)?node.parentNode:node;};dom.moveContent=function(from,to){if(from===to){return;}
if(from.parentNode===to){while(from.lastChild){dom.insertAfter(from.lastChild,from);}}else{while(from.firstChild&&from.firstChild!==to){to.appendChild(from.firstChild);}}};dom.getComputedStyle=function(node){return node.nodeType===Node.COMMENT_NODE?{}:window.getComputedStyle(node);};range.WrappedRange.prototype.reRange=function(keep_end,isNotBreakable){var sc=this.sc;var so=this.so;var ec=this.ec;var eo=this.eo;isNotBreakable=isNotBreakable||dom.isNotBreakable;var start=keep_end?ec:sc;while(start){if(isNotBreakable(start,sc,so,ec,eo)){break;}
start=start.parentNode;}
var lastFilterEnd;var end=keep_end?sc:ec;while(end){if(start===end){break;}
if(isNotBreakable(end,sc,so,ec,eo)){lastFilterEnd=end;}
end=end.parentNode;}
if(lastFilterEnd){end=lastFilterEnd;}
if(!end){end=document.getElementsByTagName('body')[0];}
if(start===end||!start){return this;}
if($.contains(start,end)){if(keep_end){sc=dom.lastChild(dom.hasContentBefore(dom.ancestorHavePreviousSibling(end))||sc);so=sc.textContent.length;}else if(!eo){ec=dom.lastChild(dom.hasContentBefore(dom.ancestorHavePreviousSibling(end))||ec);eo=ec.textContent.length;}else{ec=dom.firstChild(dom.hasContentAfter(dom.ancestorHaveNextSibling(end))||ec);eo=0;}}else{if(keep_end){sc=dom.firstChild(start);so=0;}else{ec=dom.lastChild(start);eo=ec.textContent.length;}}
return new range.WrappedRange(sc,so,ec,eo);};range.WrappedRange.prototype.isOnImg=function(){if(this.sc===this.ec&&this.so===this.eo){return dom.ancestor(this.sc,dom.isImg);}
var startPoint={node:this.sc,offset:this.so};var endPoint={node:this.ec,offset:this.eo};var nb=0;var image;var textNode;dom.walkPoint(startPoint,endPoint,function(point){if(dom.hasChildren(point.node)){return;}
var pointImg=dom.ancestor(point.node,dom.isImg);var isText=dom.isText(point.node);if(pointImg?(image!==pointImg):((!dom.isBR(point.node)&&!isText)||(textNode===point.node&&point.node.textContent.match(/\S|\u00A0/)))){nb++;}
if(pointImg){image=pointImg;}
if(isText){textNode=point.node;}});return nb===1&&image;};range.WrappedRange.prototype.deleteContents=function(towrite){if(this.sc===this.ec&&this.so===this.eo){return this;}
var r;var image=this.isOnImg();if(image){var parentNode=image.parentNode;var index=_.indexOf(parentNode.childNodes,image);parentNode.removeChild(image);r=new range.WrappedRange(parentNode,index,parentNode,index);}else{r=dom.removeBetween(this.sc,this.so,this.ec,this.eo,towrite);}
$(dom.node(r.sc)).trigger("click");return new range.WrappedRange(r.sc,r.so,r.ec,r.eo);};range.WrappedRange.prototype.clean=function(mergeFilter,all){var node=dom.node(this.sc===this.ec?this.sc:this.commonAncestor());node=node||$(this.sc).closest('[contenteditable]')[0];if(node.childNodes.length<=1){return this;}
var merge=dom.merge(node,this.sc,this.so,this.ec,this.eo,mergeFilter,all);var rem=dom.removeSpace(node.parentNode,merge.sc,merge.so,merge.ec,merge.eo);if(merge.merged||rem.removed){return range.create(rem.sc,rem.so,rem.ec,rem.eo);}
return this;};range.WrappedRange.prototype.remove=function(mergeFilter){};range.WrappedRange.prototype.isOnCellFirst=function(){var node=dom.ancestor(this.sc,function(node){return["LI","DIV","TD","TH"].indexOf(node.tagName)!==-1;});return node&&["TD","TH"].indexOf(node.tagName)!==-1;};range.WrappedRange.prototype.isContentEditable=function(){return dom.isContentEditable(this.sc)&&(this.sc===this.ec||dom.isContentEditable(this.ec));};renderer.tplButtonInfo.fontsize=function(lang,options){var items=options.fontSizes.reduce(function(memo,v){return memo+'<a data-event="fontSize" href="#" class="dropdown-item" data-value="'+v+'">'+'<i class="fa fa-check"></i> '+v+'</a>';},'');var sLabel='<span class="note-current-fontsize">11</span>';return renderer.getTemplate().button(sLabel,{title:lang.font.size,dropdown:'<div class="dropdown-menu">'+items+'</div>'});};renderer.tplButtonInfo.color=function(lang,options){var foreColorButtonLabel='<i class="'+options.iconPrefix+options.icons.color.recent+'"></i>';var backColorButtonLabel='<i class="'+options.iconPrefix+'paint-brush"></i>';var recentColorButton=renderer.getTemplate().button(foreColorButtonLabel,{className:'note-recent-color d-none',title:lang.color.foreground,event:'color',value:'{"backColor":"#B35E9B"}'});var foreColorButton=renderer.getTemplate().button(foreColorButtonLabel,{className:'note-fore-color-preview',title:lang.color.foreground,dropdown:renderer.getTemplate().dropdown('<li><div data-event-name="foreColor" class="colorPalette"/></li>'),});var backColorButton=renderer.getTemplate().button(backColorButtonLabel,{className:'note-back-color-preview',title:lang.color.background,dropdown:renderer.getTemplate().dropdown('<li><div data-event-name="backColor" class="colorPalette"/></li>'),});return recentColorButton+foreColorButton+backColorButton;};renderer.tplButtonInfo.checklist=function(lang,options){return'<button '+'type="button" '+'class="btn btn-secondary btn-sm" '+'title="'+_t('Checklist')+'" '+'data-event="insertCheckList" '+'tabindex="-1" '+'data-name="ul" '+'><i class="fa fa-check-square"></i></button>';};key.nameFromCode[46]='DELETE';key.nameFromCode[27]='ESCAPE';options.keyMap.pc['BACKSPACE']='backspace';options.keyMap.pc['DELETE']='delete';options.keyMap.pc['ENTER']='enter';options.keyMap.pc['ESCAPE']='cancel';options.keyMap.mac['SHIFT+TAB']='untab';options.keyMap.pc['UP']='up';options.keyMap.pc['DOWN']='down';options.keyMap.mac['BACKSPACE']='backspace';options.keyMap.mac['DELETE']='delete';options.keyMap.mac['ENTER']='enter';options.keyMap.mac['ESCAPE']='cancel';options.keyMap.mac['UP']='up';options.keyMap.mac['DOWN']='down';options.styleTags=weDefaultOptions.styleTags;$.summernote.pluginEvents.insertTable=function(event,editor,layoutInfo,sDim){var $editable=layoutInfo.editable();$editable.focus();var dimension=sDim.split('x');var r=range.create();if(!r)return;r=r.deleteContents(true);var table=editor.table.createTable(dimension[0],dimension[1]);var parent=r.sc;while(dom.isText(parent.parentNode)||dom.isRemovableEmptyNode(parent.parentNode)){parent=parent.parentNode;}
var node=dom.splitTree(parent,{'node':r.sc,'offset':r.so})||r.sc;node.parentNode.insertBefore(table,node);if($(node).text()===''||node.textContent==='\u00A0'){node.parentNode.removeChild(node);}
editor.afterCommand($editable);event.preventDefault();return false;};$.summernote.pluginEvents.tab=function(event,editor,layoutInfo,outdent){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable,'tab');var r=range.create();outdent=outdent||false;event.preventDefault();if(r&&(dom.ancestor(r.sc,dom.isCell)||dom.ancestor(r.ec,dom.isCell))){if(r.isCollapsed()&&r.isOnCell()&&r.isOnCellFirst()){var td=dom.ancestor(r.sc,dom.isCell);if(!outdent&&!dom.nextElementSibling(td)&&!dom.nextElementSibling(td.parentNode)){var last=dom.lastChild(td);range.create(last,dom.nodeLength(last),last,dom.nodeLength(last)).select();$.summernote.pluginEvents.enter(event,editor,layoutInfo);}else if(outdent&&!dom.previousElementSibling(td)&&!$(td.parentNode).text().match(/\S/)){$.summernote.pluginEvents.backspace(event,editor,layoutInfo);}else{editor.table.tab(r,outdent);}}else{$.summernote.pluginEvents.indent(event,editor,layoutInfo,outdent);}}else if(r&&r.isCollapsed()){if(!r.sc.textContent.slice(0,r.so).match(/\S/)&&r.isOnList()){if(outdent){$.summernote.pluginEvents.outdent(event,editor,layoutInfo);}else{$.summernote.pluginEvents.indent(event,editor,layoutInfo);}}else{var next;if(!outdent){if(dom.isText(r.sc)){next=r.sc.splitText(r.so);}else{next=document.createTextNode('');$(r.sc.childNodes[r.so]).before(next);}
editor.typing.insertTab($editable,r,options.tabsize);r=range.create(next,0,next,0);r=dom.merge(r.sc.parentNode,r.sc,r.so,r.ec,r.eo,null,true);range.create(r.sc,r.so,r.ec,r.eo).select();}else{r=dom.merge(r.sc.parentNode,r.sc,r.so,r.ec,r.eo,null,true);r=range.create(r.sc,r.so,r.ec,r.eo);if(r.sc.splitText){next=r.sc.splitText(r.so);r.sc.textContent=r.sc.textContent.replace(/(\u00A0)+$/g,'');next.textContent=next.textContent.replace(/^(\u00A0)+/g,'');range.create(r.sc,r.sc.textContent.length,r.sc,r.sc.textContent.length).select();}}}}
return false;};$.summernote.pluginEvents.untab=function(event,editor,layoutInfo){return $.summernote.pluginEvents.tab(event,editor,layoutInfo,true);};$.summernote.pluginEvents.up=function(event,editor,layoutInfo){var r=range.create();var node=dom.firstChild(r.sc.childNodes[r.so]||r.sc);if(!r.isOnCell()){return;}
var ancestor=dom.ancestor(node,function(ancestorNode){return dom.hasContentBefore(ancestorNode)||dom.isCell(ancestorNode);});if(!dom.isCell(ancestor)&&(!dom.isBR(dom.hasContentBefore(ancestor))||!dom.isText(node)||dom.isVisibleText(node)||dom.hasContentBefore(dom.hasContentBefore(ancestor)))){return;}
event.preventDefault();var td=dom.ancestor(r.sc,dom.isCell);var tr=td.parentNode;var target=tr.previousElementSibling&&tr.previousElementSibling.children[_.indexOf(tr.children,td)];if(!target){target=(dom.ancestorHavePreviousSibling(tr)||tr).previousSibling;}
if(target){range.create(dom.lastChild(target),dom.lastChild(target).textContent.length).select();}};$.summernote.pluginEvents.down=function(event,editor,layoutInfo){var r=range.create();var node=dom.firstChild(r.sc.childNodes[r.so]||r.sc);if(!r.isOnCell()){return;}
var ancestor=dom.ancestor(node,function(ancestorNode){return dom.hasContentAfter(ancestorNode)||dom.isCell(ancestorNode);});if(!dom.isCell(ancestor)&&(!dom.isBR(dom.hasContentAfter(ancestor))||!dom.isText(node)||dom.isVisibleText(node)||dom.hasContentAfter(dom.hasContentAfter(ancestor)))){return;}
event.preventDefault();var td=dom.ancestor(r.sc,dom.isCell);var tr=td.parentNode;var target=tr.nextElementSibling&&tr.nextElementSibling.children[_.indexOf(tr.children,td)];if(!target){target=(dom.ancestorHaveNextSibling(tr)||tr).nextSibling;}
if(target){range.create(dom.firstChild(target),0).select();}};$.summernote.pluginEvents.enter=function(event,editor,layoutInfo){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable,'enter');var r=range.create();if(!r.isContentEditable()){event.preventDefault();return false;}
if(!r.isCollapsed()){r=r.deleteContents();r.select();}
var br=$("<br/>")[0];var elem=dom.isBR(elem)?elem.parentNode:dom.node(r.sc);if(elem.tagName==="A"){if(r.so===0&&dom.firstChild(elem)===r.sc){r.ec=r.sc=dom.hasContentBefore(elem)||$(dom.createText('')).insertBefore(elem)[0];r.eo=r.so=dom.nodeLength(r.sc);r.select();}else if(dom.nodeLength(r.sc)===r.so&&dom.lastChild(elem)===r.sc){r.ec=r.sc=dom.hasContentAfter(elem)||dom.insertAfter(dom.createText(''),elem);r.eo=r.so=0;r.select();}}
var node;var $node;var $clone;var contentBefore=r.sc.textContent.slice(0,r.so).match(/\S|\u00A0/);if(!contentBefore&&dom.isText(r.sc)){node=r.sc.previousSibling;while(!contentBefore&&node&&dom.isText(node)){contentBefore=dom.isVisibleText(node);node=node.previousSibling;}}
node=dom.node(r.sc);var exist=r.sc.childNodes[r.so]||r.sc;exist=dom.isVisibleText(exist)||dom.isBR(exist)?exist:dom.hasContentAfter(exist)||(dom.hasContentBefore(exist)||exist);var td=dom.ancestor(node,dom.isCell);if(td&&!dom.nextElementSibling(node)&&!dom.nextElementSibling(td)&&!dom.nextElementSibling(td.parentNode)&&(!dom.isText(r.sc)||!r.sc.textContent.slice(r.so).match(/\S|\u00A0/))){$node=$(td.parentNode);$clone=$node.clone();$clone.children().html(dom.blank);$node.after($clone);node=dom.firstElementChild($clone[0])||$clone[0];range.create(node,0,node,0).select();dom.scrollIntoViewIfNeeded(br);event.preventDefault();return false;}
var last=node;while(node&&dom.isSplitable(node)&&!dom.isList(node)){last=node;node=node.parentNode;}
if(last===node&&!dom.isBR(node)){node=r.insertNode(br,true);if(isFormatNode(last.firstChild)&&$(last).closest(options.styleTags.join(',')).length){dom.moveContent(last.firstChild,last);last.removeChild(last.firstChild);}
do{node=dom.hasContentAfter(node);}while(node&&dom.isBR(node));if(!node&&(!br.nextElementSibling||!dom.isBR(br.nextElementSibling))){$(br).before($("<br/>")[0]);}
node=br.nextSibling||br;}else if(last===node&&dom.isBR(node)){$(node).after(br);node=br;}else if(!r.so&&r.isOnList()&&!r.sc.textContent.length&&!dom.ancestor(r.sc,dom.isLi).nextElementSibling){$('<p></p>').append(br).insertAfter(dom.ancestor(r.sc,dom.isList));node=br;}else if(dom.isBR(exist)&&$(r.sc).closest('blockquote, pre').length&&!dom.hasContentAfter($(exist.parentNode).closest('blockquote *, pre *').length?exist.parentNode:exist)){$('<p></p>').append(br).insertAfter($(r.sc).closest('blockquote, pre'));node=br;}else if(dom.isEditable(dom.node(r.sc))){node=null;}else if(last===r.sc){if(dom.isBR(last)){last=last.parentNode;}
$node=$(last);$clone=$node.clone().text("");$node.after($clone);node=dom.node(dom.firstElementChild($clone[0])||$clone[0]);$(node).html(br);node=br;}else{node=dom.splitTree(last,{'node':r.sc,'offset':r.so})||r.sc;if(!contentBefore){var cur=dom.node(dom.lastChild(node.previousSibling));if(!dom.isBR(cur)){$(cur).html(cur.innerHTML+br.outerHTML);}}
if(!dom.isVisibleText(node)){node=dom.firstChild(node);$(dom.node(dom.isBR(node)?node.parentNode:node)).html(br);node=br;}}
if(node){node=dom.firstChild(node);if(dom.isBR(node)){range.createFromNode(node).select();}else{range.create(node,0).select();}
dom.scrollIntoViewIfNeeded(node);}
event.preventDefault();return false;};$.summernote.pluginEvents.visible=function(event,editor,layoutInfo){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable,"visible");var r=range.create();if(!r)return;if(!r.isCollapsed()){if((dom.isCell(dom.node(r.sc))||dom.isCell(dom.node(r.ec)))&&dom.node(r.sc)!==dom.node(r.ec)){remove_table_content(r);r=range.create(r.ec,0);}
r.select();}
var node=dom.firstChild(r.sc.tagName&&r.so?r.sc.childNodes[r.so]||r.sc:r.sc);while(node.parentNode){if(dom.isForbiddenNode(node)){var text=node.previousSibling;if(text&&dom.isText(text)&&dom.isVisibleText(text)){range.create(text,text.textContent.length,text,text.textContent.length).select();}else{text=node.parentNode.insertBefore(document.createTextNode("."),node);range.create(text,1,text,1).select();setTimeout(function(){var text=range.create().sc;text.textContent=text.textContent.replace(/^./,'');range.create(text,text.textContent.length,text,text.textContent.length).select();},0);}
break;}
node=node.parentNode;}
return true;};function remove_table_content(r){var nodes=dom.listBetween(r.sc,r.ec,r.so,r.eo);if(dom.isText(r.sc)){r.sc.textContent=r.sc.textContent.slice(0,r.so);}
if(dom.isText(r.ec)){r.ec.textContent=r.ec.textContent.slice(r.eo);}
for(var i in nodes){var node=nodes[i];if(node===r.sc||node===r.ec||$.contains(node,r.sc)||$.contains(node,r.ec)){continue;}else if(dom.isCell(node)){$(node).html("<br/>");}else if(node.parentNode){do{var parent=node.parentNode;parent.removeChild(node);node=parent;}while(!dom.isVisibleText(node)&&!dom.firstElementChild(node)&&!dom.isCell(node)&&node.parentNode&&!$(node.parentNode).hasClass('o_editable'));}}
return false;}
$.summernote.pluginEvents.delete=function(event,editor,layoutInfo){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable,"delete");var r=range.create();if(!r)return;if(!r.isContentEditable()){event.preventDefault();return false;}
if(!r.isCollapsed()){if(dom.isCell(dom.node(r.sc))||dom.isCell(dom.node(r.ec))){remove_table_content(r);range.create(r.ec,0).select();}else{r=r.deleteContents();r.select();}
event.preventDefault();return false;}
var target=r.ec;var offset=r.eo;if(target.tagName&&target.childNodes[offset]){target=target.childNodes[offset];offset=0;}
var node=dom.node(target);var data=dom.merge(node,target,offset,target,offset,null,true);data=dom.removeSpace(node.parentNode,data.sc,data.so,data.ec,data.eo);r=range.create(data.sc,data.so);r.select();target=r.sc;offset=r.so;while(!dom.hasContentAfter(node)&&!dom.hasContentBefore(node)&&!dom.isImg(node)){node=node.parentNode;}
var contentAfter=target.textContent.slice(offset,Infinity).match(/\S|\u00A0/);var content=target.textContent.replace(/[ \t\r\n]+$/,'');var temp;var temp2;var next;if(dom.isImg(node)||(!contentAfter&&dom.isImg(dom.hasContentAfter(node)))){var parent;var index;if(!dom.isImg(node)){node=dom.hasContentAfter(node);}
while(dom.isImg(node)){parent=node.parentNode;index=dom.position(node);if(index>0){next=node.previousSibling;r=range.create(next,next.textContent.length);}else{r=range.create(parent,0);}
if(!dom.hasContentAfter(node)&&!dom.hasContentBefore(node)){parent.appendChild($('<br/>')[0]);}
parent.removeChild(node);node=parent;r.select();}}
else if(!content.length&&target.tagName&&dom.isRemovableEmptyNode(dom.isBR(target)?target.parentNode:target)){if(node===$editable[0]||$.contains(node,$editable[0])){event.preventDefault();return false;}
var before=false;next=dom.hasContentAfter(dom.ancestorHaveNextSibling(node));if(!dom.isContentEditable(next)){before=true;next=dom.hasContentBefore(dom.ancestorHavePreviousSibling(node));}
dom.removeSpace(next.parentNode,next,0,next,0);next=dom.firstChild(next);node.parentNode.removeChild(node);range.create(next,before?next.textContent.length:0).select();}
else if(contentAfter){return true;}
else if(dom.isText(target)&&(temp=dom.hasContentAfter(target))&&dom.isText(temp)){return true;}
else if((temp=dom.ancestorHaveNextSibling(target))&&!r.isOnCell()&&dom.isMergable(temp)&&dom.isMergable(temp2=dom.hasContentAfter(temp))&&temp.tagName===temp2.tagName&&(temp.tagName!=="LI"||!$('ul,ol',temp).length)&&(temp2.tagName!=="LI"||!$('ul,ol',temp2).length)&&!dom.isNotBreakable(temp)&&!dom.isNotBreakable(temp2)){dom.autoMerge(target,false);next=dom.firstChild(dom.hasContentAfter(dom.ancestorHaveNextSibling(target)));if(dom.isBR(next)){if(dom.position(next)===0){range.create(next.parentNode,0).select();}
else{range.create(next.previousSibling,next.previousSibling.textContent.length).select();}
next.parentNode.removeChild(next);}else{range.create(next,0).select();}}
else if((temp=dom.ancestorHaveNextSibling(target))&&(temp2=dom.hasContentAfter(temp))&&dom.isContentEditable(temp2)){dom.removeSpace(temp2.parentNode,temp2,0,temp,0);temp2=dom.firstChild(temp2);r=range.create(temp2,0);r.select();if((dom.isText(temp)||dom.getComputedStyle(temp).display==="inline")&&(dom.isText(temp2)||dom.getComputedStyle(temp2).display==="inline")){if(dom.isText(temp2)){temp2.textContent=temp2.textContent.replace(/^\s*\S/,'');}else{$.summernote.pluginEvents.delete(event,editor,layoutInfo);}}}
$(dom.node(r.sc)).trigger("click");event.preventDefault();return false;};$.summernote.pluginEvents.backspace=function(event,editor,layoutInfo){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable,"backspace");var r=range.create();if(!r)return;if(!r.isContentEditable()){event.preventDefault();return false;}
if(!r.isCollapsed()){if(dom.isCell(dom.node(r.sc))||dom.isCell(dom.node(r.ec))){remove_table_content(r);range.create(r.sc,dom.nodeLength(r.sc)).select();}else{r=r.deleteContents();r.select();}
event.preventDefault();return false;}
var target=r.sc;var offset=r.so;if(target.tagName&&target.childNodes[offset]){target=target.childNodes[offset];offset=0;}
var node=dom.node(target);var data=dom.merge(node,target,offset,target,offset,null,true);data=dom.removeSpace(node.parentNode,data.sc,data.so,data.ec,data.eo);r=dom.isVoid(data.sc)?range.createFromNode(data.sc):range.create(data.sc,data.so);r.select();target=r.sc;offset=r.so;if(target.tagName&&target.childNodes[offset]){target=target.childNodes[offset];offset=0;node=dom.node(target);}
while(node.parentNode&&!dom.hasContentAfter(node)&&!dom.hasContentBefore(node)&&!dom.isImg(node)){node=node.parentNode;}
var contentBefore=target.textContent.slice(0,offset).match(/\S|\u00A0/);var content=target.textContent.replace(/[ \t\r\n]+$/,'');var temp;var temp2;var prev;if(dom.isImg(node)||(!contentBefore&&dom.isImg(dom.hasContentBefore(node)))){if(!dom.isImg(node)){node=dom.hasContentBefore(node);}
range.createFromNode(node).select();$.summernote.pluginEvents.delete(event,editor,layoutInfo);}
else if(r.isOnCell()&&!offset&&(target===(temp=dom.ancestor(target,dom.isCell))||target===temp.firstChild||(dom.isText(temp.firstChild)&&!dom.isVisibleText(temp.firstChild)&&target===temp.firstChild.nextSibling))){if(dom.previousElementSibling(temp)){var td=dom.previousElementSibling(temp);node=td.lastChild||td;}else{var tr=temp.parentNode;var prevTr=dom.previousElementSibling(tr);if(!$(temp.parentNode).text().match(/\S|\u00A0/)){if(prevTr){node=dom.lastChild(dom.lastElementChild(prevTr));}else{node=dom.lastChild(dom.hasContentBefore(dom.ancestorHavePreviousSibling(tr))||$editable.get(0));}
$(tr).empty();if(!$(tr).closest('table').has('td, th').length){$(tr).closest('table').remove();}
$(tr).remove();range.create(node,node.textContent.length,node,node.textContent.length).select();}else{node=dom.lastElementChild(prevTr).lastChild||dom.lastElementChild(prevTr);}}
if(dom.isBR(node)){range.createFromNode(node).select();}else{range.create(node,dom.nodeLength(node)).select();}}
else if(!content.length&&target.tagName&&dom.isRemovableEmptyNode(target)){if(node===$editable[0]||$.contains(node,$editable[0])){event.preventDefault();return false;}
var before=true;prev=dom.hasContentBefore(dom.ancestorHavePreviousSibling(node));if(!dom.isContentEditable(prev)){before=false;prev=dom.hasContentAfter(dom.ancestorHaveNextSibling(node));}
dom.removeSpace(prev.parentNode,prev,0,prev,0);prev=dom.lastChild(prev);node.parentNode.removeChild(node);range.createFromNode(prev).select();range.create(prev,before?prev.textContent.length:0).select();}
else if(contentBefore){return true;}
else if(dom.isText(target)&&(temp=dom.hasContentBefore(target))&&(dom.isText(temp)||dom.isBR(temp))){return true;}
else if((temp=dom.ancestorHavePreviousSibling(target))&&dom.isMergable(temp)&&dom.isMergable(temp2=dom.hasContentBefore(temp))&&temp.tagName===temp2.tagName&&(temp.tagName!=="LI"||!$('ul,ol',temp).length)&&(temp2.tagName!=="LI"||!$('ul,ol',temp2).length)&&!dom.isNotBreakable(temp)&&!dom.isNotBreakable(temp2)){prev=dom.firstChild(target);dom.autoMerge(target,true);range.create(prev,0).select();}
else if((temp=dom.ancestorHavePreviousSibling(target))&&(temp2=dom.hasContentBefore(temp))&&dom.isContentEditable(temp2)){dom.removeSpace(temp2.parentNode,temp2,0,temp,0);temp2=dom.lastChild(temp2);r=range.create(temp2,temp2.textContent.length,temp2,temp2.textContent.length);r.select();if((dom.isText(temp)||dom.getComputedStyle(temp).display==="inline")&&(dom.isText(temp2)||dom.getComputedStyle(temp2).display==="inline")){if(dom.isText(temp2)){temp2.textContent=temp2.textContent.replace(/\S\s*$/,'');}else{$.summernote.pluginEvents.backspace(event,editor,layoutInfo);}}}
r=range.create();if(r){$(dom.node(r.sc)).trigger("click");dom.scrollIntoViewIfNeeded(r.sc.parentNode.previousElementSibling||r.sc);}
event.preventDefault();return false;};function isFormatNode(node){return node.tagName&&options.styleTags.indexOf(node.tagName.toLowerCase())!==-1;}
$.summernote.pluginEvents.insertUnorderedList=function(event,editor,layoutInfo,type){var $editable=layoutInfo.editable();$editable.focus();$editable.data('NoteHistory').recordUndo($editable);type=type||"UL";var sorted=type==="OL";var parent;var r=range.create();if(!r)return;var node=r.sc;while(node&&node!==$editable[0]){parent=node.parentNode;if(node.tagName===(sorted?"UL":"OL")){var ul=document.createElement(sorted?"ol":"ul");ul.className=node.className;if(type!=='checklist'){ul.classList.remove('o_checklist');}else{ul.classList.add('o_checklist');}
parent.insertBefore(ul,node);while(node.firstChild){ul.appendChild(node.firstChild);}
parent.removeChild(node);r.select();return;}else if(node.tagName===(sorted?"OL":"UL")){if(type==='checklist'&&!node.classList.contains('o_checklist')){node.classList.add('o_checklist');return;}else if(type==='UL'&&node.classList.contains('o_checklist')){node.classList.remove('o_checklist');return;}
var lis=[];for(var i=0;i<node.children.length;i++){lis.push(node.children[i]);}
if(parent.tagName==="LI"){node=parent;parent=node.parentNode;_.each(lis,function(li){parent.insertBefore(li,node);});}else{_.each(lis,function(li){while(li.firstChild){parent.insertBefore(li.firstChild,node);}});}
parent.removeChild(node);r.select();return;}
node=parent;}
var p0=r.sc;while(p0&&p0.parentNode&&p0.parentNode!==$editable[0]&&!isFormatNode(p0)){p0=p0.parentNode;}
if(!p0)return;var p1=r.ec;while(p1&&p1.parentNode&&p1.parentNode!==$editable[0]&&!isFormatNode(p1)){p1=p1.parentNode;}
if(!p0.parentNode||p0.parentNode!==p1.parentNode){return;}
parent=p0.parentNode;ul=document.createElement(sorted?"ol":"ul");if(type==='checklist'){ul.classList.add('o_checklist');}
parent.insertBefore(ul,p0);var childNodes=parent.childNodes;var brs=[];var begin=false;for(i=0;i<childNodes.length;i++){if(begin&&dom.isBR(childNodes[i])){parent.removeChild(childNodes[i]);i--;}
if((!dom.isText(childNodes[i])&&!isFormatNode(childNodes[i]))||(!ul.firstChild&&childNodes[i]!==p0)||$.contains(ul,childNodes[i])||(dom.isText(childNodes[i])&&!childNodes[i].textContent.match(/\S|u00A0/))){continue;}
begin=true;var li=document.createElement('li');ul.appendChild(li);li.appendChild(childNodes[i]);if(li.firstChild===p1){break;}
i--;}
if(dom.isBR(childNodes[i])){parent.removeChild(childNodes[i]);}
for(i=0;i<brs.length;i++){parent.removeChild(brs[i]);}
r.clean().select();event.preventDefault();return false;};$.summernote.pluginEvents.insertOrderedList=function(event,editor,layoutInfo){$.summernote.pluginEvents.insertUnorderedList(event,editor,layoutInfo,"OL");};$.summernote.pluginEvents.insertCheckList=function(event,editor,layoutInfo){$.summernote.pluginEvents.insertUnorderedList(event,editor,layoutInfo,"checklist");$(range.create().sc.parentNode).trigger('input');};$.summernote.pluginEvents.indent=function(event,editor,layoutInfo,outdent){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable);var r=range.create();if(!r)return;var flag=false;function indentUL(UL,start,end){var next;var previous;var tagName=UL.tagName;var node=UL.firstChild;var ul=document.createElement(tagName);ul.className=UL.className;var li=document.createElement("li");li.classList.add('o_indent');li.appendChild(ul);if(flag){flag=1;}
while(node){if(flag===1||node===start||$.contains(node,start)){flag=true;if(previous){if(dom.isList(previous.lastChild)){ul=previous.lastChild;}else{previous.appendChild(ul);}}else{node.parentNode.insertBefore(li,node);}}
next=dom.nextElementSibling(node);if(flag){ul.appendChild(node);}
if(node===end||$.contains(node,end)){flag=false;break;}
previous=node;node=next;}
var temp;var prev=dom.previousElementSibling(li);if(prev&&prev.tagName==="LI"&&(temp=dom.firstElementChild(prev))&&temp.tagName===tagName&&((dom.firstElementChild(prev)||prev.firstChild)!==ul)){dom.doMerge(dom.firstElementChild(prev)||prev.firstChild,ul);li=prev;li.parentNode.removeChild(dom.nextElementSibling(li));}
next=dom.nextElementSibling(li);if(next&&next.tagName==="LI"&&(temp=dom.firstElementChild(next))&&temp.tagName===tagName&&(dom.firstElementChild(li)!==dom.firstElementChild(next))){dom.doMerge(dom.firstElementChild(li),dom.firstElementChild(next));li.parentNode.removeChild(dom.nextElementSibling(li));}}
function outdenttUL(UL,start,end){var next;var node=UL.firstChild;var parent=UL.parentNode;var li=UL.parentNode.tagName==="LI"?UL.parentNode:UL;var ul=UL.parentNode.tagName==="LI"?UL.parentNode.parentNode:UL.parentNode;start=dom.ancestor(start,dom.isLi);end=dom.ancestor(end,dom.isLi);if(ul.tagName!=="UL"&&ul.tagName!=="OL")return;while(node){if(node===start||$.contains(node,start)){flag=true;if(dom.previousElementSibling(node)&&li.tagName==="LI"){li=dom.splitTree(li,dom.prevPoint({'node':node,'offset':0}));}}
next=dom.nextElementSibling(node);if(flag){var $succeeding=$(node).nextAll();ul=node.parentNode;if(dom.previousElementSibling(ul)){dom.insertAfter(node,li);}else{li.parentNode.insertBefore(node,li);}
$succeeding.insertAfter(node);if(!ul.children.length){if(ul.parentNode.tagName==="LI"&&!dom.previousElementSibling(ul)){ul=ul.parentNode;}
ul.parentNode.removeChild(ul);}
flag=false;break;}
if(node===end||$.contains(node,end)){flag=false;break;}
node=next;}
dom.merge(parent,start,0,end,1,null,true);}
function indentOther(p,start,end){if(p===start||$.contains(p,start)||$.contains(start,p)){flag=true;}
if(flag){if(outdent){dom.outdent(p);}else{dom.indent(p);}}
if(p===end||$.contains(p,end)||$.contains(end,p)){flag=false;}}
var ancestor=r.commonAncestor();var $dom=$(ancestor);if(!dom.isList(ancestor)){if(dom.isList(ancestor.parentNode)){$dom=$(ancestor.parentNode);}else{$dom=$(dom.node(ancestor)).children();}}
if(!$dom.not('br').length){$dom=$(dom.ancestor(r.sc,dom.isList));if(!$dom.length){$dom=$(r.sc).closest(options.styleTags.join(',')+',td');}}
$dom=$dom.map(function(){return this.tagName==="TR"?dom.firstElementChild(this):this;});$dom.each(function(){if(flag||$.contains(this,r.sc)){if(dom.isList(this)){if(outdent){outdenttUL(this,r.sc,r.ec);}else{indentUL(this,r.sc,r.ec);}}else if(isFormatNode(this)||dom.ancestor(this,dom.isCell)){indentOther(this,r.sc,r.ec);}}});if($dom.length){var $parent=$dom.parent();var $ul=$parent.find('ul, ol');if(!$ul.length){$ul=$(dom.ancestor(r.sc,dom.isList));}
$ul.each(function(){if(this.previousSibling&&this.previousSibling!==dom.previousElementSibling(this)&&!this.previousSibling.textContent.match(/\S/)){this.parentNode.removeChild(this.previousSibling);}
if(this.nextSibling&&this.nextSibling!==dom.nextElementSibling(this)&&!this.nextSibling.textContent.match(/\S/)){this.parentNode.removeChild(this.nextSibling);}});r=dom.merge($parent[0],r.sc,r.so,r.ec,r.eo,function(prev,cur){if(prev&&dom.isList(prev)&&dom.isEqual(prev,cur)){return true;}},true);range.create(r.sc,r.so,r.ec,r.eo).select();}
event.preventDefault();return false;};$.summernote.pluginEvents.outdent=function(event,editor,layoutInfo){return $.summernote.pluginEvents.indent(event,editor,layoutInfo,true);};$.summernote.pluginEvents.formatBlock=function(event,editor,layoutInfo,sTagName){$.summernote.pluginEvents.applyFont(event,editor,layoutInfo,null,null,"Default");var $editable=layoutInfo.editable();$editable.focus();$editable.data('NoteHistory').recordUndo($editable);event.preventDefault();var r=range.create();if(!r){return;}
if(r.so===0){r.sc=dom.firstChild(r.sc);}
if(dom.nodeLength(r.ec)>=r.eo){r.ec=dom.lastChild(r.ec);r.eo=dom.nodeLength(r.ec);}
r=range.create(r.sc,r.so,r.ec,r.eo);r.reRange().select();if(sTagName==="blockquote"||sTagName==="pre"){sTagName=$.summernote.core.agent.isMSIE?'<'+sTagName+'>':sTagName;document.execCommand('FormatBlock',false,sTagName);return;}
var nodes=dom.listBetween(r.sc,r.ec,r.so,r.eo);for(var i=0;i<nodes.length;i++){if(dom.isBR(nodes[i])||(dom.isText(nodes[i])&&dom.isVisibleText(nodes[i]))||dom.isB(nodes[i])||dom.isU(nodes[i])||dom.isS(nodes[i])||dom.isI(nodes[i])||dom.isFont(nodes[i])){var ancestor=dom.ancestor(nodes[i],isFormatNode);if($(ancestor).parent().is('blockquote')){$(ancestor).unwrap();}
if(!ancestor){dom.wrap(nodes[i],sTagName);}else if(ancestor.tagName.toLowerCase()!==sTagName){var tag=document.createElement(sTagName);ancestor.parentNode.insertBefore(tag,ancestor);dom.moveContent(ancestor,tag);if(ancestor.className){tag.className=ancestor.className;}
ancestor.parentNode.removeChild(ancestor);}}}
r.select();};$.summernote.pluginEvents.removeFormat=function(event,editor,layoutInfo,value){var $editable=layoutInfo.editable();$editable.data('NoteHistory').recordUndo($editable);var r=range.create();if(!r)return;var node=range.create().sc.parentNode;document.execCommand('removeFormat');document.execCommand('removeFormat');r=range.create();if(!r)return;r=dom.merge(node,r.sc,r.so,r.ec,r.eo,null,true);range.create(r.sc,r.so,r.ec,r.eo).select();event.preventDefault();return false;};eventHandler.modules.editor.undo=function($popover){if(!$popover.attr('disabled'))$popover.data('NoteHistory').undo();};eventHandler.modules.editor.redo=function($popover){if(!$popover.attr('disabled'))$popover.data('NoteHistory').redo();};var fn_from_node=eventHandler.modules.editor.style.fromNode;eventHandler.modules.editor.style.fromNode=function($node){var styleInfo=fn_from_node.apply(this,arguments);styleInfo['color']=$node.css('color');styleInfo['background-color']=$node.css('background-color');return styleInfo;};var fn_editor_currentstyle=eventHandler.modules.editor.currentStyle;eventHandler.modules.editor.currentStyle=function(target){var styleInfo=fn_editor_currentstyle.apply(this,arguments);if(!styleInfo.image||!dom.isEditable(styleInfo.image)){styleInfo.image=undefined;var r=range.create();if(r)
styleInfo.image=r.isOnImg();}
if(styleInfo.anchor){styleInfo['text-align']=$(styleInfo.anchor).parent().css('text-align');}
return styleInfo;};options.fontSizes=weDefaultOptions.fontSizes;$.summernote.pluginEvents.applyFont=function(event,editor,layoutInfo,color,bgcolor,size){var r=range.create();if(!r)return;var startPoint=r.getStartPoint();var endPoint=r.getEndPoint();if(r.isCollapsed()&&!dom.isFont(r.sc)){return{sc:startPoint.node,so:startPoint.offset,ec:endPoint.node,offset:endPoint.offset};}
if(startPoint.node.tagName&&startPoint.node.childNodes[startPoint.offset]){startPoint.node=startPoint.node.childNodes[startPoint.offset];startPoint.offset=0;}
if(endPoint.node.tagName&&endPoint.node.childNodes[endPoint.offset]){endPoint.node=endPoint.node.childNodes[endPoint.offset];endPoint.offset=0;}
var ancestor;var node;if(endPoint.offset&&endPoint.offset!==dom.nodeLength(endPoint.node)){ancestor=dom.ancestor(endPoint.node,dom.isFont)||endPoint.node;dom.splitTree(ancestor,endPoint);}
if(startPoint.offset&&startPoint.offset!==dom.nodeLength(startPoint.node)){ancestor=dom.ancestor(startPoint.node,dom.isFont)||startPoint.node;node=dom.splitTree(ancestor,startPoint);if(endPoint.node===startPoint.node){endPoint.node=node;endPoint.offset=dom.nodeLength(node);}
startPoint.node=node;startPoint.offset=0;}
var nodes=[];dom.walkPoint(startPoint,endPoint,function(point){var node=point.node;if(((dom.isText(node)&&dom.isVisibleText(node))||(dom.isFont(node)&&!dom.isVisibleText(node)))&&(node!==endPoint.node||endPoint.offset)){nodes.push(point.node);}});nodes=list.unique(nodes);if(r.isCollapsed()){nodes.push(startPoint.node);}
var font,$font,fonts=[],className;var i;if(color||bgcolor||size){for(i=0;i<nodes.length;i++){node=nodes[i];font=dom.ancestor(node,dom.isFont);if(!font){if(node.textContent.match(/^[ ]|[ ]$/)){node.textContent=node.textContent.replace(/^[ ]|[ ]$/g,'\u00A0');}
font=dom.create("font");node.parentNode.insertBefore(font,node);font.appendChild(node);}
fonts.push(font);className=font.className.split(/\s+/);var k;if(color){for(k=0;k<className.length;k++){if(className[k].length&&className[k].slice(0,5)==="text-"){className.splice(k,1);k--;}}
if(color.indexOf('text-')!==-1){font.className=className.join(" ")+" "+color;font.style.color="inherit";}else{font.className=className.join(" ");font.style.color=color;}}
if(bgcolor){for(k=0;k<className.length;k++){if(className[k].length&&className[k].slice(0,3)==="bg-"){className.splice(k,1);k--;}}
if(bgcolor.indexOf('bg-')!==-1){font.className=className.join(" ")+" "+bgcolor;font.style.backgroundColor="inherit";}else{font.className=className.join(" ");font.style.backgroundColor=bgcolor;}}
if(size){font.style.fontSize="inherit";if(!isNaN(size)&&Math.abs(parseInt(dom.getComputedStyle(font).fontSize,10)-size)/size>0.05){font.style.fontSize=size+"px";}}}}
for(i=0;i<fonts.length;i++){font=fonts[i];if(font.style.backgroundColor==="inherit"){font.style.backgroundColor="";}
if(font.style.color==="inherit"){font.style.color="";}
if(font.style.fontSize==="inherit"){font.style.fontSize="";}
$font=$(font);if(!$font.css("color")&&!$font.css("background-color")&&!$font.css("font-size")){$font.removeAttr("style");}
if(!font.className.length){$font.removeAttr("class");}}
nodes=[];dom.walkPoint(startPoint,endPoint,function(point){nodes.push(point.node.childNodes[point.offset]||point.node);});nodes=list.unique(nodes);function remove(node,to){if(node===endPoint.node){endPoint=dom.prevPoint(endPoint);}
if(to){dom.moveContent(node,to);}
dom.remove(node);}
var className2,style,style2;for(i=0;i<nodes.length;i++){node=nodes[i];if(dom.isText(node)&&!node.nodeValue){remove(node);continue;}
font=dom.ancestor(node,dom.isFont);node=font||dom.ancestor(node,dom.isSpan);if(!node){continue;}
$font=$(node);className=dom.orderClass(node);style=dom.orderStyle(node);if(!className&&!style){remove(node,node.parentNode);continue;}
if(font=dom.ancestor(node.previousSibling,dom.isFont)){className2=font.getAttribute('class');style2=font.getAttribute('style');if(node!==font&&className===className2&&style===style2){remove(node,font);continue;}}}
range.create(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset).select();};$.summernote.pluginEvents.fontSize=function(event,editor,layoutInfo,value){var $editable=layoutInfo.editable();event.preventDefault();$.summernote.pluginEvents.applyFont(event,editor,layoutInfo,null,null,value);editor.afterCommand($editable);};$.summernote.pluginEvents.color=function(event,editor,layoutInfo,sObjColor){var oColor=JSON.parse(sObjColor);var foreColor=oColor.foreColor,backColor=oColor.backColor;if(foreColor){$.summernote.pluginEvents.foreColor(event,editor,layoutInfo,foreColor);}
if(backColor){$.summernote.pluginEvents.backColor(event,editor,layoutInfo,backColor);}};$.summernote.pluginEvents.foreColor=function(event,editor,layoutInfo,foreColor,preview){var $editable=layoutInfo.editable();$.summernote.pluginEvents.applyFont(event,editor,layoutInfo,foreColor,null,null);if(!preview){editor.afterCommand($editable);}};$.summernote.pluginEvents.backColor=function(event,editor,layoutInfo,backColor,preview){var $editable=layoutInfo.editable();var r=range.create();if(!r)return;if(r.isCollapsed()&&r.isOnCell()){var cell=dom.ancestor(r.sc,dom.isCell);cell.className=cell.className.replace(new RegExp('(^|\\s+)bg-[^\\s]+(\\s+|$)','gi'),'');cell.style.backgroundColor="";if(backColor.indexOf('bg-')!==-1){cell.className+=' '+backColor;}else if(backColor!=='inherit'){cell.style.backgroundColor=backColor;}
return;}
$.summernote.pluginEvents.applyFont(event,editor,layoutInfo,null,backColor,null);if(!preview){editor.afterCommand($editable);}};options.onCreateLink=function(sLinkUrl){if(sLinkUrl.indexOf('mailto:')===0||sLinkUrl.indexOf('tel:')===0){sLinkUrl=sLinkUrl.replace(/^tel:([0-9]+)$/,'tel://$1');}else if(sLinkUrl.indexOf('@')!==-1&&sLinkUrl.indexOf(':')===-1){sLinkUrl='mailto:'+sLinkUrl;}else if(sLinkUrl.indexOf('://')===-1&&sLinkUrl[0]!=='/'&&sLinkUrl[0]!=='#'&&sLinkUrl.slice(0,2)!=='${'){sLinkUrl='http://'+sLinkUrl;}
return sLinkUrl;};function summernote_table_scroll(event){var r=range.create();if(r&&r.isOnCell()){$('.o_table_handler').remove();}}
function summernote_table_update(oStyle){var r=range.create();if(!oStyle.range||!r||!r.isOnCell()||!r.isOnCellFirst()){$('.o_table_handler').remove();return;}
var table=dom.ancestor(oStyle.range.sc,dom.isTable);if(!table){return;}
var $editable=$(table).closest('.o_editable');$('.o_table_handler').remove();var $dels=$();var $adds=$();var $tds=$('tr:first',table).children();$tds.each(function(){var $td=$(this);var pos=$td.offset();var $del=$('<span class="o_table_handler fa fa-minus-square"/>').appendTo('body');$del.data('td',this);$dels=$dels.add($del);$del.css({left:((pos.left+$td.outerWidth()/2)-6)+"px",top:(pos.top-6)+"px"});var $add=$('<span class="o_table_handler fa fa-plus-square"/>').appendTo('body');$add.data('td',this);$adds=$adds.add($add);$add.css({left:(pos.left-6)+"px",top:(pos.top-6)+"px"});});var $last=$tds.last();var pos=$last.offset();var $add=$('<span class="o_table_handler fa fa-plus-square"/>').appendTo('body');$adds=$adds.add($add);$add.css({left:(pos.left+$last.outerWidth()-6)+"px",top:(pos.top-6)+"px"});var $table=$(table);$dels.data('table',table).on('mousedown',function(event){var td=$(this).data('td');$editable.data('NoteHistory').recordUndo($editable);var newTd;if($(td).siblings().length){var eq=$(td).index();$table.find('tr').each(function(){$('> td:eq('+eq+')',this).remove();});newTd=$table.find('tr:first > td:eq('+eq+'), tr:first > td:last').first();}else{var prev=dom.lastChild(dom.hasContentBefore(dom.ancestorHavePreviousSibling($table[0])));$table.remove();$('.o_table_handler').remove();r=range.create(prev,prev.textContent.length);r.select();$(r.sc).trigger('mouseup');return;}
$('.o_table_handler').remove();range.create(newTd[0],0,newTd[0],0).select();newTd.trigger('mouseup');});$adds.data('table',table).on('mousedown',function(event){var td=$(this).data('td');$editable.data('NoteHistory').recordUndo($editable);var newTd;if(td){var eq=$(td).index();$table.find('tr').each(function(){$('td:eq('+eq+')',this).before('<td>'+dom.blank+'</td>');});newTd=$table.find('tr:first td:eq('+eq+')');}else{$table.find('tr').each(function(){$(this).append('<td>'+dom.blank+'</td>');});newTd=$table.find('tr:first td:last');}
$('.o_table_handler').remove();range.create(newTd[0],0,newTd[0],0).select();newTd.trigger('mouseup');});$dels.css({'position':'absolute','cursor':'pointer','background-color':'#fff','color':'#ff0000'});$adds.css({'position':'absolute','cursor':'pointer','background-color':'#fff','color':'#00ff00'});}
var fn_popover_update=eventHandler.modules.popover.update;eventHandler.modules.popover.update=function($popover,oStyle,isAirMode){fn_popover_update.call(this,$popover,oStyle,isAirMode);if((isAirMode?$popover:$popover.parent()).find('.note-table').length){summernote_table_update(oStyle);}};function mouseDownChecklist(e){if(!dom.isLi(e.target)||!$(e.target).parent('ul.o_checklist').length||e.offsetX>0){return;}
e.stopPropagation();e.preventDefault();var checked=$(e.target).hasClass('o_checked');$(e.target).toggleClass('o_checked',!checked);var $sublevel=$(e.target).next('ul.o_checklist, li:has(> ul.o_checklist)').find('> li, ul.o_checklist > li');var $parents=$(e.target).parents('ul.o_checklist').map(function(){return this.parentNode.tagName==='LI'?this.parentNode:this;});if(checked){$sublevel.removeClass('o_checked');do{$parents=$parents.prev('ul.o_checklist li').removeClass('o_checked');}while($parents.length);}else{$sublevel.addClass('o_checked');var $lis;do{$lis=$parents.not(':has(li[id^="checklist-id"]:not(.o_checked))').prev('ul.o_checklist li:not(.o_checked)');$lis.addClass('o_checked');}while($lis.length);}}
var fn_attach=eventHandler.attach;eventHandler.attach=function(oLayoutInfo,options){var $editable=oLayoutInfo.editor().hasClass('note-editable')?oLayoutInfo.editor():oLayoutInfo.editor().find('.note-editable');fn_attach.call(this,oLayoutInfo,options);$editable.on("scroll",summernote_table_scroll);$editable.on("mousedown",mouseDownChecklist);};var fn_detach=eventHandler.detach;eventHandler.detach=function(oLayoutInfo,options){var $editable=oLayoutInfo.editor().hasClass('note-editable')?oLayoutInfo.editor():oLayoutInfo.editor().find('.note-editable');fn_detach.call(this,oLayoutInfo,options);$editable.off("scroll",summernote_table_scroll);$editable.off("mousedown",mouseDownChecklist);$('.o_table_handler').remove();};options.icons.image.image="file-image-o";$.summernote.lang['en-US'].image.image="File / Image";return $.summernote;});;

/* <inline asset> defined in bundle 'web_editor.assets_summernote' */
window.define=odoo.__define__;delete odoo.__define__;delete odoo.website_next_define;delete odoo.__enable_summernote__;         20190327091201      $   ?      7                  b             %     
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / e n a b l e _ s u m m e r n o t e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . _ _ e n a b l e _ s u m m e r n o t e _ _ = t r u e ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 ( f u n c t i o n ( ) { " u s e   s t r i c t " ; o d o o . d e f i n e ( ' j q u e r y ' , f u n c t i o n ( ) { r e t u r n   $ ; } ) ; v a r   u n i q I d = 0 ; o d o o . _ _ d e f i n e _ _ = w i n d o w . d e f i n e ; w i n d o w . d e f i n e = f u n c t i o n ( i d ) { i f ( ! o d o o . _ _ e n a b l e _ s u m m e r n o t e _ _ ) r e t u r n ; v a r   a r g s = A r r a y . p r o t o t y p e . s l i c e . c a l l ( a r g u m e n t s ) ; v a r   f a c t o r i e = a r g s . p o p ( ) ; v a r   i d = a r g s [ 0 ] ; i f ( i d   i n s t a n c e o f   A r r a y ) { v a r   n a m e = " s u m m e r n o t e _ f a c t o r i e _ " + ( + + u n i q I d ) ; o d o o [ n a m e ] = f a c t o r i e ; v a r   h e a d = ' ' ; v a r   f n = ' v a r   f n   =   o d o o . ' + n a m e + ' ; \ n d e l e t e   o d o o . ' + n a m e + ' ; \ n ' ; f n + = ' r e t u r n   f n ( ' ; f o r ( v a r   k = 0 ; k < i d . l e n g t h ; k + + ) { h e a d + = ' v a r   a ' + ( + + u n i q I d ) + '   =   r e q u i r e ( " ' + i d [ k ] + ' " ) ; \ n ' ; f n + = ' a ' + u n i q I d + ' ,   ' ; } 
 f n + = ' n u l l ) ; ' ; o d o o . d e f i n e ( o d o o . w e b s i t e _ n e x t _ d e f i n e , n e w   F u n c t i o n ( ' r e q u i r e ' , h e a d + f n ) ) ; } e l s e { o d o o . d e f i n e ( i d , f a c t o r i e ) ; } } ; } ) ( ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / a s y n c ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / a s y n c . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( ' s u m m e r n o t e / c o r e / a s y n c ' , f u n c t i o n ( ) { v a r   a s y n c = ( f u n c t i o n ( ) { v a r   r e a d F i l e A s D a t a U R L = f u n c t i o n ( f i l e ) { r e t u r n   $ . D e f e r r e d ( f u n c t i o n ( d e f e r r e d ) { $ . e x t e n d ( n e w   F i l e R e a d e r ( ) , { o n l o a d : f u n c t i o n ( e ) { v a r   s D a t a U R L = e . t a r g e t . r e s u l t ; d e f e r r e d . r e s o l v e ( s D a t a U R L ) ; } , o n e r r o r : f u n c t i o n ( ) { d e f e r r e d . r e j e c t ( t h i s ) ; } } ) . r e a d A s D a t a U R L ( f i l e ) ; } ) . p r o m i s e ( ) ; } ; v a r   c r e a t e I m a g e = f u n c t i o n ( s U r l , f i l e n a m e ) { r e t u r n   $ . D e f e r r e d ( f u n c t i o n ( d e f e r r e d ) { v a r   $ i m g = $ ( ' < i m g > ' ) ; $ i m g . o n e ( ' l o a d ' , f u n c t i o n ( ) { $ i m g . o f f ( ' e r r o r   a b o r t ' ) ; d e f e r r e d . r e s o l v e ( $ i m g ) ; } ) . o n e ( ' e r r o r   a b o r t ' , f u n c t i o n ( ) { $ i m g . o f f ( ' l o a d ' ) . d e t a c h ( ) ; d e f e r r e d . r e j e c t ( $ i m g ) ; } ) . c s s ( { d i s p l a y : ' n o n e ' } ) . a p p e n d T o ( d o c u m e n t . b o d y ) . a t t r ( { ' s r c ' : s U r l , ' d a t a - f i l e n a m e ' : f i l e n a m e } ) ; } ) . p r o m i s e ( ) ; } ; r e t u r n { r e a d F i l e A s D a t a U R L : r e a d F i l e A s D a t a U R L , c r e a t e I m a g e : c r e a t e I m a g e } ; } ) ( ) ; r e t u r n   a s y n c ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / f u n c ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / f u n c . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( ' s u m m e r n o t e / c o r e / f u n c ' , f u n c t i o n ( ) { v a r   f u n c = ( f u n c t i o n ( ) { v a r   e q = f u n c t i o n ( i t e m A ) { r e t u r n   f u n c t i o n ( i t e m B ) { r e t u r n   i t e m A = = = i t e m B ; } ; } ; v a r   e q 2 = f u n c t i o n ( i t e m A , i t e m B ) { r e t u r n   i t e m A = = = i t e m B ; } ; v a r   p e q 2 = f u n c t i o n ( p r o p N a m e ) { r e t u r n   f u n c t i o n ( i t e m A , i t e m B ) { r e t u r n   i t e m A [ p r o p N a m e ] = = = i t e m B [ p r o p N a m e ] ; } ; } ; v a r   o k = f u n c t i o n ( ) { r e t u r n   t r u e ; } ; v a r   f a i l = f u n c t i o n ( ) { r e t u r n   f a l s e ; } ; v a r   n o t = f u n c t i o n ( f ) { r e t u r n   f u n c t i o n ( ) { r e t u r n ! f . a p p l y ( f , a r g u m e n t s ) ; } ; } ; v a r   a n d = f u n c t i o n ( f A , f B ) { r e t u r n   f u n c t i o n ( i t e m ) { r e t u r n   f A ( i t e m ) & & f B ( i t e m ) ; } ; } ; v a r   s e l f = f u n c t i o n ( a ) { r e t u r n   a ; } ; v a r   i d C o u n t e r = 0 ; v a r   u n i q u e I d = f u n c t i o n ( p r e f i x ) { v a r   i d = + + i d C o u n t e r + ' ' ; r e t u r n   p r e f i x ? p r e f i x + i d : i d ; } ; v a r   r e c t 2 b n d = f u n c t i o n ( r e c t ) { v a r   $ d o c u m e n t = $ ( d o c u m e n t ) ; r e t u r n { t o p : r e c t . t o p + $ d o c u m e n t . s c r o l l T o p ( ) , l e f t : r e c t . l e f t + $ d o c u m e n t . s c r o l l L e f t ( ) , w i d t h : r e c t . r i g h t - r e c t . l e f t , h e i g h t : r e c t . b o t t o m - r e c t . t o p } ; } ; v a r   i n v e r t O b j e c t = f u n c t i o n ( o b j ) { v a r   i n v e r t e d = { } ; f o r ( v a r   k e y   i n   o b j ) { i f ( o b j . h a s O w n P r o p e r t y ( k e y ) ) { i n v e r t e d [ o b j [ k e y ] ] = k e y ; } } 
 r e t u r n   i n v e r t e d ; } ; v a r   n a m e s p a c e T o C a m e l = f u n c t i o n ( n a m e s p a c e , p r e f i x ) { p r e f i x = p r e f i x | | ' ' ; r e t u r n   p r e f i x + n a m e s p a c e . s p l i t ( ' . ' ) . m a p ( f u n c t i o n ( n a m e ) { r e t u r n   n a m e . s u b s t r i n g ( 0 , 1 ) . t o U p p e r C a s e ( ) + n a m e . s u b s t r i n g ( 1 ) ; } ) . j o i n ( ' ' ) ; } ; r e t u r n { e q : e q , e q 2 : e q 2 , p e q 2 : p e q 2 , o k : o k , f a i l : f a i l , s e l f : s e l f , n o t : n o t , a n d : a n d , u n i q u e I d : u n i q u e I d , r e c t 2 b n d : r e c t 2 b n d , i n v e r t O b j e c t : i n v e r t O b j e c t , n a m e s p a c e T o C a m e l : n a m e s p a c e T o C a m e l } ; } ) ( ) ; r e t u r n   f u n c ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / a g e n t ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / a g e n t . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' j q u e r y ' ] , f u n c t i o n ( $ ) { i f ( ! A r r a y . p r o t o t y p e . r e d u c e ) { A r r a y . p r o t o t y p e . r e d u c e = f u n c t i o n ( c a l l b a c k ) { v a r   t = O b j e c t ( t h i s ) , l e n = t . l e n g t h > > > 0 , k = 0 , v a l u e ; i f ( a r g u m e n t s . l e n g t h = = = 2 ) { v a l u e = a r g u m e n t s [ 1 ] ; } e l s e { w h i l e ( k < l e n & & ! ( k   i n   t ) ) { k + + ; } 
 i f ( k > = l e n ) { t h r o w   n e w   T y p e E r r o r ( ' R e d u c e   o f   e m p t y   a r r a y   w i t h   n o   i n i t i a l   v a l u e ' ) ; } 
 v a l u e = t [ k + + ] ; } 
 f o r ( ; k < l e n ; k + + ) { i f ( k   i n   t ) { v a l u e = c a l l b a c k ( v a l u e , t [ k ] , k , t ) ; } } 
 r e t u r n   v a l u e ; } ; } 
 i f ( ' f u n c t i o n ' ! = = t y p e o f   A r r a y . p r o t o t y p e . f i l t e r ) { A r r a y . p r o t o t y p e . f i l t e r = f u n c t i o n ( f u n c ) { v a r   t = O b j e c t ( t h i s ) , l e n = t . l e n g t h > > > 0 ; v a r   r e s = [ ] ; v a r   t h i s A r g = a r g u m e n t s . l e n g t h > = 2 ? a r g u m e n t s [ 1 ] : v o i d   0 ; f o r ( v a r   i = 0 ; i < l e n ; i + + ) { i f ( i   i n   t ) { v a r   v a l = t [ i ] ; i f ( f u n c . c a l l ( t h i s A r g , v a l , i , t ) ) { r e s . p u s h ( v a l ) ; } } } 
 r e t u r n   r e s ; } ; } 
 i f ( ! A r r a y . p r o t o t y p e . m a p ) { A r r a y . p r o t o t y p e . m a p = f u n c t i o n ( c a l l b a c k , t h i s A r g ) { v a r   T , A , k ; i f ( t h i s = = = n u l l ) { t h r o w   n e w   T y p e E r r o r ( '   t h i s   i s   n u l l   o r   n o t   d e f i n e d ' ) ; } 
 v a r   O = O b j e c t ( t h i s ) ; v a r   l e n = O . l e n g t h > > > 0 ; i f ( t y p e o f   c a l l b a c k ! = = ' f u n c t i o n ' ) { t h r o w   n e w   T y p e E r r o r ( c a l l b a c k + '   i s   n o t   a   f u n c t i o n ' ) ; } 
 i f ( a r g u m e n t s . l e n g t h > 1 ) { T = t h i s A r g ; } 
 A = n e w   A r r a y ( l e n ) ; k = 0 ; w h i l e ( k < l e n ) { v a r   k V a l u e , m a p p e d V a l u e ; i f ( k   i n   O ) { k V a l u e = O [ k ] ; m a p p e d V a l u e = c a l l b a c k . c a l l ( T , k V a l u e , k , O ) ; A [ k ] = m a p p e d V a l u e ; } 
 k + + ; } 
 r e t u r n   A ; } ; } 
 v a r   i s S u p p o r t A m d = t y p e o f   d e f i n e = = = ' f u n c t i o n ' & & d e f i n e . a m d ; v a r   i s F o n t I n s t a l l e d = f u n c t i o n ( f o n t N a m e ) { v a r   t e s t F o n t N a m e = f o n t N a m e = = = ' C o m i c   S a n s   M S ' ? ' C o u r i e r   N e w ' : ' C o m i c   S a n s   M S ' ; v a r   $ t e s t e r = $ ( ' < d i v > ' ) . c s s ( { p o s i t i o n : ' a b s o l u t e ' , l e f t : ' - 9 9 9 9 p x ' , t o p : ' - 9 9 9 9 p x ' , f o n t S i z e : ' 2 0 0 p x ' } ) . t e x t ( ' m m m m m m m m m w w w w w w w ' ) . a p p e n d T o ( d o c u m e n t . b o d y ) ; v a r   o r i g i n a l W i d t h = $ t e s t e r . c s s ( ' f o n t F a m i l y ' , t e s t F o n t N a m e ) . w i d t h ( ) ; v a r   w i d t h = $ t e s t e r . c s s ( ' f o n t F a m i l y ' , f o n t N a m e + ' , ' + t e s t F o n t N a m e ) . w i d t h ( ) ; $ t e s t e r . r e m o v e ( ) ; r e t u r n   o r i g i n a l W i d t h ! = = w i d t h ; } ; v a r   u s e r A g e n t = n a v i g a t o r . u s e r A g e n t ; v a r   i s M S I E = / M S I E | T r i d e n t / i . t e s t ( u s e r A g e n t ) ; v a r   b r o w s e r V e r s i o n ; i f ( i s M S I E ) { v a r   m a t c h e s = / M S I E   ( \ d + [ . ] \ d + ) / . e x e c ( u s e r A g e n t ) ; i f ( m a t c h e s ) { b r o w s e r V e r s i o n = p a r s e F l o a t ( m a t c h e s [ 1 ] ) ; } 
 m a t c h e s = / T r i d e n t \ / . * r v : ( [ 0 - 9 ] { 1 , } [ \ . 0 - 9 ] { 0 , } ) / . e x e c ( u s e r A g e n t ) ; i f ( m a t c h e s ) { b r o w s e r V e r s i o n = p a r s e F l o a t ( m a t c h e s [ 1 ] ) ; } } 
 v a r   a g e n t = { i s M a c : n a v i g a t o r . a p p V e r s i o n . i n d e x O f ( ' M a c ' ) > - 1 , i s M S I E : i s M S I E , i s F F : / f i r e f o x / i . t e s t ( u s e r A g e n t ) , i s W e b k i t : / w e b k i t / i . t e s t ( u s e r A g e n t ) , i s S a f a r i : / s a f a r i / i . t e s t ( u s e r A g e n t ) , b r o w s e r V e r s i o n : b r o w s e r V e r s i o n , j q u e r y V e r s i o n : p a r s e F l o a t ( $ . f n . j q u e r y ) , i s S u p p o r t A m d : i s S u p p o r t A m d , h a s C o d e M i r r o r : i s S u p p o r t A m d ? r e q u i r e . s p e c i f i e d ( ' C o d e M i r r o r ' ) : ! ! w i n d o w . C o d e M i r r o r , i s F o n t I n s t a l l e d : i s F o n t I n s t a l l e d , i s W 3 C R a n g e S u p p o r t : ! ! d o c u m e n t . c r e a t e R a n g e } ; r e t u r n   a g e n t ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / l i s t ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / l i s t . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / f u n c ' ] , f u n c t i o n ( f u n c ) { v a r   l i s t = ( f u n c t i o n ( ) { v a r   h e a d = f u n c t i o n ( a r r a y ) { r e t u r n   a r r a y [ 0 ] ; } ; v a r   l a s t = f u n c t i o n ( a r r a y ) { r e t u r n   a r r a y [ a r r a y . l e n g t h - 1 ] ; } ; v a r   i n i t i a l = f u n c t i o n ( a r r a y ) { r e t u r n   a r r a y . s l i c e ( 0 , a r r a y . l e n g t h - 1 ) ; } ; v a r   t a i l = f u n c t i o n ( a r r a y ) { r e t u r n   a r r a y . s l i c e ( 1 ) ; } ; v a r   f i n d = f u n c t i o n ( a r r a y , p r e d ) { f o r ( v a r   i d x = 0 , l e n = a r r a y . l e n g t h ; i d x < l e n ; i d x + + ) { v a r   i t e m = a r r a y [ i d x ] ; i f ( p r e d ( i t e m ) ) { r e t u r n   i t e m ; } } } ; v a r   a l l = f u n c t i o n ( a r r a y , p r e d ) { f o r ( v a r   i d x = 0 , l e n = a r r a y . l e n g t h ; i d x < l e n ; i d x + + ) { i f ( ! p r e d ( a r r a y [ i d x ] ) ) { r e t u r n   f a l s e ; } } 
 r e t u r n   t r u e ; } ; v a r   i n d e x O f = f u n c t i o n ( a r r a y , i t e m ) { r e t u r n   $ . i n A r r a y ( i t e m , a r r a y ) ; } ; v a r   c o n t a i n s = f u n c t i o n ( a r r a y , i t e m ) { r e t u r n   i n d e x O f ( a r r a y , i t e m ) ! = = - 1 ; } ; v a r   s u m = f u n c t i o n ( a r r a y , f n ) { f n = f n | | f u n c . s e l f ; r e t u r n   a r r a y . r e d u c e ( f u n c t i o n ( m e m o , v ) { r e t u r n   m e m o + f n ( v ) ; } , 0 ) ; } ; v a r   f r o m = f u n c t i o n ( c o l l e c t i o n ) { v a r   r e s u l t = [ ] , i d x = - 1 , l e n g t h = c o l l e c t i o n . l e n g t h ; w h i l e ( + + i d x < l e n g t h ) { r e s u l t [ i d x ] = c o l l e c t i o n [ i d x ] ; } 
 r e t u r n   r e s u l t ; } ; v a r   c l u s t e r B y = f u n c t i o n ( a r r a y , f n ) { i f ( ! a r r a y . l e n g t h ) { r e t u r n [ ] ; } 
 v a r   a T a i l = t a i l ( a r r a y ) ; r e t u r n   a T a i l . r e d u c e ( f u n c t i o n ( m e m o , v ) { v a r   a L a s t = l a s t ( m e m o ) ; i f ( f n ( l a s t ( a L a s t ) , v ) ) { a L a s t [ a L a s t . l e n g t h ] = v ; } e l s e { m e m o [ m e m o . l e n g t h ] = [ v ] ; } 
 r e t u r n   m e m o ; } , [ [ h e a d ( a r r a y ) ] ] ) ; } ; v a r   c o m p a c t = f u n c t i o n ( a r r a y ) { v a r   a R e s u l t = [ ] ; f o r ( v a r   i d x = 0 , l e n = a r r a y . l e n g t h ; i d x < l e n ; i d x + + ) { i f ( a r r a y [ i d x ] ) { a R e s u l t . p u s h ( a r r a y [ i d x ] ) ; } } 
 r e t u r n   a R e s u l t ; } ; v a r   u n i q u e = f u n c t i o n ( a r r a y ) { v a r   r e s u l t s = [ ] ; f o r ( v a r   i d x = 0 , l e n = a r r a y . l e n g t h ; i d x < l e n ; i d x + + ) { i f ( ! c o n t a i n s ( r e s u l t s , a r r a y [ i d x ] ) ) { r e s u l t s . p u s h ( a r r a y [ i d x ] ) ; } } 
 r e t u r n   r e s u l t s ; } ; v a r   n e x t = f u n c t i o n ( a r r a y , i t e m ) { v a r   i d x = i n d e x O f ( a r r a y , i t e m ) ; i f ( i d x = = = - 1 ) { r e t u r n   n u l l ; } 
 r e t u r n   a r r a y [ i d x + 1 ] ; } ; v a r   p r e v = f u n c t i o n ( a r r a y , i t e m ) { v a r   i d x = i n d e x O f ( a r r a y , i t e m ) ; i f ( i d x = = = - 1 ) { r e t u r n   n u l l ; } 
 r e t u r n   a r r a y [ i d x - 1 ] ; } ; r e t u r n { h e a d : h e a d , l a s t : l a s t , i n i t i a l : i n i t i a l , t a i l : t a i l , p r e v : p r e v , n e x t : n e x t , f i n d : f i n d , c o n t a i n s : c o n t a i n s , a l l : a l l , s u m : s u m , f r o m : f r o m , c l u s t e r B y : c l u s t e r B y , c o m p a c t : c o m p a c t , u n i q u e : u n i q u e } ; } ) ( ) ; r e t u r n   l i s t ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / d o m ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / d o m . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / a g e n t ' ] , f u n c t i o n ( f u n c , l i s t , a g e n t ) { v a r   N B S P _ C H A R = S t r i n g . f r o m C h a r C o d e ( 1 6 0 ) ; v a r   Z E R O _ W I D T H _ N B S P _ C H A R = ' \ u f e f f ' ; v a r   d o m = ( f u n c t i o n ( ) { v a r   i s E d i t a b l e = f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & $ ( n o d e ) . h a s C l a s s ( ' n o t e - e d i t a b l e ' ) ; } ; v a r   i s C o n t r o l S i z i n g = f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & $ ( n o d e ) . h a s C l a s s ( ' n o t e - c o n t r o l - s i z i n g ' ) ; } ; v a r   b u i l d L a y o u t I n f o = f u n c t i o n ( $ e d i t o r ) { v a r   m a k e F i n d e r ; i f ( $ e d i t o r . h a s C l a s s ( ' n o t e - a i r - e d i t o r ' ) ) { v a r   i d = l i s t . l a s t ( $ e d i t o r . a t t r ( ' d a t a - n o t e - i d ' ) . s p l i t ( ' - ' ) ) ; m a k e F i n d e r = f u n c t i o n ( s I d P r e f i x ) { r e t u r n   f u n c t i o n ( ) { r e t u r n   $ ( s I d P r e f i x + i d ) ; } ; } ; r e t u r n { e d i t o r : f u n c t i o n ( ) { r e t u r n   $ e d i t o r ; } , h o l d e r : f u n c t i o n ( ) { r e t u r n   $ e d i t o r . d a t a ( ' h o l d e r ' ) ; } , e d i t a b l e : f u n c t i o n ( ) { r e t u r n   $ e d i t o r ; } , p o p o v e r : m a k e F i n d e r ( ' # n o t e - p o p o v e r - ' ) , h a n d l e : m a k e F i n d e r ( ' # n o t e - h a n d l e - ' ) , d i a l o g : m a k e F i n d e r ( ' # n o t e - d i a l o g - ' ) } ; } e l s e { m a k e F i n d e r = f u n c t i o n ( c l a s s N a m e , $ b a s e ) { $ b a s e = $ b a s e | | $ e d i t o r ; r e t u r n   f u n c t i o n ( ) { r e t u r n   $ b a s e . f i n d ( c l a s s N a m e ) ; } ; } ; v a r   o p t i o n s = $ e d i t o r . d a t a ( ' o p t i o n s ' ) ; v a r   $ d i a l o g H o l d e r = ( o p t i o n s & & o p t i o n s . d i a l o g s I n B o d y ) ? $ ( d o c u m e n t . b o d y ) : n u l l ; r e t u r n { e d i t o r : f u n c t i o n ( ) { r e t u r n   $ e d i t o r ; } , h o l d e r : f u n c t i o n ( ) { r e t u r n   $ e d i t o r . d a t a ( ' h o l d e r ' ) ; } , d r o p z o n e : m a k e F i n d e r ( ' . n o t e - d r o p z o n e ' ) , t o o l b a r : m a k e F i n d e r ( ' . n o t e - t o o l b a r ' ) , e d i t a b l e : m a k e F i n d e r ( ' . n o t e - e d i t a b l e ' ) , c o d a b l e : m a k e F i n d e r ( ' . n o t e - c o d a b l e ' ) , s t a t u s b a r : m a k e F i n d e r ( ' . n o t e - s t a t u s b a r ' ) , p o p o v e r : m a k e F i n d e r ( ' . n o t e - p o p o v e r ' ) , h a n d l e : m a k e F i n d e r ( ' . n o t e - h a n d l e ' ) , d i a l o g : m a k e F i n d e r ( ' . n o t e - d i a l o g ' , $ d i a l o g H o l d e r ) } ; } } ; v a r   m a k e L a y o u t I n f o = f u n c t i o n ( d e s c e n d a n t ) { v a r   $ t a r g e t = $ ( d e s c e n d a n t ) . c l o s e s t ( ' . n o t e - e d i t o r ,   . n o t e - a i r - e d i t o r ,   . n o t e - a i r - l a y o u t ' ) ; i f ( ! $ t a r g e t . l e n g t h ) { r e t u r n   n u l l ; } 
 v a r   $ e d i t o r ; i f ( $ t a r g e t . i s ( ' . n o t e - e d i t o r ,   . n o t e - a i r - e d i t o r ' ) ) { $ e d i t o r = $ t a r g e t ; } e l s e { $ e d i t o r = $ ( ' [ d a t a - n o t e - i d = " ' + l i s t . l a s t ( $ t a r g e t . a t t r ( ' i d ' ) . s p l i t ( ' - ' ) ) + ' " ] ' ) ; } 
 r e t u r n   b u i l d L a y o u t I n f o ( $ e d i t o r ) ; } ; v a r   m a k e P r e d B y N o d e N a m e = f u n c t i o n ( n o d e N a m e ) { n o d e N a m e = n o d e N a m e . t o U p p e r C a s e ( ) ; r e t u r n   f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & n o d e . n o d e N a m e . t o U p p e r C a s e ( ) = = = n o d e N a m e ; } ; } ; v a r   i s T e x t = f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & n o d e . n o d e T y p e = = = 3 ; } ; v a r   i s V o i d = f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & / ^ B R | ^ I M G | ^ H R | ^ I F R A M E | ^ B U T T O N / . t e s t ( n o d e . n o d e N a m e . t o U p p e r C a s e ( ) ) ; } ; v a r   i s P a r a = f u n c t i o n ( n o d e ) { i f ( i s E d i t a b l e ( n o d e ) ) { r e t u r n   f a l s e ; } 
 r e t u r n   n o d e & & / ^ D I V | ^ P | ^ L I | ^ H [ 1 - 7 ] / . t e s t ( n o d e . n o d e N a m e . t o U p p e r C a s e ( ) ) ; } ; v a r   i s L i = m a k e P r e d B y N o d e N a m e ( ' L I ' ) ; v a r   i s P u r e P a r a = f u n c t i o n ( n o d e ) { r e t u r n   i s P a r a ( n o d e ) & & ! i s L i ( n o d e ) ; } ; v a r   i s T a b l e = m a k e P r e d B y N o d e N a m e ( ' T A B L E ' ) ; v a r   i s I n l i n e = f u n c t i o n ( n o d e ) { r e t u r n ! i s B o d y C o n t a i n e r ( n o d e ) & & ! i s L i s t ( n o d e ) & & ! i s H r ( n o d e ) & & ! i s P a r a ( n o d e ) & & ! i s T a b l e ( n o d e ) & & ! i s B l o c k q u o t e ( n o d e ) ; } ; v a r   i s L i s t = f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & / ^ U L | ^ O L / . t e s t ( n o d e . n o d e N a m e . t o U p p e r C a s e ( ) ) ; } ; v a r   i s H r = m a k e P r e d B y N o d e N a m e ( ' H R ' ) ; v a r   i s C e l l = f u n c t i o n ( n o d e ) { r e t u r n   n o d e & & / ^ T D | ^ T H / . t e s t ( n o d e . n o d e N a m e . t o U p p e r C a s e ( ) ) ; } ; v a r   i s B l o c k q u o t e = m a k e P r e d B y N o d e N a m e ( ' B L O C K Q U O T E ' ) ; v a r   i s B o d y C o n t a i n e r = f u n c t i o n ( n o d e ) { r e t u r n   i s C e l l ( n o d e ) | | i s B l o c k q u o t e ( n o d e ) | | i s E d i t a b l e ( n o d e ) ; } ; v a r   i s A n c h o r = m a k e P r e d B y N o d e N a m e ( ' A ' ) ; v a r   i s P a r a I n l i n e = f u n c t i o n ( n o d e ) { r e t u r n   i s I n l i n e ( n o d e ) & & ! ! a n c e s t o r ( n o d e , i s P a r a ) ; } ; v a r   i s B o d y I n l i n e = f u n c t i o n ( n o d e ) { r e t u r n   i s I n l i n e ( n o d e ) & & ! a n c e s t o r ( n o d e , i s P a r a ) ; } ; v a r   i s B o d y = m a k e P r e d B y N o d e N a m e ( ' B O D Y ' ) ; v a r   i s C l o s e s t S i b l i n g = f u n c t i o n ( n o d e A , n o d e B ) { r e t u r n   n o d e A . n e x t S i b l i n g = = = n o d e B | | n o d e A . p r e v i o u s S i b l i n g = = = n o d e B ; } ; v a r   w i t h C l o s e s t S i b l i n g s = f u n c t i o n ( n o d e , p r e d ) { p r e d = p r e d | | f u n c . o k ; v a r   s i b l i n g s = [ ] ; i f ( n o d e . p r e v i o u s S i b l i n g & & p r e d ( n o d e . p r e v i o u s S i b l i n g ) ) { s i b l i n g s . p u s h ( n o d e . p r e v i o u s S i b l i n g ) ; } 
 s i b l i n g s . p u s h ( n o d e ) ; i f ( n o d e . n e x t S i b l i n g & & p r e d ( n o d e . n e x t S i b l i n g ) ) { s i b l i n g s . p u s h ( n o d e . n e x t S i b l i n g ) ; } 
 r e t u r n   s i b l i n g s ; } ; v a r   b l a n k H T M L = a g e n t . i s M S I E & & a g e n t . b r o w s e r V e r s i o n < 1 1 ? ' & n b s p ; ' : ' < b r > ' ; v a r   n o d e L e n g t h = f u n c t i o n ( n o d e ) { i f ( i s T e x t ( n o d e ) ) { r e t u r n   n o d e . n o d e V a l u e . l e n g t h ; } 
 r e t u r n   n o d e . c h i l d N o d e s . l e n g t h ; } ; v a r   i s E m p t y = f u n c t i o n ( n o d e ) { v a r   l e n = n o d e L e n g t h ( n o d e ) ; i f ( l e n = = = 0 ) { r e t u r n   t r u e ; } e l s e   i f ( ! i s T e x t ( n o d e ) & & l e n = = = 1 & & n o d e . i n n e r H T M L = = = b l a n k H T M L ) { r e t u r n   t r u e ; } e l s e   i f ( l i s t . a l l ( n o d e . c h i l d N o d e s , i s T e x t ) & & n o d e . i n n e r H T M L = = = ' ' ) { r e t u r n   t r u e ; } 
 r e t u r n   f a l s e ; } ; v a r   p a d d i n g B l a n k H T M L = f u n c t i o n ( n o d e ) { i f ( ! i s V o i d ( n o d e ) & & ! n o d e L e n g t h ( n o d e ) ) { n o d e . i n n e r H T M L = b l a n k H T M L ; } } ; v a r   a n c e s t o r = f u n c t i o n ( n o d e , p r e d ) { w h i l e ( n o d e ) { i f ( p r e d ( n o d e ) ) { r e t u r n   n o d e ; } 
 i f ( i s E d i t a b l e ( n o d e ) ) { b r e a k ; } 
 n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   n u l l ; } ; v a r   s i n g l e C h i l d A n c e s t o r = f u n c t i o n ( n o d e , p r e d ) { n o d e = n o d e . p a r e n t N o d e ; w h i l e ( n o d e ) { i f ( n o d e L e n g t h ( n o d e ) ! = = 1 ) { b r e a k ; } 
 i f ( p r e d ( n o d e ) ) { r e t u r n   n o d e ; } 
 i f ( i s E d i t a b l e ( n o d e ) ) { b r e a k ; } 
 n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   n u l l ; } ; v a r   l i s t A n c e s t o r = f u n c t i o n ( n o d e , p r e d ) { p r e d = p r e d | | f u n c . f a i l ; v a r   a n c e s t o r s = [ ] ; a n c e s t o r ( n o d e , f u n c t i o n ( e l ) { i f ( ! i s E d i t a b l e ( e l ) ) { a n c e s t o r s . p u s h ( e l ) ; } 
 r e t u r n   p r e d ( e l ) ; } ) ; r e t u r n   a n c e s t o r s ; } ; v a r   l a s t A n c e s t o r = f u n c t i o n ( n o d e , p r e d ) { v a r   a n c e s t o r s = l i s t A n c e s t o r ( n o d e ) ; r e t u r n   l i s t . l a s t ( a n c e s t o r s . f i l t e r ( p r e d ) ) ; } ; v a r   c o m m o n A n c e s t o r = f u n c t i o n ( n o d e A , n o d e B ) { v a r   a n c e s t o r s = l i s t A n c e s t o r ( n o d e A ) ; f o r ( v a r   n = n o d e B ; n ; n = n . p a r e n t N o d e ) { i f ( $ . i n A r r a y ( n , a n c e s t o r s ) > - 1 ) { r e t u r n   n ; } } 
 r e t u r n   n u l l ; } ; v a r   l i s t P r e v = f u n c t i o n ( n o d e , p r e d ) { p r e d = p r e d | | f u n c . f a i l ; v a r   n o d e s = [ ] ; w h i l e ( n o d e ) { i f ( p r e d ( n o d e ) ) { b r e a k ; } 
 n o d e s . p u s h ( n o d e ) ; n o d e = n o d e . p r e v i o u s S i b l i n g ; } 
 r e t u r n   n o d e s ; } ; v a r   l i s t N e x t = f u n c t i o n ( n o d e , p r e d ) { p r e d = p r e d | | f u n c . f a i l ; v a r   n o d e s = [ ] ; w h i l e ( n o d e ) { i f ( p r e d ( n o d e ) ) { b r e a k ; } 
 n o d e s . p u s h ( n o d e ) ; n o d e = n o d e . n e x t S i b l i n g ; } 
 r e t u r n   n o d e s ; } ; v a r   l i s t D e s c e n d a n t = f u n c t i o n ( n o d e , p r e d ) { v a r   d e s c e n d e n t s = [ ] ; p r e d = p r e d | | f u n c . o k ; ( f u n c t i o n   f n W a l k ( c u r r e n t ) { i f ( n o d e ! = = c u r r e n t & & p r e d ( c u r r e n t ) ) { d e s c e n d e n t s . p u s h ( c u r r e n t ) ; } 
 f o r ( v a r   i d x = 0 , l e n = c u r r e n t . c h i l d N o d e s . l e n g t h ; i d x < l e n ; i d x + + ) { f n W a l k ( c u r r e n t . c h i l d N o d e s [ i d x ] ) ; } } ) ( n o d e ) ; r e t u r n   d e s c e n d e n t s ; } ; v a r   w r a p = f u n c t i o n ( n o d e , w r a p p e r N a m e ) { v a r   p a r e n t = n o d e . p a r e n t N o d e ; v a r   w r a p p e r = $ ( ' < ' + w r a p p e r N a m e + ' > ' ) [ 0 ] ; p a r e n t . i n s e r t B e f o r e ( w r a p p e r , n o d e ) ; w r a p p e r . a p p e n d C h i l d ( n o d e ) ; r e t u r n   w r a p p e r ; } ; v a r   i n s e r t A f t e r = f u n c t i o n ( n o d e , p r e c e d i n g ) { v a r   n e x t = p r e c e d i n g . n e x t S i b l i n g , p a r e n t = p r e c e d i n g . p a r e n t N o d e ; i f ( n e x t ) { p a r e n t . i n s e r t B e f o r e ( n o d e , n e x t ) ; } e l s e { p a r e n t . a p p e n d C h i l d ( n o d e ) ; } 
 r e t u r n   n o d e ; } ; v a r   a p p e n d C h i l d N o d e s = f u n c t i o n ( n o d e , a C h i l d ) { $ . e a c h ( a C h i l d , f u n c t i o n ( i d x , c h i l d ) { n o d e . a p p e n d C h i l d ( c h i l d ) ; } ) ; r e t u r n   n o d e ; } ; v a r   i s L e f t E d g e P o i n t = f u n c t i o n ( p o i n t ) { r e t u r n   p o i n t . o f f s e t = = = 0 ; } ; v a r   i s R i g h t E d g e P o i n t = f u n c t i o n ( p o i n t ) { r e t u r n   p o i n t . o f f s e t = = = n o d e L e n g t h ( p o i n t . n o d e ) ; } ; v a r   i s E d g e P o i n t = f u n c t i o n ( p o i n t ) { r e t u r n   i s L e f t E d g e P o i n t ( p o i n t ) | | i s R i g h t E d g e P o i n t ( p o i n t ) ; } ; v a r   i s L e f t E d g e O f = f u n c t i o n ( n o d e , a n c e s t o r ) { w h i l e ( n o d e & & n o d e ! = = a n c e s t o r ) { i f ( p o s i t i o n ( n o d e ) ! = = 0 ) { r e t u r n   f a l s e ; } 
 n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   t r u e ; } ; v a r   i s R i g h t E d g e O f = f u n c t i o n ( n o d e , a n c e s t o r ) { w h i l e ( n o d e & & n o d e ! = = a n c e s t o r ) { i f ( p o s i t i o n ( n o d e ) ! = = n o d e L e n g t h ( n o d e . p a r e n t N o d e ) - 1 ) { r e t u r n   f a l s e ; } 
 n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   t r u e ; } ; v a r   i s L e f t E d g e P o i n t O f = f u n c t i o n ( p o i n t , a n c e s t o r ) { r e t u r n   i s L e f t E d g e P o i n t ( p o i n t ) & & i s L e f t E d g e O f ( p o i n t . n o d e , a n c e s t o r ) ; } ; v a r   i s R i g h t E d g e P o i n t O f = f u n c t i o n ( p o i n t , a n c e s t o r ) { r e t u r n   i s R i g h t E d g e P o i n t ( p o i n t ) & & i s R i g h t E d g e O f ( p o i n t . n o d e , a n c e s t o r ) ; } ; v a r   p o s i t i o n = f u n c t i o n ( n o d e ) { v a r   o f f s e t = 0 ; w h i l e ( ( n o d e = n o d e . p r e v i o u s S i b l i n g ) ) { o f f s e t + = 1 ; } 
 r e t u r n   o f f s e t ; } ; v a r   h a s C h i l d r e n = f u n c t i o n ( n o d e ) { r e t u r n ! ! ( n o d e & & n o d e . c h i l d N o d e s & & n o d e . c h i l d N o d e s . l e n g t h ) ; } ; v a r   p r e v P o i n t = f u n c t i o n ( p o i n t , i s S k i p I n n e r O f f s e t ) { v a r   n o d e , o f f s e t ; i f ( p o i n t . o f f s e t = = = 0 ) { i f ( i s E d i t a b l e ( p o i n t . n o d e ) ) { r e t u r n   n u l l ; } 
 n o d e = p o i n t . n o d e . p a r e n t N o d e ; o f f s e t = p o s i t i o n ( p o i n t . n o d e ) ; } e l s e   i f ( h a s C h i l d r e n ( p o i n t . n o d e ) ) { n o d e = p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t - 1 ] ; o f f s e t = n o d e L e n g t h ( n o d e ) ; } e l s e { n o d e = p o i n t . n o d e ; o f f s e t = i s S k i p I n n e r O f f s e t ? 0 : p o i n t . o f f s e t - 1 ; } 
 r e t u r n { n o d e : n o d e , o f f s e t : o f f s e t } ; } ; v a r   n e x t P o i n t = f u n c t i o n ( p o i n t , i s S k i p I n n e r O f f s e t ) { v a r   n o d e , o f f s e t ; i f ( n o d e L e n g t h ( p o i n t . n o d e ) = = = p o i n t . o f f s e t ) { i f ( i s E d i t a b l e ( p o i n t . n o d e ) ) { r e t u r n   n u l l ; } 
 n o d e = p o i n t . n o d e . p a r e n t N o d e ; o f f s e t = p o s i t i o n ( p o i n t . n o d e ) + 1 ; } e l s e   i f ( h a s C h i l d r e n ( p o i n t . n o d e ) ) { n o d e = p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t ] ; o f f s e t = 0 ; } e l s e { n o d e = p o i n t . n o d e ; o f f s e t = i s S k i p I n n e r O f f s e t ? n o d e L e n g t h ( p o i n t . n o d e ) : p o i n t . o f f s e t + 1 ; } 
 r e t u r n { n o d e : n o d e , o f f s e t : o f f s e t } ; } ; v a r   i s S a m e P o i n t = f u n c t i o n ( p o i n t A , p o i n t B ) { r e t u r n   p o i n t A . n o d e = = = p o i n t B . n o d e & & p o i n t A . o f f s e t = = = p o i n t B . o f f s e t ; } ; v a r   i s V i s i b l e P o i n t = f u n c t i o n ( p o i n t ) { i f ( i s T e x t ( p o i n t . n o d e ) | | ! h a s C h i l d r e n ( p o i n t . n o d e ) | | i s E m p t y ( p o i n t . n o d e ) ) { r e t u r n   t r u e ; } 
 v a r   l e f t N o d e = p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t - 1 ] ; v a r   r i g h t N o d e = p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t ] ; i f ( ( ! l e f t N o d e | | i s V o i d ( l e f t N o d e ) ) & & ( ! r i g h t N o d e | | i s V o i d ( r i g h t N o d e ) ) ) { r e t u r n   t r u e ; } 
 r e t u r n   f a l s e ; } ; v a r   p r e v P o i n t U n t i l = f u n c t i o n ( p o i n t , p r e d ) { w h i l e ( p o i n t ) { i f ( p r e d ( p o i n t ) ) { r e t u r n   p o i n t ; } 
 p o i n t = p r e v P o i n t ( p o i n t ) ; } 
 r e t u r n   n u l l ; } ; v a r   n e x t P o i n t U n t i l = f u n c t i o n ( p o i n t , p r e d ) { w h i l e ( p o i n t ) { i f ( p r e d ( p o i n t ) ) { r e t u r n   p o i n t ; } 
 p o i n t = n e x t P o i n t ( p o i n t ) ; } 
 r e t u r n   n u l l ; } ; v a r   i s C h a r P o i n t = f u n c t i o n ( p o i n t ) { i f ( ! i s T e x t ( p o i n t . n o d e ) ) { r e t u r n   f a l s e ; } 
 v a r   c h = p o i n t . n o d e . n o d e V a l u e . c h a r A t ( p o i n t . o f f s e t - 1 ) ; r e t u r n   c h & & ( c h ! = = '   ' & & c h ! = = N B S P _ C H A R ) ; } ; v a r   w a l k P o i n t = f u n c t i o n ( s t a r t P o i n t , e n d P o i n t , h a n d l e r , i s S k i p I n n e r O f f s e t ) { v a r   p o i n t = s t a r t P o i n t ; w h i l e ( p o i n t ) { h a n d l e r ( p o i n t ) ; i f ( i s S a m e P o i n t ( p o i n t , e n d P o i n t ) ) { b r e a k ; } 
 v a r   i s S k i p O f f s e t = i s S k i p I n n e r O f f s e t & & s t a r t P o i n t . n o d e ! = = p o i n t . n o d e & & e n d P o i n t . n o d e ! = = p o i n t . n o d e ; p o i n t = n e x t P o i n t ( p o i n t , i s S k i p O f f s e t ) ; } } ; v a r   m a k e O f f s e t P a t h = f u n c t i o n ( a n c e s t o r , n o d e ) { v a r   a n c e s t o r s = l i s t A n c e s t o r ( n o d e , f u n c . e q ( a n c e s t o r ) ) ; r e t u r n   a n c e s t o r s . m a p ( p o s i t i o n ) . r e v e r s e ( ) ; } ; v a r   f r o m O f f s e t P a t h = f u n c t i o n ( a n c e s t o r , o f f s e t s ) { v a r   c u r r e n t = a n c e s t o r ; f o r ( v a r   i = 0 , l e n = o f f s e t s . l e n g t h ; i < l e n ; i + + ) { i f ( c u r r e n t . c h i l d N o d e s . l e n g t h < = o f f s e t s [ i ] ) { c u r r e n t = c u r r e n t . c h i l d N o d e s [ c u r r e n t . c h i l d N o d e s . l e n g t h - 1 ] ; } e l s e { c u r r e n t = c u r r e n t . c h i l d N o d e s [ o f f s e t s [ i ] ] ; } } 
 r e t u r n   c u r r e n t ; } ; v a r   s p l i t N o d e = f u n c t i o n ( p o i n t , o p t i o n s ) { v a r   i s S k i p P a d d i n g B l a n k H T M L = o p t i o n s & & o p t i o n s . i s S k i p P a d d i n g B l a n k H T M L ; v a r   i s N o t S p l i t E d g e P o i n t = o p t i o n s & & o p t i o n s . i s N o t S p l i t E d g e P o i n t ; i f ( i s E d g e P o i n t ( p o i n t ) & & ( i s T e x t ( p o i n t . n o d e ) | | i s N o t S p l i t E d g e P o i n t ) ) { i f ( i s L e f t E d g e P o i n t ( p o i n t ) ) { r e t u r n   p o i n t . n o d e ; } e l s e   i f ( i s R i g h t E d g e P o i n t ( p o i n t ) ) { r e t u r n   p o i n t . n o d e . n e x t S i b l i n g ; } } 
 i f ( i s T e x t ( p o i n t . n o d e ) ) { r e t u r n   p o i n t . n o d e . s p l i t T e x t ( p o i n t . o f f s e t ) ; } e l s e { v a r   c h i l d N o d e = p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t ] ; v a r   c l o n e = i n s e r t A f t e r ( p o i n t . n o d e . c l o n e N o d e ( f a l s e ) , p o i n t . n o d e ) ; a p p e n d C h i l d N o d e s ( c l o n e , l i s t N e x t ( c h i l d N o d e ) ) ; i f ( ! i s S k i p P a d d i n g B l a n k H T M L ) { p a d d i n g B l a n k H T M L ( p o i n t . n o d e ) ; p a d d i n g B l a n k H T M L ( c l o n e ) ; } 
 r e t u r n   c l o n e ; } } ; v a r   s p l i t T r e e = f u n c t i o n ( r o o t , p o i n t , o p t i o n s ) { v a r   a n c e s t o r s = l i s t A n c e s t o r ( p o i n t . n o d e , f u n c . e q ( r o o t ) ) ; i f ( ! a n c e s t o r s . l e n g t h ) { r e t u r n   n u l l ; } e l s e   i f ( a n c e s t o r s . l e n g t h = = = 1 ) { r e t u r n   s p l i t N o d e ( p o i n t , o p t i o n s ) ; } 
 r e t u r n   a n c e s t o r s . r e d u c e ( f u n c t i o n ( n o d e , p a r e n t ) { i f ( n o d e = = = p o i n t . n o d e ) { n o d e = s p l i t N o d e ( p o i n t , o p t i o n s ) ; } 
 r e t u r n   s p l i t N o d e ( { n o d e : p a r e n t , o f f s e t : n o d e ? d o m . p o s i t i o n ( n o d e ) : n o d e L e n g t h ( p a r e n t ) } , o p t i o n s ) ; } ) ; } ; v a r   s p l i t P o i n t = f u n c t i o n ( p o i n t , i s I n l i n e ) { v a r   p r e d = i s I n l i n e ? i s P a r a : i s B o d y C o n t a i n e r ; v a r   a n c e s t o r s = l i s t A n c e s t o r ( p o i n t . n o d e , p r e d ) ; v a r   t o p A n c e s t o r = l i s t . l a s t ( a n c e s t o r s ) | | p o i n t . n o d e ; v a r   s p l i t R o o t , c o n t a i n e r ; i f ( p r e d ( t o p A n c e s t o r ) ) { s p l i t R o o t = a n c e s t o r s [ a n c e s t o r s . l e n g t h - 2 ] ; c o n t a i n e r = t o p A n c e s t o r ; } e l s e { s p l i t R o o t = t o p A n c e s t o r ; c o n t a i n e r = s p l i t R o o t . p a r e n t N o d e ; } 
 v a r   p i v o t = s p l i t R o o t & & s p l i t T r e e ( s p l i t R o o t , p o i n t , { i s S k i p P a d d i n g B l a n k H T M L : i s I n l i n e , i s N o t S p l i t E d g e P o i n t : i s I n l i n e } ) ; i f ( ! p i v o t & & c o n t a i n e r = = = p o i n t . n o d e ) { p i v o t = p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t ] ; } 
 r e t u r n { r i g h t N o d e : p i v o t , c o n t a i n e r : c o n t a i n e r } ; } ; v a r   c r e a t e = f u n c t i o n ( n o d e N a m e ) { r e t u r n   d o c u m e n t . c r e a t e E l e m e n t ( n o d e N a m e ) ; } ; v a r   c r e a t e T e x t = f u n c t i o n ( t e x t ) { r e t u r n   d o c u m e n t . c r e a t e T e x t N o d e ( t e x t ) ; } ; v a r   r e m o v e = f u n c t i o n ( n o d e , i s R e m o v e C h i l d ) { i f ( ! n o d e | | ! n o d e . p a r e n t N o d e ) { r e t u r n ; } 
 i f ( n o d e . r e m o v e N o d e ) { r e t u r n   n o d e . r e m o v e N o d e ( i s R e m o v e C h i l d ) ; } 
 v a r   p a r e n t = n o d e . p a r e n t N o d e ; i f ( ! i s R e m o v e C h i l d ) { v a r   n o d e s = [ ] ; v a r   i , l e n ; f o r ( i = 0 , l e n = n o d e . c h i l d N o d e s . l e n g t h ; i < l e n ; i + + ) { n o d e s . p u s h ( n o d e . c h i l d N o d e s [ i ] ) ; } 
 f o r ( i = 0 , l e n = n o d e s . l e n g t h ; i < l e n ; i + + ) { p a r e n t . i n s e r t B e f o r e ( n o d e s [ i ] , n o d e ) ; } } 
 p a r e n t . r e m o v e C h i l d ( n o d e ) ; } ; v a r   r e m o v e W h i l e = f u n c t i o n ( n o d e , p r e d ) { w h i l e ( n o d e ) { i f ( i s E d i t a b l e ( n o d e ) | | ! p r e d ( n o d e ) ) { b r e a k ; } 
 v a r   p a r e n t = n o d e . p a r e n t N o d e ; r e m o v e ( n o d e ) ; n o d e = p a r e n t ; } } ; v a r   r e p l a c e = f u n c t i o n ( n o d e , n o d e N a m e ) { i f ( n o d e . n o d e N a m e . t o U p p e r C a s e ( ) = = = n o d e N a m e . t o U p p e r C a s e ( ) ) { r e t u r n   n o d e ; } 
 v a r   n e w N o d e = c r e a t e ( n o d e N a m e ) ; i f ( n o d e . s t y l e . c s s T e x t ) { n e w N o d e . s t y l e . c s s T e x t = n o d e . s t y l e . c s s T e x t ; } 
 a p p e n d C h i l d N o d e s ( n e w N o d e , l i s t . f r o m ( n o d e . c h i l d N o d e s ) ) ; i n s e r t A f t e r ( n e w N o d e , n o d e ) ; r e m o v e ( n o d e ) ; r e t u r n   n e w N o d e ; } ; v a r   i s T e x t a r e a = m a k e P r e d B y N o d e N a m e ( ' T E X T A R E A ' ) ; v a r   v a l u e = f u n c t i o n ( $ n o d e , s t r i p L i n e b r e a k s ) { v a r   v a l = i s T e x t a r e a ( $ n o d e [ 0 ] ) ? $ n o d e . v a l ( ) : $ n o d e . h t m l ( ) ; i f ( s t r i p L i n e b r e a k s ) { r e t u r n   v a l . r e p l a c e ( / [ \ n \ r ] / g , ' ' ) ; } 
 r e t u r n   v a l ; } ; v a r   h t m l = f u n c t i o n ( $ n o d e , i s N e w l i n e O n B l o c k ) { v a r   m a r k u p = v a l u e ( $ n o d e ) ; i f ( i s N e w l i n e O n B l o c k ) { v a r   r e g e x T a g = / < ( \ / ? ) ( \ b ( ? ! ! ) [ ^ > \ s ] * ) ( . * ? ) ( \ s * \ / ? > ) / g ; m a r k u p = m a r k u p . r e p l a c e ( r e g e x T a g , f u n c t i o n ( m a t c h , e n d S l a s h , n a m e ) { n a m e = n a m e . t o U p p e r C a s e ( ) ; v a r   i s E n d O f I n l i n e C o n t a i n e r = / ^ D I V | ^ T D | ^ T H | ^ P | ^ L I | ^ H [ 1 - 7 ] / . t e s t ( n a m e ) & & ! ! e n d S l a s h ; v a r   i s B l o c k N o d e = / ^ B L O C K Q U O T E | ^ T A B L E | ^ T B O D Y | ^ T R | ^ H R | ^ U L | ^ O L / . t e s t ( n a m e ) ; r e t u r n   m a t c h + ( ( i s E n d O f I n l i n e C o n t a i n e r | | i s B l o c k N o d e ) ? ' \ n ' : ' ' ) ; } ) ; m a r k u p = $ . t r i m ( m a r k u p ) ; } 
 r e t u r n   m a r k u p ; } ; r e t u r n { N B S P _ C H A R : N B S P _ C H A R , Z E R O _ W I D T H _ N B S P _ C H A R : Z E R O _ W I D T H _ N B S P _ C H A R , b l a n k : b l a n k H T M L , e m p t y P a r a : ' < p > ' + b l a n k H T M L + ' < / p > ' , m a k e P r e d B y N o d e N a m e : m a k e P r e d B y N o d e N a m e , i s E d i t a b l e : i s E d i t a b l e , i s C o n t r o l S i z i n g : i s C o n t r o l S i z i n g , b u i l d L a y o u t I n f o : b u i l d L a y o u t I n f o , m a k e L a y o u t I n f o : m a k e L a y o u t I n f o , i s T e x t : i s T e x t , i s V o i d : i s V o i d , i s P a r a : i s P a r a , i s P u r e P a r a : i s P u r e P a r a , i s I n l i n e : i s I n l i n e , i s B l o c k : f u n c . n o t ( i s I n l i n e ) , i s B o d y I n l i n e : i s B o d y I n l i n e , i s B o d y : i s B o d y , i s P a r a I n l i n e : i s P a r a I n l i n e , i s L i s t : i s L i s t , i s T a b l e : i s T a b l e , i s C e l l : i s C e l l , i s B l o c k q u o t e : i s B l o c k q u o t e , i s B o d y C o n t a i n e r : i s B o d y C o n t a i n e r , i s A n c h o r : i s A n c h o r , i s D i v : m a k e P r e d B y N o d e N a m e ( ' D I V ' ) , i s L i : i s L i , i s B R : m a k e P r e d B y N o d e N a m e ( ' B R ' ) , i s S p a n : m a k e P r e d B y N o d e N a m e ( ' S P A N ' ) , i s B : m a k e P r e d B y N o d e N a m e ( ' B ' ) , i s U : m a k e P r e d B y N o d e N a m e ( ' U ' ) , i s S : m a k e P r e d B y N o d e N a m e ( ' S ' ) , i s I : m a k e P r e d B y N o d e N a m e ( ' I ' ) , i s I m g : m a k e P r e d B y N o d e N a m e ( ' I M G ' ) , i s T e x t a r e a : i s T e x t a r e a , i s E m p t y : i s E m p t y , i s E m p t y A n c h o r : f u n c . a n d ( i s A n c h o r , i s E m p t y ) , i s C l o s e s t S i b l i n g : i s C l o s e s t S i b l i n g , w i t h C l o s e s t S i b l i n g s : w i t h C l o s e s t S i b l i n g s , n o d e L e n g t h : n o d e L e n g t h , i s L e f t E d g e P o i n t : i s L e f t E d g e P o i n t , i s R i g h t E d g e P o i n t : i s R i g h t E d g e P o i n t , i s E d g e P o i n t : i s E d g e P o i n t , i s L e f t E d g e O f : i s L e f t E d g e O f , i s R i g h t E d g e O f : i s R i g h t E d g e O f , i s L e f t E d g e P o i n t O f : i s L e f t E d g e P o i n t O f , i s R i g h t E d g e P o i n t O f : i s R i g h t E d g e P o i n t O f , p r e v P o i n t : p r e v P o i n t , n e x t P o i n t : n e x t P o i n t , i s S a m e P o i n t : i s S a m e P o i n t , i s V i s i b l e P o i n t : i s V i s i b l e P o i n t , p r e v P o i n t U n t i l : p r e v P o i n t U n t i l , n e x t P o i n t U n t i l : n e x t P o i n t U n t i l , i s C h a r P o i n t : i s C h a r P o i n t , w a l k P o i n t : w a l k P o i n t , a n c e s t o r : a n c e s t o r , s i n g l e C h i l d A n c e s t o r : s i n g l e C h i l d A n c e s t o r , l i s t A n c e s t o r : l i s t A n c e s t o r , l a s t A n c e s t o r : l a s t A n c e s t o r , l i s t N e x t : l i s t N e x t , l i s t P r e v : l i s t P r e v , l i s t D e s c e n d a n t : l i s t D e s c e n d a n t , c o m m o n A n c e s t o r : c o m m o n A n c e s t o r , w r a p : w r a p , i n s e r t A f t e r : i n s e r t A f t e r , a p p e n d C h i l d N o d e s : a p p e n d C h i l d N o d e s , p o s i t i o n : p o s i t i o n , h a s C h i l d r e n : h a s C h i l d r e n , m a k e O f f s e t P a t h : m a k e O f f s e t P a t h , f r o m O f f s e t P a t h : f r o m O f f s e t P a t h , s p l i t T r e e : s p l i t T r e e , s p l i t P o i n t : s p l i t P o i n t , c r e a t e : c r e a t e , c r e a t e T e x t : c r e a t e T e x t , r e m o v e : r e m o v e , r e m o v e W h i l e : r e m o v e W h i l e , r e p l a c e : r e p l a c e , h t m l : h t m l , v a l u e : v a l u e } ; } ) ( ) ; r e t u r n   d o m ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / k e y ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / k e y . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / f u n c ' ] , f u n c t i o n ( l i s t , f u n c ) { v a r   k e y = ( f u n c t i o n ( ) { v a r   k e y M a p = { ' B A C K S P A C E ' : 8 , ' T A B ' : 9 , ' E N T E R ' : 1 3 , ' S P A C E ' : 3 2 , ' L E F T ' : 3 7 , ' U P ' : 3 8 , ' R I G H T ' : 3 9 , ' D O W N ' : 4 0 , ' N U M 0 ' : 4 8 , ' N U M 1 ' : 4 9 , ' N U M 2 ' : 5 0 , ' N U M 3 ' : 5 1 , ' N U M 4 ' : 5 2 , ' N U M 5 ' : 5 3 , ' N U M 6 ' : 5 4 , ' N U M 7 ' : 5 5 , ' N U M 8 ' : 5 6 , ' B ' : 6 6 , ' E ' : 6 9 , ' I ' : 7 3 , ' J ' : 7 4 , ' K ' : 7 5 , ' L ' : 7 6 , ' R ' : 8 2 , ' S ' : 8 3 , ' U ' : 8 5 , ' V ' : 8 6 , ' Y ' : 8 9 , ' Z ' : 9 0 , ' S L A S H ' : 1 9 1 , ' L E F T B R A C K E T ' : 2 1 9 , ' B A C K S L A S H ' : 2 2 0 , ' R I G H T B R A C K E T ' : 2 2 1 } ; r e t u r n { i s E d i t : f u n c t i o n ( k e y C o d e ) { r e t u r n   l i s t . c o n t a i n s ( [ k e y M a p . B A C K S P A C E , k e y M a p . T A B , k e y M a p . E N T E R , k e y M a p . S P A C e ] , k e y C o d e ) ; } , i s M o v e : f u n c t i o n ( k e y C o d e ) { r e t u r n   l i s t . c o n t a i n s ( [ k e y M a p . L E F T , k e y M a p . U P , k e y M a p . R I G H T , k e y M a p . D O W N ] , k e y C o d e ) ; } , n a m e F r o m C o d e : f u n c . i n v e r t O b j e c t ( k e y M a p ) , c o d e : k e y M a p } ; } ) ( ) ; r e t u r n   k e y ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / c o r e / r a n g e ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / c o r e / r a n g e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( a g e n t , f u n c , l i s t , d o m ) { v a r   r a n g e = ( f u n c t i o n ( ) { v a r   t e x t R a n g e T o P o i n t = f u n c t i o n ( t e x t R a n g e , i s S t a r t ) { v a r   c o n t a i n e r = t e x t R a n g e . p a r e n t E l e m e n t ( ) , o f f s e t ; v a r   t e s t e r = d o c u m e n t . b o d y . c r e a t e T e x t R a n g e ( ) , p r e v C o n t a i n e r ; v a r   c h i l d N o d e s = l i s t . f r o m ( c o n t a i n e r . c h i l d N o d e s ) ; f o r ( o f f s e t = 0 ; o f f s e t < c h i l d N o d e s . l e n g t h ; o f f s e t + + ) { i f ( d o m . i s T e x t ( c h i l d N o d e s [ o f f s e t ] ) ) { c o n t i n u e ; } 
 t e s t e r . m o v e T o E l e m e n t T e x t ( c h i l d N o d e s [ o f f s e t ] ) ; i f ( t e s t e r . c o m p a r e E n d P o i n t s ( ' S t a r t T o S t a r t ' , t e x t R a n g e ) > = 0 ) { b r e a k ; } 
 p r e v C o n t a i n e r = c h i l d N o d e s [ o f f s e t ] ; } 
 i f ( o f f s e t ! = = 0 & & d o m . i s T e x t ( c h i l d N o d e s [ o f f s e t - 1 ] ) ) { v a r   t e x t R a n g e S t a r t = d o c u m e n t . b o d y . c r e a t e T e x t R a n g e ( ) , c u r T e x t N o d e = n u l l ; t e x t R a n g e S t a r t . m o v e T o E l e m e n t T e x t ( p r e v C o n t a i n e r | | c o n t a i n e r ) ; t e x t R a n g e S t a r t . c o l l a p s e ( ! p r e v C o n t a i n e r ) ; c u r T e x t N o d e = p r e v C o n t a i n e r ? p r e v C o n t a i n e r . n e x t S i b l i n g : c o n t a i n e r . f i r s t C h i l d ; v a r   p o i n t T e s t e r = t e x t R a n g e . d u p l i c a t e ( ) ; p o i n t T e s t e r . s e t E n d P o i n t ( ' S t a r t T o S t a r t ' , t e x t R a n g e S t a r t ) ; v a r   t e x t C o u n t = p o i n t T e s t e r . t e x t . r e p l a c e ( / [ \ r \ n ] / g , ' ' ) . l e n g t h ; w h i l e ( t e x t C o u n t > c u r T e x t N o d e . n o d e V a l u e . l e n g t h & & c u r T e x t N o d e . n e x t S i b l i n g ) { t e x t C o u n t - = c u r T e x t N o d e . n o d e V a l u e . l e n g t h ; c u r T e x t N o d e = c u r T e x t N o d e . n e x t S i b l i n g ; } 
 v a r   d u m m y = c u r T e x t N o d e . n o d e V a l u e ; i f ( i s S t a r t & & c u r T e x t N o d e . n e x t S i b l i n g & & d o m . i s T e x t ( c u r T e x t N o d e . n e x t S i b l i n g ) & & t e x t C o u n t = = = c u r T e x t N o d e . n o d e V a l u e . l e n g t h ) { t e x t C o u n t - = c u r T e x t N o d e . n o d e V a l u e . l e n g t h ; c u r T e x t N o d e = c u r T e x t N o d e . n e x t S i b l i n g ; } 
 c o n t a i n e r = c u r T e x t N o d e ; o f f s e t = t e x t C o u n t ; } 
 r e t u r n { c o n t : c o n t a i n e r , o f f s e t : o f f s e t } ; } ; v a r   p o i n t T o T e x t R a n g e = f u n c t i o n ( p o i n t ) { v a r   t e x t R a n g e I n f o = f u n c t i o n ( c o n t a i n e r , o f f s e t ) { v a r   n o d e , i s C o l l a p s e T o S t a r t ; i f ( d o m . i s T e x t ( c o n t a i n e r ) ) { v a r   p r e v T e x t N o d e s = d o m . l i s t P r e v ( c o n t a i n e r , f u n c . n o t ( d o m . i s T e x t ) ) ; v a r   p r e v C o n t a i n e r = l i s t . l a s t ( p r e v T e x t N o d e s ) . p r e v i o u s S i b l i n g ; n o d e = p r e v C o n t a i n e r | | c o n t a i n e r . p a r e n t N o d e ; o f f s e t + = l i s t . s u m ( l i s t . t a i l ( p r e v T e x t N o d e s ) , d o m . n o d e L e n g t h ) ; i s C o l l a p s e T o S t a r t = ! p r e v C o n t a i n e r ; } e l s e { n o d e = c o n t a i n e r . c h i l d N o d e s [ o f f s e t ] | | c o n t a i n e r ; i f ( d o m . i s T e x t ( n o d e ) ) { r e t u r n   t e x t R a n g e I n f o ( n o d e , 0 ) ; } 
 o f f s e t = 0 ; i s C o l l a p s e T o S t a r t = f a l s e ; } 
 r e t u r n { n o d e : n o d e , c o l l a p s e T o S t a r t : i s C o l l a p s e T o S t a r t , o f f s e t : o f f s e t } ; } ; v a r   t e x t R a n g e = d o c u m e n t . b o d y . c r e a t e T e x t R a n g e ( ) ; v a r   i n f o = t e x t R a n g e I n f o ( p o i n t . n o d e , p o i n t . o f f s e t ) ; t e x t R a n g e . m o v e T o E l e m e n t T e x t ( i n f o . n o d e ) ; t e x t R a n g e . c o l l a p s e ( i n f o . c o l l a p s e T o S t a r t ) ; t e x t R a n g e . m o v e S t a r t ( ' c h a r a c t e r ' , i n f o . o f f s e t ) ; r e t u r n   t e x t R a n g e ; } ; v a r   W r a p p e d R a n g e = f u n c t i o n ( s c , s o , e c , e o ) { t h i s . s c = s c ; t h i s . s o = s o ; t h i s . e c = e c ; t h i s . e o = e o ; v a r   n a t i v e R a n g e = f u n c t i o n ( ) { i f ( a g e n t . i s W 3 C R a n g e S u p p o r t ) { v a r   w 3 c R a n g e = d o c u m e n t . c r e a t e R a n g e ( ) ; w 3 c R a n g e . s e t S t a r t ( s c , s o ) ; w 3 c R a n g e . s e t E n d ( e c , e o ) ; r e t u r n   w 3 c R a n g e ; } e l s e { v a r   t e x t R a n g e = p o i n t T o T e x t R a n g e ( { n o d e : s c , o f f s e t : s o } ) ; t e x t R a n g e . s e t E n d P o i n t ( ' E n d T o E n d ' , p o i n t T o T e x t R a n g e ( { n o d e : e c , o f f s e t : e o } ) ) ; r e t u r n   t e x t R a n g e ; } } ; t h i s . g e t P o i n t s = f u n c t i o n ( ) { r e t u r n { s c : s c , s o : s o , e c : e c , e o : e o } ; } ; t h i s . g e t S t a r t P o i n t = f u n c t i o n ( ) { r e t u r n { n o d e : s c , o f f s e t : s o } ; } ; t h i s . g e t E n d P o i n t = f u n c t i o n ( ) { r e t u r n { n o d e : e c , o f f s e t : e o } ; } ; t h i s . s e l e c t = f u n c t i o n ( ) { v a r   n a t i v e R n g = n a t i v e R a n g e ( ) ; i f ( a g e n t . i s W 3 C R a n g e S u p p o r t ) { v a r   s e l e c t i o n = d o c u m e n t . g e t S e l e c t i o n ( ) ; i f ( s e l e c t i o n . r a n g e C o u n t > 0 ) { s e l e c t i o n . r e m o v e A l l R a n g e s ( ) ; } 
 s e l e c t i o n . a d d R a n g e ( n a t i v e R n g ) ; } e l s e { n a t i v e R n g . s e l e c t ( ) ; } 
 r e t u r n   t h i s ; } ; t h i s . n o r m a l i z e = f u n c t i o n ( ) { v a r   g e t V i s i b l e P o i n t = f u n c t i o n ( p o i n t , i s L e f t T o R i g h t ) { i f ( ( d o m . i s V i s i b l e P o i n t ( p o i n t ) & & ! d o m . i s E d g e P o i n t ( p o i n t ) ) | | ( d o m . i s V i s i b l e P o i n t ( p o i n t ) & & d o m . i s R i g h t E d g e P o i n t ( p o i n t ) & & ! i s L e f t T o R i g h t ) | | ( d o m . i s V i s i b l e P o i n t ( p o i n t ) & & d o m . i s L e f t E d g e P o i n t ( p o i n t ) & & i s L e f t T o R i g h t ) | | ( d o m . i s V i s i b l e P o i n t ( p o i n t ) & & d o m . i s B l o c k ( p o i n t . n o d e ) & & d o m . i s E m p t y ( p o i n t . n o d e ) ) ) { r e t u r n   p o i n t ; } 
 v a r   b l o c k = d o m . a n c e s t o r ( p o i n t . n o d e , d o m . i s B l o c k ) ; i f ( ( ( d o m . i s L e f t E d g e P o i n t O f ( p o i n t , b l o c k ) | | d o m . i s V o i d ( d o m . p r e v P o i n t ( p o i n t ) . n o d e ) ) & & ! i s L e f t T o R i g h t ) | | ( ( d o m . i s R i g h t E d g e P o i n t O f ( p o i n t , b l o c k ) | | d o m . i s V o i d ( d o m . n e x t P o i n t ( p o i n t ) . n o d e ) ) & & i s L e f t T o R i g h t ) ) { i f ( d o m . i s V i s i b l e P o i n t ( p o i n t ) ) { r e t u r n   p o i n t ; } 
 i s L e f t T o R i g h t = ! i s L e f t T o R i g h t ; } 
 v a r   n e x t P o i n t = i s L e f t T o R i g h t ? d o m . n e x t P o i n t U n t i l ( d o m . n e x t P o i n t ( p o i n t ) , d o m . i s V i s i b l e P o i n t ) : d o m . p r e v P o i n t U n t i l ( d o m . p r e v P o i n t ( p o i n t ) , d o m . i s V i s i b l e P o i n t ) ; r e t u r n   n e x t P o i n t | | p o i n t ; } ; v a r   e n d P o i n t = g e t V i s i b l e P o i n t ( t h i s . g e t E n d P o i n t ( ) , f a l s e ) ; v a r   s t a r t P o i n t = t h i s . i s C o l l a p s e d ( ) ? e n d P o i n t : g e t V i s i b l e P o i n t ( t h i s . g e t S t a r t P o i n t ( ) , t r u e ) ; r e t u r n   n e w   W r a p p e d R a n g e ( s t a r t P o i n t . n o d e , s t a r t P o i n t . o f f s e t , e n d P o i n t . n o d e , e n d P o i n t . o f f s e t ) ; } ; t h i s . n o d e s = f u n c t i o n ( p r e d , o p t i o n s ) { p r e d = p r e d | | f u n c . o k ; v a r   i n c l u d e A n c e s t o r = o p t i o n s & & o p t i o n s . i n c l u d e A n c e s t o r ; v a r   f u l l y C o n t a i n s = o p t i o n s & & o p t i o n s . f u l l y C o n t a i n s ; v a r   s t a r t P o i n t = t h i s . g e t S t a r t P o i n t ( ) ; v a r   e n d P o i n t = t h i s . g e t E n d P o i n t ( ) ; v a r   n o d e s = [ ] ; v a r   l e f t E d g e N o d e s = [ ] ; d o m . w a l k P o i n t ( s t a r t P o i n t , e n d P o i n t , f u n c t i o n ( p o i n t ) { i f ( d o m . i s E d i t a b l e ( p o i n t . n o d e ) ) { r e t u r n ; } 
 v a r   n o d e ; i f ( f u l l y C o n t a i n s ) { i f ( d o m . i s L e f t E d g e P o i n t ( p o i n t ) ) { l e f t E d g e N o d e s . p u s h ( p o i n t . n o d e ) ; } 
 i f ( d o m . i s R i g h t E d g e P o i n t ( p o i n t ) & & l i s t . c o n t a i n s ( l e f t E d g e N o d e s , p o i n t . n o d e ) ) { n o d e = p o i n t . n o d e ; } } e l s e   i f ( i n c l u d e A n c e s t o r ) { n o d e = d o m . a n c e s t o r ( p o i n t . n o d e , p r e d ) ; } e l s e { n o d e = p o i n t . n o d e ; } 
 i f ( n o d e & & p r e d ( n o d e ) ) { n o d e s . p u s h ( n o d e ) ; } } , t r u e ) ; r e t u r n   l i s t . u n i q u e ( n o d e s ) ; } ; t h i s . c o m m o n A n c e s t o r = f u n c t i o n ( ) { r e t u r n   d o m . c o m m o n A n c e s t o r ( s c , e c ) ; } ; t h i s . e x p a n d = f u n c t i o n ( p r e d ) { v a r   s t a r t A n c e s t o r = d o m . a n c e s t o r ( s c , p r e d ) ; v a r   e n d A n c e s t o r = d o m . a n c e s t o r ( e c , p r e d ) ; i f ( ! s t a r t A n c e s t o r & & ! e n d A n c e s t o r ) { r e t u r n   n e w   W r a p p e d R a n g e ( s c , s o , e c , e o ) ; } 
 v a r   b o u n d a r y P o i n t s = t h i s . g e t P o i n t s ( ) ; i f ( s t a r t A n c e s t o r ) { b o u n d a r y P o i n t s . s c = s t a r t A n c e s t o r ; b o u n d a r y P o i n t s . s o = 0 ; } 
 i f ( e n d A n c e s t o r ) { b o u n d a r y P o i n t s . e c = e n d A n c e s t o r ; b o u n d a r y P o i n t s . e o = d o m . n o d e L e n g t h ( e n d A n c e s t o r ) ; } 
 r e t u r n   n e w   W r a p p e d R a n g e ( b o u n d a r y P o i n t s . s c , b o u n d a r y P o i n t s . s o , b o u n d a r y P o i n t s . e c , b o u n d a r y P o i n t s . e o ) ; } ; t h i s . c o l l a p s e = f u n c t i o n ( i s C o l l a p s e T o S t a r t ) { i f ( i s C o l l a p s e T o S t a r t ) { r e t u r n   n e w   W r a p p e d R a n g e ( s c , s o , s c , s o ) ; } e l s e { r e t u r n   n e w   W r a p p e d R a n g e ( e c , e o , e c , e o ) ; } } ; t h i s . s p l i t T e x t = f u n c t i o n ( ) { v a r   i s S a m e C o n t a i n e r = s c = = = e c ; v a r   b o u n d a r y P o i n t s = t h i s . g e t P o i n t s ( ) ; i f ( d o m . i s T e x t ( e c ) & & ! d o m . i s E d g e P o i n t ( t h i s . g e t E n d P o i n t ( ) ) ) { e c . s p l i t T e x t ( e o ) ; } 
 i f ( d o m . i s T e x t ( s c ) & & ! d o m . i s E d g e P o i n t ( t h i s . g e t S t a r t P o i n t ( ) ) ) { b o u n d a r y P o i n t s . s c = s c . s p l i t T e x t ( s o ) ; b o u n d a r y P o i n t s . s o = 0 ; i f ( i s S a m e C o n t a i n e r ) { b o u n d a r y P o i n t s . e c = b o u n d a r y P o i n t s . s c ; b o u n d a r y P o i n t s . e o = e o - s o ; } } 
 r e t u r n   n e w   W r a p p e d R a n g e ( b o u n d a r y P o i n t s . s c , b o u n d a r y P o i n t s . s o , b o u n d a r y P o i n t s . e c , b o u n d a r y P o i n t s . e o ) ; } ; i f ( _ . i s U n d e f i n e d ( t h i s . d e l e t e C o n t e n t s ) ) 
 t h i s . d e l e t e C o n t e n t s = f u n c t i o n ( ) { i f ( t h i s . i s C o l l a p s e d ( ) ) { r e t u r n   t h i s ; } 
 v a r   r n g = t h i s . s p l i t T e x t ( ) ; v a r   n o d e s = r n g . n o d e s ( n u l l , { f u l l y C o n t a i n s : t r u e } ) ; v a r   p o i n t = d o m . p r e v P o i n t U n t i l ( r n g . g e t S t a r t P o i n t ( ) , f u n c t i o n ( p o i n t ) { r e t u r n ! l i s t . c o n t a i n s ( n o d e s , p o i n t . n o d e ) ; } ) ; v a r   e m p t y P a r e n t s = [ ] ; $ . e a c h ( n o d e s , f u n c t i o n ( i d x , n o d e ) { v a r   p a r e n t = n o d e . p a r e n t N o d e ; i f ( p o i n t . n o d e ! = = p a r e n t & & d o m . n o d e L e n g t h ( p a r e n t ) = = = 1 ) { e m p t y P a r e n t s . p u s h ( p a r e n t ) ; } 
 d o m . r e m o v e ( n o d e , f a l s e ) ; } ) ; $ . e a c h ( e m p t y P a r e n t s , f u n c t i o n ( i d x , n o d e ) { d o m . r e m o v e ( n o d e , f a l s e ) ; } ) ; r e t u r n   n e w   W r a p p e d R a n g e ( p o i n t . n o d e , p o i n t . o f f s e t , p o i n t . n o d e , p o i n t . o f f s e t ) . n o r m a l i z e ( ) ; } ; v a r   m a k e I s O n = f u n c t i o n ( p r e d ) { r e t u r n   f u n c t i o n ( ) { v a r   a n c e s t o r = d o m . a n c e s t o r ( s c , p r e d ) ; r e t u r n ! ! a n c e s t o r & & ( a n c e s t o r = = = d o m . a n c e s t o r ( e c , p r e d ) ) ; } ; } ; t h i s . i s O n E d i t a b l e = m a k e I s O n ( d o m . i s E d i t a b l e ) ; t h i s . i s O n L i s t = m a k e I s O n ( d o m . i s L i s t ) ; t h i s . i s O n A n c h o r = m a k e I s O n ( d o m . i s A n c h o r ) ; t h i s . i s O n C e l l = m a k e I s O n ( d o m . i s C e l l ) ; t h i s . i s L e f t E d g e O f = f u n c t i o n ( p r e d ) { i f ( ! d o m . i s L e f t E d g e P o i n t ( t h i s . g e t S t a r t P o i n t ( ) ) ) { r e t u r n   f a l s e ; } 
 v a r   n o d e = d o m . a n c e s t o r ( t h i s . s c , p r e d ) ; r e t u r n   n o d e & & d o m . i s L e f t E d g e O f ( t h i s . s c , n o d e ) ; } ; t h i s . i s C o l l a p s e d = f u n c t i o n ( ) { r e t u r n   s c = = = e c & & s o = = = e o ; } ; t h i s . w r a p B o d y I n l i n e W i t h P a r a = f u n c t i o n ( ) { i f ( d o m . i s B o d y C o n t a i n e r ( s c ) & & d o m . i s E m p t y ( s c ) ) { s c . i n n e r H T M L = d o m . e m p t y P a r a ; r e t u r n   n e w   W r a p p e d R a n g e ( s c . f i r s t C h i l d , 0 , s c . f i r s t C h i l d , 0 ) ; } 
 v a r   r n g = t h i s . n o r m a l i z e ( ) ; i f ( d o m . i s P a r a I n l i n e ( s c ) | | d o m . i s P a r a ( s c ) ) { r e t u r n   r n g ; } 
 i f ( d o m . i s T e x t ( s c ) ) { v a r   n o d e = s c ; w h i l e ( n o d e . p a r e n t N o d e ! = = d o c u m e n t ) { n o d e = n o d e . p a r e n t N o d e ; i f ( / ^ ( P | L I | H [ 1 - 7 ] | B U T T O N | A | S P A N ) / . t e s t ( n o d e . n o d e N a m e . t o U p p e r C a s e ( ) ) ) { r e t u r n   t h i s . n o r m a l i z e ( ) ; } } } 
 v a r   t o p A n c e s t o r ; i f ( d o m . i s I n l i n e ( r n g . s c ) ) { v a r   a n c e s t o r s = d o m . l i s t A n c e s t o r ( r n g . s c , f u n c . n o t ( d o m . i s I n l i n e ) ) ; t o p A n c e s t o r = l i s t . l a s t ( a n c e s t o r s ) ; i f ( ! d o m . i s I n l i n e ( t o p A n c e s t o r ) ) { t o p A n c e s t o r = a n c e s t o r s [ a n c e s t o r s . l e n g t h - 2 ] | | r n g . s c . c h i l d N o d e s [ r n g . s o ] ; } } e l s e { t o p A n c e s t o r = r n g . s c . c h i l d N o d e s [ r n g . s o > 0 ? r n g . s o - 1 : 0 ] ; } 
 v a r   i n l i n e S i b l i n g s = d o m . l i s t P r e v ( t o p A n c e s t o r , d o m . i s P a r a I n l i n e ) . r e v e r s e ( ) ; i n l i n e S i b l i n g s = i n l i n e S i b l i n g s . c o n c a t ( d o m . l i s t N e x t ( t o p A n c e s t o r . n e x t S i b l i n g , d o m . i s P a r a I n l i n e ) ) ; i f ( i n l i n e S i b l i n g s . l e n g t h ) { v a r   p a r a = d o m . w r a p ( l i s t . h e a d ( i n l i n e S i b l i n g s ) , ' p ' ) ; d o m . a p p e n d C h i l d N o d e s ( p a r a , l i s t . t a i l ( i n l i n e S i b l i n g s ) ) ; } 
 r e t u r n   t h i s . n o r m a l i z e ( ) ; } ; t h i s . i n s e r t N o d e = f u n c t i o n ( n o d e ) { v a r   r n g = t h i s . w r a p B o d y I n l i n e W i t h P a r a ( ) . d e l e t e C o n t e n t s ( ) ; v a r   i n f o = d o m . s p l i t P o i n t ( r n g . g e t S t a r t P o i n t ( ) , ! d o m . i s B o d y C o n t a i n e r ( d o m . a n c e s t o r ( r n g . s c , f u n c t i o n ( n o d e ) { r e t u r n   d o m . i s B o d y C o n t a i n e r ( n o d e ) | | d o m . i s P a r a ( n o d e ) } ) ) ) ; i f ( i n f o . r i g h t N o d e ) { i n f o . r i g h t N o d e . p a r e n t N o d e . i n s e r t B e f o r e ( n o d e , i n f o . r i g h t N o d e ) ; } e l s e { i n f o . c o n t a i n e r . a p p e n d C h i l d ( n o d e ) ; } 
 r e t u r n   n o d e ; } ; t h i s . p a s t e H T M L = f u n c t i o n ( m a r k u p ) { v a r   c o n t e n t s C o n t a i n e r = $ ( ' < d i v > < / d i v > ' ) . h t m l ( m a r k u p ) [ 0 ] ; v a r   c h i l d N o d e s = l i s t . f r o m ( c o n t e n t s C o n t a i n e r . c h i l d N o d e s ) ; v a r   r n g = t h i s . w r a p B o d y I n l i n e W i t h P a r a ( ) . d e l e t e C o n t e n t s ( ) ; r e t u r n   c h i l d N o d e s . r e v e r s e ( ) . m a p ( f u n c t i o n ( c h i l d N o d e ) { r e t u r n   r n g . i n s e r t N o d e ( c h i l d N o d e ) ; } ) . r e v e r s e ( ) ; } ; t h i s . t o S t r i n g = f u n c t i o n ( ) { v a r   n a t i v e R n g = n a t i v e R a n g e ( ) ; r e t u r n   a g e n t . i s W 3 C R a n g e S u p p o r t ? n a t i v e R n g . t o S t r i n g ( ) : n a t i v e R n g . t e x t ; } ; t h i s . g e t W o r d R a n g e = f u n c t i o n ( f i n d A f t e r ) { v a r   e n d P o i n t = t h i s . g e t E n d P o i n t ( ) ; i f ( ! d o m . i s C h a r P o i n t ( e n d P o i n t ) ) { r e t u r n   t h i s ; } 
 v a r   s t a r t P o i n t = d o m . p r e v P o i n t U n t i l ( e n d P o i n t , f u n c t i o n ( p o i n t ) { r e t u r n ! d o m . i s C h a r P o i n t ( p o i n t ) ; } ) ; i f ( f i n d A f t e r ) { e n d P o i n t = d o m . n e x t P o i n t U n t i l ( e n d P o i n t , f u n c t i o n ( p o i n t ) { r e t u r n ! d o m . i s C h a r P o i n t ( p o i n t ) ; } ) ; } 
 r e t u r n   n e w   W r a p p e d R a n g e ( s t a r t P o i n t . n o d e , s t a r t P o i n t . o f f s e t , e n d P o i n t . n o d e , e n d P o i n t . o f f s e t ) ; } ; t h i s . b o o k m a r k = f u n c t i o n ( e d i t a b l e ) { r e t u r n { s : { p a t h : d o m . m a k e O f f s e t P a t h ( e d i t a b l e , s c ) , o f f s e t : s o } , e : { p a t h : d o m . m a k e O f f s e t P a t h ( e d i t a b l e , e c ) , o f f s e t : e o } } ; } ; t h i s . p a r a B o o k m a r k = f u n c t i o n ( p a r a s ) { r e t u r n { s : { p a t h : l i s t . t a i l ( d o m . m a k e O f f s e t P a t h ( l i s t . h e a d ( p a r a s ) , s c ) ) , o f f s e t : s o } , e : { p a t h : l i s t . t a i l ( d o m . m a k e O f f s e t P a t h ( l i s t . l a s t ( p a r a s ) , e c ) ) , o f f s e t : e o } } ; } ; t h i s . g e t C l i e n t R e c t s = f u n c t i o n ( ) { v a r   n a t i v e R n g = n a t i v e R a n g e ( ) ; r e t u r n   n a t i v e R n g . g e t C l i e n t R e c t s ( ) ; } ; } ; r e t u r n { W r a p p e d R a n g e : W r a p p e d R a n g e , c r e a t e : f u n c t i o n ( s c , s o , e c , e o ) { i f ( ! a r g u m e n t s . l e n g t h ) { i f ( a g e n t . i s W 3 C R a n g e S u p p o r t ) { v a r   s e l e c t i o n = d o c u m e n t . g e t S e l e c t i o n ( ) ; i f ( ! s e l e c t i o n | | s e l e c t i o n . r a n g e C o u n t = = = 0 ) { r e t u r n   n u l l ; } e l s e { t r y { i f ( d o m . i s B o d y ( s e l e c t i o n . a n c h o r N o d e ) ) { r e t u r n   n u l l ; } } c a t c h ( e ) { r e t u r n   n u l l ; } } 
 v a r   n a t i v e R n g = s e l e c t i o n . g e t R a n g e A t ( 0 ) ; s c = n a t i v e R n g . s t a r t C o n t a i n e r ; s o = n a t i v e R n g . s t a r t O f f s e t ; e c = n a t i v e R n g . e n d C o n t a i n e r ; e o = n a t i v e R n g . e n d O f f s e t ; } e l s e { v a r   t e x t R a n g e = d o c u m e n t . s e l e c t i o n . c r e a t e R a n g e ( ) ; v a r   t e x t R a n g e E n d = t e x t R a n g e . d u p l i c a t e ( ) ; t e x t R a n g e E n d . c o l l a p s e ( f a l s e ) ; v a r   t e x t R a n g e S t a r t = t e x t R a n g e ; t e x t R a n g e S t a r t . c o l l a p s e ( t r u e ) ; v a r   s t a r t P o i n t = t e x t R a n g e T o P o i n t ( t e x t R a n g e S t a r t , t r u e ) , e n d P o i n t = t e x t R a n g e T o P o i n t ( t e x t R a n g e E n d , f a l s e ) ; i f ( d o m . i s T e x t ( s t a r t P o i n t . n o d e ) & & d o m . i s L e f t E d g e P o i n t ( s t a r t P o i n t ) & & d o m . i s T e x t N o d e ( e n d P o i n t . n o d e ) & & d o m . i s R i g h t E d g e P o i n t ( e n d P o i n t ) & & e n d P o i n t . n o d e . n e x t S i b l i n g = = = s t a r t P o i n t . n o d e ) { s t a r t P o i n t = e n d P o i n t ; } 
 s c = s t a r t P o i n t . c o n t ; s o = s t a r t P o i n t . o f f s e t ; e c = e n d P o i n t . c o n t ; e o = e n d P o i n t . o f f s e t ; } } e l s e   i f ( a r g u m e n t s . l e n g t h = = = 2 ) { e c = s c ; e o = s o ; } 
 r e t u r n   n e w   W r a p p e d R a n g e ( s c , s o , e c , e o ) ; } , c r e a t e F r o m N o d e : f u n c t i o n ( n o d e ) { v a r   s c = n o d e ; v a r   s o = 0 ; v a r   e c = n o d e ; v a r   e o = d o m . n o d e L e n g t h ( e c ) ; i f ( d o m . i s V o i d ( s c ) ) { s o = d o m . l i s t P r e v ( s c ) . l e n g t h - 1 ; s c = s c . p a r e n t N o d e ; } 
 i f ( d o m . i s B R ( e c ) ) { e o = d o m . l i s t P r e v ( e c ) . l e n g t h - 1 ; e c = e c . p a r e n t N o d e ; } e l s e   i f ( d o m . i s V o i d ( e c ) ) { e o = d o m . l i s t P r e v ( e c ) . l e n g t h ; e c = e c . p a r e n t N o d e ; } 
 r e t u r n   t h i s . c r e a t e ( s c , s o , e c , e o ) ; } , c r e a t e F r o m N o d e B e f o r e : f u n c t i o n ( n o d e ) { r e t u r n   t h i s . c r e a t e F r o m N o d e ( n o d e ) . c o l l a p s e ( t r u e ) ; } , c r e a t e F r o m N o d e A f t e r : f u n c t i o n ( n o d e ) { r e t u r n   t h i s . c r e a t e F r o m N o d e ( n o d e ) . c o l l a p s e ( ) ; } , c r e a t e F r o m B o o k m a r k : f u n c t i o n ( e d i t a b l e , b o o k m a r k ) { v a r   s c = d o m . f r o m O f f s e t P a t h ( e d i t a b l e , b o o k m a r k . s . p a t h ) ; v a r   s o = b o o k m a r k . s . o f f s e t ; v a r   e c = d o m . f r o m O f f s e t P a t h ( e d i t a b l e , b o o k m a r k . e . p a t h ) ; v a r   e o = b o o k m a r k . e . o f f s e t ; r e t u r n   n e w   W r a p p e d R a n g e ( s c , s o , e c , e o ) ; } , c r e a t e F r o m P a r a B o o k m a r k : f u n c t i o n ( b o o k m a r k , p a r a s ) { v a r   s o = b o o k m a r k . s . o f f s e t ; v a r   e o = b o o k m a r k . e . o f f s e t ; v a r   s c = d o m . f r o m O f f s e t P a t h ( l i s t . h e a d ( p a r a s ) , b o o k m a r k . s . p a t h ) ; v a r   e c = d o m . f r o m O f f s e t P a t h ( l i s t . l a s t ( p a r a s ) , b o o k m a r k . e . p a t h ) ; r e t u r n   n e w   W r a p p e d R a n g e ( s c , s o , e c , e o ) ; } } ; } ) ( ) ; r e t u r n   r a n g e ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / e d i t i n g / B u l l e t ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / e d i t i n g / B u l l e t . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / r a n g e ' ] , f u n c t i o n ( l i s t , f u n c , d o m , r a n g e ) { v a r   B u l l e t = f u n c t i o n ( ) { t h i s . i n s e r t O r d e r e d L i s t = f u n c t i o n ( ) { t h i s . t o g g l e L i s t ( ' O L ' ) ; } ; t h i s . i n s e r t U n o r d e r e d L i s t = f u n c t i o n ( ) { t h i s . t o g g l e L i s t ( ' U L ' ) ; } ; t h i s . i n d e n t = f u n c t i o n ( ) { v a r   s e l f = t h i s ; v a r   r n g = r a n g e . c r e a t e ( ) . w r a p B o d y I n l i n e W i t h P a r a ( ) ; v a r   p a r a s = r n g . n o d e s ( d o m . i s P a r a , { i n c l u d e A n c e s t o r : t r u e } ) ; v a r   c l u s t e r e d s = l i s t . c l u s t e r B y ( p a r a s , f u n c . p e q 2 ( ' p a r e n t N o d e ' ) ) ; $ . e a c h ( c l u s t e r e d s , f u n c t i o n ( i d x , p a r a s ) { v a r   h e a d = l i s t . h e a d ( p a r a s ) ; i f ( d o m . i s L i ( h e a d ) ) { s e l f . w r a p L i s t ( p a r a s , h e a d . p a r e n t N o d e . n o d e N a m e ) ; } e l s e { $ . e a c h ( p a r a s , f u n c t i o n ( i d x , p a r a ) { $ ( p a r a ) . c s s ( ' m a r g i n L e f t ' , f u n c t i o n ( i d x , v a l ) { r e t u r n ( p a r s e I n t ( v a l , 1 0 ) | | 0 ) + 2 5 ; } ) ; } ) ; } } ) ; r n g . s e l e c t ( ) ; } ; t h i s . o u t d e n t = f u n c t i o n ( ) { v a r   s e l f = t h i s ; v a r   r n g = r a n g e . c r e a t e ( ) . w r a p B o d y I n l i n e W i t h P a r a ( ) ; v a r   p a r a s = r n g . n o d e s ( d o m . i s P a r a , { i n c l u d e A n c e s t o r : t r u e } ) ; v a r   c l u s t e r e d s = l i s t . c l u s t e r B y ( p a r a s , f u n c . p e q 2 ( ' p a r e n t N o d e ' ) ) ; $ . e a c h ( c l u s t e r e d s , f u n c t i o n ( i d x , p a r a s ) { v a r   h e a d = l i s t . h e a d ( p a r a s ) ; i f ( d o m . i s L i ( h e a d ) ) { s e l f . r e l e a s e L i s t ( [ p a r a s ] ) ; } e l s e { $ . e a c h ( p a r a s , f u n c t i o n ( i d x , p a r a ) { $ ( p a r a ) . c s s ( ' m a r g i n L e f t ' , f u n c t i o n ( i d x , v a l ) { v a l = ( p a r s e I n t ( v a l , 1 0 ) | | 0 ) ; r e t u r n   v a l > 2 5 ? v a l - 2 5 : ' ' ; } ) ; } ) ; } } ) ; r n g . s e l e c t ( ) ; } ; t h i s . t o g g l e L i s t = f u n c t i o n ( l i s t N a m e ) { v a r   s e l f = t h i s ; v a r   r n g = r a n g e . c r e a t e ( ) . w r a p B o d y I n l i n e W i t h P a r a ( ) ; v a r   p a r a s = r n g . n o d e s ( d o m . i s P a r a , { i n c l u d e A n c e s t o r : t r u e } ) ; v a r   b o o k m a r k = r n g . p a r a B o o k m a r k ( p a r a s ) ; v a r   c l u s t e r e d s = l i s t . c l u s t e r B y ( p a r a s , f u n c . p e q 2 ( ' p a r e n t N o d e ' ) ) ; i f ( l i s t . f i n d ( p a r a s , d o m . i s P u r e P a r a ) ) { v a r   w r a p p e d P a r a s = [ ] ; $ . e a c h ( c l u s t e r e d s , f u n c t i o n ( i d x , p a r a s ) { w r a p p e d P a r a s = w r a p p e d P a r a s . c o n c a t ( s e l f . w r a p L i s t ( p a r a s , l i s t N a m e ) ) ; } ) ; p a r a s = w r a p p e d P a r a s ; } e l s e { v a r   d i f f L i s t s = r n g . n o d e s ( d o m . i s L i s t , { i n c l u d e A n c e s t o r : t r u e } ) . f i l t e r ( f u n c t i o n ( l i s t N o d e ) { r e t u r n ! $ . n o d e N a m e ( l i s t N o d e , l i s t N a m e ) ; } ) ; i f ( d i f f L i s t s . l e n g t h ) { $ . e a c h ( d i f f L i s t s , f u n c t i o n ( i d x , l i s t N o d e ) { d o m . r e p l a c e ( l i s t N o d e , l i s t N a m e ) ; } ) ; } e l s e { p a r a s = t h i s . r e l e a s e L i s t ( c l u s t e r e d s , t r u e ) ; } } 
 r a n g e . c r e a t e F r o m P a r a B o o k m a r k ( b o o k m a r k , p a r a s ) . s e l e c t ( ) ; } ; t h i s . w r a p L i s t = f u n c t i o n ( p a r a s , l i s t N a m e ) { v a r   h e a d = l i s t . h e a d ( p a r a s ) ; v a r   l a s t = l i s t . l a s t ( p a r a s ) ; v a r   p r e v L i s t = d o m . i s L i s t ( h e a d . p r e v i o u s S i b l i n g ) & & h e a d . p r e v i o u s S i b l i n g ; v a r   n e x t L i s t = d o m . i s L i s t ( l a s t . n e x t S i b l i n g ) & & l a s t . n e x t S i b l i n g ; v a r   l i s t N o d e = p r e v L i s t | | d o m . i n s e r t A f t e r ( d o m . c r e a t e ( l i s t N a m e | | ' U L ' ) , l a s t ) ; p a r a s = p a r a s . m a p ( f u n c t i o n ( p a r a ) { r e t u r n   d o m . i s P u r e P a r a ( p a r a ) ? d o m . r e p l a c e ( p a r a , ' L I ' ) : p a r a ; } ) ; d o m . a p p e n d C h i l d N o d e s ( l i s t N o d e , p a r a s ) ; i f ( n e x t L i s t ) { d o m . a p p e n d C h i l d N o d e s ( l i s t N o d e , l i s t . f r o m ( n e x t L i s t . c h i l d N o d e s ) ) ; d o m . r e m o v e ( n e x t L i s t ) ; } 
 r e t u r n   p a r a s ; } ; t h i s . r e l e a s e L i s t = f u n c t i o n ( c l u s t e r e d s , i s E s c a p s e T o B o d y ) { v a r   r e l e a s e d P a r a s = [ ] ; $ . e a c h ( c l u s t e r e d s , f u n c t i o n ( i d x , p a r a s ) { v a r   h e a d = l i s t . h e a d ( p a r a s ) ; v a r   l a s t = l i s t . l a s t ( p a r a s ) ; v a r   h e a d L i s t = i s E s c a p s e T o B o d y ? d o m . l a s t A n c e s t o r ( h e a d , d o m . i s L i s t ) : h e a d . p a r e n t N o d e ; v a r   l a s t L i s t = h e a d L i s t . c h i l d N o d e s . l e n g t h > 1 ? d o m . s p l i t T r e e ( h e a d L i s t , { n o d e : l a s t . p a r e n t N o d e , o f f s e t : d o m . p o s i t i o n ( l a s t ) + 1 } , { i s S k i p P a d d i n g B l a n k H T M L : t r u e } ) : n u l l ; v a r   m i d d l e L i s t = d o m . s p l i t T r e e ( h e a d L i s t , { n o d e : h e a d . p a r e n t N o d e , o f f s e t : d o m . p o s i t i o n ( h e a d ) } , { i s S k i p P a d d i n g B l a n k H T M L : t r u e } ) ; p a r a s = i s E s c a p s e T o B o d y ? d o m . l i s t D e s c e n d a n t ( m i d d l e L i s t , d o m . i s L i ) : l i s t . f r o m ( m i d d l e L i s t . c h i l d N o d e s ) . f i l t e r ( d o m . i s L i ) ; i f ( i s E s c a p s e T o B o d y | | ! d o m . i s L i s t ( h e a d L i s t . p a r e n t N o d e ) ) { p a r a s = p a r a s . m a p ( f u n c t i o n ( p a r a ) { r e t u r n   d o m . r e p l a c e ( p a r a , ' P ' ) ; } ) ; } 
 $ . e a c h ( l i s t . f r o m ( p a r a s ) . r e v e r s e ( ) , f u n c t i o n ( i d x , p a r a ) { d o m . i n s e r t A f t e r ( p a r a , h e a d L i s t ) ; } ) ; v a r   r o o t L i s t s = l i s t . c o m p a c t ( [ h e a d L i s t , m i d d l e L i s t , l a s t L i s t ] ) ; $ . e a c h ( r o o t L i s t s , f u n c t i o n ( i d x , r o o t L i s t ) { v a r   l i s t N o d e s = [ r o o t L i s t ] . c o n c a t ( d o m . l i s t D e s c e n d a n t ( r o o t L i s t , d o m . i s L i s t ) ) ; $ . e a c h ( l i s t N o d e s . r e v e r s e ( ) , f u n c t i o n ( i d x , l i s t N o d e ) { i f ( ! d o m . n o d e L e n g t h ( l i s t N o d e ) ) { d o m . r e m o v e ( l i s t N o d e , t r u e ) ; } } ) ; } ) ; r e l e a s e d P a r a s = r e l e a s e d P a r a s . c o n c a t ( p a r a s ) ; } ) ; r e t u r n   r e l e a s e d P a r a s ; } ; } ; r e t u r n   B u l l e t ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / e d i t i n g / H i s t o r y ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / e d i t i n g / H i s t o r y . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / r a n g e ' , ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( r a n g e , d o m ) { v a r   H i s t o r y = f u n c t i o n ( $ e d i t a b l e ) { v a r   s t a c k = [ ] , s t a c k O f f s e t = - 1 ; v a r   e d i t a b l e = $ e d i t a b l e [ 0 ] ; v a r   m a k e S n a p s h o t = f u n c t i o n ( ) { v a r   r n g = r a n g e . c r e a t e ( ) ; v a r   e m p t y B o o k m a r k = { s : { p a t h : [ ] , o f f s e t : 0 } , e : { p a t h : [ ] , o f f s e t : 0 } } ; r e t u r n { c o n t e n t s : $ e d i t a b l e . h t m l ( ) , b o o k m a r k : ( r n g & & d o m . a n c e s t o r ( r n g . s c , d o m . i s E d i t a b l e ) ? r n g . b o o k m a r k ( e d i t a b l e ) : e m p t y B o o k m a r k ) } ; } ; v a r   a p p l y S n a p s h o t = f u n c t i o n ( s n a p s h o t ) { i f ( s n a p s h o t . c o n t e n t s ! = = n u l l ) { $ e d i t a b l e . h t m l ( s n a p s h o t . c o n t e n t s ) ; } 
 i f ( s n a p s h o t . b o o k m a r k ! = = n u l l ) { r a n g e . c r e a t e F r o m B o o k m a r k ( e d i t a b l e , s n a p s h o t . b o o k m a r k ) . s e l e c t ( ) ; } } ; t h i s . u n d o = f u n c t i o n ( ) { i f ( $ e d i t a b l e . h t m l ( ) ! = = s t a c k [ s t a c k O f f s e t ] . c o n t e n t s ) { t h i s . r e c o r d U n d o ( ) ; } 
 i f ( 0 < s t a c k O f f s e t ) { s t a c k O f f s e t - - ; a p p l y S n a p s h o t ( s t a c k [ s t a c k O f f s e t ] ) ; } } ; t h i s . h a s U n d o = f u n c t i o n ( ) { r e t u r n   0 < s t a c k O f f s e t ; } ; t h i s . r e d o = f u n c t i o n ( ) { i f ( s t a c k . l e n g t h - 1 > s t a c k O f f s e t ) { s t a c k O f f s e t + + ; a p p l y S n a p s h o t ( s t a c k [ s t a c k O f f s e t ] ) ; } } ; t h i s . h a s R e d o = f u n c t i o n ( ) { r e t u r n   s t a c k . l e n g t h - 1 > s t a c k O f f s e t ; } ; v a r   l a s t ; t h i s . r e c o r d U n d o = f u n c t i o n ( ) { v a r   k e y = t y p e o f   e v e n t ! = = ' u n d e f i n e d ' ? e v e n t : f a l s e ; i f ( k e y & & ! e v e n t . m e t a K e y & & ! e v e n t . c t r l K e y & & ! e v e n t . a l t K e y & & e v e n t . t y p e = = = " k e y d o w n " ) { k e y = e v e n t . t y p e + " - " ; i f ( e v e n t . w h i c h = = = 8 | | e v e n t . w h i c h = = = 4 6 ) k e y + = ' d e l e t e ' ; e l s e   i f ( e v e n t . w h i c h = = = 1 3 ) k e y + = ' e n t e r ' ; e l s e   k e y + = ' o t h e r ' ; i f ( k e y = = = l a s t ) r e t u r n ; h a s U n d o = t r u e ; } 
 l a s t = k e y ; i f ( s t a c k . l e n g t h > s t a c k O f f s e t + 1 ) { s t a c k = s t a c k . s l i c e ( 0 , s t a c k O f f s e t + 1 ) ; } 
 i f ( s t a c k [ s t a c k O f f s e t ] & & s t a c k [ s t a c k O f f s e t ] . c o n t e n t s = = = $ e d i t a b l e . h t m l ( ) ) { r e t u r n ; } 
 s t a c k O f f s e t + + ; s t a c k . p u s h ( m a k e S n a p s h o t ( ) ) ; } ; t h i s . s p l i t N e x t = f u n c t i o n ( ) { l a s t = f a l s e ; } ; t h i s . r e s e t = f u n c t i o n ( ) { l a s t = f a l s e ; s t a c k = [ ] ; s t a c k O f f s e t = - 1 ; t h i s . r e c o r d U n d o ( ) ; } ; t h i s . r e c o r d U n d o ( ) ; } ; r e t u r n   H i s t o r y ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / e d i t i n g / S t y l e ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / e d i t i n g / S t y l e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( a g e n t , f u n c , l i s t , d o m ) { v a r   S t y l e = f u n c t i o n ( ) { v a r   j Q u e r y C S S = f u n c t i o n ( $ o b j , p r o p e r t y N a m e s ) { i f ( a g e n t . j q u e r y V e r s i o n < 1 . 9 ) { v a r   r e s u l t = { } ; $ . e a c h ( p r o p e r t y N a m e s , f u n c t i o n ( i d x , p r o p e r t y N a m e ) { r e s u l t [ p r o p e r t y N a m e ] = $ o b j . c s s ( p r o p e r t y N a m e ) ; } ) ; r e t u r n   r e s u l t ; } 
 r e t u r n   $ o b j . c s s . c a l l ( $ o b j , p r o p e r t y N a m e s ) ; } ; t h i s . f r o m N o d e = f u n c t i o n ( $ n o d e ) { v a r   p r o p e r t i e s = [ ' f o n t - f a m i l y ' , ' f o n t - s i z e ' , ' t e x t - a l i g n ' , ' l i s t - s t y l e - t y p e ' , ' l i n e - h e i g h t ' ] ; v a r   s t y l e I n f o = j Q u e r y C S S ( $ n o d e , p r o p e r t i e s ) | | { } ; s t y l e I n f o [ ' f o n t - s i z e ' ] = p a r s e I n t ( s t y l e I n f o [ ' f o n t - s i z e ' ] , 1 0 ) ; r e t u r n   s t y l e I n f o ; } ; t h i s . s t y l e P a r a = f u n c t i o n ( r n g , s t y l e I n f o ) { $ . e a c h ( r n g . n o d e s ( d o m . i s P a r a , { i n c l u d e A n c e s t o r : t r u e } ) , f u n c t i o n ( i d x , p a r a ) { $ ( p a r a ) . c s s ( s t y l e I n f o ) ; } ) ; } ; t h i s . s t y l e N o d e s = f u n c t i o n ( r n g , o p t i o n s ) { r n g = r n g . s p l i t T e x t ( ) ; v a r   n o d e N a m e = o p t i o n s & & o p t i o n s . n o d e N a m e | | ' S P A N ' ; v a r   e x p a n d C l o s e s t S i b l i n g = ! ! ( o p t i o n s & & o p t i o n s . e x p a n d C l o s e s t S i b l i n g ) ; v a r   o n l y P a r t i a l C o n t a i n s = ! ! ( o p t i o n s & & o p t i o n s . o n l y P a r t i a l C o n t a i n s ) ; i f ( r n g . i s C o l l a p s e d ( ) ) { r e t u r n [ r n g . i n s e r t N o d e ( d o m . c r e a t e ( n o d e N a m e ) ) ] ; } 
 v a r   p r e d = d o m . m a k e P r e d B y N o d e N a m e ( n o d e N a m e ) ; v a r   n o d e s = r n g . n o d e s ( d o m . i s T e x t , { f u l l y C o n t a i n s : t r u e } ) . m a p ( f u n c t i o n ( t e x t ) { r e t u r n   d o m . s i n g l e C h i l d A n c e s t o r ( t e x t , p r e d ) | | d o m . w r a p ( t e x t , n o d e N a m e ) ; } ) ; i f ( e x p a n d C l o s e s t S i b l i n g ) { i f ( o n l y P a r t i a l C o n t a i n s ) { v a r   n o d e s I n R a n g e = r n g . n o d e s ( ) ; p r e d = f u n c . a n d ( p r e d , f u n c t i o n ( n o d e ) { r e t u r n   l i s t . c o n t a i n s ( n o d e s I n R a n g e , n o d e ) ; } ) ; } 
 r e t u r n   n o d e s . m a p ( f u n c t i o n ( n o d e ) { v a r   s i b l i n g s = d o m . w i t h C l o s e s t S i b l i n g s ( n o d e , p r e d ) ; v a r   h e a d = l i s t . h e a d ( s i b l i n g s ) ; v a r   t a i l s = l i s t . t a i l ( s i b l i n g s ) ; $ . e a c h ( t a i l s , f u n c t i o n ( i d x , e l e m ) { d o m . a p p e n d C h i l d N o d e s ( h e a d , e l e m . c h i l d N o d e s ) ; d o m . r e m o v e ( e l e m ) ; } ) ; r e t u r n   l i s t . h e a d ( s i b l i n g s ) ; } ) ; } e l s e { r e t u r n   n o d e s ; } } ; t h i s . c u r r e n t = f u n c t i o n ( r n g ) { v a r   $ c o n t = $ ( d o m . i s T e x t ( r n g . s c ) ? r n g . s c . p a r e n t N o d e : r n g . s c ) ; v a r   s t y l e I n f o = t h i s . f r o m N o d e ( $ c o n t ) ; s t y l e I n f o [ ' f o n t - b o l d ' ] = d o c u m e n t . q u e r y C o m m a n d S t a t e ( ' b o l d ' ) ? ' b o l d ' : ' n o r m a l ' ; s t y l e I n f o [ ' f o n t - i t a l i c ' ] = d o c u m e n t . q u e r y C o m m a n d S t a t e ( ' i t a l i c ' ) ? ' i t a l i c ' : ' n o r m a l ' ; s t y l e I n f o [ ' f o n t - u n d e r l i n e ' ] = d o c u m e n t . q u e r y C o m m a n d S t a t e ( ' u n d e r l i n e ' ) ? ' u n d e r l i n e ' : ' n o r m a l ' ; s t y l e I n f o [ ' f o n t - s t r i k e t h r o u g h ' ] = d o c u m e n t . q u e r y C o m m a n d S t a t e ( ' s t r i k e T h r o u g h ' ) ? ' s t r i k e t h r o u g h ' : ' n o r m a l ' ; s t y l e I n f o [ ' f o n t - s u p e r s c r i p t ' ] = d o c u m e n t . q u e r y C o m m a n d S t a t e ( ' s u p e r s c r i p t ' ) ? ' s u p e r s c r i p t ' : ' n o r m a l ' ; s t y l e I n f o [ ' f o n t - s u b s c r i p t ' ] = d o c u m e n t . q u e r y C o m m a n d S t a t e ( ' s u b s c r i p t ' ) ? ' s u b s c r i p t ' : ' n o r m a l ' ; i f ( ! r n g . i s O n L i s t ( ) ) { s t y l e I n f o [ ' l i s t - s t y l e ' ] = ' n o n e ' ; } e l s e { v a r   a O r d e r e d T y p e = [ ' c i r c l e ' , ' d i s c ' , ' d i s c - l e a d i n g - z e r o ' , ' s q u a r e ' ] ; v a r   i s U n o r d e r e d = $ . i n A r r a y ( s t y l e I n f o [ ' l i s t - s t y l e - t y p e ' ] , a O r d e r e d T y p e ) > - 1 ; s t y l e I n f o [ ' l i s t - s t y l e ' ] = i s U n o r d e r e d ? ' u n o r d e r e d ' : ' o r d e r e d ' ; } 
 v a r   p a r a = d o m . a n c e s t o r ( r n g . s c , d o m . i s P a r a ) ; i f ( p a r a & & p a r a . s t y l e [ ' l i n e - h e i g h t ' ] ) { s t y l e I n f o [ ' l i n e - h e i g h t ' ] = p a r a . s t y l e . l i n e H e i g h t ; } e l s e { v a r   l i n e H e i g h t = p a r s e I n t ( s t y l e I n f o [ ' l i n e - h e i g h t ' ] , 1 0 ) / p a r s e I n t ( s t y l e I n f o [ ' f o n t - s i z e ' ] , 1 0 ) ; s t y l e I n f o [ ' l i n e - h e i g h t ' ] = l i n e H e i g h t . t o F i x e d ( 1 ) ; } 
 s t y l e I n f o . a n c h o r = r n g . i s O n A n c h o r ( ) & & d o m . a n c e s t o r ( r n g . s c , d o m . i s A n c h o r ) ; s t y l e I n f o . a n c e s t o r s = d o m . l i s t A n c e s t o r ( r n g . s c , d o m . i s E d i t a b l e ) ; s t y l e I n f o . r a n g e = r n g ; r e t u r n   s t y l e I n f o ; } ; } ; r e t u r n   S t y l e ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / e d i t i n g / T a b l e ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / e d i t i n g / T a b l e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / r a n g e ' , ' s u m m e r n o t e / c o r e / l i s t ' ] , f u n c t i o n ( d o m , r a n g e , l i s t ) { v a r   T a b l e = f u n c t i o n ( ) { t h i s . t a b = f u n c t i o n ( r n g , i s S h i f t ) { v a r   c e l l = d o m . a n c e s t o r ( r n g . c o m m o n A n c e s t o r ( ) , d o m . i s C e l l ) ; v a r   t a b l e = d o m . a n c e s t o r ( c e l l , d o m . i s T a b l e ) ; v a r   c e l l s = d o m . l i s t D e s c e n d a n t ( t a b l e , d o m . i s C e l l ) ; v a r   n e x t C e l l = l i s t [ i s S h i f t ? ' p r e v ' : ' n e x t ' ] ( c e l l s , c e l l ) ; i f ( n e x t C e l l ) { r a n g e . c r e a t e ( n e x t C e l l , 0 ) . s e l e c t ( ) ; } } ; t h i s . c r e a t e T a b l e = f u n c t i o n ( c o l C o u n t , r o w C o u n t ) { v a r   t d s = [ ] , t d H T M L ; f o r ( v a r   i d x C o l = 0 ; i d x C o l < c o l C o u n t ; i d x C o l + + ) { t d s . p u s h ( ' < t d > ' + d o m . b l a n k + ' < / t d > ' ) ; } 
 t d H T M L = t d s . j o i n ( ' ' ) ; v a r   t r s = [ ] , t r H T M L ; f o r ( v a r   i d x R o w = 0 ; i d x R o w < r o w C o u n t ; i d x R o w + + ) { t r s . p u s h ( ' < t r > ' + t d H T M L + ' < / t r > ' ) ; } 
 t r H T M L = t r s . j o i n ( ' ' ) ; r e t u r n   $ ( ' < t a b l e   c l a s s = " t a b l e   t a b l e - b o r d e r e d " > ' + t r H T M L + ' < / t a b l e > ' ) [ 0 ] ; } ; } ; r e t u r n   T a b l e ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / e d i t i n g / T y p i n g ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / e d i t i n g / T y p i n g . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / r a n g e ' , ' s u m m e r n o t e / e d i t i n g / B u l l e t ' ] , f u n c t i o n ( d o m , r a n g e , B u l l e t ) { v a r   T y p i n g = f u n c t i o n ( ) { v a r   b u l l e t = n e w   B u l l e t ( ) ; t h i s . i n s e r t T a b = f u n c t i o n ( $ e d i t a b l e , r n g , t a b s i z e ) { v a r   t a b = d o m . c r e a t e T e x t ( n e w   A r r a y ( t a b s i z e + 1 ) . j o i n ( d o m . N B S P _ C H A R ) ) ; r n g = r n g . d e l e t e C o n t e n t s ( ) ; r n g . i n s e r t N o d e ( t a b , t r u e ) ; r n g = r a n g e . c r e a t e ( t a b , t a b s i z e ) ; r n g . s e l e c t ( ) ; } ; t h i s . i n s e r t P a r a g r a p h = f u n c t i o n ( ) { v a r   r n g = r a n g e . c r e a t e ( ) ; r n g = r n g . d e l e t e C o n t e n t s ( ) ; r n g = r n g . w r a p B o d y I n l i n e W i t h P a r a ( ) ; v a r   s p l i t R o o t = d o m . a n c e s t o r ( r n g . s c , d o m . i s P a r a ) ; v a r   n e x t P a r a ; i f ( s p l i t R o o t ) { i f ( d o m . i s E m p t y ( s p l i t R o o t ) & & d o m . i s L i ( s p l i t R o o t ) ) { b u l l e t . t o g g l e L i s t ( s p l i t R o o t . p a r e n t N o d e . n o d e N a m e ) ; r e t u r n ; } e l s e { n e x t P a r a = d o m . s p l i t T r e e ( s p l i t R o o t , r n g . g e t S t a r t P o i n t ( ) ) ; v a r   e m p t y A n c h o r s = d o m . l i s t D e s c e n d a n t ( s p l i t R o o t , d o m . i s E m p t y A n c h o r ) ; e m p t y A n c h o r s = e m p t y A n c h o r s . c o n c a t ( d o m . l i s t D e s c e n d a n t ( n e x t P a r a , d o m . i s E m p t y A n c h o r ) ) ; $ . e a c h ( e m p t y A n c h o r s , f u n c t i o n ( i d x , a n c h o r ) { d o m . r e m o v e ( a n c h o r ) ; } ) ; } } e l s e { v a r   n e x t = r n g . s c . c h i l d N o d e s [ r n g . s o ] ; n e x t P a r a = $ ( d o m . e m p t y P a r a ) [ 0 ] ; i f ( n e x t ) { r n g . s c . i n s e r t B e f o r e ( n e x t P a r a , n e x t ) ; } e l s e { r n g . s c . a p p e n d C h i l d ( n e x t P a r a ) ; } } 
 r a n g e . c r e a t e ( n e x t P a r a , 0 ) . n o r m a l i z e ( ) . s e l e c t ( ) ; } ; } ; r e t u r n   T y p i n g ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / E d i t o r ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / E d i t o r . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / r a n g e ' , ' s u m m e r n o t e / c o r e / a s y n c ' , ' s u m m e r n o t e / e d i t i n g / S t y l e ' , ' s u m m e r n o t e / e d i t i n g / T y p i n g ' , ' s u m m e r n o t e / e d i t i n g / T a b l e ' , ' s u m m e r n o t e / e d i t i n g / B u l l e t ' ] , f u n c t i o n ( a g e n t , f u n c , l i s t , d o m , r a n g e , a s y n c , S t y l e , T y p i n g , T a b l e , B u l l e t ) { v a r   K E Y _ B O G U S = ' b o g u s ' ; v a r   E d i t o r = f u n c t i o n ( h a n d l e r ) { v a r   s e l f = t h i s ; v a r   s t y l e = n e w   S t y l e ( ) ; v a r   t a b l e = n e w   T a b l e ( ) ; v a r   t y p i n g = n e w   T y p i n g ( ) ; v a r   b u l l e t = n e w   B u l l e t ( ) ; t h i s . s t y l e = s t y l e ; t h i s . t a b l e = t a b l e ; t h i s . t y p i n g = t y p i n g ; t h i s . b u l l e t = b u l l e t ; t h i s . c r e a t e R a n g e = f u n c t i o n ( $ e d i t a b l e ) { t h i s . f o c u s ( $ e d i t a b l e ) ; r e t u r n   r a n g e . c r e a t e ( ) ; } ; t h i s . s a v e R a n g e = f u n c t i o n ( $ e d i t a b l e , t h e n C o l l a p s e ) { v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r | | ( $ e d i t a b l e [ 0 ] ! = = r . s c & & ! $ . c o n t a i n s ( $ e d i t a b l e [ 0 ] , r . s c ) ) ) { $ e d i t a b l e . f o c u s ( ) ; } 
 $ e d i t a b l e . d a t a ( ' r a n g e ' , r a n g e . c r e a t e ( ) ) ; i f ( t h e n C o l l a p s e ) { r a n g e . c r e a t e ( ) . c o l l a p s e ( ) . s e l e c t ( ) ; } } ; t h i s . s a v e N o d e = f u n c t i o n ( $ e d i t a b l e ) { v a r   c o p y = [ ] ; f o r ( v a r   k e y = 0 , l e n = $ e d i t a b l e [ 0 ] . c h i l d N o d e s . l e n g t h ; k e y < l e n ; k e y + + ) { c o p y . p u s h ( $ e d i t a b l e [ 0 ] . c h i l d N o d e s [ k e y ] ) ; } 
 $ e d i t a b l e . d a t a ( ' c h i l d N o d e s ' , c o p y ) ; } ; t h i s . r e s t o r e R a n g e = f u n c t i o n ( $ e d i t a b l e ) { v a r   r n g = $ e d i t a b l e . d a t a ( ' r a n g e ' ) ; i f ( r n g ) { r n g . s e l e c t ( ) ; t h i s . f o c u s ( $ e d i t a b l e ) ; } } ; t h i s . r e s t o r e N o d e = f u n c t i o n ( $ e d i t a b l e ) { $ e d i t a b l e . h t m l ( ' ' ) ; v a r   c h i l d = $ e d i t a b l e . d a t a ( ' c h i l d N o d e s ' ) ; f o r ( v a r   i n d e x = 0 , l e n = c h i l d . l e n g t h ; i n d e x < l e n ; i n d e x + + ) { $ e d i t a b l e [ 0 ] . a p p e n d C h i l d ( c h i l d [ i n d e x ] ) ; } } ; t h i s . c u r r e n t S t y l e = f u n c t i o n ( t a r g e t ) { v a r   r n g = r a n g e . c r e a t e ( ) ; v a r   s t y l e I n f o = r n g & & r n g . i s O n E d i t a b l e ( ) ? s t y l e . c u r r e n t ( r n g . n o r m a l i z e ( ) ) : { } ; i f ( d o m . i s I m g ( t a r g e t ) ) { s t y l e I n f o . i m a g e = t a r g e t ; } 
 r e t u r n   s t y l e I n f o ; } ; t h i s . s t y l e F r o m N o d e = f u n c t i o n ( $ n o d e ) { r e t u r n   s t y l e . f r o m N o d e ( $ n o d e ) ; } ; v a r   t r i g g e r O n B e f o r e C h a n g e = f u n c t i o n ( $ e d i t a b l e ) { v a r   $ h o l d e r = d o m . m a k e L a y o u t I n f o ( $ e d i t a b l e ) . h o l d e r ( ) ; h a n d l e r . b i n d C u s t o m E v e n t ( $ h o l d e r , $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) , ' b e f o r e . c o m m a n d ' ) ( $ e d i t a b l e . h t m l ( ) , $ e d i t a b l e ) ; } ; v a r   t r i g g e r O n C h a n g e = f u n c t i o n ( $ e d i t a b l e ) { v a r   $ h o l d e r = d o m . m a k e L a y o u t I n f o ( $ e d i t a b l e ) . h o l d e r ( ) ; h a n d l e r . b i n d C u s t o m E v e n t ( $ h o l d e r , $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) , ' c h a n g e ' ) ( $ e d i t a b l e . h t m l ( ) , $ e d i t a b l e ) ; } ; t h i s . u n d o = f u n c t i o n ( $ e d i t a b l e ) { t r i g g e r O n B e f o r e C h a n g e ( $ e d i t a b l e ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . u n d o ( ) ; t r i g g e r O n C h a n g e ( $ e d i t a b l e ) ; } ; t h i s . r e d o = f u n c t i o n ( $ e d i t a b l e ) { t r i g g e r O n B e f o r e C h a n g e ( $ e d i t a b l e ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e d o ( ) ; t r i g g e r O n C h a n g e ( $ e d i t a b l e ) ; } ; v a r   b e f o r e C o m m a n d = t h i s . b e f o r e C o m m a n d = f u n c t i o n ( $ e d i t a b l e ) { t r i g g e r O n B e f o r e C h a n g e ( $ e d i t a b l e ) ; s e l f . f o c u s ( $ e d i t a b l e ) ; } ; v a r   a f t e r C o m m a n d = t h i s . a f t e r C o m m a n d = f u n c t i o n ( $ e d i t a b l e , i s P r e v e n t T r i g g e r ) { $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( ) ; i f ( ! i s P r e v e n t T r i g g e r ) { t r i g g e r O n C h a n g e ( $ e d i t a b l e ) ; } } ; v a r   c o m m a n d s = [ ' b o l d ' , ' i t a l i c ' , ' u n d e r l i n e ' , ' s t r i k e t h r o u g h ' , ' s u p e r s c r i p t ' , ' s u b s c r i p t ' , ' j u s t i f y L e f t ' , ' j u s t i f y C e n t e r ' , ' j u s t i f y R i g h t ' , ' j u s t i f y F u l l ' , ' f o r m a t B l o c k ' , ' r e m o v e F o r m a t ' , ' b a c k C o l o r ' , ' f o r e C o l o r ' , ' f o n t N a m e ' ] ; f o r ( v a r   i d x = 0 , l e n = c o m m a n d s . l e n g t h ; i d x < l e n ; i d x + + ) { t h i s [ c o m m a n d s [ i d x ] ] = ( f u n c t i o n ( s C m d ) { r e t u r n   f u n c t i o n ( $ e d i t a b l e , v a l u e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; d o c u m e n t . e x e c C o m m a n d ( s C m d , f a l s e , v a l u e ) ; a f t e r C o m m a n d ( $ e d i t a b l e , t r u e ) ; } ; } ) ( c o m m a n d s [ i d x ] ) ; } 
 t h i s . t a b = f u n c t i o n ( $ e d i t a b l e , o p t i o n s ) { v a r   r n g = t h i s . c r e a t e R a n g e ( $ e d i t a b l e ) ; i f ( r n g . i s C o l l a p s e d ( ) & & r n g . i s O n C e l l ( ) ) { t a b l e . t a b ( r n g ) ; } e l s e { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; t y p i n g . i n s e r t T a b ( $ e d i t a b l e , r n g , o p t i o n s . t a b s i z e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } } ; t h i s . u n t a b = f u n c t i o n ( $ e d i t a b l e ) { v a r   r n g = t h i s . c r e a t e R a n g e ( $ e d i t a b l e ) ; i f ( r n g . i s C o l l a p s e d ( ) & & r n g . i s O n C e l l ( ) ) { t a b l e . t a b ( r n g , t r u e ) ; } } ; t h i s . i n s e r t P a r a g r a p h = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; t y p i n g . i n s e r t P a r a g r a p h ( $ e d i t a b l e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i n s e r t O r d e r e d L i s t = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; b u l l e t . i n s e r t O r d e r e d L i s t ( $ e d i t a b l e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i n s e r t U n o r d e r e d L i s t = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; b u l l e t . i n s e r t U n o r d e r e d L i s t ( $ e d i t a b l e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i n d e n t = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; b u l l e t . i n d e n t ( $ e d i t a b l e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . o u t d e n t = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; b u l l e t . o u t d e n t ( $ e d i t a b l e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i n s e r t I m a g e = f u n c t i o n ( $ e d i t a b l e , s U r l , f i l e n a m e ) { a s y n c . c r e a t e I m a g e ( s U r l , f i l e n a m e ) . t h e n ( f u n c t i o n ( $ i m a g e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; $ i m a g e . c s s ( { d i s p l a y : ' ' , w i d t h : M a t h . m i n ( $ e d i t a b l e . w i d t h ( ) , $ i m a g e . w i d t h ( ) ) } ) ; r a n g e . c r e a t e ( ) . i n s e r t N o d e ( $ i m a g e [ 0 ] ) ; r a n g e . c r e a t e F r o m N o d e A f t e r ( $ i m a g e [ 0 ] ) . s e l e c t ( ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ) . f a i l ( f u n c t i o n ( ) { v a r   $ h o l d e r = d o m . m a k e L a y o u t I n f o ( $ e d i t a b l e ) . h o l d e r ( ) ; h a n d l e r . b i n d C u s t o m E v e n t ( $ h o l d e r , $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) , ' i m a g e . u p l o a d . e r r o r ' ) ( ) ; } ) ; } ; t h i s . i n s e r t N o d e = f u n c t i o n ( $ e d i t a b l e , n o d e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; r a n g e . c r e a t e ( ) . i n s e r t N o d e ( n o d e ) ; r a n g e . c r e a t e F r o m N o d e A f t e r ( n o d e ) . s e l e c t ( ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i n s e r t T e x t = f u n c t i o n ( $ e d i t a b l e , t e x t ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; v a r   t e x t N o d e = r a n g e . c r e a t e ( ) . i n s e r t N o d e ( d o m . c r e a t e T e x t ( t e x t ) ) ; r a n g e . c r e a t e ( t e x t N o d e , d o m . n o d e L e n g t h ( t e x t N o d e ) ) . s e l e c t ( ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . p a s t e H T M L = f u n c t i o n ( $ e d i t a b l e , m a r k u p ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; v a r   c o n t e n t s = r a n g e . c r e a t e ( ) . p a s t e H T M L ( m a r k u p ) ; r a n g e . c r e a t e F r o m N o d e A f t e r ( l i s t . l a s t ( c o n t e n t s ) ) . s e l e c t ( ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . f o r m a t B l o c k = f u n c t i o n ( $ e d i t a b l e , t a g N a m e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; t a g N a m e = a g e n t . i s M S I E ? ' < ' + t a g N a m e + ' > ' : t a g N a m e ; d o c u m e n t . e x e c C o m m a n d ( ' F o r m a t B l o c k ' , f a l s e , t a g N a m e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . f o r m a t P a r a = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; t h i s . f o r m a t B l o c k ( $ e d i t a b l e , ' P ' ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; f o r ( v a r   i d x = 1 ; i d x < = 6 ; i d x + + ) { t h i s [ ' f o r m a t H ' + i d x ] = f u n c t i o n ( i d x ) { r e t u r n   f u n c t i o n ( $ e d i t a b l e ) { t h i s . f o r m a t B l o c k ( $ e d i t a b l e , ' H ' + i d x ) ; } ; } ( i d x ) ; } ; t h i s . f o n t S i z e = f u n c t i o n ( $ e d i t a b l e , v a l u e ) { v a r   r n g = r a n g e . c r e a t e ( ) ; i f ( r n g . i s C o l l a p s e d ( ) ) { v a r   s p a n s = s t y l e . s t y l e N o d e s ( r n g ) ; v a r   f i r s t S p a n = l i s t . h e a d ( s p a n s ) ; $ ( s p a n s ) . c s s ( { ' f o n t - s i z e ' : v a l u e + ' p x ' } ) ; i f ( f i r s t S p a n & & ! d o m . n o d e L e n g t h ( f i r s t S p a n ) ) { f i r s t S p a n . i n n e r H T M L = d o m . Z E R O _ W I D T H _ N B S P _ C H A R ; r a n g e . c r e a t e F r o m N o d e A f t e r ( f i r s t S p a n . f i r s t C h i l d ) . s e l e c t ( ) ; $ e d i t a b l e . d a t a ( K E Y _ B O G U S , f i r s t S p a n ) ; } } e l s e { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; $ ( s t y l e . s t y l e N o d e s ( r n g ) ) . c s s ( { ' f o n t - s i z e ' : v a l u e + ' p x ' } ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } } ; t h i s . i n s e r t H o r i z o n t a l R u l e = f u n c t i o n ( $ e d i t a b l e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; v a r   r n g = r a n g e . c r e a t e ( ) ; v a r   h r N o d e = r n g . i n s e r t N o d e ( $ ( ' < H R / > ' ) [ 0 ] ) ; i f ( h r N o d e . n e x t S i b l i n g ) { r a n g e . c r e a t e ( h r N o d e . n e x t S i b l i n g , 0 ) . n o r m a l i z e ( ) . s e l e c t ( ) ; } 
 a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . r e m o v e B o g u s = f u n c t i o n ( $ e d i t a b l e ) { v a r   b o g u s N o d e = $ e d i t a b l e . d a t a ( K E Y _ B O G U S ) ; i f ( ! b o g u s N o d e ) { r e t u r n ; } 
 v a r   t e x t N o d e = l i s t . f i n d ( l i s t . f r o m ( b o g u s N o d e . c h i l d N o d e s ) , d o m . i s T e x t ) ; v a r   b o g u s C h a r I d x = t e x t N o d e . n o d e V a l u e . i n d e x O f ( d o m . Z E R O _ W I D T H _ N B S P _ C H A R ) ; i f ( b o g u s C h a r I d x ! = = - 1 ) { t e x t N o d e . d e l e t e D a t a ( b o g u s C h a r I d x , 1 ) ; } 
 i f ( d o m . i s E m p t y ( b o g u s N o d e ) ) { d o m . r e m o v e ( b o g u s N o d e ) ; } 
 $ e d i t a b l e . r e m o v e D a t a ( K E Y _ B O G U S ) ; } ; t h i s . l i n e H e i g h t = f u n c t i o n ( $ e d i t a b l e , v a l u e ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; s t y l e . s t y l e P a r a ( r a n g e . c r e a t e ( ) , { l i n e H e i g h t : v a l u e } ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . u n l i n k = f u n c t i o n ( $ e d i t a b l e ) { v a r   r n g = t h i s . c r e a t e R a n g e ( $ e d i t a b l e ) ; i f ( r n g . i s O n A n c h o r ( ) ) { v a r   a n c h o r = d o m . a n c e s t o r ( r n g . s c , d o m . i s A n c h o r ) ; r n g = r a n g e . c r e a t e F r o m N o d e ( a n c h o r ) ; r n g . s e l e c t ( ) ; b e f o r e C o m m a n d ( $ e d i t a b l e ) ; d o c u m e n t . e x e c C o m m a n d ( ' u n l i n k ' ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } } ; t h i s . c r e a t e L i n k = f u n c t i o n ( $ e d i t a b l e , l i n k I n f o , o p t i o n s ) { v a r   l i n k U r l = l i n k I n f o . u r l ; v a r   l i n k T e x t = l i n k I n f o . t e x t ; v a r   i s N e w W i n d o w = l i n k I n f o . i s N e w W i n d o w ; v a r   r n g = l i n k I n f o . r a n g e | | t h i s . c r e a t e R a n g e ( $ e d i t a b l e ) ; v a r   i s T e x t C h a n g e d = r n g . t o S t r i n g ( ) ! = = l i n k T e x t ; o p t i o n s = o p t i o n s | | d o m . m a k e L a y o u t I n f o ( $ e d i t a b l e ) . e d i t o r ( ) . d a t a ( ' o p t i o n s ' ) ; b e f o r e C o m m a n d ( $ e d i t a b l e ) ; i f ( o p t i o n s . o n C r e a t e L i n k ) { l i n k U r l = o p t i o n s . o n C r e a t e L i n k ( l i n k U r l ) ; } 
 v a r   a n c h o r s = [ ] ; v a r   a n c e s t o r _ a n c h o r = d o m . a n c e s t o r ( r n g . s c , d o m . i s A n c h o r ) ; i f ( a n c e s t o r _ a n c h o r & & a n c e s t o r _ a n c h o r = = = d o m . a n c e s t o r ( r n g . e c , d o m . i s A n c h o r ) ) { a n c h o r s . p u s h ( $ ( a n c e s t o r _ a n c h o r ) . h t m l ( l i n k T e x t ) . g e t ( 0 ) ) ; } e l s e   i f ( i s T e x t C h a n g e d ) { v a r   a n c h o r = r n g . i n s e r t N o d e ( $ ( ' < A > ' + l i n k T e x t + ' < / A > ' ) [ 0 ] ) ; a n c h o r s . p u s h ( a n c h o r ) ; } e l s e { a n c h o r s = s t y l e . s t y l e N o d e s ( r n g , { n o d e N a m e : ' A ' , e x p a n d C l o s e s t S i b l i n g : t r u e , o n l y P a r t i a l C o n t a i n s : t r u e } ) ; } 
 $ . e a c h ( a n c h o r s , f u n c t i o n ( i d x , a n c h o r ) { $ ( a n c h o r ) . a t t r ( ' h r e f ' , l i n k U r l ) ; $ ( a n c h o r ) . a t t r ( ' c l a s s ' , l i n k I n f o . c l a s s N a m e | | n u l l ) ; $ ( a n c h o r ) . c s s ( l i n k I n f o . s t y l e | | { } ) ; i f ( i s N e w W i n d o w ) { $ ( a n c h o r ) . a t t r ( ' t a r g e t ' , ' _ b l a n k ' ) ; } e l s e { $ ( a n c h o r ) . r e m o v e A t t r ( ' t a r g e t ' ) ; } } ) ; v a r   s t a r t R a n g e = r a n g e . c r e a t e F r o m N o d e B e f o r e ( l i s t . h e a d ( a n c h o r s ) ) ; v a r   s t a r t P o i n t = s t a r t R a n g e . g e t S t a r t P o i n t ( ) ; v a r   e n d R a n g e = r a n g e . c r e a t e F r o m N o d e A f t e r ( l i s t . l a s t ( a n c h o r s ) ) ; v a r   e n d P o i n t = e n d R a n g e . g e t E n d P o i n t ( ) ; r a n g e . c r e a t e ( s t a r t P o i n t . n o d e , s t a r t P o i n t . o f f s e t , e n d P o i n t . n o d e , e n d P o i n t . o f f s e t ) . s e l e c t ( ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . g e t L i n k I n f o = f u n c t i o n ( $ e d i t a b l e ) { t h i s . f o c u s ( $ e d i t a b l e ) ; v a r   r n g = r a n g e . c r e a t e ( ) . e x p a n d ( d o m . i s A n c h o r ) ; v a r   $ a n c h o r = $ ( l i s t . h e a d ( r n g . n o d e s ( d o m . i s A n c h o r ) ) ) ; r e t u r n { r a n g e : r n g , t e x t : r n g . t o S t r i n g ( ) , i s N e w W i n d o w : $ a n c h o r . l e n g t h ? $ a n c h o r . a t t r ( ' t a r g e t ' ) = = = ' _ b l a n k ' : f a l s e , u r l : $ a n c h o r . l e n g t h ? $ a n c h o r . a t t r ( ' h r e f ' ) : ' ' } ; } ; t h i s . c o l o r = f u n c t i o n ( $ e d i t a b l e , s O b j C o l o r ) { v a r   o C o l o r = J S O N . p a r s e ( s O b j C o l o r ) ; v a r   f o r e C o l o r = o C o l o r . f o r e C o l o r , b a c k C o l o r = o C o l o r . b a c k C o l o r ; b e f o r e C o m m a n d ( $ e d i t a b l e ) ; i f ( f o r e C o l o r ) { d o c u m e n t . e x e c C o m m a n d ( ' f o r e C o l o r ' , f a l s e , f o r e C o l o r ) ; } 
 i f ( b a c k C o l o r ) { d o c u m e n t . e x e c C o m m a n d ( ' b a c k C o l o r ' , f a l s e , b a c k C o l o r ) ; } 
 a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i n s e r t T a b l e = f u n c t i o n ( $ e d i t a b l e , s D i m ) { v a r   d i m e n s i o n = s D i m . s p l i t ( ' x ' ) ; b e f o r e C o m m a n d ( $ e d i t a b l e ) ; v a r   r n g = r a n g e . c r e a t e ( ) . d e l e t e C o n t e n t s ( ) ; r n g . i n s e r t N o d e ( t a b l e . c r e a t e T a b l e ( d i m e n s i o n [ 0 ] , d i m e n s i o n [ 1 ] ) ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . f l o a t M e = f u n c t i o n ( $ e d i t a b l e , v a l u e , $ t a r g e t ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; $ t a r g e t . r e m o v e C l a s s ( ' f l o a t - l e f t   f l o a t - r i g h t ' ) ; i f ( v a l u e & & v a l u e ! = = ' n o n e ' ) { $ t a r g e t . a d d C l a s s ( ' p u l l - ' + v a l u e ) ; } 
 $ t a r g e t . c s s ( ' f l o a t ' , v a l u e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . i m a g e S h a p e = f u n c t i o n ( $ e d i t a b l e , v a l u e , $ t a r g e t ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; $ t a r g e t . r e m o v e C l a s s ( ' r o u n d e d   r o u n d e d - c i r c l e   i m g - t h u m b n a i l ' ) ; i f ( v a l u e ) { $ t a r g e t . a d d C l a s s ( v a l u e ) ; } 
 a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . r e s i z e = f u n c t i o n ( $ e d i t a b l e , v a l u e , $ t a r g e t ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; $ t a r g e t . c s s ( { w i d t h : v a l u e * 1 0 0 + ' % ' , h e i g h t : ' ' } ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . r e s i z e T o = f u n c t i o n ( p o s , $ t a r g e t , b K e e p R a t i o ) { v a r   i m a g e S i z e ; i f ( b K e e p R a t i o ) { v a r   n e w R a t i o = p o s . y / p o s . x ; v a r   r a t i o = $ t a r g e t . d a t a ( ' r a t i o ' ) ; i m a g e S i z e = { w i d t h : r a t i o > n e w R a t i o ? p o s . x : p o s . y / r a t i o , h e i g h t : r a t i o > n e w R a t i o ? p o s . x * r a t i o : p o s . y } ; } e l s e { i m a g e S i z e = { w i d t h : p o s . x , h e i g h t : p o s . y } ; } 
 $ t a r g e t . c s s ( i m a g e S i z e ) ; } ; t h i s . r e m o v e M e d i a = f u n c t i o n ( $ e d i t a b l e , v a l u e , $ t a r g e t ) { b e f o r e C o m m a n d ( $ e d i t a b l e ) ; $ t a r g e t . d e t a c h ( ) ; h a n d l e r . b i n d C u s t o m E v e n t ( $ ( ) , $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) , ' m e d i a . d e l e t e ' ) ( $ t a r g e t , $ e d i t a b l e ) ; a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; t h i s . f o c u s = f u n c t i o n ( $ e d i t a b l e ) { $ e d i t a b l e . f o c u s ( ) ; i f ( a g e n t . i s F F ) { v a r   r n g = r a n g e . c r e a t e ( ) ; i f ( ! r n g | | r n g . i s O n E d i t a b l e ( ) ) { r e t u r n ; } 
 r a n g e . c r e a t e F r o m N o d e ( $ e d i t a b l e [ 0 ] ) . n o r m a l i z e ( ) . c o l l a p s e ( ) . s e l e c t ( ) ; } } ; t h i s . i s E m p t y = f u n c t i o n ( $ e d i t a b l e ) { r e t u r n   d o m . i s E m p t y ( $ e d i t a b l e [ 0 ] ) | | d o m . e m p t y P a r a = = = $ e d i t a b l e . h t m l ( ) ; } ; } ; r e t u r n   E d i t o r ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / B u t t o n ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / B u t t o n . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / a g e n t ' ] , f u n c t i o n ( l i s t , a g e n t ) { v a r   B u t t o n = f u n c t i o n ( ) { t h i s . u p d a t e = f u n c t i o n ( $ c o n t a i n e r , s t y l e I n f o ) { v a r   c h e c k D r o p d o w n M e n u = f u n c t i o n ( $ b t n , v a l u e ) { $ b t n . f i n d ( ' . d r o p d o w n - m e n u   . d r o p d o w n - i t e m ' ) . e a c h ( f u n c t i o n ( ) { v a r   i s C h e c k e d = ( $ ( t h i s ) . d a t a ( ' v a l u e ' ) + ' ' ) = = = ( v a l u e + ' ' ) ; t h i s . c l a s s N a m e = ' d r o p d o w n - i t e m ' + ( i s C h e c k e d ? '   c h e c k e d ' : ' ' ) ; } ) ; } ; v a r   b t n S t a t e = f u n c t i o n ( s e l e c t o r , p r e d ) { v a r   $ b t n = $ c o n t a i n e r . f i n d ( s e l e c t o r ) ; $ b t n . t o g g l e C l a s s ( ' a c t i v e ' , p r e d ( ) ) ; } ; i f ( s t y l e I n f o . i m a g e ) { v a r   $ i m g = $ ( s t y l e I n f o . i m a g e ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i m a g e S h a p e " ] [ d a t a - v a l u e = " r o u n d e d " ] ' , f u n c t i o n ( ) { r e t u r n   $ i m g . h a s C l a s s ( ' r o u n d e d ' ) ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i m a g e S h a p e " ] [ d a t a - v a l u e = " r o u n d e d - c i r c l e " ] ' , f u n c t i o n ( ) { r e t u r n   $ i m g . h a s C l a s s ( ' r o u n d e d - c i r c l e ' ) ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i m a g e S h a p e " ] [ d a t a - v a l u e = " i m g - t h u m b n a i l " ] ' , f u n c t i o n ( ) { r e t u r n   $ i m g . h a s C l a s s ( ' i m g - t h u m b n a i l ' ) ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i m a g e S h a p e " ] : n o t ( [ d a t a - v a l u e ] ) ' , f u n c t i o n ( ) { r e t u r n ! $ i m g . i s ( ' . r o u n d e d ,   . r o u n d e d - c i r c l e ,   . i m g - t h u m b n a i l ' ) ; } ) ; v a r   i m g F l o a t = $ i m g . c s s ( ' f l o a t ' ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " f l o a t M e " ] [ d a t a - v a l u e = " l e f t " ] ' , f u n c t i o n ( ) { r e t u r n   i m g F l o a t = = = ' l e f t ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " f l o a t M e " ] [ d a t a - v a l u e = " r i g h t " ] ' , f u n c t i o n ( ) { r e t u r n   i m g F l o a t = = = ' r i g h t ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " f l o a t M e " ] [ d a t a - v a l u e = " n o n e " ] ' , f u n c t i o n ( ) { r e t u r n   i m g F l o a t ! = = ' l e f t ' & & i m g F l o a t ! = = ' r i g h t ' ; } ) ; v a r   s t y l e = $ i m g . a t t r ( ' s t y l e ' ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " r e s i z e " ] [ d a t a - v a l u e = " 1 " ] ' , f u n c t i o n ( ) { r e t u r n ! ! / ( ^ | \ s ) ( m a x - ) ? w i d t h \ s * : \ s * 1 0 0 % / . t e s t ( s t y l e ) ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " r e s i z e " ] [ d a t a - v a l u e = " 0 . 5 " ] ' , f u n c t i o n ( ) { r e t u r n ! ! / ( ^ | \ s ) ( m a x - ) ? w i d t h \ s * : \ s * 5 0 % / . t e s t ( s t y l e ) ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " r e s i z e " ] [ d a t a - v a l u e = " 0 . 2 5 " ] ' , f u n c t i o n ( ) { r e t u r n ! ! / ( ^ | \ s ) ( m a x - ) ? w i d t h \ s * : \ s * 2 5 % / . t e s t ( s t y l e ) ; } ) ; r e t u r n ; } 
 v a r   $ f o n t n a m e = $ c o n t a i n e r . f i n d ( ' . n o t e - f o n t n a m e ' ) ; i f ( $ f o n t n a m e . l e n g t h ) { v a r   s e l e c t e d F o n t = s t y l e I n f o [ ' f o n t - f a m i l y ' ] ; i f ( ! ! s e l e c t e d F o n t ) { v a r   l i s t = s e l e c t e d F o n t . s p l i t ( ' , ' ) ; f o r ( v a r   i = 0 , l e n = l i s t . l e n g t h ; i < l e n ; i + + ) { s e l e c t e d F o n t = l i s t [ i ] . r e p l a c e ( / [ \ ' \ " ] / g , ' ' ) . r e p l a c e ( / \ s + $ / , ' ' ) . r e p l a c e ( / ^ \ s + / , ' ' ) ; i f ( a g e n t . i s F o n t I n s t a l l e d ( s e l e c t e d F o n t ) ) { b r e a k ; } } 
 $ f o n t n a m e . f i n d ( ' . n o t e - c u r r e n t - f o n t n a m e ' ) . t e x t ( s e l e c t e d F o n t ) ; c h e c k D r o p d o w n M e n u ( $ f o n t n a m e , s e l e c t e d F o n t ) ; } } 
 v a r   $ f o n t s i z e = $ c o n t a i n e r . f i n d ( ' . n o t e - f o n t s i z e ' ) ; $ f o n t s i z e . f i n d ( ' . n o t e - c u r r e n t - f o n t s i z e ' ) . t e x t ( s t y l e I n f o [ ' f o n t - s i z e ' ] ) ; c h e c k D r o p d o w n M e n u ( $ f o n t s i z e , p a r s e F l o a t ( s t y l e I n f o [ ' f o n t - s i z e ' ] ) ) ; v a r   $ l i n e H e i g h t = $ c o n t a i n e r . f i n d ( ' . n o t e - h e i g h t ' ) ; c h e c k D r o p d o w n M e n u ( $ l i n e H e i g h t , p a r s e F l o a t ( s t y l e I n f o [ ' l i n e - h e i g h t ' ] ) ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " b o l d " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' f o n t - b o l d ' ] = = = ' b o l d ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i t a l i c " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' f o n t - i t a l i c ' ] = = = ' i t a l i c ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " u n d e r l i n e " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' f o n t - u n d e r l i n e ' ] = = = ' u n d e r l i n e ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " s t r i k e t h r o u g h " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' f o n t - s t r i k e t h r o u g h ' ] = = = ' s t r i k e t h r o u g h ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " s u p e r s c r i p t " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' f o n t - s u p e r s c r i p t ' ] = = = ' s u p e r s c r i p t ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " s u b s c r i p t " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' f o n t - s u b s c r i p t ' ] = = = ' s u b s c r i p t ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " j u s t i f y L e f t " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' t e x t - a l i g n ' ] = = = ' l e f t ' | | s t y l e I n f o [ ' t e x t - a l i g n ' ] = = = ' s t a r t ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " j u s t i f y C e n t e r " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' t e x t - a l i g n ' ] = = = ' c e n t e r ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " j u s t i f y R i g h t " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' t e x t - a l i g n ' ] = = = ' r i g h t ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " j u s t i f y F u l l " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' t e x t - a l i g n ' ] = = = ' j u s t i f y ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i n s e r t U n o r d e r e d L i s t " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' l i s t - s t y l e ' ] = = = ' u n o r d e r e d ' ; } ) ; b t n S t a t e ( ' b u t t o n [ d a t a - e v e n t = " i n s e r t O r d e r e d L i s t " ] ' , f u n c t i o n ( ) { r e t u r n   s t y l e I n f o [ ' l i s t - s t y l e ' ] = = = ' o r d e r e d ' ; } ) ; } ; t h i s . u p d a t e R e c e n t C o l o r = f u n c t i o n ( b u t t o n , e v e n t N a m e , v a l u e ) { v a r   $ c o l o r = $ ( b u t t o n ) . c l o s e s t ( ' . n o t e - c o l o r ' ) ; v a r   $ r e c e n t C o l o r = $ c o l o r . f i n d ( ' . n o t e - r e c e n t - c o l o r ' ) ; v a r   c o l o r I n f o = J S O N . p a r s e ( $ r e c e n t C o l o r . a t t r ( ' d a t a - v a l u e ' ) ) ; c o l o r I n f o [ e v e n t N a m e ] = v a l u e ; $ r e c e n t C o l o r . a t t r ( ' d a t a - v a l u e ' , J S O N . s t r i n g i f y ( c o l o r I n f o ) ) ; v a r   s K e y = e v e n t N a m e = = = ' b a c k C o l o r ' ? ' b a c k g r o u n d - c o l o r ' : ' c o l o r ' ; $ r e c e n t C o l o r . f i n d ( ' i ' ) . c s s ( s K e y , v a l u e ) ; } ; } ; r e t u r n   B u t t o n ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / C l i p b o a r d ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / C l i p b o a r d . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / k e y ' , ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / r a n g e ' ] , f u n c t i o n ( l i s t , d o m , k e y , a g e n t , r a n g e ) { v a r   C l i p b o a r d = f u n c t i o n ( h a n d l e r ) { v a r   p a s t e B y E v e n t = f u n c t i o n ( e v e n t ) { i f ( [ " I N P U T " , " T E X T A R E A " ] . i n d e x O f ( e v e n t . t a r g e t . t a g N a m e ) ! = = - 1 ) { r e t u r n ; } 
 v a r   c l i p b o a r d D a t a = e v e n t . o r i g i n a l E v e n t . c l i p b o a r d D a t a ; v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . c u r r e n t T a r g e t | | e v e n t . t a r g e t ) ; v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; i f ( c l i p b o a r d D a t a & & c l i p b o a r d D a t a . i t e m s & & c l i p b o a r d D a t a . i t e m s . l e n g t h ) { v a r   i t e m = l i s t . h e a d ( c l i p b o a r d D a t a . i t e m s ) ; i f ( i t e m . k i n d = = = ' f i l e ' & & i t e m . t y p e . i n d e x O f ( ' i m a g e / ' ) ! = = - 1 ) { h a n d l e r . i n s e r t I m a g e s ( l a y o u t I n f o , [ i t e m . g e t A s F i l e ( ) ] ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; } 
 h a n d l e r . i n v o k e ( ' e d i t o r . a f t e r C o m m a n d ' , $ e d i t a b l e ) ; } } ; t h i s . a t t a c h = f u n c t i o n ( l a y o u t I n f o ) { l a y o u t I n f o . e d i t a b l e ( ) . o n ( ' p a s t e ' , p a s t e B y E v e n t ) ; } ; } ; r e t u r n   C l i p b o a r d ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / C o d e v i e w ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / C o d e v i e w . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( a g e n t , d o m ) { v a r   C o d e M i r r o r ; i f ( a g e n t . h a s C o d e M i r r o r ) { i f ( a g e n t . i s S u p p o r t A m d ) { r e q u i r e ( [ ' C o d e M i r r o r ' ] , f u n c t i o n ( c m ) { C o d e M i r r o r = c m ; } ) ; } e l s e { C o d e M i r r o r = w i n d o w . C o d e M i r r o r ; } } 
 v a r   C o d e v i e w = f u n c t i o n ( h a n d l e r ) { t h i s . s y n c = f u n c t i o n ( l a y o u t I n f o ) { v a r   i s C o d e v i e w = h a n d l e r . i n v o k e ( ' c o d e v i e w . i s A c t i v a t e d ' , l a y o u t I n f o ) ; i f ( i s C o d e v i e w & & a g e n t . h a s C o d e M i r r o r ) { l a y o u t I n f o . c o d a b l e ( ) . d a t a ( ' c m E d i t o r ' ) . s a v e ( ) ; } } ; t h i s . i s A c t i v a t e d = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) ; r e t u r n   $ e d i t o r . h a s C l a s s ( ' c o d e v i e w ' ) ; } ; t h i s . t o g g l e = f u n c t i o n ( l a y o u t I n f o ) { i f ( t h i s . i s A c t i v a t e d ( l a y o u t I n f o ) ) { t h i s . d e a c t i v a t e ( l a y o u t I n f o ) ; } e l s e { t h i s . a c t i v a t e ( l a y o u t I n f o ) ; } } ; t h i s . a c t i v a t e = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) , $ t o o l b a r = l a y o u t I n f o . t o o l b a r ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) , $ c o d a b l e = l a y o u t I n f o . c o d a b l e ( ) , $ p o p o v e r = l a y o u t I n f o . p o p o v e r ( ) , $ h a n d l e = l a y o u t I n f o . h a n d l e ( ) ; v a r   o p t i o n s = $ e d i t o r . d a t a ( ' o p t i o n s ' ) ; $ c o d a b l e . v a l ( d o m . h t m l ( $ e d i t a b l e , o p t i o n s . p r e t t i f y H t m l ) ) ; $ c o d a b l e . h e i g h t ( $ e d i t a b l e . h e i g h t ( ) ) ; h a n d l e r . i n v o k e ( ' t o o l b a r . u p d a t e C o d e v i e w ' , $ t o o l b a r , t r u e ) ; h a n d l e r . i n v o k e ( ' p o p o v e r . h i d e ' , $ p o p o v e r ) ; h a n d l e r . i n v o k e ( ' h a n d l e . h i d e ' , $ h a n d l e ) ; $ e d i t o r . a d d C l a s s ( ' c o d e v i e w ' ) ; $ c o d a b l e . f o c u s ( ) ; i f ( a g e n t . h a s C o d e M i r r o r ) { v a r   c m E d i t o r = C o d e M i r r o r . f r o m T e x t A r e a ( $ c o d a b l e [ 0 ] , o p t i o n s . c o d e m i r r o r ) ; i f ( o p t i o n s . c o d e m i r r o r . t e r n ) { v a r   s e r v e r = n e w   C o d e M i r r o r . T e r n S e r v e r ( o p t i o n s . c o d e m i r r o r . t e r n ) ; c m E d i t o r . t e r n S e r v e r = s e r v e r ; c m E d i t o r . o n ( ' c u r s o r A c t i v i t y ' , f u n c t i o n ( c m ) { s e r v e r . u p d a t e A r g H i n t s ( c m ) ; } ) ; } 
 c m E d i t o r . s e t S i z e ( n u l l , $ e d i t a b l e . o u t e r H e i g h t ( ) ) ; $ c o d a b l e . d a t a ( ' c m E d i t o r ' , c m E d i t o r ) ; } } ; t h i s . d e a c t i v a t e = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ h o l d e r = l a y o u t I n f o . h o l d e r ( ) , $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) , $ t o o l b a r = l a y o u t I n f o . t o o l b a r ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) , $ c o d a b l e = l a y o u t I n f o . c o d a b l e ( ) ; v a r   o p t i o n s = $ e d i t o r . d a t a ( ' o p t i o n s ' ) ; i f ( a g e n t . h a s C o d e M i r r o r ) { v a r   c m E d i t o r = $ c o d a b l e . d a t a ( ' c m E d i t o r ' ) ; $ c o d a b l e . v a l ( c m E d i t o r . g e t V a l u e ( ) ) ; c m E d i t o r . t o T e x t A r e a ( ) ; } 
 v a r   v a l u e = d o m . v a l u e ( $ c o d a b l e , o p t i o n s . p r e t t i f y H t m l ) | | d o m . e m p t y P a r a ; v a r   i s C h a n g e = $ e d i t a b l e . h t m l ( ) ! = = v a l u e ; $ e d i t a b l e . h t m l ( v a l u e ) ; $ e d i t a b l e . h e i g h t ( o p t i o n s . h e i g h t ? $ c o d a b l e . h e i g h t ( ) : ' a u t o ' ) ; $ e d i t o r . r e m o v e C l a s s ( ' c o d e v i e w ' ) ; i f ( i s C h a n g e ) { h a n d l e r . b i n d C u s t o m E v e n t ( $ h o l d e r , $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) , ' c h a n g e ' ) ( $ e d i t a b l e . h t m l ( ) , $ e d i t a b l e ) ; } 
 $ e d i t a b l e . f o c u s ( ) ; h a n d l e r . i n v o k e ( ' t o o l b a r . u p d a t e C o d e v i e w ' , $ t o o l b a r , f a l s e ) ; } ; } ; r e t u r n   C o d e v i e w ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / D r a g A n d D r o p ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / D r a g A n d D r o p . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( d o m ) { v a r   D r a g A n d D r o p = f u n c t i o n ( h a n d l e r ) { v a r   $ d o c u m e n t = $ ( d o c u m e n t ) ; t h i s . a t t a c h = f u n c t i o n ( l a y o u t I n f o , o p t i o n s ) { i f ( o p t i o n s . a i r M o d e | | o p t i o n s . d i s a b l e D r a g A n d D r o p ) { $ d o c u m e n t . o n ( ' d r o p ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; } ) ; } e l s e { t h i s . a t t a c h D r a g A n d D r o p E v e n t ( l a y o u t I n f o , o p t i o n s ) ; } } ; t h i s . a t t a c h D r a g A n d D r o p E v e n t = f u n c t i o n ( l a y o u t I n f o , o p t i o n s ) { v a r   c o l l e c t i o n = $ ( ) , $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) , $ d r o p z o n e = l a y o u t I n f o . d r o p z o n e ( ) , $ d r o p z o n e M e s s a g e = $ d r o p z o n e . f i n d ( ' . n o t e - d r o p z o n e - m e s s a g e ' ) ; $ d o c u m e n t . o n ( ' d r a g e n t e r ' , f u n c t i o n ( e ) { v a r   i s C o d e v i e w = h a n d l e r . i n v o k e ( ' c o d e v i e w . i s A c t i v a t e d ' , l a y o u t I n f o ) ; v a r   h a s E d i t o r S i z e = $ e d i t o r . w i d t h ( ) > 0 & & $ e d i t o r . h e i g h t ( ) > 0 ; i f ( ! i s C o d e v i e w & & ! c o l l e c t i o n . l e n g t h & & h a s E d i t o r S i z e ) { $ e d i t o r . a d d C l a s s ( ' d r a g o v e r ' ) ; $ d r o p z o n e . w i d t h ( $ e d i t o r . w i d t h ( ) ) ; $ d r o p z o n e . h e i g h t ( $ e d i t o r . h e i g h t ( ) ) ; $ d r o p z o n e M e s s a g e . t e x t ( o p t i o n s . l a n g I n f o . i m a g e . d r a g I m a g e H e r e ) ; } 
 c o l l e c t i o n = c o l l e c t i o n . a d d ( e . t a r g e t ) ; } ) . o n ( ' d r a g l e a v e ' , f u n c t i o n ( e ) { c o l l e c t i o n = c o l l e c t i o n . n o t ( e . t a r g e t ) ; i f ( ! c o l l e c t i o n . l e n g t h ) { $ e d i t o r . r e m o v e C l a s s ( ' d r a g o v e r ' ) ; } } ) . o n ( ' d r o p ' , f u n c t i o n ( ) { c o l l e c t i o n = $ ( ) ; $ e d i t o r . r e m o v e C l a s s ( ' d r a g o v e r ' ) ; } ) ; $ d r o p z o n e . o n ( ' d r a g e n t e r ' , f u n c t i o n ( ) { $ d r o p z o n e . a d d C l a s s ( ' h o v e r ' ) ; $ d r o p z o n e M e s s a g e . t e x t ( o p t i o n s . l a n g I n f o . i m a g e . d r o p I m a g e ) ; } ) . o n ( ' d r a g l e a v e ' , f u n c t i o n ( ) { $ d r o p z o n e . r e m o v e C l a s s ( ' h o v e r ' ) ; $ d r o p z o n e M e s s a g e . t e x t ( o p t i o n s . l a n g I n f o . i m a g e . d r a g I m a g e H e r e ) ; } ) ; $ d r o p z o n e . o n ( ' d r o p ' , f u n c t i o n ( e v e n t ) { v a r   d a t a T r a n s f e r = e v e n t . o r i g i n a l E v e n t . d a t a T r a n s f e r ; v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . c u r r e n t T a r g e t | | e v e n t . t a r g e t ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; i f ( d a t a T r a n s f e r & & d a t a T r a n s f e r . f i l e s & & d a t a T r a n s f e r . f i l e s . l e n g t h ) { e v e n t . p r e v e n t D e f a u l t ( ) ; l a y o u t I n f o . e d i t a b l e ( ) . f o c u s ( ) ; h a n d l e r . i n s e r t I m a g e s ( l a y o u t I n f o , d a t a T r a n s f e r . f i l e s ) ; } e l s e { v a r   i n s e r t N o d e f u n c = f u n c t i o n ( ) { l a y o u t I n f o . h o l d e r ( ) . s u m m e r n o t e ( ' i n s e r t N o d e ' , t h i s ) ; } ; f o r ( v a r   i = 0 , l e n = d a t a T r a n s f e r . t y p e s . l e n g t h ; i < l e n ; i + + ) { v a r   t y p e = d a t a T r a n s f e r . t y p e s [ i ] ; v a r   c o n t e n t = d a t a T r a n s f e r . g e t D a t a ( t y p e ) ; i f ( t y p e . t o L o w e r C a s e ( ) . i n d e x O f ( ' _ m o z _ ' ) > - 1 ) { r e t u r n ; } 
 i f ( t y p e . t o L o w e r C a s e ( ) . i n d e x O f ( ' t e x t ' ) > - 1 ) { l a y o u t I n f o . h o l d e r ( ) . s u m m e r n o t e ( ' p a s t e H T M L ' , c o n t e n t ) ; } e l s e { $ ( c o n t e n t ) . e a c h ( i n s e r t N o d e f u n c ) ; } } } } ) . o n ( ' d r a g o v e r ' , f a l s e ) ; } ; } ; r e t u r n   D r a g A n d D r o p ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / F u l l s c r e e n ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / F u l l s c r e e n . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ] , f u n c t i o n ( ) { v a r   F u l l s c r e e n = f u n c t i o n ( h a n d l e r ) { v a r   $ w i n d o w = $ ( w i n d o w ) ; v a r   $ s c r o l l b a r = $ ( ' h t m l ,   b o d y ' ) ; t h i s . t o g g l e = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) , $ t o o l b a r = l a y o u t I n f o . t o o l b a r ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) , $ c o d a b l e = l a y o u t I n f o . c o d a b l e ( ) ; v a r   r e s i z e = f u n c t i o n ( s i z e ) { $ e d i t a b l e . c s s ( ' h e i g h t ' , s i z e . h ) ; $ c o d a b l e . c s s ( ' h e i g h t ' , s i z e . h ) ; i f ( $ c o d a b l e . d a t a ( ' c m e d i t o r ' ) ) { $ c o d a b l e . d a t a ( ' c m e d i t o r ' ) . s e t s i z e ( n u l l , s i z e . h ) ; } } ; $ e d i t o r . t o g g l e C l a s s ( ' f u l l s c r e e n ' ) ; v a r   i s F u l l s c r e e n = $ e d i t o r . h a s C l a s s ( ' f u l l s c r e e n ' ) ; i f ( i s F u l l s c r e e n ) { $ e d i t a b l e . d a t a ( ' o r g h e i g h t ' , $ e d i t a b l e . c s s ( ' h e i g h t ' ) ) ; $ w i n d o w . o n ( ' r e s i z e ' , f u n c t i o n ( ) { r e s i z e ( { h : $ w i n d o w . h e i g h t ( ) - $ t o o l b a r . o u t e r H e i g h t ( ) } ) ; } ) . t r i g g e r ( ' r e s i z e ' ) ; $ s c r o l l b a r . c s s ( ' o v e r f l o w ' , ' h i d d e n ' ) ; } e l s e { $ w i n d o w . o f f ( ' r e s i z e ' ) ; r e s i z e ( { h : $ e d i t a b l e . d a t a ( ' o r g h e i g h t ' ) } ) ; $ s c r o l l b a r . c s s ( ' o v e r f l o w ' , ' v i s i b l e ' ) ; } 
 h a n d l e r . i n v o k e ( ' t o o l b a r . u p d a t e F u l l s c r e e n ' , $ t o o l b a r , i s F u l l s c r e e n ) ; } ; } ; r e t u r n   F u l l s c r e e n ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / H a n d l e ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / H a n d l e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( d o m ) { v a r   H a n d l e = f u n c t i o n ( h a n d l e r ) { v a r   $ d o c u m e n t = $ ( d o c u m e n t ) ; v a r   h H a n d l e M o u s e d o w n = f u n c t i o n ( e v e n t ) { i f ( d o m . i s C o n t r o l S i z i n g ( e v e n t . t a r g e t ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; e v e n t . s t o p P r o p a g a t i o n ( ) ; v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . t a r g e t ) , $ h a n d l e = l a y o u t I n f o . h a n d l e ( ) , $ p o p o v e r = l a y o u t I n f o . p o p o v e r ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) , $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) ; v a r   t a r g e t = $ h a n d l e . f i n d ( ' . n o t e - c o n t r o l - s e l e c t i o n ' ) . d a t a ( ' t a r g e t ' ) , $ t a r g e t = $ ( t a r g e t ) , p o s S t a r t = $ t a r g e t . o f f s e t ( ) , s c r o l l T o p = $ d o c u m e n t . s c r o l l T o p ( ) ; v a r   i s A i r M o d e = $ e d i t o r . d a t a ( ' o p t i o n s ' ) . a i r M o d e ; $ d o c u m e n t . o n ( ' m o u s e m o v e ' , f u n c t i o n ( e v e n t ) { h a n d l e r . i n v o k e ( ' e d i t o r . r e s i z e T o ' , { x : e v e n t . c l i e n t X - p o s S t a r t . l e f t , y : e v e n t . c l i e n t Y - ( p o s S t a r t . t o p - s c r o l l T o p ) } , $ t a r g e t , ! e v e n t . s h i f t K e y ) ; h a n d l e r . i n v o k e ( ' h a n d l e . u p d a t e ' , $ h a n d l e , { i m a g e : t a r g e t } , i s A i r M o d e ) ; h a n d l e r . i n v o k e ( ' p o p o v e r . u p d a t e ' , $ p o p o v e r , { i m a g e : t a r g e t } , i s A i r M o d e ) ; } ) . o n e ( ' m o u s e u p ' , f u n c t i o n ( ) { $ d o c u m e n t . o f f ( ' m o u s e m o v e ' ) ; h a n d l e r . i n v o k e ( ' e d i t o r . a f t e r C o m m a n d ' , $ e d i t a b l e ) ; } ) ; i f ( ! $ t a r g e t . d a t a ( ' r a t i o ' ) ) { $ t a r g e t . d a t a ( ' r a t i o ' , $ t a r g e t . h e i g h t ( ) / $ t a r g e t . w i d t h ( ) ) ; } } } ; t h i s . a t t a c h = f u n c t i o n ( l a y o u t I n f o ) { l a y o u t I n f o . h a n d l e ( ) . o n ( ' m o u s e d o w n ' , h H a n d l e M o u s e d o w n ) ; } ; t h i s . u p d a t e = f u n c t i o n ( $ h a n d l e , s t y l e I n f o , i s A i r M o d e ) { v a r   $ s e l e c t i o n = $ h a n d l e . f i n d ( ' . n o t e - c o n t r o l - s e l e c t i o n ' ) ; i f ( s t y l e I n f o . i m a g e ) { v a r   $ i m a g e = $ ( s t y l e I n f o . i m a g e ) ; v a r   p o s = i s A i r M o d e ? $ i m a g e . o f f s e t ( ) : $ i m a g e . p o s i t i o n ( ) ; v a r   i m a g e S i z e = { w : $ i m a g e . o u t e r W i d t h ( t r u e ) , h : $ i m a g e . o u t e r H e i g h t ( t r u e ) } ; $ s e l e c t i o n . c s s ( { d i s p l a y : ' b l o c k ' , l e f t : p o s . l e f t , t o p : p o s . t o p , w i d t h : i m a g e S i z e . w , h e i g h t : i m a g e S i z e . h } ) . d a t a ( ' t a r g e t ' , s t y l e I n f o . i m a g e ) ; v a r   s i z i n g T e x t = i m a g e S i z e . w + ' x ' + i m a g e S i z e . h ; $ s e l e c t i o n . f i n d ( ' . n o t e - c o n t r o l - s e l e c t i o n - i n f o ' ) . t e x t ( s i z i n g T e x t ) ; } e l s e { $ s e l e c t i o n . h i d e ( ) ; } } ; t h i s . h i d e = f u n c t i o n ( $ h a n d l e ) { $ h a n d l e . c h i l d r e n ( ) . h i d e ( ) ; } ; } ; r e t u r n   H a n d l e ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / H e l p D i a l o g ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / H e l p D i a l o g . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ] , f u n c t i o n ( ) { v a r   H e l p D i a l o g = f u n c t i o n ( h a n d l e r ) { t h i s . s h o w H e l p D i a l o g = f u n c t i o n ( $ e d i t a b l e , $ d i a l o g ) { r e t u r n   $ . D e f e r r e d ( f u n c t i o n ( d e f e r r e d ) { v a r   $ h e l p D i a l o g = $ d i a l o g . f i n d ( ' . n o t e - h e l p - d i a l o g ' ) ; $ h e l p D i a l o g . o n e ( ' h i d d e n . b s . m o d a l ' , f u n c t i o n ( ) { d e f e r r e d . r e s o l v e ( ) ; } ) . m o d a l ( ' s h o w ' ) ; } ) . p r o m i s e ( ) ; } ; t h i s . s h o w = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ d i a l o g = l a y o u t I n f o . d i a l o g ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; h a n d l e r . i n v o k e ( ' e d i t o r . s a v e R a n g e ' , $ e d i t a b l e , t r u e ) ; t h i s . s h o w H e l p D i a l o g ( $ e d i t a b l e , $ d i a l o g ) . t h e n ( f u n c t i o n ( ) { h a n d l e r . i n v o k e ( ' e d i t o r . r e s t o r e R a n g e ' , $ e d i t a b l e ) ; } ) ; } ; } ; r e t u r n   H e l p D i a l o g ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / I m a g e D i a l o g ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / I m a g e D i a l o g . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / k e y ' ] , f u n c t i o n ( k e y ) { v a r   I m a g e D i a l o g = f u n c t i o n ( h a n d l e r ) { v a r   t o g g l e B t n = f u n c t i o n ( $ b t n , i s E n a b l e ) { $ b t n . t o g g l e C l a s s ( ' d i s a b l e d ' , ! i s E n a b l e ) ; $ b t n . a t t r ( ' d i s a b l e d ' , ! i s E n a b l e ) ; } ; v a r   b i n d E n t e r K e y = f u n c t i o n ( $ i n p u t , $ b t n ) { $ i n p u t . o n ( ' k e y p r e s s ' , f u n c t i o n ( e v e n t ) { i f ( e v e n t . k e y C o d e = = = k e y . c o d e . E N T E R ) { $ b t n . t r i g g e r ( ' c l i c k ' ) ; } } ) ; } ; t h i s . s h o w = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ d i a l o g = l a y o u t I n f o . d i a l o g ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; h a n d l e r . i n v o k e ( ' e d i t o r . s a v e R a n g e ' , $ e d i t a b l e ) ; t h i s . s h o w I m a g e D i a l o g ( $ e d i t a b l e , $ d i a l o g ) . t h e n ( f u n c t i o n ( d a t a ) { h a n d l e r . i n v o k e ( ' e d i t o r . r e s t o r e R a n g e ' , $ e d i t a b l e ) ; i f ( t y p e o f   d a t a = = = ' s t r i n g ' ) { h a n d l e r . i n v o k e ( ' e d i t o r . i n s e r t I m a g e ' , $ e d i t a b l e , d a t a ) ; } e l s e { h a n d l e r . i n s e r t I m a g e s ( l a y o u t I n f o , d a t a ) ; } } ) . f a i l ( f u n c t i o n ( ) { h a n d l e r . i n v o k e ( ' e d i t o r . r e s t o r e R a n g e ' , $ e d i t a b l e ) ; } ) ; } ; t h i s . s h o w I m a g e D i a l o g = f u n c t i o n ( $ e d i t a b l e , $ d i a l o g ) { r e t u r n   $ . D e f e r r e d ( f u n c t i o n ( d e f e r r e d ) { v a r   $ i m a g e D i a l o g = $ d i a l o g . f i n d ( ' . n o t e - i m a g e - d i a l o g ' ) ; v a r   $ i m a g e I n p u t = $ d i a l o g . f i n d ( ' . n o t e - i m a g e - i n p u t ' ) , $ i m a g e U r l = $ d i a l o g . f i n d ( ' . n o t e - i m a g e - u r l ' ) , $ i m a g e B t n = $ d i a l o g . f i n d ( ' . n o t e - i m a g e - b t n ' ) ; $ i m a g e D i a l o g . o n e ( ' s h o w n . b s . m o d a l ' , f u n c t i o n ( ) { $ i m a g e I n p u t . r e p l a c e W i t h ( $ i m a g e I n p u t . c l o n e ( ) . o n ( ' c h a n g e ' , f u n c t i o n ( ) { d e f e r r e d . r e s o l v e ( t h i s . f i l e s | | t h i s . v a l u e ) ; $ i m a g e D i a l o g . m o d a l ( ' h i d e ' ) ; } ) . v a l ( ' ' ) ) ; $ i m a g e B t n . c l i c k ( f u n c t i o n ( e v e n t ) { e v e n t . p r e v e n t D e f a u l t ( ) ; d e f e r r e d . r e s o l v e ( $ i m a g e U r l . v a l ( ) ) ; $ i m a g e D i a l o g . m o d a l ( ' h i d e ' ) ; } ) ; $ i m a g e U r l . o n ( ' k e y u p   p a s t e ' , f u n c t i o n ( e v e n t ) { v a r   u r l ; i f ( e v e n t . t y p e = = = ' p a s t e ' ) { u r l = e v e n t . o r i g i n a l E v e n t . c l i p b o a r d D a t a . g e t D a t a ( ' t e x t ' ) ; } e l s e { u r l = $ i m a g e U r l . v a l ( ) ; } 
 t o g g l e B t n ( $ i m a g e B t n , u r l ) ; } ) . v a l ( ' ' ) . t r i g g e r ( ' f o c u s ' ) ; b i n d E n t e r K e y ( $ i m a g e U r l , $ i m a g e B t n ) ; } ) . o n e ( ' h i d d e n . b s . m o d a l ' , f u n c t i o n ( ) { $ i m a g e I n p u t . o f f ( ' c h a n g e ' ) ; $ i m a g e U r l . o f f ( ' k e y u p   p a s t e   k e y p r e s s ' ) ; $ i m a g e B t n . o f f ( ' c l i c k ' ) ; i f ( d e f e r r e d . s t a t e ( ) = = = ' p e n d i n g ' ) { d e f e r r e d . r e j e c t ( ) ; } } ) . m o d a l ( ' s h o w ' ) ; } ) ; } ; } ; r e t u r n   I m a g e D i a l o g ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / L i n k D i a l o g ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / L i n k D i a l o g . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / k e y ' ] , f u n c t i o n ( k e y ) { v a r   L i n k D i a l o g = f u n c t i o n ( h a n d l e r ) { v a r   t o g g l e B t n = f u n c t i o n ( $ b t n , i s E n a b l e ) { $ b t n . t o g g l e C l a s s ( ' d i s a b l e d ' , ! i s E n a b l e ) ; $ b t n . a t t r ( ' d i s a b l e d ' , ! i s E n a b l e ) ; } ; v a r   b i n d E n t e r K e y = f u n c t i o n ( $ i n p u t , $ b t n ) { $ i n p u t . o n ( ' k e y p r e s s ' , f u n c t i o n ( e v e n t ) { i f ( e v e n t . k e y C o d e = = = k e y . c o d e . E N T E R ) { $ b t n . t r i g g e r ( ' c l i c k ' ) ; } } ) ; } ; t h i s . s h o w L i n k D i a l o g = f u n c t i o n ( $ e d i t a b l e , $ d i a l o g , l i n k I n f o ) { r e t u r n   $ . D e f e r r e d ( f u n c t i o n ( d e f e r r e d ) { v a r   $ l i n k D i a l o g = $ d i a l o g . f i n d ( ' . n o t e - l i n k - d i a l o g ' ) ; v a r   $ l i n k T e x t = $ l i n k D i a l o g . f i n d ( ' . n o t e - l i n k - t e x t ' ) , $ l i n k U r l = $ l i n k D i a l o g . f i n d ( ' . n o t e - l i n k - u r l ' ) , $ l i n k B t n = $ l i n k D i a l o g . f i n d ( ' . n o t e - l i n k - b t n ' ) , $ o p e n I n N e w W i n d o w = $ l i n k D i a l o g . f i n d ( ' i n p u t [ t y p e = c h e c k b o x ] ' ) ; $ l i n k D i a l o g . o n e ( ' s h o w n . b s . m o d a l ' , f u n c t i o n ( ) { $ l i n k T e x t . v a l ( l i n k I n f o . t e x t ) ; $ l i n k T e x t . o n ( ' i n p u t ' , f u n c t i o n ( ) { t o g g l e B t n ( $ l i n k B t n , $ l i n k T e x t . v a l ( ) & & $ l i n k U r l . v a l ( ) ) ; l i n k I n f o . t e x t = $ l i n k T e x t . v a l ( ) ; } ) ; i f ( ! l i n k I n f o . u r l ) { l i n k I n f o . u r l = l i n k I n f o . t e x t | | ' h t t p : / / ' ; t o g g l e B t n ( $ l i n k B t n , l i n k I n f o . t e x t ) ; } 
 $ l i n k U r l . o n ( ' i n p u t ' , f u n c t i o n ( ) { t o g g l e B t n ( $ l i n k B t n , $ l i n k T e x t . v a l ( ) & & $ l i n k U r l . v a l ( ) ) ; i f ( ! l i n k I n f o . t e x t ) { $ l i n k T e x t . v a l ( $ l i n k U r l . v a l ( ) ) ; } } ) . v a l ( l i n k I n f o . u r l ) . t r i g g e r ( ' f o c u s ' ) . t r i g g e r ( ' s e l e c t ' ) ; b i n d E n t e r K e y ( $ l i n k U r l , $ l i n k B t n ) ; b i n d E n t e r K e y ( $ l i n k T e x t , $ l i n k B t n ) ; $ o p e n I n N e w W i n d o w . p r o p ( ' c h e c k e d ' , l i n k I n f o . i s N e w W i n d o w ) ; $ l i n k B t n . o n e ( ' c l i c k ' , f u n c t i o n ( e v e n t ) { e v e n t . p r e v e n t D e f a u l t ( ) ; d e f e r r e d . r e s o l v e ( { r a n g e : l i n k I n f o . r a n g e , u r l : $ l i n k U r l . v a l ( ) , t e x t : $ l i n k T e x t . v a l ( ) , i s N e w W i n d o w : $ o p e n I n N e w W i n d o w . i s ( ' : c h e c k e d ' ) } ) ; $ l i n k D i a l o g . m o d a l ( ' h i d e ' ) ; } ) ; } ) . o n e ( ' h i d d e n . b s . m o d a l ' , f u n c t i o n ( ) { $ l i n k T e x t . o f f ( ' i n p u t   k e y p r e s s ' ) ; $ l i n k U r l . o f f ( ' i n p u t   k e y p r e s s ' ) ; $ l i n k B t n . o f f ( ' c l i c k ' ) ; i f ( d e f e r r e d . s t a t e ( ) = = = ' p e n d i n g ' ) { d e f e r r e d . r e j e c t ( ) ; } } ) . m o d a l ( ' s h o w ' ) ; } ) . p r o m i s e ( ) ; } ; t h i s . s h o w = f u n c t i o n ( l a y o u t I n f o ) { v a r   $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) , $ d i a l o g = l a y o u t I n f o . d i a l o g ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) , $ p o p o v e r = l a y o u t I n f o . p o p o v e r ( ) , l i n k I n f o = h a n d l e r . i n v o k e ( ' e d i t o r . g e t L i n k I n f o ' , $ e d i t a b l e ) ; v a r   o p t i o n s = $ e d i t o r . d a t a ( ' o p t i o n s ' ) ; h a n d l e r . i n v o k e ( ' e d i t o r . s a v e R a n g e ' , $ e d i t a b l e ) ; t h i s . s h o w L i n k D i a l o g ( $ e d i t a b l e , $ d i a l o g , l i n k I n f o ) . t h e n ( f u n c t i o n ( l i n k I n f o ) { h a n d l e r . i n v o k e ( ' e d i t o r . r e s t o r e R a n g e ' , $ e d i t a b l e ) ; h a n d l e r . i n v o k e ( ' e d i t o r . c r e a t e L i n k ' , $ e d i t a b l e , l i n k I n f o , o p t i o n s ) ; h a n d l e r . i n v o k e ( ' p o p o v e r . h i d e ' , $ p o p o v e r ) ; } ) . f a i l ( f u n c t i o n ( ) { h a n d l e r . i n v o k e ( ' e d i t o r . r e s t o r e R a n g e ' , $ e d i t a b l e ) ; } ) ; } ; } ; r e t u r n   L i n k D i a l o g ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / P o p o v e r ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / P o p o v e r . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / m o d u l e / B u t t o n ' ] , f u n c t i o n ( f u n c , l i s t , B u t t o n ) { v a r   P o p o v e r = f u n c t i o n ( ) { v a r   b u t t o n = n e w   B u t t o n ( ) ; t h i s . b u t t o n = b u t t o n ; v a r   p o s F r o m P l a c e h o l d e r = f u n c t i o n ( p l a c e h o l d e r , o p t i o n s ) { v a r   i s A i r M o d e = o p t i o n s & & o p t i o n s . i s A i r M o d e ; v a r   i s L e f t T o p = o p t i o n s & & o p t i o n s . i s L e f t T o p ; v a r   $ p l a c e h o l d e r = $ ( p l a c e h o l d e r ) ; v a r   p o s = i s A i r M o d e ? $ p l a c e h o l d e r . o f f s e t ( ) : $ p l a c e h o l d e r . p o s i t i o n ( ) ; v a r   h e i g h t = i s L e f t T o p ? 0 : $ p l a c e h o l d e r . o u t e r H e i g h t ( t r u e ) ; r e t u r n { l e f t : p o s . l e f t , t o p : p o s . t o p + h e i g h t } ; } ; v a r   s h o w P o p o v e r = f u n c t i o n ( $ p o p o v e r , p o s ) { $ p o p o v e r . c s s ( { d i s p l a y : ' b l o c k ' , l e f t : p o s . l e f t , t o p : p o s . t o p } ) ; } ; v a r   P X _ P O P O V E R _ A R R O W _ O F F S E T _ X = 2 0 ; t h i s . u p d a t e = f u n c t i o n ( $ p o p o v e r , s t y l e I n f o , i s A i r M o d e ) { b u t t o n . u p d a t e ( $ p o p o v e r , s t y l e I n f o ) ; v a r   $ l i n k P o p o v e r = $ p o p o v e r . f i n d ( ' . n o t e - l i n k - p o p o v e r ' ) ; i f ( s t y l e I n f o . a n c h o r ) { v a r   $ a n c h o r = $ l i n k P o p o v e r . f i n d ( ' a ' ) ; v a r   h r e f = $ ( s t y l e I n f o . a n c h o r ) . a t t r ( ' h r e f ' ) ; v a r   t a r g e t = $ ( s t y l e I n f o . a n c h o r ) . a t t r ( ' t a r g e t ' ) ; $ a n c h o r . a t t r ( ' h r e f ' , h r e f ) . t e x t ( h r e f ) ; i f ( ! t a r g e t ) { $ a n c h o r . r e m o v e A t t r ( ' t a r g e t ' ) ; } e l s e { $ a n c h o r . a t t r ( ' t a r g e t ' , ' _ b l a n k ' ) ; } 
 s h o w P o p o v e r ( $ l i n k P o p o v e r , p o s F r o m P l a c e h o l d e r ( s t y l e I n f o . a n c h o r , { i s A i r M o d e : i s A i r M o d e } ) ) ; } e l s e { $ l i n k P o p o v e r . h i d e ( ) ; } 
 v a r   $ i m a g e P o p o v e r = $ p o p o v e r . f i n d ( ' . n o t e - i m a g e - p o p o v e r ' ) ; i f ( s t y l e I n f o . i m a g e ) { s h o w P o p o v e r ( $ i m a g e P o p o v e r , p o s F r o m P l a c e h o l d e r ( s t y l e I n f o . i m a g e , { i s A i r M o d e : i s A i r M o d e , i s L e f t T o p : t r u e } ) ) ; } e l s e { $ i m a g e P o p o v e r . h i d e ( ) ; } 
 v a r   $ a i r P o p o v e r = $ p o p o v e r . f i n d ( ' . n o t e - a i r - p o p o v e r ' ) ; i f ( i s A i r M o d e & & s t y l e I n f o . r a n g e & & ! s t y l e I n f o . r a n g e . i s C o l l a p s e d ( ) ) { v a r   r e c t = l i s t . l a s t ( s t y l e I n f o . r a n g e . g e t C l i e n t R e c t s ( ) ) ; i f ( r e c t ) { v a r   b n d = f u n c . r e c t 2 b n d ( r e c t ) ; s h o w P o p o v e r ( $ a i r P o p o v e r , { l e f t : M a t h . m a x ( b n d . l e f t + b n d . w i d t h / 2 - P X _ P O P O V E R _ A R R O W _ O F F S E T _ X , 0 ) , t o p : b n d . t o p + b n d . h e i g h t } ) ; } } e l s e { $ a i r P o p o v e r . h i d e ( ) ; } } ; t h i s . u p d a t e R e c e n t C o l o r = f u n c t i o n ( b u t t o n , e v e n t N a m e , v a l u e ) { b u t t o n . u p d a t e R e c e n t C o l o r ( b u t t o n , e v e n t N a m e , v a l u e ) ; } ; t h i s . h i d e = f u n c t i o n ( $ p o p o v e r ) { $ p o p o v e r . c h i l d r e n ( ) . h i d e ( ) ; } ; } ; r e t u r n   P o p o v e r ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / S t a t u s b a r ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / S t a t u s b a r . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / d o m ' ] , f u n c t i o n ( d o m ) { v a r   E D I T A B L E _ P A D D I N G = 2 4 ; v a r   S t a t u s b a r = f u n c t i o n ( ) { v a r   $ d o c u m e n t = $ ( d o c u m e n t ) ; t h i s . a t t a c h = f u n c t i o n ( l a y o u t I n f o , o p t i o n s ) { i f ( ! o p t i o n s . d i s a b l e R e s i z e E d i t o r ) { l a y o u t I n f o . s t a t u s b a r ( ) . o n ( ' m o u s e d o w n ' , h S t a t u s b a r M o u s e d o w n ) ; } } ; v a r   h S t a t u s b a r M o u s e d o w n = f u n c t i o n ( e v e n t ) { e v e n t . p r e v e n t D e f a u l t ( ) ; e v e n t . s t o p P r o p a g a t i o n ( ) ; v a r   $ e d i t a b l e = d o m . m a k e L a y o u t I n f o ( e v e n t . t a r g e t ) . e d i t a b l e ( ) ; v a r   e d i t a b l e T o p = $ e d i t a b l e . o f f s e t ( ) . t o p - $ d o c u m e n t . s c r o l l T o p ( ) ; v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . c u r r e n t T a r g e t | | e v e n t . t a r g e t ) ; v a r   o p t i o n s = l a y o u t I n f o . e d i t o r ( ) . d a t a ( ' o p t i o n s ' ) ; $ d o c u m e n t . o n ( ' m o u s e m o v e ' , f u n c t i o n ( e v e n t ) { v a r   n H e i g h t = e v e n t . c l i e n t Y - ( e d i t a b l e T o p + E D I T A B L E _ P A D D I N G ) ; n H e i g h t = ( o p t i o n s . m i n H e i g h t > 0 ) ? M a t h . m a x ( n H e i g h t , o p t i o n s . m i n H e i g h t ) : n H e i g h t ; n H e i g h t = ( o p t i o n s . m a x H e i g h t > 0 ) ? M a t h . m i n ( n H e i g h t , o p t i o n s . m a x H e i g h t ) : n H e i g h t ; $ e d i t a b l e . h e i g h t ( n H e i g h t ) ; } ) . o n e ( ' m o u s e u p ' , f u n c t i o n ( ) { $ d o c u m e n t . o f f ( ' m o u s e m o v e ' ) ; } ) ; } ; } ; r e t u r n   S t a t u s b a r ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / m o d u l e / T o o l b a r ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / m o d u l e / T o o l b a r . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / m o d u l e / B u t t o n ' ] , f u n c t i o n ( l i s t , d o m , B u t t o n ) { v a r   T o o l b a r = f u n c t i o n ( ) { v a r   b u t t o n = n e w   B u t t o n ( ) ; t h i s . b u t t o n = b u t t o n ; t h i s . u p d a t e = f u n c t i o n ( $ t o o l b a r , s t y l e I n f o ) { b u t t o n . u p d a t e ( $ t o o l b a r , s t y l e I n f o ) ; } ; t h i s . u p d a t e R e c e n t C o l o r = f u n c t i o n ( b u t t o n N o d e , e v e n t N a m e , v a l u e ) { b u t t o n . u p d a t e R e c e n t C o l o r ( b u t t o n N o d e , e v e n t N a m e , v a l u e ) ; } ; t h i s . a c t i v a t e = f u n c t i o n ( $ t o o l b a r ) { $ t o o l b a r . f i n d ( ' b u t t o n ' ) . n o t ( ' b u t t o n [ d a t a - e v e n t = " c o d e v i e w " ] ' ) . r e m o v e C l a s s ( ' d i s a b l e d ' ) ; } ; t h i s . d e a c t i v a t e = f u n c t i o n ( $ t o o l b a r ) { $ t o o l b a r . f i n d ( ' b u t t o n ' ) . n o t ( ' b u t t o n [ d a t a - e v e n t = " c o d e v i e w " ] ' ) . a d d C l a s s ( ' d i s a b l e d ' ) ; } ; t h i s . u p d a t e F u l l s c r e e n = f u n c t i o n ( $ c o n t a i n e r , b F u l l s c r e e n ) { v a r   $ b t n = $ c o n t a i n e r . f i n d ( ' b u t t o n [ d a t a - e v e n t = " f u l l s c r e e n " ] ' ) ; $ b t n . t o g g l e C l a s s ( ' a c t i v e ' , b F u l l s c r e e n ) ; } ; t h i s . u p d a t e C o d e v i e w = f u n c t i o n ( $ c o n t a i n e r , i s C o d e v i e w ) { v a r   $ b t n = $ c o n t a i n e r . f i n d ( ' b u t t o n [ d a t a - e v e n t = " c o d e v i e w " ] ' ) ; $ b t n . t o g g l e C l a s s ( ' a c t i v e ' , i s C o d e v i e w ) ; i f ( i s C o d e v i e w ) { t h i s . d e a c t i v a t e ( $ c o n t a i n e r ) ; } e l s e { t h i s . a c t i v a t e ( $ c o n t a i n e r ) ; } } ; t h i s . g e t = f u n c t i o n ( $ e d i t a b l e , n a m e ) { v a r   $ t o o l b a r = d o m . m a k e L a y o u t I n f o ( $ e d i t a b l e ) . t o o l b a r ( ) ; r e t u r n   $ t o o l b a r . f i n d ( ' [ d a t a - n a m e = ' + n a m e + ' ] ' ) ; } ; t h i s . s e t B u t t o n S t a t e = f u n c t i o n ( $ e d i t a b l e , n a m e , i s A c t i v e ) { i s A c t i v e = ( i s A c t i v e = = = f a l s e ) ? f a l s e : t r u e ; v a r   $ b u t t o n = t h i s . g e t ( $ e d i t a b l e , n a m e ) ; $ b u t t o n . t o g g l e C l a s s ( ' a c t i v e ' , i s A c t i v e ) ; } ; } ; r e t u r n   T o o l b a r ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / R e n d e r e r ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / R e n d e r e r . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / l i s t ' ] , f u n c t i o n ( a g e n t , d o m , f u n c , l i s t ) { v a r   R e n d e r e r = f u n c t i o n ( ) { v a r   t p l B u t t o n = f u n c t i o n ( l a b e l , o p t i o n s ) { v a r   e v e n t = o p t i o n s . e v e n t ; v a r   v a l u e = o p t i o n s . v a l u e ; v a r   t i t l e = o p t i o n s . t i t l e ; v a r   c l a s s N a m e = o p t i o n s . c l a s s N a m e ; v a r   d r o p d o w n = o p t i o n s . d r o p d o w n ; v a r   h i d e = o p t i o n s . h i d e ; r e t u r n ( d r o p d o w n ? ' < d i v   c l a s s = " b t n - g r o u p ' + 
 ( c l a s s N a m e ? '   ' + c l a s s N a m e : ' ' ) + ' " > ' : ' ' ) + ' < b u t t o n   t y p e = " b u t t o n " ' + '   c l a s s = " b t n   b t n - s e c o n d a r y   b t n - s m ' + 
 ( ( ! d r o p d o w n & & c l a s s N a m e ) ? '   ' + c l a s s N a m e : ' ' ) + 
 ( d r o p d o w n ? '   d r o p d o w n - t o g g l e ' : ' ' ) + ' " ' + 
 ( d r o p d o w n ? '   d a t a - t o g g l e = " d r o p d o w n " ' : ' ' ) + 
 ( t i t l e ? '   t i t l e = " ' + t i t l e + ' " ' : ' ' ) + 
 ( e v e n t ? '   d a t a - e v e n t = " ' + e v e n t + ' " ' : ' ' ) + 
 ( v a l u e ? '   d a t a - v a l u e = \ ' ' + v a l u e + ' \ ' ' : ' ' ) + 
 ( h i d e ? '   d a t a - h i d e = \ ' ' + h i d e + ' \ ' ' : ' ' ) + '   t a b i n d e x = " - 1 " > ' + 
 l a b e l + 
 ( d r o p d o w n ? '   < s p a n   c l a s s = " c a r e t " > < / s p a n > ' : ' ' ) + ' < / b u t t o n > ' + 
 ( d r o p d o w n | | ' ' ) + 
 ( d r o p d o w n ? ' < / d i v > ' : ' ' ) ; } ; v a r   t p l I c o n B u t t o n = f u n c t i o n ( i c o n C l a s s N a m e , o p t i o n s ) { v a r   l a b e l = ' < i   c l a s s = " ' + i c o n C l a s s N a m e + ' " > < / i > ' ; r e t u r n   t p l B u t t o n ( l a b e l , o p t i o n s ) ; } ; v a r   t p l P o p o v e r = f u n c t i o n ( c l a s s N a m e , c o n t e n t ) { v a r   $ p o p o v e r = $ ( ' < d i v   c l a s s = " ' + c l a s s N a m e + '   p o p o v e r   b o t t o m   i n "   s t y l e = " d i s p l a y :   n o n e ; " > ' + ' < d i v   c l a s s = " a r r o w " > < / d i v > ' + ' < d i v   c l a s s = " p o p o v e r - b o d y " > ' + ' < / d i v > ' + ' < / d i v > ' ) ; $ p o p o v e r . f i n d ( ' . p o p o v e r - b o d y ' ) . a p p e n d ( c o n t e n t ) ; r e t u r n   $ p o p o v e r ; } ; v a r   t p l D i a l o g = f u n c t i o n ( c l a s s N a m e , t i t l e , b o d y , f o o t e r ) { r e t u r n ' < d i v   c l a s s = " ' + c l a s s N a m e + '   m o d a l "   r o l e = " d i a l o g "   a r i a - h i d d e n = " f a l s e " > ' + ' < d i v   c l a s s = " m o d a l - d i a l o g " > ' + ' < d i v   c l a s s = " m o d a l - c o n t e n t " > ' + 
 ( t i t l e ? ' < h e a d e r   c l a s s = " m o d a l - h e a d e r " > ' + ' < h 4   c l a s s = " m o d a l - t i t l e " > ' + t i t l e + ' < / h 4 > ' + ' < b u t t o n   t y p e = " b u t t o n "   c l a s s = " c l o s e "   a r i a - h i d d e n = " t r u e "   t a b i n d e x = " - 1 " > & t i m e s ; < / b u t t o n > ' + ' < / h e a d e r > ' : ' ' ) + ' < m a i n   c l a s s = " m o d a l - b o d y " > ' + b o d y + ' < / m a i n > ' + 
 ( f o o t e r ? ' < h e a d e r   c l a s s = " m o d a l - f o o t e r " > ' + f o o t e r + ' < / h e a d e r > ' : ' ' ) + ' < / d i v > ' + ' < / d i v > ' + ' < / d i v > ' ; } ; v a r   t p l D r o p d o w n = f u n c t i o n ( c o n t e n t s , c l a s s N a m e , n o d e N a m e ) { v a r   c l a s s e s = ' d r o p d o w n - m e n u ' + ( c l a s s N a m e ? '   ' + c l a s s N a m e : ' ' ) ; n o d e N a m e = n o d e N a m e | | ' u l ' ; i f ( c o n t e n t s   i n s t a n c e o f   A r r a y ) { c o n t e n t s = c o n t e n t s . j o i n ( ' ' ) ; } 
 r e t u r n ' < ' + n o d e N a m e + '   c l a s s = " ' + c l a s s e s + ' " > ' + c o n t e n t s + ' < / ' + n o d e N a m e + ' > ' ; } ; v a r   t p l B u t t o n I n f o = { p i c t u r e : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . i m a g e , { e v e n t : ' s h o w I m a g e D i a l o g ' , t i t l e : l a n g . i m a g e . i m a g e , h i d e : t r u e } ) ; } , l i n k : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . l i n k . l i n k , { e v e n t : ' s h o w L i n k D i a l o g ' , t i t l e : l a n g . l i n k . l i n k , h i d e : t r u e } ) ; } , t a b l e : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   d r o p d o w n = [ ' < d i v   c l a s s = " n o t e - d i m e n s i o n - p i c k e r " > ' , ' < d i v   c l a s s = " n o t e - d i m e n s i o n - p i c k e r - m o u s e c a t c h e r "   d a t a - e v e n t = " i n s e r t T a b l e "   d a t a - v a l u e = " 1 x 1 " > < / d i v > ' , ' < d i v   c l a s s = " n o t e - d i m e n s i o n - p i c k e r - h i g h l i g h t e d " > < / d i v > ' , ' < d i v   c l a s s = " n o t e - d i m e n s i o n - p i c k e r - u n h i g h l i g h t e d " > < / d i v > ' , ' < / d i v > ' , ' < d i v   c l a s s = " n o t e - d i m e n s i o n - d i s p l a y " >   1   x   1   < / d i v > ' ] ; r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . t a b l e . t a b l e , { t i t l e : l a n g . t a b l e . t a b l e , d r o p d o w n : t p l D r o p d o w n ( d r o p d o w n , ' n o t e - t a b l e ' ) } ) ; } , s t y l e : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   i t e m s = o p t i o n s . s t y l e T a g s . r e d u c e ( f u n c t i o n ( m e m o , v ) { v a r   l a b e l = l a n g . s t y l e [ v = = = ' p ' ? ' n o r m a l ' : v ] ; r e t u r n   m e m o + ' < l i > < a   c l a s s = " d r o p d o w n - i t e m "   d a t a - e v e n t = " f o r m a t B l o c k "   h r e f = " # "   d a t a - v a l u e = " ' + v + ' " > ' + 
 ( ( v = = = ' p ' | | v = = = ' p r e ' ) ? l a b e l : ' < ' + v + ' > ' + l a b e l + ' < / ' + v + ' > ' ) + ' < / a > < / l i > ' ; } , ' ' ) ; r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . s t y l e . s t y l e , { t i t l e : l a n g . s t y l e . s t y l e , d r o p d o w n : t p l D r o p d o w n ( i t e m s ) } ) ; } , f o n t n a m e : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   r e a l F o n t L i s t = [ ] ; v a r   i t e m s = o p t i o n s . f o n t N a m e s . r e d u c e ( f u n c t i o n ( m e m o , v ) { i f ( ! a g e n t . i s F o n t I n s t a l l e d ( v ) & & ! l i s t . c o n t a i n s ( o p t i o n s . f o n t N a m e s I g n o r e C h e c k , v ) ) { r e t u r n   m e m o ; } 
 r e a l F o n t L i s t . p u s h ( v ) ; r e t u r n   m e m o + ' < l i > < a   d a t a - e v e n t = " f o n t N a m e "   h r e f = " # "   d a t a - v a l u e = " ' + v + ' "   s t y l e = " f o n t - f a m i l y : \ ' ' + v + ' \ ' " > ' + ' < i   c l a s s = " ' + o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . m i s c . c h e c k + ' " > < / i >   ' + v + ' < / a > < / l i > ' ; } , ' ' ) ; v a r   h a s D e f a u l t F o n t = a g e n t . i s F o n t I n s t a l l e d ( o p t i o n s . d e f a u l t F o n t N a m e ) ; v a r   d e f a u l t F o n t N a m e = ( h a s D e f a u l t F o n t ) ? o p t i o n s . d e f a u l t F o n t N a m e : r e a l F o n t L i s t [ 0 ] ; v a r   l a b e l = ' < s p a n   c l a s s = " n o t e - c u r r e n t - f o n t n a m e " > ' + 
 d e f a u l t F o n t N a m e + ' < / s p a n > ' ; r e t u r n   t p l B u t t o n ( l a b e l , { t i t l e : l a n g . f o n t . n a m e , c l a s s N a m e : ' n o t e - f o n t n a m e ' , d r o p d o w n : t p l D r o p d o w n ( i t e m s , ' n o t e - c h e c k ' ) } ) ; } , f o n t s i z e : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   i t e m s = o p t i o n s . f o n t S i z e s . r e d u c e ( f u n c t i o n ( m e m o , v ) { r e t u r n   m e m o + ' < l i > < a   d a t a - e v e n t = " f o n t S i z e "   h r e f = " # "   d a t a - v a l u e = " ' + v + ' " > ' + ' < i   c l a s s = " ' + o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . m i s c . c h e c k + ' " > < / i >   ' + v + ' < / a > < / l i > ' ; } , ' ' ) ; v a r   l a b e l = ' < s p a n   c l a s s = " n o t e - c u r r e n t - f o n t s i z e " > 1 1 < / s p a n > ' ; r e t u r n   t p l B u t t o n ( l a b e l , { t i t l e : l a n g . f o n t . s i z e , c l a s s N a m e : ' n o t e - f o n t s i z e ' , d r o p d o w n : t p l D r o p d o w n ( i t e m s , ' n o t e - c h e c k ' ) } ) ; } , c o l o r : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   c o l o r B u t t o n L a b e l = ' < i   c l a s s = " ' + 
 o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . c o l o r . r e c e n t + ' "   i d = " c o l o r s _ p r e v i e w "   s t y l e = " c o l o r : w h i t e ; b a c k g r o u n d - c o l o r : # B 3 5 E 9 B " > < / i > ' ; v a r   c o l o r B u t t o n = t p l B u t t o n ( c o l o r B u t t o n L a b e l , { c l a s s N a m e : ' n o t e - r e c e n t - c o l o r ' , t i t l e : l a n g . c o l o r . r e c e n t , e v e n t : ' c o l o r ' , v a l u e : ' { " b a c k C o l o r " : " # B 3 5 E 9 B " } ' } ) ; v a r   i t e m s = [ ' < l i   c l a s s = " f l e x " > < d i v   c l a s s = " b t n - g r o u p   f l e x - c o l u m n " > ' , ' < d i v   c l a s s = " n o t e - p a l e t t e - t i t l e " > ' + l a n g . c o l o r . b a c k g r o u n d + ' < / d i v > ' , ' < d i v   c l a s s = " n o t e - c o l o r - r e s e t "   d a t a - e v e n t = " b a c k C o l o r " ' , '   d a t a - v a l u e = " i n h e r i t "   t i t l e = " ' + l a n g . c o l o r . t r a n s p a r e n t + ' " > ' + l a n g . c o l o r . s e t T r a n s p a r e n t + ' < / d i v > ' , ' < d i v   c l a s s = " n o t e - c o l o r - p a l e t t e "   d a t a - t a r g e t - e v e n t = " b a c k C o l o r " > < / d i v > ' , ' < / d i v > < d i v   c l a s s = " b t n - g r o u p   f l e x - c o l u m n " > ' , ' < d i v   c l a s s = " n o t e - p a l e t t e - t i t l e " > ' + l a n g . c o l o r . f o r e g r o u n d + ' < / d i v > ' , ' < d i v   c l a s s = " n o t e - c o l o r - r e s e t "   d a t a - e v e n t = " f o r e C o l o r "   d a t a - v a l u e = " i n h e r i t "   t i t l e = " ' + l a n g . c o l o r . r e s e t + ' " > ' , l a n g . c o l o r . r e s e t T o D e f a u l t , ' < / d i v > ' , ' < d i v   c l a s s = " n o t e - c o l o r - p a l e t t e "   d a t a - t a r g e t - e v e n t = " f o r e C o l o r " > < / d i v > ' , ' < / d i v > < / l i > ' ] ; v a r   m o r e B u t t o n = t p l B u t t o n ( ' ' , { t i t l e : l a n g . c o l o r . m o r e , d r o p d o w n : t p l D r o p d o w n ( i t e m s ) } ) ; r e t u r n   c o l o r B u t t o n + m o r e B u t t o n ; } , b o l d : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . b o l d , { e v e n t : ' b o l d ' , t i t l e : l a n g . f o n t . b o l d } ) ; } , i t a l i c : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . i t a l i c , { e v e n t : ' i t a l i c ' , t i t l e : l a n g . f o n t . i t a l i c } ) ; } , u n d e r l i n e : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . u n d e r l i n e , { e v e n t : ' u n d e r l i n e ' , t i t l e : l a n g . f o n t . u n d e r l i n e } ) ; } , s t r i k e t h r o u g h : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . s t r i k e t h r o u g h , { e v e n t : ' s t r i k e t h r o u g h ' , t i t l e : l a n g . f o n t . s t r i k e t h r o u g h } ) ; } , s u p e r s c r i p t : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . s u p e r s c r i p t , { e v e n t : ' s u p e r s c r i p t ' , t i t l e : l a n g . f o n t . s u p e r s c r i p t } ) ; } , s u b s c r i p t : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . s u b s c r i p t , { e v e n t : ' s u b s c r i p t ' , t i t l e : l a n g . f o n t . s u b s c r i p t } ) ; } , c l e a r : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . c l e a r , { e v e n t : ' r e m o v e F o r m a t ' , t i t l e : l a n g . f o n t . c l e a r } ) ; } , u l : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . l i s t s . u n o r d e r e d , { e v e n t : ' i n s e r t U n o r d e r e d L i s t ' , t i t l e : l a n g . l i s t s . u n o r d e r e d } ) ; } , o l : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . l i s t s . o r d e r e d , { e v e n t : ' i n s e r t O r d e r e d L i s t ' , t i t l e : l a n g . l i s t s . o r d e r e d } ) ; } , p a r a g r a p h : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   l e f t B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . l e f t , { t i t l e : l a n g . p a r a g r a p h . l e f t , e v e n t : ' j u s t i f y L e f t ' } ) ; v a r   c e n t e r B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . c e n t e r , { t i t l e : l a n g . p a r a g r a p h . c e n t e r , e v e n t : ' j u s t i f y C e n t e r ' } ) ; v a r   r i g h t B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . r i g h t , { t i t l e : l a n g . p a r a g r a p h . r i g h t , e v e n t : ' j u s t i f y R i g h t ' } ) ; v a r   j u s t i f y B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . j u s t i f y , { t i t l e : l a n g . p a r a g r a p h . j u s t i f y , e v e n t : ' j u s t i f y F u l l ' } ) ; v a r   o u t d e n t B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . o u t d e n t , { t i t l e : l a n g . p a r a g r a p h . o u t d e n t , e v e n t : ' o u t d e n t ' } ) ; v a r   i n d e n t B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . i n d e n t , { t i t l e : l a n g . p a r a g r a p h . i n d e n t , e v e n t : ' i n d e n t ' } ) ; v a r   d r o p d o w n = [ ' < d i v   c l a s s = " n o t e - a l i g n   b t n - g r o u p " > ' , l e f t B u t t o n + c e n t e r B u t t o n + r i g h t B u t t o n + j u s t i f y B u t t o n , ' < / d i v > < d i v   c l a s s = " n o t e - l i s t   b t n - g r o u p " > ' , i n d e n t B u t t o n + o u t d e n t B u t t o n , ' < / d i v > ' ] ; r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . p a r a g r a p h . p a r a g r a p h , { t i t l e : l a n g . p a r a g r a p h . p a r a g r a p h , d r o p d o w n : t p l D r o p d o w n ( d r o p d o w n , ' ' , ' d i v ' ) } ) ; } , h e i g h t : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   i t e m s = o p t i o n s . l i n e H e i g h t s . r e d u c e ( f u n c t i o n ( m e m o , v ) { r e t u r n   m e m o + ' < l i > < a   d a t a - e v e n t = " l i n e H e i g h t "   h r e f = " # "   d a t a - v a l u e = " ' + p a r s e F l o a t ( v ) + ' " > ' + ' < i   c l a s s = " ' + o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . m i s c . c h e c k + ' " > < / i >   ' + v + ' < / a > < / l i > ' ; } , ' ' ) ; r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . f o n t . h e i g h t , { t i t l e : l a n g . f o n t . h e i g h t , d r o p d o w n : t p l D r o p d o w n ( i t e m s , ' n o t e - c h e c k ' ) } ) ; } , h e l p : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . o p t i o n s . h e l p , { e v e n t : ' s h o w H e l p D i a l o g ' , t i t l e : l a n g . o p t i o n s . h e l p , h i d e : t r u e } ) ; } , f u l l s c r e e n : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . o p t i o n s . f u l l s c r e e n , { e v e n t : ' f u l l s c r e e n ' , t i t l e : l a n g . o p t i o n s . f u l l s c r e e n } ) ; } , c o d e v i e w : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . o p t i o n s . c o d e v i e w , { e v e n t : ' c o d e v i e w ' , t i t l e : l a n g . o p t i o n s . c o d e v i e w } ) ; } , u n d o : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . h i s t o r y . u n d o , { e v e n t : ' u n d o ' , t i t l e : l a n g . h i s t o r y . u n d o } ) ; } , r e d o : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . h i s t o r y . r e d o , { e v e n t : ' r e d o ' , t i t l e : l a n g . h i s t o r y . r e d o } ) ; } , h r : f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n   t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . h r . i n s e r t , { e v e n t : ' i n s e r t H o r i z o n t a l R u l e ' , t i t l e : l a n g . h r . i n s e r t } ) ; } } ; v a r   t p l P o p o v e r s = f u n c t i o n ( l a n g , o p t i o n s ) { v a r   t p l L i n k P o p o v e r = f u n c t i o n ( ) { v a r   l i n k B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . l i n k . e d i t , { t i t l e : l a n g . l i n k . e d i t , e v e n t : ' s h o w L i n k D i a l o g ' , h i d e : t r u e } ) ; v a r   u n l i n k B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . l i n k . u n l i n k , { t i t l e : l a n g . l i n k . u n l i n k , e v e n t : ' u n l i n k ' } ) ; v a r   c o n t e n t = ' < a   h r e f = " h t t p : / / w w w . g o o g l e . c o m "   t a r g e t = " _ b l a n k " > w w w . g o o g l e . c o m < / a > & n b s p ; & n b s p ; ' + ' < d i v   c l a s s = " n o t e - i n s e r t   b t n - g r o u p " > ' + 
 l i n k B u t t o n + u n l i n k B u t t o n + ' < / d i v > ' ; r e t u r n   t p l P o p o v e r ( ' n o t e - l i n k - p o p o v e r ' , c o n t e n t ) ; } ; v a r   t p l I m a g e P o p o v e r = f u n c t i o n ( ) { v a r   a u t o B u t t o n = t p l B u t t o n ( ' < s p a n   c l a s s = " n o t e - f o n t s i z e - 1 0 " > A u t o < / s p a n > ' , { e v e n t : ' r e s i z e ' , v a l u e : ' a u t o ' } ) ; v a r   f u l l B u t t o n = t p l B u t t o n ( ' < s p a n   c l a s s = " n o t e - f o n t s i z e - 1 0 " > 1 0 0 % < / s p a n > ' , { t i t l e : l a n g . i m a g e . r e s i z e F u l l , e v e n t : ' r e s i z e ' , v a l u e : ' 1 ' } ) ; v a r   h a l f B u t t o n = t p l B u t t o n ( ' < s p a n   c l a s s = " n o t e - f o n t s i z e - 1 0 " > 5 0 % < / s p a n > ' , { t i t l e : l a n g . i m a g e . r e s i z e H a l f , e v e n t : ' r e s i z e ' , v a l u e : ' 0 . 5 ' } ) ; v a r   q u a r t e r B u t t o n = t p l B u t t o n ( ' < s p a n   c l a s s = " n o t e - f o n t s i z e - 1 0 " > 2 5 % < / s p a n > ' , { t i t l e : l a n g . i m a g e . r e s i z e Q u a r t e r , e v e n t : ' r e s i z e ' , v a l u e : ' 0 . 2 5 ' } ) ; v a r   l e f t B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . f l o a t L e f t , { t i t l e : l a n g . i m a g e . f l o a t L e f t , e v e n t : ' f l o a t M e ' , v a l u e : ' l e f t ' } ) ; v a r   r i g h t B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . f l o a t R i g h t , { t i t l e : l a n g . i m a g e . f l o a t R i g h t , e v e n t : ' f l o a t M e ' , v a l u e : ' r i g h t ' } ) ; v a r   j u s t i f y B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . f l o a t N o n e , { t i t l e : l a n g . i m a g e . f l o a t N o n e , e v e n t : ' f l o a t M e ' , v a l u e : ' n o n e ' } ) ; v a r   r o u n d e d B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . s h a p e R o u n d e d , { t i t l e : l a n g . i m a g e . s h a p e R o u n d e d , e v e n t : ' i m a g e S h a p e ' , v a l u e : ' r o u n d e d ' } ) ; v a r   c i r c l e B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . s h a p e C i r c l e , { t i t l e : l a n g . i m a g e . s h a p e C i r c l e , e v e n t : ' i m a g e S h a p e ' , v a l u e : ' r o u n d e d - c i r c l e ' } ) ; v a r   t h u m b n a i l B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . s h a p e T h u m b n a i l , { t i t l e : l a n g . i m a g e . s h a p e T h u m b n a i l , e v e n t : ' i m a g e S h a p e ' , v a l u e : ' i m g - t h u m b n a i l ' } ) ; v a r   n o n e B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . s h a p e N o n e , { t i t l e : l a n g . i m a g e . s h a p e N o n e , e v e n t : ' i m a g e S h a p e ' , v a l u e : ' ' } ) ; v a r   r e m o v e B u t t o n = t p l I c o n B u t t o n ( o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . i m a g e . r e m o v e , { t i t l e : l a n g . i m a g e . r e m o v e , e v e n t : ' r e m o v e M e d i a ' , v a l u e : ' n o n e ' } ) ; v a r   c o n t e n t = ( o p t i o n s . d i s a b l e R e s i z e I m a g e ? ' ' : ' < d i v   c l a s s = " b t n - g r o u p " > ' + a u t o B u t t o n + f u l l B u t t o n + h a l f B u t t o n + q u a r t e r B u t t o n + ' < / d i v > ' ) + ' < d i v   c l a s s = " b t n - g r o u p " > ' + l e f t B u t t o n + r i g h t B u t t o n + j u s t i f y B u t t o n + ' < / d i v > ' + ' < d i v   c l a s s = " b t n - g r o u p " > ' + r o u n d e d B u t t o n + c i r c l e B u t t o n + t h u m b n a i l B u t t o n + n o n e B u t t o n + ' < / d i v > ' + ' < d i v   c l a s s = " b t n - g r o u p " > ' + r e m o v e B u t t o n + ' < / d i v > ' ; r e t u r n   t p l P o p o v e r ( ' n o t e - i m a g e - p o p o v e r ' , c o n t e n t ) ; } ; v a r   t p l A i r P o p o v e r = f u n c t i o n ( ) { v a r   $ c o n t e n t = $ ( ' < d i v   / > ' ) ; f o r ( v a r   i d x = 0 , l e n = o p t i o n s . a i r P o p o v e r . l e n g t h ; i d x < l e n ; i d x + + ) { v a r   g r o u p = o p t i o n s . a i r P o p o v e r [ i d x ] ; v a r   $ g r o u p = $ ( ' < d i v   c l a s s = " n o t e - ' + g r o u p [ 0 ] + '   b t n - g r o u p " > ' ) ; f o r ( v a r   i = 0 , l e n G r o u p = g r o u p [ 1 ] . l e n g t h ; i < l e n G r o u p ; i + + ) { v a r   $ b u t t o n = $ ( t p l B u t t o n I n f o [ g r o u p [ 1 ] [ i ] ] ( l a n g , o p t i o n s ) ) ; $ b u t t o n . a t t r ( ' d a t a - n a m e ' , g r o u p [ 1 ] [ i ] ) ; $ g r o u p . a p p e n d ( $ b u t t o n ) ; } 
 $ c o n t e n t . a p p e n d ( $ g r o u p ) ; } 
 r e t u r n   t p l P o p o v e r ( ' n o t e - a i r - p o p o v e r ' , $ c o n t e n t . c h i l d r e n ( ) ) ; } ; v a r   $ n o t e P o p o v e r = $ ( ' < d i v   c l a s s = " n o t e - p o p o v e r "   / > ' ) ; $ n o t e P o p o v e r . a p p e n d ( t p l L i n k P o p o v e r ( ) ) ; $ n o t e P o p o v e r . a p p e n d ( t p l I m a g e P o p o v e r ( ) ) ; i f ( o p t i o n s . a i r M o d e ) { $ n o t e P o p o v e r . a p p e n d ( t p l A i r P o p o v e r ( ) ) ; } 
 r e t u r n   $ n o t e P o p o v e r ; } ; t h i s . t p l B u t t o n I n f o = t p l B u t t o n I n f o ; t h i s . t p l P o p o v e r s = t p l P o p o v e r s ; v a r   t p l H a n d l e s = f u n c t i o n ( o p t i o n s ) { r e t u r n ' < d i v   c l a s s = " n o t e - h a n d l e " > ' + ' < d i v   c l a s s = " n o t e - c o n t r o l - s e l e c t i o n " > ' + ' < d i v   c l a s s = " n o t e - c o n t r o l - s e l e c t i o n - b g " > < / d i v > ' + ' < d i v   c l a s s = " n o t e - c o n t r o l - h o l d e r   n o t e - c o n t r o l - n w " > < / d i v > ' + ' < d i v   c l a s s = " n o t e - c o n t r o l - h o l d e r   n o t e - c o n t r o l - n e " > < / d i v > ' + ' < d i v   c l a s s = " n o t e - c o n t r o l - h o l d e r   n o t e - c o n t r o l - s w " > < / d i v > ' + ' < d i v   c l a s s = " ' + 
 ( o p t i o n s . d i s a b l e R e s i z e I m a g e ? ' n o t e - c o n t r o l - h o l d e r ' : ' n o t e - c o n t r o l - s i z i n g ' ) + '   n o t e - c o n t r o l - s e " > < / d i v > ' + 
 ( o p t i o n s . d i s a b l e R e s i z e I m a g e ? ' ' : ' < d i v   c l a s s = " n o t e - c o n t r o l - s e l e c t i o n - i n f o " > < / d i v > ' ) + ' < / d i v > ' + ' < / d i v > ' ; } ; v a r   t p l S h o r t c u t = f u n c t i o n ( t i t l e , k e y s ) { v a r   k e y C l a s s = ' n o t e - s h o r t c u t - c o l   c o l - 6   n o t e - s h o r t c u t - ' ; v a r   b o d y = [ ] ; f o r ( v a r   i   i n   k e y s ) { i f ( k e y s . h a s O w n P r o p e r t y ( i ) ) { b o d y . p u s h ( ' < d i v   c l a s s = " ' + k e y C l a s s + ' k e y " > ' + k e y s [ i ] . k b d + ' < / d i v > ' + ' < d i v   c l a s s = " ' + k e y C l a s s + ' n a m e " > ' + k e y s [ i ] . t e x t + ' < / d i v > ' ) ; } } 
 r e t u r n ' < d i v   c l a s s = " n o t e - s h o r t c u t - r o w   r o w " > < d i v   c l a s s = " ' + k e y C l a s s + ' t i t l e   o f f s e t - 6 " > ' + t i t l e + ' < / d i v > < / d i v > ' + ' < d i v   c l a s s = " n o t e - s h o r t c u t - r o w   r o w " > ' + b o d y . j o i n ( ' < / d i v > < d i v   c l a s s = " n o t e - s h o r t c u t - r o w   r o w " > ' ) + ' < / d i v > ' ; } ; v a r   t p l S h o r t c u t T e x t = f u n c t i o n ( l a n g ) { v a r   k e y s = [ { k b d : ' #  +   B ' , t e x t : l a n g . f o n t . b o l d } , { k b d : ' #  +   I ' , t e x t : l a n g . f o n t . i t a l i c } , { k b d : ' #  +   U ' , t e x t : l a n g . f o n t . u n d e r l i n e } , { k b d : ' #  +   \ \ ' , t e x t : l a n g . f o n t . c l e a r } ] ; r e t u r n   t p l S h o r t c u t ( l a n g . s h o r t c u t . t e x t F o r m a t t i n g , k e y s ) ; } ; v a r   t p l S h o r t c u t A c t i o n = f u n c t i o n ( l a n g ) { v a r   k e y s = [ { k b d : ' #  +   Z ' , t e x t : l a n g . h i s t o r y . u n d o } , { k b d : ' #  +   !  +   Z ' , t e x t : l a n g . h i s t o r y . r e d o } , { k b d : ' #  +   ] ' , t e x t : l a n g . p a r a g r a p h . i n d e n t } , { k b d : ' #  +   [ ' , t e x t : l a n g . p a r a g r a p h . o u t d e n t } , { k b d : ' #  +   E N T E R ' , t e x t : l a n g . h r . i n s e r t } ] ; r e t u r n   t p l S h o r t c u t ( l a n g . s h o r t c u t . a c t i o n , k e y s ) ; } ; v a r   t p l S h o r t c u t P a r a = f u n c t i o n ( l a n g ) { v a r   k e y s = [ { k b d : ' #  +   !  +   L ' , t e x t : l a n g . p a r a g r a p h . l e f t } , { k b d : ' #  +   !  +   E ' , t e x t : l a n g . p a r a g r a p h . c e n t e r } , { k b d : ' #  +   !  +   R ' , t e x t : l a n g . p a r a g r a p h . r i g h t } , { k b d : ' #  +   !  +   J ' , t e x t : l a n g . p a r a g r a p h . j u s t i f y } , { k b d : ' #  +   !  +   N U M 7 ' , t e x t : l a n g . l i s t s . o r d e r e d } , { k b d : ' #  +   !  +   N U M 8 ' , t e x t : l a n g . l i s t s . u n o r d e r e d } ] ; r e t u r n   t p l S h o r t c u t ( l a n g . s h o r t c u t . p a r a g r a p h F o r m a t t i n g , k e y s ) ; } ; v a r   t p l S h o r t c u t S t y l e = f u n c t i o n ( l a n g ) { v a r   k e y s = [ { k b d : ' #  +   N U M 0 ' , t e x t : l a n g . s t y l e . n o r m a l } , { k b d : ' #  +   N U M 1 ' , t e x t : l a n g . s t y l e . h 1 } , { k b d : ' #  +   N U M 2 ' , t e x t : l a n g . s t y l e . h 2 } , { k b d : ' #  +   N U M 3 ' , t e x t : l a n g . s t y l e . h 3 } , { k b d : ' #  +   N U M 4 ' , t e x t : l a n g . s t y l e . h 4 } , { k b d : ' #  +   N U M 5 ' , t e x t : l a n g . s t y l e . h 5 } , { k b d : ' #  +   N U M 6 ' , t e x t : l a n g . s t y l e . h 6 } ] ; r e t u r n   t p l S h o r t c u t ( l a n g . s h o r t c u t . d o c u m e n t S t y l e , k e y s ) ; } ; v a r   t p l E x t r a S h o r t c u t s = f u n c t i o n ( l a n g , o p t i o n s ) { v a r   e x t r a K e y s = o p t i o n s . e x t r a K e y s ; v a r   k e y s = [ ] ; f o r ( v a r   k e y   i n   e x t r a K e y s ) { i f ( e x t r a K e y s . h a s O w n P r o p e r t y ( k e y ) ) { k e y s . p u s h ( { k b d : k e y , t e x t : e x t r a K e y s [ k e y ] } ) ; } } 
 r e t u r n   t p l S h o r t c u t ( l a n g . s h o r t c u t . e x t r a K e y s , k e y s ) ; } ; v a r   t p l S h o r t c u t T a b l e = f u n c t i o n ( l a n g , o p t i o n s ) { v a r   c o l C l a s s = ' c l a s s = " n o t e - s h o r t c u t   n o t e - s h o r t c u t - c o l   c o l - m d - 6   c o l - 1 2 " ' ; v a r   t e m p l a t e = [ ' < d i v   ' + c o l C l a s s + ' > ' + t p l S h o r t c u t A c t i o n ( l a n g , o p t i o n s ) + ' < / d i v > ' + ' < d i v   ' + c o l C l a s s + ' > ' + t p l S h o r t c u t T e x t ( l a n g , o p t i o n s ) + ' < / d i v > ' , ' < d i v   ' + c o l C l a s s + ' > ' + t p l S h o r t c u t S t y l e ( l a n g , o p t i o n s ) + ' < / d i v > ' + ' < d i v   ' + c o l C l a s s + ' > ' + t p l S h o r t c u t P a r a ( l a n g , o p t i o n s ) + ' < / d i v > ' ] ; i f ( o p t i o n s . e x t r a K e y s ) { t e m p l a t e . p u s h ( ' < d i v   ' + c o l C l a s s + ' > ' + t p l E x t r a S h o r t c u t s ( l a n g , o p t i o n s ) + ' < / d i v > ' ) ; } 
 r e t u r n ' < d i v   c l a s s = " n o t e - s h o r t c u t - r o w   r o w " > ' + 
 t e m p l a t e . j o i n ( ' < / d i v > < d i v   c l a s s = " n o t e - s h o r t c u t - r o w   r o w " > ' ) + ' < / d i v > ' ; } ; v a r   r e p l a c e M a c K e y s = f u n c t i o n ( s H t m l ) { r e t u r n   s H t m l . r e p l a c e ( / #/ g , ' C t r l ' ) . r e p l a c e ( / !/ g , ' S h i f t ' ) ; } ; v a r   t p l D i a l o g I n f o = { i m a g e : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   i m a g e L i m i t a t i o n = ' ' ; i f ( o p t i o n s . m a x i m u m I m a g e F i l e S i z e ) { v a r   u n i t = M a t h . f l o o r ( M a t h . l o g ( o p t i o n s . m a x i m u m I m a g e F i l e S i z e ) / M a t h . l o g ( 1 0 2 4 ) ) ; v a r   r e a d a b l e S i z e = ( o p t i o n s . m a x i m u m I m a g e F i l e S i z e / M a t h . p o w ( 1 0 2 4 , u n i t ) ) . t o F i x e d ( 2 ) * 1 + '   ' + '   K M G T P ' [ u n i t ] + ' B ' ; i m a g e L i m i t a t i o n = ' < s m a l l > ' + l a n g . i m a g e . m a x i m u m F i l e S i z e + '   :   ' + r e a d a b l e S i z e + ' < / s m a l l > ' ; } 
 v a r   b o d y = ' < d i v   c l a s s = " f o r m - g r o u p   r o w   n o t e - g r o u p - s e l e c t - f r o m - f i l e s " > ' + ' < l a b e l > ' + l a n g . i m a g e . s e l e c t F r o m F i l e s + ' < / l a b e l > ' + ' < i n p u t   c l a s s = " n o t e - i m a g e - i n p u t   f o r m - c o n t r o l "   t y p e = " f i l e "   n a m e = " f i l e s "   a c c e p t = " i m a g e / * "   m u l t i p l e = " m u l t i p l e "   / > ' + 
 i m a g e L i m i t a t i o n + ' < / d i v > ' + ' < d i v   c l a s s = " f o r m - g r o u p   r o w " > ' + ' < l a b e l > ' + l a n g . i m a g e . u r l + ' < / l a b e l > ' + ' < i n p u t   c l a s s = " n o t e - i m a g e - u r l   f o r m - c o n t r o l   c o l - m d - 1 2 "   t y p e = " t e x t "   / > ' + ' < / d i v > ' ; v a r   f o o t e r = ' < b u t t o n   h r e f = " # "   c l a s s = " b t n   b t n - p r i m a r y   n o t e - i m a g e - b t n   d i s a b l e d "   d i s a b l e d > ' + l a n g . i m a g e . i n s e r t + ' < / b u t t o n > ' ; r e t u r n   t p l D i a l o g ( ' n o t e - i m a g e - d i a l o g ' , l a n g . i m a g e . i n s e r t , b o d y , f o o t e r ) ; } , l i n k : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   b o d y = ' < d i v   c l a s s = " f o r m - g r o u p   r o w " > ' + ' < l a b e l > ' + l a n g . l i n k . t e x t T o D i s p l a y + ' < / l a b e l > ' + ' < i n p u t   c l a s s = " n o t e - l i n k - t e x t   f o r m - c o n t r o l   c o l - m d - 1 2 "   t y p e = " t e x t "   / > ' + ' < / d i v > ' + ' < d i v   c l a s s = " f o r m - g r o u p   r o w " > ' + ' < l a b e l > ' + l a n g . l i n k . u r l + ' < / l a b e l > ' + ' < i n p u t   c l a s s = " n o t e - l i n k - u r l   f o r m - c o n t r o l   c o l - m d - 1 2 "   t y p e = " t e x t "   v a l u e = " h t t p : / / "   / > ' + ' < / d i v > ' + 
 ( ! o p t i o n s . d i s a b l e L i n k T a r g e t ? ' < d i v   c l a s s = " c h e c k b o x " > ' + ' < l a b e l > ' + ' < i n p u t   t y p e = " c h e c k b o x "   c h e c k e d >   ' + 
 l a n g . l i n k . o p e n I n N e w W i n d o w + ' < / l a b e l > ' + ' < / d i v > ' : ' ' ) ; v a r   f o o t e r = ' < b u t t o n   h r e f = " # "   c l a s s = " b t n   b t n - p r i m a r y   n o t e - l i n k - b t n   d i s a b l e d "   d i s a b l e d > ' + l a n g . l i n k . i n s e r t + ' < / b u t t o n > ' ; r e t u r n   t p l D i a l o g ( ' n o t e - l i n k - d i a l o g ' , l a n g . l i n k . i n s e r t , b o d y , f o o t e r ) ; } , h e l p : f u n c t i o n ( l a n g , o p t i o n s ) { v a r   b o d y = ' < a   c l a s s = " m o d a l - c l o s e   f l o a t - r i g h t "   a r i a - h i d d e n = " t r u e "   t a b i n d e x = " - 1 " > ' + l a n g . s h o r t c u t . c l o s e + ' < / a > ' + ' < d i v   c l a s s = " t i t l e " > ' + l a n g . s h o r t c u t . s h o r t c u t s + ' < / d i v > ' + 
 ( a g e n t . i s M a c ? t p l S h o r t c u t T a b l e ( l a n g , o p t i o n s ) : r e p l a c e M a c K e y s ( t p l S h o r t c u t T a b l e ( l a n g , o p t i o n s ) ) ) + ' < p   c l a s s = " t e x t - c e n t e r " > ' + ' < a   h r e f = " / / s u m m e r n o t e . o r g / "   t a r g e t = " _ b l a n k " > S u m m e r n o t e   @ V E R S I O N < / a >      ' + ' < a   h r e f = " / / g i t h u b . c o m / s u m m e r n o t e / s u m m e r n o t e "   t a r g e t = " _ b l a n k " > P r o j e c t < / a >      ' + ' < a   h r e f = " / / g i t h u b . c o m / s u m m e r n o t e / s u m m e r n o t e / i s s u e s "   t a r g e t = " _ b l a n k " > I s s u e s < / a > ' + ' < / p > ' ; r e t u r n   t p l D i a l o g ( ' n o t e - h e l p - d i a l o g ' , ' ' , b o d y , ' ' ) ; } } ; v a r   t p l D i a l o g s = f u n c t i o n ( l a n g , o p t i o n s ) { v a r   d i a l o g s = ' ' ; $ . e a c h ( t p l D i a l o g I n f o , f u n c t i o n ( i d x , t p l D i a l o g ) { d i a l o g s + = t p l D i a l o g ( l a n g , o p t i o n s ) ; } ) ; r e t u r n ' < d i v   c l a s s = " n o t e - d i a l o g " > ' + d i a l o g s + ' < / d i v > ' ; } ; v a r   t p l S t a t u s b a r = f u n c t i o n ( ) { r e t u r n ' < d i v   c l a s s = " n o t e - r e s i z e b a r " > ' + ' < d i v   c l a s s = " n o t e - i c o n - b a r " > < / d i v > ' + ' < d i v   c l a s s = " n o t e - i c o n - b a r " > < / d i v > ' + ' < d i v   c l a s s = " n o t e - i c o n - b a r " > < / d i v > ' + ' < / d i v > ' ; } ; v a r   r e p r e s e n t S h o r t c u t = f u n c t i o n ( s t r ) { i f ( a g e n t . i s M a c ) { s t r = s t r . r e p l a c e ( ' C M D ' , ' #' ) . r e p l a c e ( ' S H I F T ' , ' !' ) ; } 
 r e t u r n   s t r . r e p l a c e ( ' B A C K S L A S H ' , ' \ \ ' ) . r e p l a c e ( ' S L A S H ' , ' / ' ) . r e p l a c e ( ' L E F T B R A C K E T ' , ' [ ' ) . r e p l a c e ( ' R I G H T B R A C K E T ' , ' ] ' ) ; } ; v a r   c r e a t e T o o l t i p = f u n c t i o n ( $ c o n t a i n e r , k e y M a p , s P l a c e m e n t ) { v a r   i n v e r t e d K e y M a p = f u n c . i n v e r t O b j e c t ( k e y M a p ) ; v a r   $ b u t t o n s = $ c o n t a i n e r . f i n d ( ' b u t t o n ' ) ; $ b u t t o n s . e a c h ( f u n c t i o n ( i , e l B t n ) { v a r   $ b t n = $ ( e l B t n ) ; v a r   s S h o r t c u t = i n v e r t e d K e y M a p [ $ b t n . d a t a ( ' e v e n t ' ) ] ; i f ( s S h o r t c u t ) { $ b t n . a t t r ( ' t i t l e ' , f u n c t i o n ( i , v ) { r e t u r n   v + '   ( ' + r e p r e s e n t S h o r t c u t ( s S h o r t c u t ) + ' ) ' ; } ) ; } } ) . t o o l t i p ( { c o n t a i n e r : ' b o d y ' , t r i g g e r : ' h o v e r ' , p l a c e m e n t : s P l a c e m e n t | | ' t o p ' } ) . o n ( ' c l i c k ' , f u n c t i o n ( ) { $ ( t h i s ) . t o o l t i p ( ' h i d e ' ) ; } ) ; } ; v a r   c r e a t e P a l e t t e = f u n c t i o n ( $ c o n t a i n e r , o p t i o n s ) { v a r   c o l o r I n f o = o p t i o n s . c o l o r s ; $ c o n t a i n e r . f i n d ( ' . n o t e - c o l o r - p a l e t t e ' ) . e a c h ( f u n c t i o n ( ) { v a r   $ p a l e t t e = $ ( t h i s ) , e v e n t N a m e = $ p a l e t t e . a t t r ( ' d a t a - t a r g e t - e v e n t ' ) ; v a r   p a l e t t e C o n t e n t s = [ ] ; f o r ( v a r   r o w = 0 , l e n R o w = c o l o r I n f o . l e n g t h ; r o w < l e n R o w ; r o w + + ) { v a r   c o l o r s = c o l o r I n f o [ r o w ] ; v a r   b u t t o n s = [ ] ; f o r ( v a r   c o l = 0 , l e n C o l = c o l o r s . l e n g t h ; c o l < l e n C o l ; c o l + + ) { v a r   c o l o r = c o l o r s [ c o l ] ; b u t t o n s . p u s h ( [ ' < b u t t o n   t y p e = " b u t t o n "   c l a s s = " n o t e - c o l o r - b t n "   s t y l e = " b a c k g r o u n d - c o l o r : ' , c o l o r , ' ; "   d a t a - e v e n t = " ' , e v e n t N a m e , ' "   d a t a - v a l u e = " ' , c o l o r , ' "   t i t l e = " ' , c o l o r , ' "   d a t a - t o g g l e = " b u t t o n "   t a b i n d e x = " - 1 " > < / b u t t o n > ' ] . j o i n ( ' ' ) ) ; } 
 p a l e t t e C o n t e n t s . p u s h ( ' < d i v   c l a s s = " n o t e - c o l o r - r o w " > ' + b u t t o n s . j o i n ( ' ' ) + ' < / d i v > ' ) ; } 
 $ p a l e t t e . h t m l ( p a l e t t e C o n t e n t s . j o i n ( ' ' ) ) ; } ) ; } ; t h i s . c r e a t e P a l e t t e = c r e a t e P a l e t t e ; t h i s . c r e a t e L a y o u t B y A i r M o d e = f u n c t i o n ( $ h o l d e r , o p t i o n s ) { v a r   l a n g I n f o = o p t i o n s . l a n g I n f o ; v a r   k e y M a p = o p t i o n s . k e y M a p [ a g e n t . i s M a c ? ' m a c ' : ' p c ' ] ; v a r   i d = f u n c . u n i q u e I d ( ) ; $ h o l d e r . a d d C l a s s ( ' n o t e - a i r - e d i t o r   n o t e - e d i t a b l e ' ) ; $ h o l d e r . a t t r ( { ' d a t a - n o t e - i d ' : i d , ' c o n t e n t E d i t a b l e ' : t r u e } ) ; v a r   b o d y = d o c u m e n t . b o d y ; v a r   $ c o n t a i n e r = $ ( ' # w e b _ e d i t o r - t o o l b a r s ' ) 
 v a r   $ p o p o v e r = $ ( t h i s . t p l P o p o v e r s ( l a n g I n f o , o p t i o n s ) ) ; $ p o p o v e r . a d d C l a s s ( ' n o t e - a i r - l a y o u t ' ) ; $ p o p o v e r . a t t r ( ' i d ' , ' n o t e - p o p o v e r - ' + i d ) ; $ p o p o v e r . a p p e n d T o ( $ c o n t a i n e r ) ; c r e a t e T o o l t i p ( $ p o p o v e r , k e y M a p ) ; t h i s . c r e a t e P a l e t t e ( $ p o p o v e r , o p t i o n s ) ; v a r   $ h a n d l e = $ ( t p l H a n d l e s ( o p t i o n s ) ) ; $ h a n d l e . a d d C l a s s ( ' n o t e - a i r - l a y o u t ' ) ; $ h a n d l e . a t t r ( ' i d ' , ' n o t e - h a n d l e - ' + i d ) ; $ h a n d l e . a p p e n d T o ( $ c o n t a i n e r ) ; v a r   $ d i a l o g = $ ( t p l D i a l o g s ( l a n g I n f o , o p t i o n s ) ) ; $ d i a l o g . a d d C l a s s ( ' n o t e - a i r - l a y o u t ' ) ; $ d i a l o g . a t t r ( ' i d ' , ' n o t e - d i a l o g - ' + i d ) ; $ d i a l o g . f i n d ( ' b u t t o n . c l o s e ,   a . m o d a l - c l o s e ' ) . c l i c k ( f u n c t i o n ( ) { $ ( t h i s ) . c l o s e s t ( ' . m o d a l ' ) . m o d a l ( ' h i d e ' ) ; } ) ; $ d i a l o g . a p p e n d T o ( $ c o n t a i n e r ) ; } ; t h i s . c r e a t e L a y o u t B y F r a m e = f u n c t i o n ( $ h o l d e r , o p t i o n s ) { v a r   l a n g I n f o = o p t i o n s . l a n g I n f o ; v a r   $ e d i t o r = $ ( ' < d i v   c l a s s = " n o t e - e d i t o r   p a n e l   p a n e l - d e f a u l t "   / > ' ) ; i f ( o p t i o n s . w i d t h ) { $ e d i t o r . w i d t h ( o p t i o n s . w i d t h ) ; } 
 i f ( o p t i o n s . h e i g h t > 0 ) { $ ( ' < d i v   c l a s s = " n o t e - s t a t u s b a r " > ' + ( o p t i o n s . d i s a b l e R e s i z e E d i t o r ? ' ' : t p l S t a t u s b a r ( ) ) + ' < / d i v > ' ) . p r e p e n d T o ( $ e d i t o r ) ; } 
 v a r   $ e d i t i n g A r e a = $ ( ' < d i v   c l a s s = " n o t e - e d i t i n g - a r e a "   / > ' ) ; v a r   i s C o n t e n t E d i t a b l e = ! $ h o l d e r . i s ( ' : d i s a b l e d ' ) ; v a r   $ e d i t a b l e = $ ( ' < d i v   c l a s s = " n o t e - e d i t a b l e   p a n e l - b o d y "   c o n t e n t E d i t a b l e = " ' + i s C o n t e n t E d i t a b l e + ' " > < / d i v > ' ) . p r e p e n d T o ( $ e d i t i n g A r e a ) ; i f ( o p t i o n s . h e i g h t ) { $ e d i t a b l e . h e i g h t ( o p t i o n s . h e i g h t ) ; } 
 i f ( o p t i o n s . d i r e c t i o n ) { $ e d i t a b l e . a t t r ( ' d i r ' , o p t i o n s . d i r e c t i o n ) ; } 
 v a r   p l a c e h o l d e r = $ h o l d e r . a t t r ( ' p l a c e h o l d e r ' ) | | o p t i o n s . p l a c e h o l d e r ; i f ( p l a c e h o l d e r ) { $ e d i t a b l e . a t t r ( ' d a t a - p l a c e h o l d e r ' , p l a c e h o l d e r ) ; } 
 $ e d i t a b l e . h t m l ( d o m . h t m l ( $ h o l d e r ) | | d o m . e m p t y P a r a ) ; $ ( ' < t e x t a r e a   c l a s s = " n o t e - c o d a b l e " > < / t e x t a r e a > ' ) . p r e p e n d T o ( $ e d i t i n g A r e a ) ; v a r   $ p o p o v e r = $ ( t h i s . t p l P o p o v e r s ( l a n g I n f o , o p t i o n s ) ) . p r e p e n d T o ( $ e d i t i n g A r e a ) ; t h i s . c r e a t e P a l e t t e ( $ p o p o v e r , o p t i o n s ) ; c r e a t e T o o l t i p ( $ p o p o v e r , k e y M a p ) ; $ ( t p l H a n d l e s ( o p t i o n s ) ) . p r e p e n d T o ( $ e d i t i n g A r e a ) ; $ e d i t i n g A r e a . p r e p e n d T o ( $ e d i t o r ) ; v a r   $ t o o l b a r = $ ( ' < d i v   c l a s s = " n o t e - t o o l b a r   p a n e l - h e a d i n g "   / > ' ) ; f o r ( v a r   i d x = 0 , l e n = o p t i o n s . t o o l b a r . l e n g t h ; i d x < l e n ; i d x + + ) { v a r   g r o u p N a m e = o p t i o n s . t o o l b a r [ i d x ] [ 0 ] ; v a r   g r o u p B u t t o n s = o p t i o n s . t o o l b a r [ i d x ] [ 1 ] ; v a r   $ g r o u p = $ ( ' < d i v   c l a s s = " n o t e - ' + g r o u p N a m e + '   b t n - g r o u p "   / > ' ) ; f o r ( v a r   i = 0 , b t n L e n g t h = g r o u p B u t t o n s . l e n g t h ; i < b t n L e n g t h ; i + + ) { v a r   b u t t o n I n f o = t p l B u t t o n I n f o [ g r o u p B u t t o n s [ i ] ] ; i f ( ! $ . i s F u n c t i o n ( b u t t o n I n f o ) ) { c o n t i n u e ; } 
 v a r   $ b u t t o n = $ ( b u t t o n I n f o ( l a n g I n f o , o p t i o n s ) ) ; $ b u t t o n . a t t r ( ' d a t a - n a m e ' , g r o u p B u t t o n s [ i ] ) ; $ g r o u p . a p p e n d ( $ b u t t o n ) ; } 
 $ t o o l b a r . a p p e n d ( $ g r o u p ) ; } 
 v a r   k e y M a p = o p t i o n s . k e y M a p [ a g e n t . i s M a c ? ' m a c ' : ' p c ' ] ; t h i s . c r e a t e P a l e t t e ( $ t o o l b a r , o p t i o n s ) ; c r e a t e T o o l t i p ( $ t o o l b a r , k e y M a p , ' b o t t o m ' ) ; $ t o o l b a r . p r e p e n d T o ( $ e d i t o r ) ; $ ( ' < d i v   c l a s s = " n o t e - d r o p z o n e " > < d i v   c l a s s = " n o t e - d r o p z o n e - m e s s a g e " > < / d i v > < / d i v > ' ) . p r e p e n d T o ( $ e d i t o r ) ; v a r   $ d i a l o g C o n t a i n e r = o p t i o n s . d i a l o g s I n B o d y ? $ ( d o c u m e n t . b o d y ) : $ e d i t o r ; v a r   $ d i a l o g = $ ( t p l D i a l o g s ( l a n g I n f o , o p t i o n s ) ) . p r e p e n d T o ( $ d i a l o g C o n t a i n e r ) ; $ d i a l o g . f i n d ( ' b u t t o n . c l o s e ,   a . m o d a l - c l o s e ' ) . c l i c k ( f u n c t i o n ( ) { $ ( t h i s ) . c l o s e s t ( ' . m o d a l ' ) . m o d a l ( ' h i d e ' ) ; } ) ; $ e d i t o r . i n s e r t A f t e r ( $ h o l d e r ) ; $ h o l d e r . h i d e ( ) ; } ; t h i s . h a s N o t e E d i t o r = f u n c t i o n ( $ h o l d e r ) { r e t u r n   t h i s . n o t e E d i t o r F r o m H o l d e r ( $ h o l d e r ) . l e n g t h > 0 ; } ; t h i s . n o t e E d i t o r F r o m H o l d e r = f u n c t i o n ( $ h o l d e r ) { i f ( $ h o l d e r . h a s C l a s s ( ' n o t e - a i r - e d i t o r ' ) ) { r e t u r n   $ h o l d e r ; } e l s e   i f ( $ h o l d e r . n e x t ( ) . h a s C l a s s ( ' n o t e - e d i t o r ' ) ) { r e t u r n   $ h o l d e r . n e x t ( ) ; } e l s e { r e t u r n   $ ( ) ; } } ; t h i s . c r e a t e L a y o u t = f u n c t i o n ( $ h o l d e r , o p t i o n s ) { i f ( o p t i o n s . a i r M o d e ) { t h i s . c r e a t e L a y o u t B y A i r M o d e ( $ h o l d e r , o p t i o n s ) ; } e l s e { t h i s . c r e a t e L a y o u t B y F r a m e ( $ h o l d e r , o p t i o n s ) ; } } ; t h i s . l a y o u t I n f o F r o m H o l d e r = f u n c t i o n ( $ h o l d e r ) { v a r   $ e d i t o r = t h i s . n o t e E d i t o r F r o m H o l d e r ( $ h o l d e r ) ; i f ( ! $ e d i t o r . l e n g t h ) { r e t u r n ; } 
 $ e d i t o r . d a t a ( ' h o l d e r ' , $ h o l d e r ) ; r e t u r n   d o m . b u i l d L a y o u t I n f o ( $ e d i t o r ) ; } ; t h i s . r e m o v e L a y o u t = f u n c t i o n ( $ h o l d e r , l a y o u t I n f o , o p t i o n s ) { i f ( o p t i o n s . a i r M o d e ) { $ h o l d e r . r e m o v e C l a s s ( ' n o t e - a i r - e d i t o r   n o t e - e d i t a b l e ' ) . r e m o v e A t t r ( ' c o n t e n t E d i t a b l e ' ) ; l a y o u t I n f o . p o p o v e r ( ) . r e m o v e ( ) ; l a y o u t I n f o . h a n d l e ( ) . r e m o v e ( ) ; l a y o u t I n f o . d i a l o g ( ) . r e m o v e ( ) ; } e l s e { $ h o l d e r . h t m l ( l a y o u t I n f o . e d i t a b l e ( ) . h t m l ( ) ) ; i f ( o p t i o n s . d i a l o g s I n B o d y ) { l a y o u t I n f o . d i a l o g ( ) . r e m o v e ( ) ; } 
 l a y o u t I n f o . e d i t o r ( ) . r e m o v e ( ) ; $ h o l d e r . s h o w ( ) ; } } ; t h i s . g e t T e m p l a t e = f u n c t i o n ( ) { r e t u r n { b u t t o n : t p l B u t t o n , i c o n B u t t o n : t p l I c o n B u t t o n , d i a l o g : t p l D i a l o g , d r o p d o w n : t p l D r o p d o w n } ; } ; t h i s . a d d B u t t o n I n f o = f u n c t i o n ( n a m e , b u t t o n I n f o ) { t p l B u t t o n I n f o [ n a m e ] = b u t t o n I n f o ; } ; t h i s . a d d D i a l o g I n f o = f u n c t i o n ( n a m e , d i a l o g I n f o ) { t p l D i a l o g I n f o [ n a m e ] = d i a l o g I n f o ; } ; } ; r e t u r n   R e n d e r e r ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / E v e n t H a n d l e r ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / E v e n t H a n d l e r . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / f u n c ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / a s y n c ' , ' s u m m e r n o t e / c o r e / k e y ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / e d i t i n g / H i s t o r y ' , ' s u m m e r n o t e / m o d u l e / E d i t o r ' , ' s u m m e r n o t e / m o d u l e / T o o l b a r ' , ' s u m m e r n o t e / m o d u l e / S t a t u s b a r ' , ' s u m m e r n o t e / m o d u l e / P o p o v e r ' , ' s u m m e r n o t e / m o d u l e / H a n d l e ' , ' s u m m e r n o t e / m o d u l e / F u l l s c r e e n ' , ' s u m m e r n o t e / m o d u l e / C o d e v i e w ' , ' s u m m e r n o t e / m o d u l e / D r a g A n d D r o p ' , ' s u m m e r n o t e / m o d u l e / C l i p b o a r d ' , ' s u m m e r n o t e / m o d u l e / L i n k D i a l o g ' , ' s u m m e r n o t e / m o d u l e / I m a g e D i a l o g ' , ' s u m m e r n o t e / m o d u l e / H e l p D i a l o g ' ] , f u n c t i o n ( a g e n t , f u n c , d o m , a s y n c , k e y , l i s t , H i s t o r y , E d i t o r , T o o l b a r , S t a t u s b a r , P o p o v e r , H a n d l e , F u l l s c r e e n , C o d e v i e w , D r a g A n d D r o p , C l i p b o a r d , L i n k D i a l o g , I m a g e D i a l o g , H e l p D i a l o g ) { v a r   E v e n t H a n d l e r = f u n c t i o n ( ) { v a r   s e l f = t h i s ; v a r   m o d u l e s = t h i s . m o d u l e s = { e d i t o r : n e w   E d i t o r ( t h i s ) , t o o l b a r : n e w   T o o l b a r ( t h i s ) , s t a t u s b a r : n e w   S t a t u s b a r ( t h i s ) , p o p o v e r : n e w   P o p o v e r ( t h i s ) , h a n d l e : n e w   H a n d l e ( t h i s ) , f u l l s c r e e n : n e w   F u l l s c r e e n ( t h i s ) , c o d e v i e w : n e w   C o d e v i e w ( t h i s ) , d r a g A n d D r o p : n e w   D r a g A n d D r o p ( t h i s ) , c l i p b o a r d : n e w   C l i p b o a r d ( t h i s ) , l i n k D i a l o g : n e w   L i n k D i a l o g ( t h i s ) , i m a g e D i a l o g : n e w   I m a g e D i a l o g ( t h i s ) , h e l p D i a l o g : n e w   H e l p D i a l o g ( t h i s ) } ; t h i s . i n v o k e = f u n c t i o n ( ) { v a r   m o d u l e A n d M e t h o d = l i s t . h e a d ( l i s t . f r o m ( a r g u m e n t s ) ) ; v a r   a r g s = l i s t . t a i l ( l i s t . f r o m ( a r g u m e n t s ) ) ; v a r   s p l i t s = m o d u l e A n d M e t h o d . s p l i t ( ' . ' ) ; v a r   h a s S e p a r a t o r = s p l i t s . l e n g t h > 1 ; v a r   m o d u l e N a m e = h a s S e p a r a t o r & & l i s t . h e a d ( s p l i t s ) ; v a r   m e t h o d N a m e = h a s S e p a r a t o r ? l i s t . l a s t ( s p l i t s ) : l i s t . h e a d ( s p l i t s ) ; v a r   m o d u l e = t h i s . g e t M o d u l e ( m o d u l e N a m e ) ; v a r   m e t h o d = m o d u l e [ m e t h o d N a m e ] ; r e t u r n   m e t h o d & & m e t h o d . a p p l y ( m o d u l e , a r g s ) ; } ; t h i s . g e t M o d u l e = f u n c t i o n ( m o d u l e N a m e ) { r e t u r n   t h i s . m o d u l e s [ m o d u l e N a m e ] | | t h i s . m o d u l e s . e d i t o r ; } ; v a r   b i n d C u s t o m E v e n t = t h i s . b i n d C u s t o m E v e n t = f u n c t i o n ( $ h o l d e r , c a l l b a c k s , e v e n t N a m e s p a c e ) { r e t u r n   f u n c t i o n ( ) { v a r   c a l l b a c k = c a l l b a c k s [ f u n c . n a m e s p a c e T o C a m e l ( e v e n t N a m e s p a c e , ' o n ' ) ] ; i f ( c a l l b a c k ) { c a l l b a c k . a p p l y ( $ h o l d e r [ 0 ] , a r g u m e n t s ) ; } 
 r e t u r n   $ h o l d e r . t r i g g e r ( ' s u m m e r n o t e . ' + e v e n t N a m e s p a c e , a r g u m e n t s ) ; } ; } ; t h i s . i n s e r t I m a g e s = f u n c t i o n ( l a y o u t I n f o , f i l e s ) { v a r   $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) , $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) , $ h o l d e r = l a y o u t I n f o . h o l d e r ( ) ; v a r   c a l l b a c k s = $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) ; v a r   o p t i o n s = $ e d i t o r . d a t a ( ' o p t i o n s ' ) ; i f ( c a l l b a c k s . o n I m a g e U p l o a d ) { b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' i m a g e . u p l o a d ' ) ( f i l e s ) ; } e l s e { $ . e a c h ( f i l e s , f u n c t i o n ( i d x , f i l e ) { v a r   f i l e n a m e = f i l e . n a m e ; i f ( o p t i o n s . m a x i m u m I m a g e F i l e S i z e & & o p t i o n s . m a x i m u m I m a g e F i l e S i z e < f i l e . s i z e ) { b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' i m a g e . u p l o a d . e r r o r ' ) ( o p t i o n s . l a n g I n f o . i m a g e . m a x i m u m F i l e S i z e E r r o r ) ; } e l s e { a s y n c . r e a d F i l e A s D a t a U R L ( f i l e ) . t h e n ( f u n c t i o n ( s D a t a U R L ) { m o d u l e s . e d i t o r . i n s e r t I m a g e ( $ e d i t a b l e , s D a t a U R L , f i l e n a m e ) ; } ) . f a i l ( f u n c t i o n ( ) { b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' i m a g e . u p l o a d . e r r o r ' ) ( o p t i o n s . l a n g I n f o . i m a g e . m a x i m u m F i l e S i z e E r r o r ) ; } ) ; } } ) ; } } ; v a r   c o m m a n d s = { s h o w L i n k D i a l o g : f u n c t i o n ( l a y o u t I n f o ) { m o d u l e s . l i n k D i a l o g . s h o w ( l a y o u t I n f o ) ; } , s h o w I m a g e D i a l o g : f u n c t i o n ( l a y o u t I n f o ) { m o d u l e s . i m a g e D i a l o g . s h o w ( l a y o u t I n f o ) ; } , s h o w H e l p D i a l o g : f u n c t i o n ( l a y o u t I n f o ) { m o d u l e s . h e l p D i a l o g . s h o w ( l a y o u t I n f o ) ; } , f u l l s c r e e n : f u n c t i o n ( l a y o u t I n f o ) { m o d u l e s . f u l l s c r e e n . t o g g l e ( l a y o u t I n f o ) ; } , c o d e v i e w : f u n c t i o n ( l a y o u t I n f o ) { m o d u l e s . c o d e v i e w . t o g g l e ( l a y o u t I n f o ) ; } } ; v a r   h M o u s e d o w n = f u n c t i o n ( e v e n t ) { i f ( d o m . i s I m g ( e v e n t . t a r g e t ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; } } ; v a r   h K e y u p A n d M o u s e u p = f u n c t i o n ( e v e n t ) { v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . c u r r e n t T a r g e t | | e v e n t . t a r g e t ) ; m o d u l e s . e d i t o r . r e m o v e B o g u s ( l a y o u t I n f o . e d i t a b l e ( ) ) ; h T o o l b a r A n d P o p o v e r U p d a t e ( e v e n t ) ; } ; t h i s . u p d a t e S t y l e I n f o = f u n c t i o n ( s t y l e I n f o , l a y o u t I n f o ) { i f ( ! s t y l e I n f o ) { r e t u r n ; } 
 v a r   i s A i r M o d e = ( l a y o u t I n f o . e d i t o r ( ) . d a t a ( ' o p t i o n s ' ) | | { } ) . a i r M o d e ; i f ( ! i s A i r M o d e ) { m o d u l e s . t o o l b a r . u p d a t e ( l a y o u t I n f o . t o o l b a r ( ) , s t y l e I n f o ) ; } 
 m o d u l e s . p o p o v e r . u p d a t e ( l a y o u t I n f o . p o p o v e r ( ) , s t y l e I n f o , i s A i r M o d e ) ; m o d u l e s . h a n d l e . u p d a t e ( l a y o u t I n f o . h a n d l e ( ) , s t y l e I n f o , i s A i r M o d e ) ; } ; v a r   h T o o l b a r A n d P o p o v e r U p d a t e = f u n c t i o n ( e v e n t ) { v a r   t a r g e t = e v e n t . t a r g e t ; s e t T i m e o u t ( f u n c t i o n ( ) { v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( t a r g e t ) ; i f ( ! l a y o u t I n f o ) { r e t u r n ; } 
 v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; i f ( e v e n t . s e t S t y l e I n f o F r o m E d i t a b l e ) { v a r   s t y l e I n f o = m o d u l e s . e d i t o r . s t y l e F r o m N o d e ( $ e d i t a b l e ) ; } e l s e { i f ( ! e v e n t . i s D e f a u l t P r e v e n t e d ( ) ) { m o d u l e s . e d i t o r . s a v e R a n g e ( $ e d i t a b l e ) ; } 
 v a r   s t y l e I n f o = m o d u l e s . e d i t o r . c u r r e n t S t y l e ( t a r g e t ) ; } 
 s e l f . u p d a t e S t y l e I n f o ( s t y l e I n f o , l a y o u t I n f o ) ; } , 0 ) ; } ; v a r   h S c r o l l = f u n c t i o n ( e v e n t ) { v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . c u r r e n t T a r g e t | | e v e n t . t a r g e t ) ; m o d u l e s . p o p o v e r . h i d e ( l a y o u t I n f o . p o p o v e r ( ) ) ; m o d u l e s . h a n d l e . h i d e ( l a y o u t I n f o . h a n d l e ( ) ) ; } ; v a r   h T o o l b a r A n d P o p o v e r M o u s e d o w n = f u n c t i o n ( e v e n t ) { v a r   $ b t n = $ ( e v e n t . t a r g e t ) . c l o s e s t ( ' [ d a t a - e v e n t ] ' ) ; i f ( $ b t n . l e n g t h ) { e v e n t . p r e v e n t D e f a u l t ( ) ; } } ; v a r   h T o o l b a r A n d P o p o v e r C l i c k = f u n c t i o n ( e v e n t ) { v a r   $ b t n = $ ( e v e n t . t a r g e t ) . c l o s e s t ( ' [ d a t a - e v e n t ] ' ) ; i f ( ! $ b t n . l e n g t h ) { r e t u r n ; } 
 v a r   e v e n t N a m e = $ b t n . a t t r ( ' d a t a - e v e n t ' ) , v a l u e = $ b t n . a t t r ( ' d a t a - v a l u e ' ) , h i d e = $ b t n . a t t r ( ' d a t a - h i d e ' ) ; v a r   l a y o u t I n f o = d o m . m a k e L a y o u t I n f o ( e v e n t . t a r g e t ) ; v a r   $ t a r g e t ; i f ( $ . i n A r r a y ( e v e n t N a m e , [ ' r e s i z e ' , ' f l o a t M e ' , ' r e m o v e M e d i a ' , ' i m a g e S h a p e ' ] ) ! = = - 1 ) { v a r   $ s e l e c t i o n = l a y o u t I n f o . h a n d l e ( ) . f i n d ( ' . n o t e - c o n t r o l - s e l e c t i o n ' ) ; $ t a r g e t = $ ( $ s e l e c t i o n . d a t a ( ' t a r g e t ' ) ) ; } 
 i f ( h i d e ) { $ b t n . p a r e n t s ( ' . p o p o v e r ' ) . h i d e ( ) ; } 
 i f ( $ . i s F u n c t i o n ( $ . s u m m e r n o t e . p l u g i n E v e n t s [ e v e n t N a m e ] ) ) { $ . s u m m e r n o t e . p l u g i n E v e n t s [ e v e n t N a m e ] ( e v e n t , m o d u l e s . e d i t o r , l a y o u t I n f o , v a l u e ) ; } e l s e   i f ( m o d u l e s . e d i t o r [ e v e n t N a m e ] ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . f o c u s ( ) ; m o d u l e s . e d i t o r [ e v e n t N a m e ] ( $ e d i t a b l e , v a l u e , $ t a r g e t ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; } e l s e   i f ( c o m m a n d s [ e v e n t N a m e ] ) { c o m m a n d s [ e v e n t N a m e ] . c a l l ( t h i s , l a y o u t I n f o ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; } 
 i f ( $ . i n A r r a y ( e v e n t N a m e , [ ' b a c k C o l o r ' , ' f o r e C o l o r ' ] ) ! = = - 1 ) { v a r   o p t i o n s = l a y o u t I n f o . e d i t o r ( ) . d a t a ( ' o p t i o n s ' , o p t i o n s ) ; v a r   m o d u l e = o p t i o n s . a i r M o d e ? m o d u l e s . p o p o v e r : m o d u l e s . t o o l b a r ; m o d u l e . u p d a t e R e c e n t C o l o r ( l i s t . h e a d ( $ b t n ) , e v e n t N a m e , v a l u e ) ; } 
 h T o o l b a r A n d P o p o v e r U p d a t e ( e v e n t ) ; } ; v a r   P X _ P E R _ E M = 1 8 ; v a r   h D i m e n s i o n P i c k e r M o v e = f u n c t i o n ( e v e n t , o p t i o n s ) { v a r   $ p i c k e r = $ ( e v e n t . t a r g e t . p a r e n t N o d e ) ; v a r   $ d i m e n s i o n D i s p l a y = $ p i c k e r . n e x t ( ) ; v a r   $ c a t c h e r = $ p i c k e r . f i n d ( ' . n o t e - d i m e n s i o n - p i c k e r - m o u s e c a t c h e r ' ) ; v a r   $ h i g h l i g h t e d = $ p i c k e r . f i n d ( ' . n o t e - d i m e n s i o n - p i c k e r - h i g h l i g h t e d ' ) ; v a r   $ u n h i g h l i g h t e d = $ p i c k e r . f i n d ( ' . n o t e - d i m e n s i o n - p i c k e r - u n h i g h l i g h t e d ' ) ; v a r   p o s O f f s e t ; i f ( e v e n t . o f f s e t X = = = u n d e f i n e d ) { v a r   p o s C a t c h e r = $ ( e v e n t . t a r g e t ) . o f f s e t ( ) ; p o s O f f s e t = { x : e v e n t . p a g e X - p o s C a t c h e r . l e f t , y : e v e n t . p a g e Y - p o s C a t c h e r . t o p } ; } e l s e { p o s O f f s e t = { x : e v e n t . o f f s e t X , y : e v e n t . o f f s e t Y } ; } 
 v a r   d i m = { c : M a t h . c e i l ( p o s O f f s e t . x / P X _ P E R _ E M ) | | 1 , r : M a t h . c e i l ( p o s O f f s e t . y / P X _ P E R _ E M ) | | 1 } ; $ h i g h l i g h t e d . c s s ( { w i d t h : d i m . c + ' e m ' , h e i g h t : d i m . r + ' e m ' } ) ; $ c a t c h e r . a t t r ( ' d a t a - v a l u e ' , d i m . c + ' x ' + d i m . r ) ; i f ( 3 < d i m . c & & d i m . c < o p t i o n s . i n s e r t T a b l e M a x S i z e . c o l ) { $ u n h i g h l i g h t e d . c s s ( { w i d t h : d i m . c + 1 + ' e m ' } ) ; } 
 i f ( 3 < d i m . r & & d i m . r < o p t i o n s . i n s e r t T a b l e M a x S i z e . r o w ) { $ u n h i g h l i g h t e d . c s s ( { h e i g h t : d i m . r + 1 + ' e m ' } ) ; } 
 $ d i m e n s i o n D i s p l a y . h t m l ( d i m . c + '   x   ' + d i m . r ) ; } ; t h i s . b i n d K e y M a p = f u n c t i o n ( l a y o u t I n f o , k e y M a p ) { v a r   $ e d i t o r = l a y o u t I n f o . e d i t o r ( ) ; v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . o n ( ' k e y d o w n ' , f u n c t i o n ( e v e n t ) { v a r   k e y s = [ ] ; i f ( e v e n t . m e t a K e y ) { k e y s . p u s h ( ' C M D ' ) ; } 
 i f ( e v e n t . c t r l K e y & & ! e v e n t . a l t K e y ) { k e y s . p u s h ( ' C T R L ' ) ; } 
 i f ( e v e n t . s h i f t K e y ) { k e y s . p u s h ( ' S H I F T ' ) ; } 
 v a r   k e y N a m e = k e y . n a m e F r o m C o d e [ e v e n t . k e y C o d e ] ; i f ( k e y N a m e ) { k e y s . p u s h ( k e y N a m e ) ; } 
 v a r   p l u g i n E v e n t ; v a r   k e y S t r i n g = k e y s . j o i n ( ' + ' ) ; v a r   e v e n t N a m e = k e y M a p [ k e y S t r i n g ] ; v a r   k e y c o d e = e v e n t . k e y C o d e ; i f ( ! e v e n t N a m e & & ! e v e n t . c t r l K e y & & ! e v e n t . m e t a K e y & & ( ( k e y c o d e > 4 7 & & k e y c o d e < 5 8 ) | | k e y c o d e = = 3 2 | | k e y c o d e = = 1 3 | | ( k e y c o d e > 6 4 & & k e y c o d e < 9 1 ) | | ( k e y c o d e > 9 5 & & k e y c o d e < 1 1 2 ) | | ( k e y c o d e > 1 8 5 & & k e y c o d e < 1 9 3 ) | | ( k e y c o d e > 2 1 8 & & k e y c o d e < 2 2 3 ) ) ) { e v e n t N a m e = ' v i s i b l e ' ; } e l s e   i f ( ! k e y c o d e & & e v e n t . k e y ! = = ' D e a d ' ) { s e l f . i n v o k e ( ' r e s t o r e R a n g e ' , $ e d i t a b l e ) ; } 
 i f ( e v e n t N a m e ) { p l u g i n E v e n t = $ . s u m m e r n o t e . p l u g i n E v e n t s [ k e y S t r i n g ] ; i f ( $ . i s F u n c t i o n ( p l u g i n E v e n t ) ) { i f ( p l u g i n E v e n t ( e v e n t , m o d u l e s . e d i t o r , l a y o u t I n f o ) ) { r e t u r n   f a l s e ; } } 
 p l u g i n E v e n t = $ . s u m m e r n o t e . p l u g i n E v e n t s [ e v e n t N a m e ] ; i f ( $ . i s F u n c t i o n ( p l u g i n E v e n t ) ) { p l u g i n E v e n t ( e v e n t , m o d u l e s . e d i t o r , l a y o u t I n f o ) ; } e l s e   i f ( m o d u l e s . e d i t o r [ e v e n t N a m e ] ) { m o d u l e s . e d i t o r [ e v e n t N a m e ] ( $ e d i t a b l e , $ e d i t o r . d a t a ( ' o p t i o n s ' ) ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; } e l s e   i f ( c o m m a n d s [ e v e n t N a m e ] ) { c o m m a n d s [ e v e n t N a m e ] . c a l l ( t h i s , l a y o u t I n f o ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; } } e l s e   i f ( k e y . i s E d i t ( e v e n t . k e y C o d e ) ) { m o d u l e s . e d i t o r . a f t e r C o m m a n d ( $ e d i t a b l e ) ; } } ) ; } ; t h i s . a t t a c h = f u n c t i o n ( l a y o u t I n f o , o p t i o n s ) { i f ( o p t i o n s . s h o r t c u t s ) { t h i s . b i n d K e y M a p ( l a y o u t I n f o , o p t i o n s . k e y M a p [ a g e n t . i s M a c ? ' m a c ' : ' p c ' ] ) ; } 
 l a y o u t I n f o . e d i t a b l e ( ) . o n ( ' m o u s e d o w n ' , h M o u s e d o w n ) ; l a y o u t I n f o . e d i t a b l e ( ) . o n ( ' k e y u p   m o u s e u p ' , h K e y u p A n d M o u s e u p ) ; l a y o u t I n f o . e d i t a b l e ( ) . o n ( ' s c r o l l ' , h S c r o l l ) ; m o d u l e s . c l i p b o a r d . a t t a c h ( l a y o u t I n f o , o p t i o n s ) ; m o d u l e s . h a n d l e . a t t a c h ( l a y o u t I n f o , o p t i o n s ) ; l a y o u t I n f o . p o p o v e r ( ) . o n ( ' c l i c k ' , h T o o l b a r A n d P o p o v e r C l i c k ) ; l a y o u t I n f o . p o p o v e r ( ) . o n ( ' m o u s e d o w n ' , h T o o l b a r A n d P o p o v e r M o u s e d o w n ) ; m o d u l e s . d r a g A n d D r o p . a t t a c h ( l a y o u t I n f o , o p t i o n s ) ; i f ( ! o p t i o n s . a i r M o d e ) { l a y o u t I n f o . t o o l b a r ( ) . o n ( ' c l i c k ' , h T o o l b a r A n d P o p o v e r C l i c k ) ; l a y o u t I n f o . t o o l b a r ( ) . o n ( ' m o u s e d o w n ' , h T o o l b a r A n d P o p o v e r M o u s e d o w n ) ; m o d u l e s . s t a t u s b a r . a t t a c h ( l a y o u t I n f o , o p t i o n s ) ; } 
 v a r   $ c a t c h e r C o n t a i n e r = o p t i o n s . a i r M o d e ? l a y o u t I n f o . p o p o v e r ( ) : l a y o u t I n f o . t o o l b a r ( ) ; v a r   $ c a t c h e r = $ c a t c h e r C o n t a i n e r . f i n d ( ' . n o t e - d i m e n s i o n - p i c k e r - m o u s e c a t c h e r ' ) ; $ c a t c h e r . c s s ( { w i d t h : o p t i o n s . i n s e r t T a b l e M a x S i z e . c o l + ' e m ' , h e i g h t : o p t i o n s . i n s e r t T a b l e M a x S i z e . r o w + ' e m ' } ) . o n ( ' m o u s e m o v e ' , f u n c t i o n ( e v e n t ) { h D i m e n s i o n P i c k e r M o v e ( e v e n t , o p t i o n s ) ; } ) ; l a y o u t I n f o . e d i t o r ( ) . d a t a ( ' o p t i o n s ' , o p t i o n s ) ; i f ( ! a g e n t . i s M S I E ) { s e t T i m e o u t ( f u n c t i o n ( ) { d o c u m e n t . e x e c C o m m a n d ( ' s t y l e W i t h C S S ' , 0 , o p t i o n s . s t y l e W i t h S p a n ) ; } , 0 ) ; } 
 v a r   h i s t o r y = n e w   H i s t o r y ( l a y o u t I n f o . e d i t a b l e ( ) ) ; l a y o u t I n f o . e d i t a b l e ( ) . d a t a ( ' N o t e H i s t o r y ' , h i s t o r y ) ; l a y o u t I n f o . e d i t a b l e ( ) . d a t a ( ' c a l l b a c k s ' , { o n I n i t : o p t i o n s . o n I n i t , o n F o c u s : o p t i o n s . o n F o c u s , o n B l u r : o p t i o n s . o n B l u r , o n K e y d o w n : o p t i o n s . o n K e y d o w n , o n K e y u p : o p t i o n s . o n K e y u p , o n M o u s e d o w n : o p t i o n s . o n M o u s e d o w n , o n E n t e r : o p t i o n s . o n E n t e r , o n P a s t e : o p t i o n s . o n P a s t e , o n B e f o r e C o m m a n d : o p t i o n s . o n B e f o r e C o m m a n d , o n C h a n g e : o p t i o n s . o n C h a n g e , o n I m a g e U p l o a d : o p t i o n s . o n I m a g e U p l o a d , o n I m a g e U p l o a d E r r o r : o p t i o n s . o n I m a g e U p l o a d E r r o r , o n M e d i a D e l e t e : o p t i o n s . o n M e d i a D e l e t e , o n T o o l b a r C l i c k : o p t i o n s . o n T o o l b a r C l i c k , o n U p l o a d : o p t i o n s . o n U p l o a d , } ) ; v a r   s t y l e I n f o = m o d u l e s . e d i t o r . s t y l e F r o m N o d e ( l a y o u t I n f o . e d i t a b l e ( ) ) ; t h i s . u p d a t e S t y l e I n f o ( s t y l e I n f o , l a y o u t I n f o ) ; } ; t h i s . a t t a c h C u s t o m E v e n t = f u n c t i o n ( l a y o u t I n f o , o p t i o n s ) { v a r   $ h o l d e r = l a y o u t I n f o . h o l d e r ( ) ; v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; v a r   c a l l b a c k s = $ e d i t a b l e . d a t a ( ' c a l l b a c k s ' ) ; $ e d i t a b l e . f o c u s ( b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' f o c u s ' ) ) ; $ e d i t a b l e . b l u r ( b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' b l u r ' ) ) ; $ e d i t a b l e . k e y d o w n ( f u n c t i o n ( e v e n t ) { i f ( e v e n t . k e y C o d e = = = k e y . c o d e . E N T E R ) { b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' e n t e r ' ) . c a l l ( t h i s , e v e n t ) ; } 
 b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' k e y d o w n ' ) . c a l l ( t h i s , e v e n t ) ; } ) ; $ e d i t a b l e . k e y u p ( b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' k e y u p ' ) ) ; $ e d i t a b l e . o n ( ' m o u s e d o w n ' , b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' m o u s e d o w n ' ) ) ; $ e d i t a b l e . o n ( ' m o u s e u p ' , b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' m o u s e u p ' ) ) ; $ e d i t a b l e . o n ( ' s c r o l l ' , b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' s c r o l l ' ) ) ; $ e d i t a b l e . o n ( ' p a s t e ' , b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' p a s t e ' ) ) ; v a r   c h a n g e E v e n t N a m e = a g e n t . i s M S I E ? ' D O M C h a r a c t e r D a t a M o d i f i e d   D O M S u b t r e e M o d i f i e d   D O M N o d e I n s e r t e d ' : ' i n p u t ' ; $ e d i t a b l e . o n ( c h a n g e E v e n t N a m e , f u n c t i o n ( ) { b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' c h a n g e ' ) ( $ e d i t a b l e . h t m l ( ) , $ e d i t a b l e ) ; } ) ; i f ( ! o p t i o n s . a i r M o d e ) { l a y o u t I n f o . t o o l b a r ( ) . c l i c k ( b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' t o o l b a r . c l i c k ' ) ) ; l a y o u t I n f o . p o p o v e r ( ) . c l i c k ( b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' p o p o v e r . c l i c k ' ) ) ; } 
 i f ( d o m . i s T e x t a r e a ( l i s t . h e a d ( $ h o l d e r ) ) ) { $ h o l d e r . c l o s e s t ( ' f o r m ' ) . s u b m i t ( f u n c t i o n ( e ) { l a y o u t I n f o . h o l d e r ( ) . v a l ( l a y o u t I n f o . h o l d e r ( ) . c o d e ( ) ) ; b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' s u b m i t ' ) . c a l l ( t h i s , e , $ h o l d e r . c o d e ( ) ) ; } ) ; } 
 i f ( d o m . i s T e x t a r e a ( l i s t . h e a d ( $ h o l d e r ) ) & & o p t i o n s . t e x t a r e a A u t o S y n c ) { $ h o l d e r . o n ( ' s u m m e r n o t e . c h a n g e ' , f u n c t i o n ( ) { l a y o u t I n f o . h o l d e r ( ) . v a l ( l a y o u t I n f o . h o l d e r ( ) . c o d e ( ) ) ; } ) ; } 
 b i n d C u s t o m E v e n t ( $ h o l d e r , c a l l b a c k s , ' i n i t ' ) ( l a y o u t I n f o ) ; f o r ( v a r   i = 0 , l e n = $ . s u m m e r n o t e . p l u g i n s . l e n g t h ; i < l e n ; i + + ) { i f ( $ . i s F u n c t i o n ( $ . s u m m e r n o t e . p l u g i n s [ i ] . i n i t ) ) { $ . s u m m e r n o t e . p l u g i n s [ i ] . i n i t ( l a y o u t I n f o ) ; } } } ; t h i s . d e t a c h = f u n c t i o n ( l a y o u t I n f o , o p t i o n s ) { l a y o u t I n f o . h o l d e r ( ) . o f f ( ) ; l a y o u t I n f o . e d i t a b l e ( ) . o f f ( ) ; l a y o u t I n f o . p o p o v e r ( ) . o f f ( ) ; l a y o u t I n f o . h a n d l e ( ) . o f f ( ) ; l a y o u t I n f o . d i a l o g ( ) . o f f ( ) ; i f ( ! o p t i o n s . a i r M o d e ) { l a y o u t I n f o . d r o p z o n e ( ) . o f f ( ) ; l a y o u t I n f o . t o o l b a r ( ) . o f f ( ) ; l a y o u t I n f o . s t a t u s b a r ( ) . o f f ( ) ; } } ; } ; r e t u r n   E v e n t H a n d l e r ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / d e f a u l t s ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / d e f a u l t s . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( ' s u m m e r n o t e / d e f a u l t s ' , f u n c t i o n ( ) { v a r   d e f a u l t s = { v e r s i o n : ' @ V E R S I O N ' , o p t i o n s : { w i d t h : n u l l , h e i g h t : n u l l , m i n H e i g h t : n u l l , m a x H e i g h t : n u l l , f o c u s : f a l s e , t a b s i z e : 4 , s t y l e W i t h S p a n : t r u e , d i s a b l e L i n k T a r g e t : f a l s e , d i s a b l e D r a g A n d D r o p : f a l s e , d i s a b l e R e s i z e E d i t o r : f a l s e , d i s a b l e R e s i z e I m a g e : f a l s e , s h o r t c u t s : t r u e , t e x t a r e a A u t o S y n c : t r u e , p l a c e h o l d e r : f a l s e , p r e t t i f y H t m l : t r u e , i c o n P r e f i x : ' f a   f a - ' , i c o n s : { f o n t : { b o l d : ' b o l d ' , i t a l i c : ' i t a l i c ' , u n d e r l i n e : ' u n d e r l i n e ' , c l e a r : ' e r a s e r ' , h e i g h t : ' t e x t - h e i g h t ' , s t r i k e t h r o u g h : ' s t r i k e t h r o u g h ' , s u p e r s c r i p t : ' s u p e r s c r i p t ' , s u b s c r i p t : ' s u b s c r i p t ' } , i m a g e : { i m a g e : ' p i c t u r e - o ' , f l o a t L e f t : ' a l i g n - l e f t ' , f l o a t R i g h t : ' a l i g n - r i g h t ' , f l o a t N o n e : ' a l i g n - j u s t i f y ' , s h a p e R o u n d e d : ' s q u a r e ' , s h a p e C i r c l e : ' c i r c l e - o ' , s h a p e T h u m b n a i l : ' p i c t u r e - o ' , s h a p e N o n e : ' t i m e s ' , r e m o v e : ' t r a s h - o ' } , l i n k : { l i n k : ' l i n k ' , u n l i n k : ' u n l i n k ' , e d i t : ' e d i t ' } , t a b l e : { t a b l e : ' t a b l e ' } , h r : { i n s e r t : ' m i n u s ' } , s t y l e : { s t y l e : ' m a g i c ' } , l i s t s : { u n o r d e r e d : ' l i s t - u l ' , o r d e r e d : ' l i s t - o l ' } , o p t i o n s : { h e l p : ' q u e s t i o n ' , f u l l s c r e e n : ' a r r o w s - a l t ' , c o d e v i e w : ' c o d e ' } , p a r a g r a p h : { p a r a g r a p h : ' a l i g n - l e f t ' , o u t d e n t : ' o u t d e n t ' , i n d e n t : ' i n d e n t ' , l e f t : ' a l i g n - l e f t ' , c e n t e r : ' a l i g n - c e n t e r ' , r i g h t : ' a l i g n - r i g h t ' , j u s t i f y : ' a l i g n - j u s t i f y ' } , c o l o r : { r e c e n t : ' f o n t ' } , h i s t o r y : { u n d o : ' u n d o ' , r e d o : ' r e p e a t ' } , m i s c : { c h e c k : ' c h e c k ' } } , d i a l o g s I n B o d y : f a l s e , c o d e m i r r o r : { m o d e : ' t e x t / h t m l ' , h t m l M o d e : t r u e , l i n e N u m b e r s : t r u e } , l a n g : ' e n - U S ' , d i r e c t i o n : n u l l , t o o l b a r : [ [ ' s t y l e ' , [ ' s t y l e ' ] ] , [ ' f o n t ' , [ ' b o l d ' , ' i t a l i c ' , ' u n d e r l i n e ' , ' c l e a r ' ] ] , [ ' f o n t n a m e ' , [ ' f o n t n a m e ' ] ] , [ ' f o n t s i z e ' , [ ' f o n t s i z e ' ] ] , [ ' c o l o r ' , [ ' c o l o r ' ] ] , [ ' p a r a ' , [ ' u l ' , ' o l ' , ' p a r a g r a p h ' ] ] , [ ' h e i g h t ' , [ ' h e i g h t ' ] ] , [ ' t a b l e ' , [ ' t a b l e ' ] ] , [ ' i n s e r t ' , [ ' l i n k ' , ' p i c t u r e ' , ' h r ' ] ] , [ ' v i e w ' , [ ' f u l l s c r e e n ' , ' c o d e v i e w ' ] ] , [ ' h e l p ' , [ ' h e l p ' ] ] ] , p l u g i n : { } , a i r M o d e : f a l s e , a i r P o p o v e r : [ [ ' c o l o r ' , [ ' c o l o r ' ] ] , [ ' f o n t ' , [ ' b o l d ' , ' u n d e r l i n e ' , ' c l e a r ' ] ] , [ ' p a r a ' , [ ' u l ' , ' p a r a g r a p h ' ] ] , [ ' t a b l e ' , [ ' t a b l e ' ] ] , [ ' i n s e r t ' , [ ' l i n k ' , ' p i c t u r e ' ] ] ] , s t y l e T a g s : [ ' p ' , ' b l o c k q u o t e ' , ' p r e ' , ' h 1 ' , ' h 2 ' , ' h 3 ' , ' h 4 ' , ' h 5 ' , ' h 6 ' ] , d e f a u l t F o n t N a m e : ' H e l v e t i c a   N e u e ' , f o n t N a m e s : [ ' A r i a l ' , ' A r i a l   B l a c k ' , ' C o m i c   S a n s   M S ' , ' C o u r i e r   N e w ' , ' H e l v e t i c a   N e u e ' , ' H e l v e t i c a ' , ' I m p a c t ' , ' L u c i d a   G r a n d e ' , ' T a h o m a ' , ' T i m e s   N e w   R o m a n ' , ' V e r d a n a ' ] , f o n t N a m e s I g n o r e C h e c k : [ ] , f o n t S i z e s : [ ' 8 ' , ' 9 ' , ' 1 0 ' , ' 1 1 ' , ' 1 2 ' , ' 1 4 ' , ' 1 8 ' , ' 2 4 ' , ' 3 6 ' ] , c o l o r s : [ [ ' # 0 0 0 0 0 0 ' , ' # 4 2 4 2 4 2 ' , ' # 6 3 6 3 6 3 ' , ' # 9 C 9 C 9 4 ' , ' # C E C 6 C E ' , ' # E F E F E F ' , ' # F 7 F 7 F 7 ' , ' # F F F F F F ' ] , [ ' # F F 0 0 0 0 ' , ' # F F 9 C 0 0 ' , ' # F F F F 0 0 ' , ' # 0 0 F F 0 0 ' , ' # 0 0 F F F F ' , ' # 0 0 0 0 F F ' , ' # 9 C 0 0 F F ' , ' # F F 0 0 F F ' ] , [ ' # F 7 C 6 C E ' , ' # F F E 7 C E ' , ' # F F E F C 6 ' , ' # D 6 E F D 6 ' , ' # C E D E E 7 ' , ' # C E E 7 F 7 ' , ' # D 6 D 6 E 7 ' , ' # E 7 D 6 D E ' ] , [ ' # E 7 9 C 9 C ' , ' # F F C 6 9 C ' , ' # F F E 7 9 C ' , ' # B 5 D 6 A 5 ' , ' # A 5 C 6 C E ' , ' # 9 C C 6 E F ' , ' # B 5 A 5 D 6 ' , ' # D 6 A 5 B D ' ] , [ ' # E 7 6 3 6 3 ' , ' # F 7 A D 6 B ' , ' # F F D 6 6 3 ' , ' # 9 4 B D 7 B ' , ' # 7 3 A 5 A D ' , ' # 6 B A D D E ' , ' # 8 C 7 B C 6 ' , ' # C 6 7 B A 5 ' ] , [ ' # C E 0 0 0 0 ' , ' # E 7 9 4 3 9 ' , ' # E F C 6 3 1 ' , ' # 6 B A 5 4 A ' , ' # 4 A 7 B 8 C ' , ' # 3 9 8 4 C 6 ' , ' # 6 3 4 A A 5 ' , ' # A 5 4 A 7 B ' ] , [ ' # 9 C 0 0 0 0 ' , ' # B 5 6 3 0 8 ' , ' # B D 9 4 0 0 ' , ' # 3 9 7 B 2 1 ' , ' # 1 0 4 A 5 A ' , ' # 0 8 5 2 9 4 ' , ' # 3 1 1 8 7 3 ' , ' # 7 3 1 8 4 2 ' ] , [ ' # 6 3 0 0 0 0 ' , ' # 7 B 3 9 0 0 ' , ' # 8 4 6 3 0 0 ' , ' # 2 9 5 2 1 8 ' , ' # 0 8 3 1 3 9 ' , ' # 0 0 3 1 6 3 ' , ' # 2 1 1 0 4 A ' , ' # 4 A 1 0 3 1 ' ] ] , l i n e H e i g h t s : [ ' 1 . 0 ' , ' 1 . 2 ' , ' 1 . 4 ' , ' 1 . 5 ' , ' 1 . 6 ' , ' 1 . 8 ' , ' 2 . 0 ' , ' 3 . 0 ' ] , i n s e r t T a b l e M a x S i z e : { c o l : 1 0 , r o w : 1 0 } , m a x i m u m I m a g e F i l e S i z e : n u l l , o n i n i t : n u l l , o n f o c u s : n u l l , o n b l u r : n u l l , o n e n t e r : n u l l , o n k e y u p : n u l l , o n k e y d o w n : n u l l , o n I m a g e U p l o a d : n u l l , o n I m a g e U p l o a d E r r o r : n u l l , o n M e d i a D e l e t e : n u l l , o n T o o l b a r C l i c k : n u l l , o n s u b m i t : n u l l , o n C r e a t e L i n k : f u n c t i o n ( s L i n k U r l ) { i f ( s L i n k U r l . i n d e x O f ( ' @ ' ) ! = = - 1 & & s L i n k U r l . i n d e x O f ( ' : ' ) = = = - 1 ) { s L i n k U r l = ' m a i l t o : ' + s L i n k U r l ; } 
 r e t u r n   s L i n k U r l ; } , k e y M a p : { p c : { ' E N T E R ' : ' i n s e r t P a r a g r a p h ' , ' C T R L + Z ' : ' u n d o ' , ' C T R L + Y ' : ' r e d o ' , ' T A B ' : ' t a b ' , ' S H I F T + T A B ' : ' u n t a b ' , ' C T R L + B ' : ' b o l d ' , ' C T R L + I ' : ' i t a l i c ' , ' C T R L + U ' : ' u n d e r l i n e ' , ' C T R L + S H I F T + S ' : ' s t r i k e t h r o u g h ' , ' C T R L + B A C K S L A S H ' : ' r e m o v e F o r m a t ' , ' C T R L + S H I F T + L ' : ' j u s t i f y L e f t ' , ' C T R L + S H I F T + E ' : ' j u s t i f y C e n t e r ' , ' C T R L + S H I F T + R ' : ' j u s t i f y R i g h t ' , ' C T R L + S H I F T + J ' : ' j u s t i f y F u l l ' , ' C T R L + S H I F T + N U M 7 ' : ' i n s e r t U n o r d e r e d L i s t ' , ' C T R L + S H I F T + N U M 8 ' : ' i n s e r t O r d e r e d L i s t ' , ' C T R L + L E F T B R A C K E T ' : ' o u t d e n t ' , ' C T R L + R I G H T B R A C K E T ' : ' i n d e n t ' , ' C T R L + N U M 0 ' : ' f o r m a t P a r a ' , ' C T R L + N U M 1 ' : ' f o r m a t H 1 ' , ' C T R L + N U M 2 ' : ' f o r m a t H 2 ' , ' C T R L + N U M 3 ' : ' f o r m a t H 3 ' , ' C T R L + N U M 4 ' : ' f o r m a t H 4 ' , ' C T R L + N U M 5 ' : ' f o r m a t H 5 ' , ' C T R L + N U M 6 ' : ' f o r m a t H 6 ' , ' C T R L + E N T E R ' : ' i n s e r t H o r i z o n t a l R u l e ' , ' C T R L + K ' : ' s h o w L i n k D i a l o g ' } , m a c : { ' E N T E R ' : ' i n s e r t P a r a g r a p h ' , ' C M D + Z ' : ' u n d o ' , ' C M D + S H I F T + Z ' : ' r e d o ' , ' T A B ' : ' t a b ' , ' S H I F T + T A B ' : ' u n t a b ' , ' C M D + B ' : ' b o l d ' , ' C M D + I ' : ' i t a l i c ' , ' C M D + U ' : ' u n d e r l i n e ' , ' C M D + S H I F T + S ' : ' s t r i k e t h r o u g h ' , ' C M D + B A C K S L A S H ' : ' r e m o v e F o r m a t ' , ' C M D + S H I F T + L ' : ' j u s t i f y L e f t ' , ' C M D + S H I F T + E ' : ' j u s t i f y C e n t e r ' , ' C M D + S H I F T + R ' : ' j u s t i f y R i g h t ' , ' C M D + S H I F T + J ' : ' j u s t i f y F u l l ' , ' C M D + S H I F T + N U M 7 ' : ' i n s e r t U n o r d e r e d L i s t ' , ' C M D + S H I F T + N U M 8 ' : ' i n s e r t O r d e r e d L i s t ' , ' C M D + L E F T B R A C K E T ' : ' o u t d e n t ' , ' C M D + R I G H T B R A C K E T ' : ' i n d e n t ' , ' C M D + N U M 0 ' : ' f o r m a t P a r a ' , ' C M D + N U M 1 ' : ' f o r m a t H 1 ' , ' C M D + N U M 2 ' : ' f o r m a t H 2 ' , ' C M D + N U M 3 ' : ' f o r m a t H 3 ' , ' C M D + N U M 4 ' : ' f o r m a t H 4 ' , ' C M D + N U M 5 ' : ' f o r m a t H 5 ' , ' C M D + N U M 6 ' : ' f o r m a t H 6 ' , ' C M D + E N T E R ' : ' i n s e r t H o r i z o n t a l R u l e ' , ' C M D + K ' : ' s h o w L i n k D i a l o g ' } } } , l a n g : { ' e n - U S ' : { f o n t : { b o l d : ' B o l d ' , i t a l i c : ' I t a l i c ' , u n d e r l i n e : ' U n d e r l i n e ' , c l e a r : ' R e m o v e   F o n t   S t y l e ' , h e i g h t : ' L i n e   H e i g h t ' , n a m e : ' F o n t   F a m i l y ' , s t r i k e t h r o u g h : ' S t r i k e t h r o u g h ' , s u b s c r i p t : ' S u b s c r i p t ' , s u p e r s c r i p t : ' S u p e r s c r i p t ' , s i z e : ' F o n t   S i z e ' } , i m a g e : { i m a g e : ' P i c t u r e ' , i n s e r t : ' I n s e r t   I m a g e ' , r e s i z e F u l l : ' R e s i z e   F u l l ' , r e s i z e H a l f : ' R e s i z e   H a l f ' , r e s i z e Q u a r t e r : ' R e s i z e   Q u a r t e r ' , f l o a t L e f t : ' F l o a t   L e f t ' , f l o a t R i g h t : ' F l o a t   R i g h t ' , f l o a t N o n e : ' F l o a t   N o n e ' , s h a p e R o u n d e d : ' S h a p e :   R o u n d e d ' , s h a p e C i r c l e : ' S h a p e :   C i r c l e ' , s h a p e T h u m b n a i l : ' S h a p e :   T h u m b n a i l ' , s h a p e N o n e : ' S h a p e :   N o n e ' , d r a g I m a g e H e r e : ' D r a g   i m a g e   o r   t e x t   h e r e ' , d r o p I m a g e : ' D r o p   i m a g e   o r   T e x t ' , s e l e c t F r o m F i l e s : ' S e l e c t   f r o m   f i l e s ' , m a x i m u m F i l e S i z e : ' M a x i m u m   f i l e   s i z e ' , m a x i m u m F i l e S i z e E r r o r : ' M a x i m u m   f i l e   s i z e   e x c e e d e d . ' , u r l : ' I m a g e   U R L ' , r e m o v e : ' R e m o v e   I m a g e ' } , l i n k : { l i n k : ' L i n k ' , i n s e r t : ' I n s e r t   L i n k ' , u n l i n k : ' U n l i n k ' , e d i t : ' E d i t ' , t e x t T o D i s p l a y : ' T e x t   t o   d i s p l a y ' , u r l : ' T o   w h a t   U R L   s h o u l d   t h i s   l i n k   g o ? ' , o p e n I n N e w W i n d o w : ' O p e n   i n   n e w   w i n d o w ' } , t a b l e : { t a b l e : ' T a b l e ' } , h r : { i n s e r t : ' I n s e r t   H o r i z o n t a l   R u l e ' } , s t y l e : { s t y l e : ' S t y l e ' , n o r m a l : ' P a r a g r a p h ' , b l o c k q u o t e : ' Q u o t e ' , p r e : ' C o d e ' , h 1 : ' H e a d e r   1 ' , h 2 : ' H e a d e r   2 ' , h 3 : ' H e a d e r   3 ' , h 4 : ' H e a d e r   4 ' , h 5 : ' H e a d e r   5 ' , h 6 : ' H e a d e r   6 ' } , l i s t s : { u n o r d e r e d : ' U n o r d e r e d   l i s t ' , o r d e r e d : ' O r d e r e d   l i s t ' } , o p t i o n s : { h e l p : ' H e l p ' , f u l l s c r e e n : ' F u l l   S c r e e n ' , c o d e v i e w : ' C o d e   V i e w ' } , p a r a g r a p h : { p a r a g r a p h : ' P a r a g r a p h ' , o u t d e n t : ' O u t d e n t ' , i n d e n t : ' I n d e n t ' , l e f t : ' A l i g n   l e f t ' , c e n t e r : ' A l i g n   c e n t e r ' , r i g h t : ' A l i g n   r i g h t ' , j u s t i f y : ' J u s t i f y   f u l l ' } , c o l o r : { r e c e n t : ' R e c e n t   C o l o r ' , m o r e : ' M o r e   C o l o r ' , b a c k g r o u n d : ' B a c k g r o u n d   C o l o r ' , f o r e g r o u n d : ' F o r e g r o u n d   C o l o r ' , t r a n s p a r e n t : ' T r a n s p a r e n t ' , s e t T r a n s p a r e n t : ' S e t   t r a n s p a r e n t ' , r e s e t : ' R e s e t ' , r e s e t T o D e f a u l t : ' R e s e t   t o   d e f a u l t ' } , s h o r t c u t : { s h o r t c u t s : ' K e y b o a r d   s h o r t c u t s ' , c l o s e : ' C l o s e ' , t e x t F o r m a t t i n g : ' T e x t   f o r m a t t i n g ' , a c t i o n : ' A c t i o n ' , p a r a g r a p h F o r m a t t i n g : ' P a r a g r a p h   f o r m a t t i n g ' , d o c u m e n t S t y l e : ' D o c u m e n t   S t y l e ' , e x t r a K e y s : ' E x t r a   k e y s ' } , h i s t o r y : { u n d o : ' U n d o ' , r e d o : ' R e d o ' } } } } ; r e t u r n   d e f a u l t s ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . w e b s i t e _ n e x t _ d e f i n e = ' s u m m e r n o t e / s u m m e r n o t e ' ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / l i b / s u m m e r n o t e / s r c / j s / s u m m e r n o t e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 d e f i n e ( [ ' s u m m e r n o t e / c o r e / a g e n t ' , ' s u m m e r n o t e / c o r e / l i s t ' , ' s u m m e r n o t e / c o r e / d o m ' , ' s u m m e r n o t e / c o r e / r a n g e ' , ' s u m m e r n o t e / d e f a u l t s ' , ' s u m m e r n o t e / E v e n t H a n d l e r ' , ' s u m m e r n o t e / R e n d e r e r ' , ' s u m m e r n o t e / c o r e / k e y ' ] , f u n c t i o n ( a g e n t , l i s t , d o m , r a n g e , d e f a u l t s , E v e n t H a n d l e r , R e n d e r e r , k e y ) { $ . s u m m e r n o t e = $ . s u m m e r n o t e | | { } ; $ . e x t e n d ( $ . s u m m e r n o t e , d e f a u l t s ) ; v a r   r e n d e r e r = n e w   R e n d e r e r ( ) ; v a r   e v e n t H a n d l e r = n e w   E v e n t H a n d l e r ( ) ; $ . e x t e n d ( $ . s u m m e r n o t e , { r e n d e r e r : r e n d e r e r , e v e n t H a n d l e r : e v e n t H a n d l e r , c o r e : { a g e n t : a g e n t , l i s t : l i s t , d o m : d o m , r a n g e : r a n g e , k e y : k e y } , p l u g i n E v e n t s : { } , p l u g i n s : [ ] } ) ; $ . s u m m e r n o t e . a d d P l u g i n = f u n c t i o n ( p l u g i n ) { $ . s u m m e r n o t e . p l u g i n s . p u s h ( p l u g i n ) ; i f ( p l u g i n . b u t t o n s ) { $ . e a c h ( p l u g i n . b u t t o n s , f u n c t i o n ( n a m e , b u t t o n ) { r e n d e r e r . a d d B u t t o n I n f o ( n a m e , b u t t o n ) ; } ) ; } 
 i f ( p l u g i n . d i a l o g s ) { $ . e a c h ( p l u g i n . d i a l o g s , f u n c t i o n ( n a m e , d i a l o g ) { r e n d e r e r . a d d D i a l o g I n f o ( n a m e , d i a l o g ) ; } ) ; } 
 i f ( p l u g i n . e v e n t s ) { $ . e a c h ( p l u g i n . e v e n t s , f u n c t i o n ( n a m e , e v e n t ) { $ . s u m m e r n o t e . p l u g i n E v e n t s [ n a m e ] = e v e n t ; } ) ; } 
 i f ( p l u g i n . l a n g s ) { $ . e a c h ( p l u g i n . l a n g s , f u n c t i o n ( l o c a l e , l a n g ) { i f ( $ . s u m m e r n o t e . l a n g [ l o c a l e ] ) { $ . e x t e n d ( $ . s u m m e r n o t e . l a n g [ l o c a l e ] , l a n g ) ; } } ) ; } 
 i f ( p l u g i n . o p t i o n s ) { $ . e x t e n d ( $ . s u m m e r n o t e . o p t i o n s , p l u g i n . o p t i o n s ) ; } } ; $ . f n . e x t e n d ( { s u m m e r n o t e : f u n c t i o n ( ) { v a r   t y p e = $ . t y p e ( l i s t . h e a d ( a r g u m e n t s ) ) ; v a r   i s E x t e r n a l A P I C a l l e d = t y p e = = = ' s t r i n g ' ; v a r   h a s I n i t O p t i o n s = t y p e = = = ' o b j e c t ' ; v a r   o p t i o n s = h a s I n i t O p t i o n s ? l i s t . h e a d ( a r g u m e n t s ) : { } ; o p t i o n s = $ . e x t e n d ( { } , $ . s u m m e r n o t e . o p t i o n s , o p t i o n s ) ; o p t i o n s . i c o n s = $ . e x t e n d ( { } , $ . s u m m e r n o t e . o p t i o n s . i c o n s , o p t i o n s . i c o n s ) ; o p t i o n s . l a n g I n f o = $ . e x t e n d ( t r u e , { } , $ . s u m m e r n o t e . l a n g [ ' e n - U S ' ] , $ . s u m m e r n o t e . l a n g [ o p t i o n s . l a n g ] ) ; i f ( ! i s E x t e r n a l A P I C a l l e d & & h a s I n i t O p t i o n s ) { f o r ( v a r   i = 0 , l e n = $ . s u m m e r n o t e . p l u g i n s . l e n g t h ; i < l e n ; i + + ) { v a r   p l u g i n = $ . s u m m e r n o t e . p l u g i n s [ i ] ; i f ( o p t i o n s . p l u g i n [ p l u g i n . n a m e ] ) { $ . s u m m e r n o t e . p l u g i n s [ i ] = $ . e x t e n d ( t r u e , p l u g i n , o p t i o n s . p l u g i n [ p l u g i n . n a m e ] ) ; } } } 
 t h i s . e a c h ( f u n c t i o n ( i d x , h o l d e r ) { v a r   $ h o l d e r = $ ( h o l d e r ) ; i f ( ! r e n d e r e r . h a s N o t e E d i t o r ( $ h o l d e r ) ) { r e n d e r e r . c r e a t e L a y o u t ( $ h o l d e r , o p t i o n s ) ; v a r   l a y o u t I n f o = r e n d e r e r . l a y o u t I n f o F r o m H o l d e r ( $ h o l d e r ) ; $ h o l d e r . d a t a ( ' l a y o u t I n f o ' , l a y o u t I n f o ) ; e v e n t H a n d l e r . a t t a c h ( l a y o u t I n f o , o p t i o n s ) ; e v e n t H a n d l e r . a t t a c h C u s t o m E v e n t ( l a y o u t I n f o , o p t i o n s ) ; } } ) ; v a r   $ f i r s t = t h i s . f i r s t ( ) ; i f ( $ f i r s t . l e n g t h ) { v a r   l a y o u t I n f o = r e n d e r e r . l a y o u t I n f o F r o m H o l d e r ( $ f i r s t ) ; i f ( i s E x t e r n a l A P I C a l l e d ) { v a r   m o d u l e A n d M e t h o d = l i s t . h e a d ( l i s t . f r o m ( a r g u m e n t s ) ) ; v a r   a r g s = l i s t . t a i l ( l i s t . f r o m ( a r g u m e n t s ) ) ; v a r   p a r a m s = [ m o d u l e A n d M e t h o d , l a y o u t I n f o . e d i t a b l e ( ) ] . c o n c a t ( a r g s ) ; r e t u r n   e v e n t H a n d l e r . i n v o k e . a p p l y ( e v e n t H a n d l e r , p a r a m s ) ; } e l s e   i f ( o p t i o n s . f o c u s ) { l a y o u t I n f o . e d i t a b l e ( ) . f o c u s ( ) ; } } 
 r e t u r n   t h i s ; } , c o d e : f u n c t i o n ( h t m l ) { i f ( h t m l = = = u n d e f i n e d ) { v a r   $ h o l d e r = t h i s . f i r s t ( ) ; i f ( ! $ h o l d e r . l e n g t h ) { r e t u r n ; } 
 v a r   l a y o u t I n f o = r e n d e r e r . l a y o u t I n f o F r o m H o l d e r ( $ h o l d e r ) ; v a r   $ e d i t a b l e = l a y o u t I n f o & & l a y o u t I n f o . e d i t a b l e ( ) ; i f ( $ e d i t a b l e & & $ e d i t a b l e . l e n g t h ) { v a r   i s C o d e v i e w = e v e n t H a n d l e r . i n v o k e ( ' c o d e v i e w . i s A c t i v a t e d ' , l a y o u t I n f o ) ; e v e n t H a n d l e r . i n v o k e ( ' c o d e v i e w . s y n c ' , l a y o u t I n f o ) ; r e t u r n   i s C o d e v i e w ? l a y o u t I n f o . c o d a b l e ( ) . v a l ( ) : l a y o u t I n f o . e d i t a b l e ( ) . h t m l ( ) ; } 
 r e t u r n   d o m . v a l u e ( $ h o l d e r ) ; } 
 t h i s . e a c h ( f u n c t i o n ( i , h o l d e r ) { v a r   l a y o u t I n f o = r e n d e r e r . l a y o u t I n f o F r o m H o l d e r ( $ ( h o l d e r ) ) ; v a r   $ e d i t a b l e = l a y o u t I n f o & & l a y o u t I n f o . e d i t a b l e ( ) ; i f ( $ e d i t a b l e ) { $ e d i t a b l e . h t m l ( h t m l ) ; } } ) ; r e t u r n   t h i s ; } , d e s t r o y : f u n c t i o n ( ) { t h i s . e a c h ( f u n c t i o n ( i d x , h o l d e r ) { v a r   $ h o l d e r = $ ( h o l d e r ) ; i f ( ! r e n d e r e r . h a s N o t e E d i t o r ( $ h o l d e r ) ) { r e t u r n ; } 
 v a r   i n f o = r e n d e r e r . l a y o u t I n f o F r o m H o l d e r ( $ h o l d e r ) ; v a r   o p t i o n s = i n f o . e d i t o r ( ) . d a t a ( ' o p t i o n s ' ) ; e v e n t H a n d l e r . d e t a c h ( i n f o , o p t i o n s ) ; r e n d e r e r . r e m o v e L a y o u t ( $ h o l d e r , i n f o , o p t i o n s ) ; } ) ; r e t u r n   t h i s ; } } ) ; } ) ; ; 
 
 / *   / w e b _ e d i t o r / s t a t i c / s r c / j s / e d i t o r / s u m m e r n o t e . j s   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 o d o o . d e f i n e ( ' w e b _ e d i t o r . s u m m e r n o t e ' , f u n c t i o n ( r e q u i r e ) { ' u s e   s t r i c t ' ; v a r   c o r e = r e q u i r e ( ' w e b . c o r e ' ) ; r e q u i r e ( ' s u m m e r n o t e / s u m m e r n o t e ' ) ; v a r   w e D e f a u l t O p t i o n s = r e q u i r e ( ' w e b _ e d i t o r . w y s i w y g . d e f a u l t _ o p t i o n s ' ) ; v a r   _ t = c o r e . _ t ; v a r   d o m = $ . s u m m e r n o t e . c o r e . d o m ; v a r   r a n g e = $ . s u m m e r n o t e . c o r e . r a n g e ; v a r   l i s t = $ . s u m m e r n o t e . c o r e . l i s t ; v a r   k e y = $ . s u m m e r n o t e . c o r e . k e y ; v a r   e v e n t H a n d l e r = $ . s u m m e r n o t e . e v e n t H a n d l e r ; v a r   e d i t o r = e v e n t H a n d l e r . m o d u l e s . e d i t o r ; v a r   r e n d e r e r = $ . s u m m e r n o t e . r e n d e r e r ; v a r   o p t i o n s = $ . s u m m e r n o t e . o p t i o n s ; v a r   o l d J u s t i f y = { } ; _ . e a c h ( [ ' L e f t ' , ' R i g h t ' , ' F u l l ' , ' C e n t e r ' ] , f u n c t i o n ( a l i g n ) { o l d J u s t i f y [ a l i g n ] = e d i t o r [ ' j u s t i f y ' + a l i g n ] ; e d i t o r [ ' j u s t i f y ' + a l i g n ] = f u n c t i o n ( $ e d i t a b l e , v a l u e ) { v a r   $ a l i g n = $ e d i t a b l e . f i n d ( ' [ a l i g n ] ' ) ; _ . e a c h ( $ a l i g n , f u n c t i o n ( e l ) { v a r   $ e l = $ ( e l ) ; $ e l . d a t a ( ' _ _ a l i g n ' , $ e l . a t t r ( ' a l i g n ' ) ) ; } ) ; o l d J u s t i f y [ a l i g n ] . a p p l y ( t h i s , a r g u m e n t s ) ; v a r   $ n e w A l i g n = $ e d i t a b l e . f i n d ( ' [ a l i g n ] ' ) ; $ a l i g n . n o t ( $ n e w A l i g n ) . c s s ( ' t e x t - a l i g n ' , ' ' ) ; _ . e a c h ( $ n e w A l i g n , f u n c t i o n ( e l ) { v a r   $ e l = $ ( e l ) ; v a r   o l d A l i g n V a l u e = $ a l i g n . d a t a ( ' _ _ a l i g n ' ) ; v a r   a l i g n V a l u e = $ e l . a t t r ( ' a l i g n ' ) ; i f ( o l d A l i g n V a l u e = = = a l i g n V a l u e ) { r e t u r n ; } 
 $ e l . r e m o v e A t t r ( ' a l i g n ' ) ; $ e l . c s s ( ' t e x t - a l i g n ' , a l i g n V a l u e ) ; $ e l . f i n d ( ' * ' ) . c s s ( ' t e x t - a l i g n ' , ' ' ) ; } ) ; $ a l i g n . r e m o v e D a t a ( ' _ _ a l i g n ' ) ; } ; } ) ; d o m . h a s C o n t e n t A f t e r = f u n c t i o n ( n o d e ) { v a r   n e x t ; i f ( d o m . i s E d i t a b l e ( n o d e ) ) r e t u r n ; w h i l e ( n o d e . n e x t S i b l i n g ) { n e x t = n o d e . n e x t S i b l i n g ; i f ( n e x t . t a g N a m e | | d o m . i s V i s i b l e T e x t ( n e x t ) | | d o m . i s B R ( n e x t ) ) r e t u r n   n e x t ; n o d e = n e x t ; } } ; d o m . h a s C o n t e n t B e f o r e = f u n c t i o n ( n o d e ) { v a r   p r e v ; i f ( d o m . i s E d i t a b l e ( n o d e ) ) r e t u r n ; w h i l e ( n o d e . p r e v i o u s S i b l i n g ) { p r e v = n o d e . p r e v i o u s S i b l i n g ; i f ( p r e v . t a g N a m e | | d o m . i s V i s i b l e T e x t ( p r e v ) | | d o m . i s B R ( p r e v ) ) r e t u r n   p r e v ; n o d e = p r e v ; } } ; d o m . a n c e s t o r H a v e N e x t S i b l i n g = f u n c t i o n ( n o d e , p r e d ) { p r e d = p r e d | | d o m . h a s C o n t e n t A f t e r ; w h i l e ( ! d o m . i s E d i t a b l e ( n o d e ) & & ( ! n o d e . n e x t S i b l i n g | | ! p r e d ( n o d e ) ) ) { n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   n o d e ; } ; d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g = f u n c t i o n ( n o d e , p r e d ) { p r e d = p r e d | | d o m . h a s C o n t e n t B e f o r e ; w h i l e ( ! d o m . i s E d i t a b l e ( n o d e ) & & ( ! n o d e . p r e v i o u s S i b l i n g | | ! p r e d ( n o d e ) ) ) { n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   n o d e ; } ; d o m . n e x t E l e m e n t S i b l i n g = f u n c t i o n ( n o d e ) { w h i l e ( n o d e ) { n o d e = n o d e . n e x t S i b l i n g ; i f ( n o d e & & n o d e . t a g N a m e ) { b r e a k ; } } 
 r e t u r n   n o d e ; } ; d o m . p r e v i o u s E l e m e n t S i b l i n g = f u n c t i o n ( n o d e ) { w h i l e ( n o d e ) { n o d e = n o d e . p r e v i o u s S i b l i n g ; i f ( n o d e & & n o d e . t a g N a m e ) { b r e a k ; } } 
 r e t u r n   n o d e ; } ; d o m . l a s t C h i l d = f u n c t i o n ( n o d e ) { w h i l e ( n o d e . l a s t C h i l d ) { n o d e = n o d e . l a s t C h i l d ; } 
 r e t u r n   n o d e ; } ; d o m . f i r s t C h i l d = f u n c t i o n ( n o d e ) { w h i l e ( n o d e . f i r s t C h i l d ) { n o d e = n o d e . f i r s t C h i l d ; } 
 r e t u r n   n o d e ; } ; d o m . l a s t E l e m e n t C h i l d = f u n c t i o n ( n o d e , d e e p ) { n o d e = d e e p ? d o m . l a s t C h i l d ( n o d e ) : n o d e . l a s t C h i l d ; r e t u r n ! n o d e | | n o d e . t a g N a m e ? n o d e : d o m . p r e v i o u s E l e m e n t S i b l i n g ( n o d e ) ; } ; d o m . f i r s t E l e m e n t C h i l d = f u n c t i o n ( n o d e , d e e p ) { n o d e = d e e p ? d o m . f i r s t C h i l d ( n o d e ) : n o d e . f i r s t C h i l d ; r e t u r n ! n o d e | | n o d e . t a g N a m e ? n o d e : d o m . n e x t E l e m e n t S i b l i n g ( n o d e ) ; } ; d o m . i s E q u a l = f u n c t i o n ( p r e v , c u r ) { i f ( p r e v . t a g N a m e ! = = c u r . t a g N a m e ) { r e t u r n   f a l s e ; } 
 i f ( ( p r e v . a t t r i b u t e s ? p r e v . a t t r i b u t e s . l e n g t h : 0 ) ! = = ( c u r . a t t r i b u t e s ? c u r . a t t r i b u t e s . l e n g t h : 0 ) ) { r e t u r n   f a l s e ; } 
 f u n c t i o n   s t r i p ( t e x t ) { r e t u r n   t e x t & & t e x t . r e p l a c e ( / ^ \ s + | \ s + $ / g , ' ' ) . r e p l a c e ( / \ s + / g , '   ' ) ; } 
 v a r   a t t , a t t 2 ; l o o p _ p r e v : f o r ( v a r   a   i n   p r e v . a t t r i b u t e s ) { a t t = p r e v . a t t r i b u t e s [ a ] ; f o r ( v a r   b   i n   c u r . a t t r i b u t e s ) { a t t 2 = c u r . a t t r i b u t e s [ b ] ; i f ( a t t . n a m e = = = a t t 2 . n a m e ) { i f ( s t r i p ( a t t . v a l u e ) ! = = s t r i p ( a t t 2 . v a l u e ) ) r e t u r n   f a l s e ; c o n t i n u e   l o o p _ p r e v ; } } 
 r e t u r n   f a l s e ; } 
 r e t u r n   t r u e ; } ; d o m . h a s O n l y S t y l e = f u n c t i o n ( n o d e ) { f o r ( v a r   i = 0 ; i < n o d e . a t t r i b u t e s . l e n g t h ; i + + ) { v a r   a t t r = n o d e . a t t r i b u t e s [ i ] ; i f ( a t t r . a t t r i b u t e N a m e ! = = ' s t y l e ' ) { r e t u r n   f a l s e ; } } 
 r e t u r n   t r u e ; } ; d o m . h a s P r o g r a m m a t i c S t y l e = f u n c t i o n ( n o d e ) { v a r   s t y l e s = [ " f l o a t " , " d i s p l a y " , " p o s i t i o n " , " t o p " , " l e f t " , " r i g h t " , " b o t t o m " ] ; f o r ( v a r   i = 0 ; i < n o d e . s t y l e . l e n g t h ; i + + ) { v a r   s t y l e = n o d e . s t y l e [ i ] ; i f ( s t y l e s . i n d e x O f ( s t y l e ) ! = = - 1 ) { r e t u r n   t r u e ; } } 
 r e t u r n   f a l s e ; } ; d o m . m e r g e F i l t e r = f u n c t i o n ( p r e v , c u r , p a r e n t ) { i f ( p r e v & & ( d o m . i s T e x t ( p r e v ) | | ( [ ' H 1 ' , ' H 2 ' , ' H 3 ' , ' H 4 ' , ' H 5 ' , ' H 6 ' , ' L I ' , ' P ' ] . i n d e x O f ( p r e v . t a g N a m e ) ! = = - 1 & & p r e v ! = = c u r . p a r e n t N o d e ) ) & & d o m . i s T e x t ( c u r ) ) { r e t u r n   t r u e ; } 
 i f ( p r e v & & p r e v . t a g N a m e = = = " P " & & d o m . i s T e x t ( c u r ) ) { r e t u r n   t r u e ; } 
 i f ( p r e v & & d o m . i s T e x t ( c u r ) & & ! d o m . i s V i s i b l e T e x t ( c u r ) & & ( d o m . i s T e x t ( p r e v ) | | d o m . i s V i s i b l e T e x t ( p r e v ) ) ) { r e t u r n   t r u e ; } 
 i f ( p r e v & & ! d o m . i s B R ( p r e v ) & & d o m . i s E q u a l ( p r e v , c u r ) & & ( ( p r e v . t a g N a m e & & d o m . g e t C o m p u t e d S t y l e ( p r e v ) . d i s p l a y = = = " i n l i n e " & & c u r . t a g N a m e & & d o m . g e t C o m p u t e d S t y l e ( c u r ) . d i s p l a y = = = " i n l i n e " ) ) ) { r e t u r n   t r u e ; } 
 i f ( d o m . i s E q u a l ( p a r e n t , c u r ) & & ( ( p a r e n t . t a g N a m e & & d o m . g e t C o m p u t e d S t y l e ( p a r e n t ) . d i s p l a y = = = " i n l i n e " & & c u r . t a g N a m e & & d o m . g e t C o m p u t e d S t y l e ( c u r ) . d i s p l a y = = = " i n l i n e " ) ) ) { r e t u r n   t r u e ; } 
 i f ( p a r e n t & & c u r . t a g N a m e = = = " F O N T " & & ( ! c u r . f i r s t C h i l d | | ( ! c u r . a t t r i b u t e s . g e t N a m e d I t e m ( ' s t y l e ' ) & & ! c u r . c l a s s N a m e . l e n g t h ) ) ) { r e t u r n   t r u e ; } 
 i f ( p a r e n t & & c u r . t a g N a m e = = = " S P A N " & & d o m . h a s O n l y S t y l e ( c u r ) & & ! d o m . h a s P r o g r a m m a t i c S t y l e ( c u r ) ) { r e t u r n   t r u e ; } } ; d o m . d o M e r g e = f u n c t i o n ( p r e v , c u r ) { i f ( p r e v . t a g N a m e ) { i f ( p r e v . c h i l d N o d e s . l e n g t h & & ! p r e v . t e x t C o n t e n t . m a t c h ( / \ S / ) & & d o m . f i r s t E l e m e n t C h i l d ( p r e v ) & & d o m . i s B R ( d o m . f i r s t E l e m e n t C h i l d ( p r e v ) ) ) { p r e v . r e m o v e C h i l d ( d o m . f i r s t E l e m e n t C h i l d ( p r e v ) ) ; } 
 i f ( c u r . t a g N a m e ) { w h i l e ( c u r . f i r s t C h i l d ) { p r e v . a p p e n d C h i l d ( c u r . f i r s t C h i l d ) ; } 
 c u r . p a r e n t N o d e . r e m o v e C h i l d ( c u r ) ; } e l s e { p r e v . a p p e n d C h i l d ( c u r ) ; } } e l s e { i f ( c u r . t a g N a m e ) { v a r   d e e p = c u r ; w h i l e ( d e e p . t a g N a m e & & d e e p . f i r s t C h i l d ) { d e e p = d e e p . f i r s t C h i l d ; } 
 p r e v . a p p e n d D a t a ( d e e p . t e x t C o n t e n t ) ; c u r . p a r e n t N o d e . r e m o v e C h i l d ( c u r ) ; } e l s e { p r e v . a p p e n d D a t a ( c u r . t e x t C o n t e n t ) ; c u r . p a r e n t N o d e . r e m o v e C h i l d ( c u r ) ; } } } ; d o m . m e r g e = f u n c t i o n ( n o d e , b e g i n , s o , e n d , e o , m e r g e F i l t e r , a l l ) { m e r g e F i l t e r = m e r g e F i l t e r | | d o m . m e r g e F i l t e r ; v a r   _ m e r g e d = f a l s e ; v a r   a d d = a l l | | f a l s e ; i f ( ! b e g i n ) { b e g i n = n o d e ; w h i l e ( b e g i n . f i r s t C h i l d ) { b e g i n = b e g i n . f i r s t C h i l d ; } 
 s o = 0 ; } e l s e   i f ( b e g i n . t a g N a m e & & b e g i n . c h i l d N o d e s [ s o ] ) { b e g i n = b e g i n . c h i l d N o d e s [ s o ] ; s o = 0 ; } 
 i f ( ! e n d ) { e n d = n o d e ; w h i l e ( e n d . l a s t C h i l d ) { e n d = e n d . l a s t C h i l d ; } 
 e o = e n d . t e x t C o n t e n t . l e n g t h - 1 ; } e l s e   i f ( e n d . t a g N a m e & & e n d . c h i l d N o d e s [ s o ] ) { e n d = e n d . c h i l d N o d e s [ s o ] ; s o = 0 ; } 
 b e g i n = d o m . f i r s t C h i l d ( b e g i n ) ; i f ( d o m . i s T e x t ( b e g i n ) & & s o > b e g i n . t e x t C o n t e n t . l e n g t h ) { s o = 0 ; } 
 e n d = d o m . f i r s t C h i l d ( e n d ) ; i f ( d o m . i s T e x t ( e n d ) & & e o > e n d . t e x t C o n t e n t . l e n g t h ) { e o = 0 ; } 
 f u n c t i o n   _ _ m e r g e ( n o d e ) { v a r   m e r g e d = f a l s e ; v a r   p r e v ; f o r ( v a r   k = 0 ; k < n o d e . c h i l d N o d e s . l e n g t h ; k + + ) { v a r   c u r = n o d e . c h i l d N o d e s [ k ] ; i f ( c u r = = = b e g i n ) { i f ( ! a l l ) a d d = t r u e ; } 
 _ _ m e r g e ( c u r ) ; d o m . o r d e r C l a s s ( d o m . n o d e ( c u r ) ) ; i f ( ! a d d | | ! c u r ) c o n t i n u e ; i f ( c u r = = = e n d ) { i f ( ! a l l ) a d d = f a l s e ; } 
 i f ( ! p r e v ) { i f ( m e r g e F i l t e r . c a l l ( d o m , p r e v , c u r , n o d e ) ) { p r e v = p r e v | | c u r . p r e v i o u s S i b l i n g ; d o m . m o v e T o ( c u r , c u r . p a r e n t N o d e , c u r ) ; k - - ; } e l s e { p r e v = c u r ; } 
 c o n t i n u e ; } e l s e   i f ( m e r g e F i l t e r . c a l l ( d o m , n u l l , c u r , n o d e ) ) { p r e v = p r e v | | c u r . p r e v i o u s S i b l i n g ; d o m . m o v e T o ( c u r , c u r . p a r e n t N o d e , c u r ) ; k - - ; c o n t i n u e ; } 
 i f ( m e r g e F i l t e r . c a l l ( d o m , p r e v , c u r , n o d e ) ) { v a r   p = p r e v ; v a r   c = c u r ; i f ( p r e v . t a g N a m e ) { i f ( c u r . t a g N a m e ) { i f ( c u r = = = b e g i n ) b e g i n = p r e v ; i f ( c u r = = = e n d ) e n d = p r e v ; } } e l s e { i f ( c u r . t a g N a m e ) { v a r   d e e p = c u r ; w h i l e ( d e e p . t a g N a m e & & d e e p . l a s t C h i l d ) { d e e p = d e e p . l a s t C h i l d ; } 
 i f ( d e e p = = = b e g i n ) { s o + = p r e v . t e x t C o n t e n t . l e n g t h ; b e g i n = p r e v ; } 
 i f ( d e e p = = = e n d ) { e o + = p r e v . t e x t C o n t e n t . l e n g t h ; e n d = p r e v ; } } e l s e { i f ( c u r = = = b e g i n ) { s o + = p r e v . t e x t C o n t e n t . l e n g t h ; b e g i n = p r e v ; } 
 i f ( c u r = = = e n d ) { e o + = p r e v . t e x t C o n t e n t . l e n g t h ; e n d = p r e v ; } } } 
 d o m . d o M e r g e ( p , c ) ; m e r g e d = t r u e ; k - - ; c o n t i n u e ; } 
 p r e v = c u r ; } 
 i f ( m e r g e d ) { _ m e r g e d = t r u e ; _ _ m e r g e ( n o d e ) ; } } 
 i f ( n o d e ) { _ _ m e r g e ( n o d e ) ; } 
 r e t u r n { m e r g e d : _ m e r g e d , s c : b e g i n , e c : e n d , s o : s o , e o : e o } ; } ; d o m . a u t o M e r g e = f u n c t i o n ( t a r g e t , p r e v i o u s ) { v a r   n o d e = d o m . l a s t C h i l d ( t a r g e t ) ; v a r   n o d e s = [ ] ; v a r   t e m p ; w h i l e ( n o d e ) { n o d e s . p u s h ( n o d e ) ; t e m p = ( p r e v i o u s ? d o m . h a s C o n t e n t B e f o r e ( n o d e ) : d o m . h a s C o n t e n t A f t e r ( n o d e ) ) ; i f ( t e m p ) { i f ( ! d o m . i s T e x t ( n o d e ) & & ! d o m . i s M e r g a b l e ( n o d e ) & & t e m p . t a g N a m e ! = = n o d e . t a g N a m e ) { n o d e s = [ ] ; } 
 b r e a k ; } 
 n o d e = n o d e . p a r e n t N o d e ; } 
 w h i l e ( n o d e s . l e n g t h ) { n o d e = n o d e s . p o p ( ) ; i f ( n o d e & & ( t e m p = ( p r e v i o u s ? d o m . h a s C o n t e n t B e f o r e ( n o d e ) : d o m . h a s C o n t e n t A f t e r ( n o d e ) ) ) & & t e m p . t a g N a m e = = = n o d e . t a g N a m e & & ! d o m . i s T e x t ( n o d e ) & & d o m . i s M e r g a b l e ( n o d e ) & & ! d o m . i s N o t B r e a k a b l e ( n o d e ) & & ! d o m . i s N o t B r e a k a b l e ( p r e v i o u s ? d o m . p r e v i o u s E l e m e n t S i b l i n g ( n o d e ) : d o m . n e x t E l e m e n t S i b l i n g ( n o d e ) ) ) { i f ( p r e v i o u s ) { d o m . d o M e r g e ( t e m p , n o d e ) ; } e l s e { d o m . d o M e r g e ( n o d e , t e m p ) ; } } } } ; d o m . r e m o v e S p a c e = f u n c t i o n ( n o d e , b e g i n , s o , e n d , e o ) { v a r   r e m o v e d = f a l s e ; v a r   a d d = n o d e = = = b e g i n ; i f ( n o d e = = = b e g i n & & b e g i n = = = e n d & & d o m . i s B R ( n o d e ) ) { r e t u r n { r e m o v e d : r e m o v e d , s c : b e g i n , e c : e n d , s o : s o , e o : e o } ; } 
 ( f u n c t i o n   _ _ r e m o v e _ s p a c e ( n o d e ) { i f ( ! n o d e ) r e t u r n ; v a r   t _ b e g i n , t _ e n d ; f o r ( v a r   k = 0 ; k < n o d e . c h i l d N o d e s . l e n g t h ; k + + ) { v a r   c u r = n o d e . c h i l d N o d e s [ k ] ; i f ( c u r = = = b e g i n ) a d d = t r u e ; i f ( c u r . t a g N a m e & & c u r . t a g N a m e ! = = " S C R I P T " & & c u r . t a g N a m e ! = = " S T Y L E " & & d o m . g e t C o m p u t e d S t y l e ( c u r ) . w h i t e S p a c e ! = = " p r e " ) { _ _ r e m o v e _ s p a c e ( c u r ) ; } 
 i f ( ! a d d ) c o n t i n u e ; i f ( c u r = = = e n d ) a d d = f a l s e ; i f ( n o d e . c h i l d N o d e s . l e n g t h > 1 & & d o m . i s T e x t ( c u r ) & & ! d o m . i s V i s i b l e T e x t ( c u r ) ) { r e m o v e d = t r u e ; i f ( c u r = = = b e g i n ) { t _ b e g i n = d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( c u r ) ) ; i f ( t _ b e g i n ) { s o = 0 ; b e g i n = d o m . l a s t C h i l d ( t _ b e g i n ) ; } } 
 i f ( c u r = = = e n d ) { t _ e n d = d o m . h a s C o n t e n t A f t e r ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( c u r ) ) ; i f ( t _ e n d ) { e o = 1 ; e n d = d o m . f i r s t C h i l d ( t _ e n d ) ; i f ( d o m . i s T e x t ( e n d ) ) { e o = e n d . t e x t C o n t e n t . l e n g t h ; } } } 
 c u r . p a r e n t N o d e . r e m o v e C h i l d ( c u r ) ; b e g i n = d o m . l a s t C h i l d ( b e g i n ) ; e n d = d o m . l a s t C h i l d ( e n d ) ; k - - ; c o n t i n u e ; } 
 i f ( d o m . i s T e x t ( c u r ) ) { v a r   t e x t ; v a r   t e m p ; v a r   _ t e m p ; v a r   e x p 1 = / [ \ t \ n \ r   ] + / g ; v a r   e x p 2 = / ( ? ! ( [   ] | \ u 0 0 A 0 ) | ^ ) \ u 0 0 A 0 ( ? ! ( [   ] | \ u 0 0 A 0 ) | $ ) / g ; i f ( c u r = = = b e g i n ) { t e m p = c u r . t e x t C o n t e n t . s u b s t r ( 0 , s o ) ; _ t e m p = t e m p . r e p l a c e ( e x p 1 , '   ' ) . r e p l a c e ( e x p 2 , '   ' ) ; s o - = t e m p . l e n g t h - _ t e m p . l e n g t h ; } 
 i f ( c u r = = = e n d ) { t e m p = c u r . t e x t C o n t e n t . s u b s t r ( 0 , e o ) ; _ t e m p = t e m p . r e p l a c e ( e x p 1 , '   ' ) . r e p l a c e ( e x p 2 , '   ' ) ; e o - = t e m p . l e n g t h - _ t e m p . l e n g t h ; } 
 t e x t = c u r . t e x t C o n t e n t . r e p l a c e ( e x p 1 , '   ' ) . r e p l a c e ( e x p 2 , '   ' ) ; r e m o v e d = r e m o v e d | | c u r . t e x t C o n t e n t . l e n g t h ! = = t e x t . l e n g t h ; c u r . t e x t C o n t e n t = t e x t ; } } } ) ( n o d e ) ; r e t u r n { r e m o v e d : r e m o v e d , s c : b e g i n , e c : e n d , s o : ! d o m . i s B R ( b e g i n ) & & s o > 0 ? s o : 0 , e o : d o m . i s B R ( e n d ) ? 0 : e o } ; } ; d o m . r e m o v e B e t w e e n = f u n c t i o n ( s c , s o , e c , e o , t o w r i t e ) { v a r   t e x t ; i f ( e c . t a g N a m e ) { i f ( e c . c h i l d N o d e s [ e o ] ) { e c = e c . c h i l d N o d e s [ e o ] ; e o = 0 ; } e l s e { e c = d o m . l a s t C h i l d ( e c ) ; e o = d o m . n o d e L e n g t h ( e c ) ; } } 
 i f ( s c . t a g N a m e ) { s c = s c . c h i l d N o d e s [ s o ] | | d o m . f i r s t C h i l d ( e c ) ; s o = 0 ; i f ( ! d o m . h a s C o n t e n t B e f o r e ( s c ) & & t o w r i t e ) { s c . p a r e n t N o d e . i n s e r t B e f o r e ( d o c u m e n t . c r e a t e T e x t N o d e ( ' \ u 0 0 A 0 ' ) , s c ) ; } } 
 i f ( ! e o & & s c ! = = e c ) { e c = d o m . l a s t C h i l d ( d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( e c ) ) | | e c ) ; e o = e c . t e x t C o n t e n t . l e n g t h ; } 
 v a r   a n c e s t o r = d o m . c o m m o n A n c e s t o r ( s c . t a g N a m e ? s c . p a r e n t N o d e : s c , e c . t a g N a m e ? e c . p a r e n t N o d e : e c ) | | d o m . a n c e s t o r ( s c , d o m . i s E d i t a b l e ) ; i f ( ! d o m . i s C o n t e n t E d i t a b l e ( a n c e s t o r ) ) { r e t u r n { s c : s c , s o : s o , e c : s c , e o : e o } ; } 
 i f ( a n c e s t o r . t a g N a m e ) { v a r   a n c e s t o r _ s c = s c ; v a r   a n c e s t o r _ e c = e c ; w h i l e ( a n c e s t o r ! = = a n c e s t o r _ s c & & a n c e s t o r ! = = a n c e s t o r _ s c . p a r e n t N o d e ) { a n c e s t o r _ s c = a n c e s t o r _ s c . p a r e n t N o d e ; } 
 w h i l e ( a n c e s t o r ! = = a n c e s t o r _ e c & & a n c e s t o r ! = = a n c e s t o r _ e c . p a r e n t N o d e ) { a n c e s t o r _ e c = a n c e s t o r _ e c . p a r e n t N o d e ; } 
 v a r   n o d e = d o m . n o d e ( s c ) ; i f ( ! d o m . i s N o t B r e a k a b l e ( n o d e ) & & ! d o m . i s V o i d ( s c ) ) { s c = d o m . s p l i t T r e e ( a n c e s t o r _ s c , { ' n o d e ' : s c , ' o f f s e t ' : s o } ) ; } 
 v a r   b e f o r e = d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( s c ) ) ; v a r   a f t e r ; i f ( e c . t e x t C o n t e n t . s l i c e ( e o , I n f i n i t y ) . m a t c h ( / \ S | \ u 0 0 A 0 / ) ) { a f t e r = d o m . s p l i t T r e e ( a n c e s t o r _ e c , { ' n o d e ' : e c , ' o f f s e t ' : e o } ) ; } e l s e { a f t e r = d o m . h a s C o n t e n t A f t e r ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( e c ) ) ; } 
 v a r   n o d e s = d o m . l i s t B e t w e e n ( s c , e c ) ; v a r   a n c e s t o r _ f i r s t _ l a s t = f u n c t i o n ( n o d e ) { r e t u r n   n o d e = = = b e f o r e | | n o d e = = = a f t e r ; } ; f o r ( v a r   i = 0 ; i < n o d e s . l e n g t h ; i + + ) { i f ( ! d o m . a n c e s t o r ( n o d e s [ i ] , a n c e s t o r _ f i r s t _ l a s t ) & & ! $ . c o n t a i n s ( n o d e s [ i ] , b e f o r e ) & & ! $ . c o n t a i n s ( n o d e s [ i ] , a f t e r ) & & ! d o m . i s E d i t a b l e ( n o d e s [ i ] ) ) { n o d e s [ i ] . p a r e n t N o d e . r e m o v e C h i l d ( n o d e s [ i ] ) ; } } 
 i f ( d o m . l i s t A n c e s t o r ( a f t e r ) . l e n g t h < = d o m . l i s t A n c e s t o r ( b e f o r e ) . l e n g t h ) { s c = d o m . l a s t C h i l d ( b e f o r e | | a n c e s t o r ) ; s o = d o m . n o d e L e n g t h ( s c ) ; } e l s e { s c = d o m . f i r s t C h i l d ( a f t e r ) ; s o = 0 ; } 
 i f ( d o m . i s V o i d ( n o d e ) ) { } e l s e   i f ( t o w r i t e & & ! n o d e . f i r s t C h i l d & & n o d e . p a r e n t N o d e & & ! d o m . i s N o t B r e a k a b l e ( n o d e ) ) { v a r   b r = $ ( " < b r / > " ) [ 0 ] ; n o d e . a p p e n d C h i l d ( s c ) ; s c = b r ; s o = 0 ; } e l s e   i f ( ! a n c e s t o r . c h i l d r e n . l e n g t h & & ! a n c e s t o r . t e x t C o n t e n t . m a t c h ( / \ S | \ u 0 0 A 0 / ) ) { s c = $ ( " < b r / > " ) [ 0 ] ; s o = 0 ; $ ( a n c e s t o r ) . p r e p e n d ( s c ) ; } e l s e   i f ( d o m . i s T e x t ( s c ) ) { t e x t = s c . t e x t C o n t e n t . r e p l a c e ( / [   \ t \ n \ r ] + $ / , ' \ u 0 0 A 0 ' ) ; s o = M a t h . m i n ( s o , t e x t . l e n g t h ) ; s c . t e x t C o n t e n t = t e x t ; } } e l s e { t e x t = a n c e s t o r . t e x t C o n t e n t ; a n c e s t o r . t e x t C o n t e n t = t e x t . s l i c e ( 0 , s o ) + t e x t . s l i c e ( e o , I n f i n i t y ) . r e p l a c e ( / ^ [   \ t \ n \ r ] + / , ' \ u 0 0 A 0 ' ) ; } 
 e o = s o ; i f ( ! d o m . i s B R ( s c ) & & ! d o m . i s V i s i b l e T e x t ( s c ) & & ! d o m . i s T e x t ( d o m . h a s C o n t e n t B e f o r e ( s c ) ) & & ! d o m . i s T e x t ( d o m . h a s C o n t e n t A f t e r ( s c ) ) ) { a n c e s t o r = d o m . n o d e ( s c ) ; t e x t = d o c u m e n t . c r e a t e T e x t N o d e ( ' \ u 0 0 A 0 ' ) ; $ ( s c ) . b e f o r e ( t e x t ) ; s c = t e x t ; s o = 0 ; e o = 1 ; } 
 v a r   p a r e n t N o d e = s c & & s c . p a r e n t N o d e ; i f ( p a r e n t N o d e & & s c . t a g N a m e = = = ' B R ' ) { s c = p a r e n t N o d e ; e c = p a r e n t N o d e ; } 
 r e t u r n { s c : s c , s o : s o , e c : s c , e o : e o } ; } ; d o m . i n d e n t = f u n c t i o n ( n o d e ) { v a r   s t y l e = d o m . i s C e l l ( n o d e ) ? ' p a d d i n g L e f t ' : ' m a r g i n L e f t ' ; v a r   m a r g i n = p a r s e F l o a t ( n o d e . s t y l e [ s t y l e ] | | 0 ) + 1 . 5 ; n o d e . s t y l e [ s t y l e ] = m a r g i n + " e m " ; r e t u r n   m a r g i n ; } ; d o m . o u t d e n t = f u n c t i o n ( n o d e ) { v a r   s t y l e = d o m . i s C e l l ( n o d e ) ? ' p a d d i n g L e f t ' : ' m a r g i n L e f t ' ; v a r   m a r g i n = p a r s e F l o a t ( n o d e . s t y l e [ s t y l e ] | | 0 ) - 1 . 5 ; n o d e . s t y l e [ s t y l e ] = m a r g i n > 0 ? m a r g i n + " e m " : " " ; r e t u r n   m a r g i n ; } ; d o m . s c r o l l I n t o V i e w I f N e e d e d = f u n c t i o n ( n o d e ) { n o d e = d o m . n o d e ( n o d e ) ; v a r   $ s p a n ; i f ( d o m . i s B R ( n o d e ) ) { $ s p a n = $ ( ' < s p a n / > ' ) . t e x t ( ' \ u 0 0 A 0 ' ) ; $ ( n o d e ) . a f t e r ( $ s p a n ) ; n o d e = $ s p a n [ 0 ] ; } 
 i f ( n o d e . s c r o l l I n t o V i e w I f N e e d e d ) { n o d e . s c r o l l I n t o V i e w I f N e e d e d ( f a l s e ) ; } e l s e { v a r   o f f s e t P a r e n t = n o d e . o f f s e t P a r e n t ; w h i l e ( o f f s e t P a r e n t ) { v a r   e l Y = 0 ; v a r   e l H = n o d e . o f f s e t H e i g h t ; v a r   p a r e n t = n o d e ; w h i l e ( o f f s e t P a r e n t & & p a r e n t ) { e l Y + = n o d e . o f f s e t T o p ; p a r e n t = n o d e . p a r e n t N o d e ; w h i l e ( p a r e n t ! = = o f f s e t P a r e n t & & ( p a r e n t . t a g N a m e = = = " B O D Y " | | [ " a u t o " , " s c r o l l " ] . i n d e x O f ( d o m . g e t C o m p u t e d S t y l e ( p a r e n t ) . o v e r f l o w Y ) = = = - 1 ) ) { p a r e n t = p a r e n t . p a r e n t N o d e ; } 
 n o d e = p a r e n t ; i f ( p a r e n t ! = = o f f s e t P a r e n t ) { e l Y - = p a r e n t . o f f s e t T o p ; p a r e n t = n u l l ; } 
 o f f s e t P a r e n t = n o d e . o f f s e t P a r e n t ; } 
 i f ( ( n o d e . t a g N a m e = = = " B O D Y " | | [ " a u t o " , " s c r o l l " ] . i n d e x O f ( d o m . g e t C o m p u t e d S t y l e ( n o d e ) . o v e r f l o w Y ) ! = = - 1 ) & & ( n o d e . s c r o l l T o p + n o d e . c l i e n t H e i g h t ) < ( e l Y + e l H ) ) { n o d e . s c r o l l T o p = ( e l Y + e l H ) - n o d e . c l i e n t H e i g h t ; } } } 
 i f ( $ s p a n ) { $ s p a n . r e m o v e ( ) ; } 
 r e t u r n ; } ; d o m . m o v e T o = f u n c t i o n ( n o d e , t a r g e t , b e f o r e ) { v a r   n o d e s = [ ] ; w h i l e ( n o d e . f i r s t C h i l d ) { n o d e s . p u s h ( n o d e . f i r s t C h i l d ) ; i f ( b e f o r e ) { t a r g e t . i n s e r t B e f o r e ( n o d e . f i r s t C h i l d , b e f o r e ) ; } e l s e { t a r g e t . a p p e n d C h i l d ( n o d e . f i r s t C h i l d ) ; } } 
 n o d e . p a r e n t N o d e . r e m o v e C h i l d ( n o d e ) ; r e t u r n   n o d e s ; } ; d o m . i s M e r g a b l e = f u n c t i o n ( n o d e ) { r e t u r n   n o d e . t a g N a m e & & " h 1   h 2   h 3   h 4   h 5   h 6   p   b   b o l d   i   u   c o d e   s u p   s t r o n g   s m a l l   l i   a   u l   o l   f o n t " . i n d e x O f ( n o d e . t a g N a m e . t o L o w e r C a s e ( ) ) ! = = - 1 ; } ; d o m . i s S p l i t a b l e = f u n c t i o n ( n o d e ) { r e t u r n   n o d e . t a g N a m e & & " h 1   h 2   h 3   h 4   h 5   h 6   p   b   b o l d   i   u   c o d e   s u p   s t r o n g   s m a l l   l i   a   f o n t " . i n d e x O f ( n o d e . t a g N a m e . t o L o w e r C a s e ( ) ) ! = = - 1 ; } ; d o m . i s R e m o v a b l e E m p t y N o d e = f u n c t i o n ( n o d e ) { r e t u r n " h 1   h 2   h 3   h 4   h 5   h 6   p   b   b o l d   i   u   c o d e   s u p   s t r o n g   s m a l l   l i   a   u l   o l   f o n t   s p a n   b r " . i n d e x O f ( n o d e . t a g N a m e . t o L o w e r C a s e ( ) ) ! = = - 1 ; } ; d o m . i s F o r b i d d e n N o d e = f u n c t i o n ( n o d e ) { r e t u r n   n o d e . t a g N a m e = = = " B R " | | $ ( n o d e ) . i s ( " . f a ,   i m g " ) ; } ; d o m . l i s t B e t w e e n = f u n c t i o n ( s c , e c , s o , e o ) { v a r   n o d e s = [ ] ; v a r   a n c e s t o r = d o m . c o m m o n A n c e s t o r ( s c , e c ) ; d o m . w a l k P o i n t ( { ' n o d e ' : s c , ' o f f s e t ' : s o | | 0 } , { ' n o d e ' : e c , ' o f f s e t ' : e o | | 0 } , f u n c t i o n ( p o i n t ) { i f ( a n c e s t o r ! = = p o i n t . n o d e | | a n c e s t o r = = = s c | | a n c e s t o r = = = e c ) { n o d e s . p u s h ( p o i n t . n o d e ) ; } } ) ; r e t u r n   l i s t . u n i q u e ( n o d e s ) ; } ; d o m . i s N o t B r e a k a b l e = f u n c t i o n ( n o d e ) { r e t u r n ! d o m . i s T e x t ( n o d e ) & & ! d o m . i s B R ( d o m . f i r s t C h i l d ( n o d e ) ) & & d o m . i s V o i d ( d o m . f i r s t C h i l d ( n o d e ) ) ; } ; d o m . i s C o n t e n t E d i t a b l e = f u n c t i o n ( n o d e ) { r e t u r n   $ ( n o d e ) . c l o s e s t ( ' [ c o n t e n t e d i t a b l e ] ' ) . p r o p ( ' c o n t e n t e d i t a b l e ' ) = = = ' t r u e ' ; } ; d o m . i s C o n t e n t E d i t a b l e F a l s e = f u n c t i o n ( n o d e ) { r e t u r n   $ ( n o d e ) . c l o s e s t ( ' [ c o n t e n t e d i t a b l e ] ' ) . p r o p ( ' c o n t e n t e d i t a b l e ' ) = = = ' f a l s e ' ; } ; d o m . i s F o n t = f u n c t i o n ( n o d e ) { v a r   n o d e N a m e = n o d e & & n o d e . n o d e N a m e . t o U p p e r C a s e ( ) ; r e t u r n   n o d e & & ( n o d e N a m e = = = " F O N T " | | ( n o d e N a m e = = = " S P A N " & & ( n o d e . c l a s s N a m e . m a t c h ( / ( ^ | \ s ) f a ( \ s | $ ) / i ) | | n o d e . c l a s s N a m e . m a t c h ( / ( ^ | \ s ) ( t e x t | b g ) - / i ) | | ( n o d e . a t t r i b u t e s . s t y l e & & n o d e . a t t r i b u t e s . s t y l e . v a l u e . m a t c h ( / ( ^ | \ s ) ( c o l o r | b a c k g r o u n d - c o l o r | f o n t - s i z e ) : / i ) ) ) ) ) ; } ; d o m . i s V i s i b l e T e x t = f u n c t i o n ( t e x t N o d e ) { r e t u r n ! ! t e x t N o d e . t e x t C o n t e n t . m a t c h ( / \ S | \ u 0 0 A 0 / ) ; } ; v a r   o l d _ i s V i s i b l e P o i n t = d o m . i s V i s i b l e P o i n t ; d o m . i s V i s i b l e P o i n t = f u n c t i o n ( p o i n t ) { r e t u r n   p o i n t . n o d e . n o d e T y p e ! = = 8 & & o l d _ i s V i s i b l e P o i n t . a p p l y ( t h i s , a r g u m e n t s ) ; } ; d o m . o r d e r S t y l e = f u n c t i o n ( n o d e ) { v a r   s t y l e = n o d e . g e t A t t r i b u t e ( ' s t y l e ' ) ; i f ( ! s t y l e ) r e t u r n   n u l l ; s t y l e = s t y l e . r e p l a c e ( / [ \ s \ n \ r ] + / , '   ' ) . r e p l a c e ( / ^   ? ; ?   ? |   ? ; ?   ? $ / g , ' ' ) . r e p l a c e ( /   ? ;   ? / g , ' ; ' ) ; i f ( ! s t y l e . l e n g t h ) { n o d e . r e m o v e A t t r i b u t e ( " s t y l e " ) ; r e t u r n   n u l l ; } 
 s t y l e = s t y l e . s p l i t ( " ; " ) ; s t y l e . s o r t ( ) ; s t y l e = s t y l e . j o i n ( " ;   " ) + " ; " ; n o d e . s e t A t t r i b u t e ( ' s t y l e ' , s t y l e ) ; r e t u r n   s t y l e ; } ; d o m . o r d e r C l a s s = f u n c t i o n ( n o d e ) { v a r   c l a s s N a m e = n o d e . g e t A t t r i b u t e & & n o d e . g e t A t t r i b u t e ( ' c l a s s ' ) ; i f ( ! c l a s s N a m e ) r e t u r n   n u l l ; c l a s s N a m e = c l a s s N a m e . r e p l a c e ( / [ \ s \ n \ r ] + / , '   ' ) . r e p l a c e ( / ^   |   $ / g , ' ' ) . r e p l a c e ( /   + / g , '   ' ) ; i f ( ! c l a s s N a m e . l e n g t h ) { n o d e . r e m o v e A t t r i b u t e ( " c l a s s " ) ; r e t u r n   n u l l ; } 
 c l a s s N a m e = c l a s s N a m e . s p l i t ( "   " ) ; c l a s s N a m e . s o r t ( ) ; c l a s s N a m e = c l a s s N a m e . j o i n ( "   " ) ; n o d e . s e t A t t r i b u t e ( ' c l a s s ' , c l a s s N a m e ) ; r e t u r n   c l a s s N a m e ; } ; d o m . n o d e = f u n c t i o n ( n o d e ) { r e t u r n   d o m . i s T e x t ( n o d e ) ? n o d e . p a r e n t N o d e : n o d e ; } ; d o m . m o v e C o n t e n t = f u n c t i o n ( f r o m , t o ) { i f ( f r o m = = = t o ) { r e t u r n ; } 
 i f ( f r o m . p a r e n t N o d e = = = t o ) { w h i l e ( f r o m . l a s t C h i l d ) { d o m . i n s e r t A f t e r ( f r o m . l a s t C h i l d , f r o m ) ; } } e l s e { w h i l e ( f r o m . f i r s t C h i l d & & f r o m . f i r s t C h i l d ! = = t o ) { t o . a p p e n d C h i l d ( f r o m . f i r s t C h i l d ) ; } } } ; d o m . g e t C o m p u t e d S t y l e = f u n c t i o n ( n o d e ) { r e t u r n   n o d e . n o d e T y p e = = = N o d e . C O M M E N T _ N O D E ? { } : w i n d o w . g e t C o m p u t e d S t y l e ( n o d e ) ; } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . r e R a n g e = f u n c t i o n ( k e e p _ e n d , i s N o t B r e a k a b l e ) { v a r   s c = t h i s . s c ; v a r   s o = t h i s . s o ; v a r   e c = t h i s . e c ; v a r   e o = t h i s . e o ; i s N o t B r e a k a b l e = i s N o t B r e a k a b l e | | d o m . i s N o t B r e a k a b l e ; v a r   s t a r t = k e e p _ e n d ? e c : s c ; w h i l e ( s t a r t ) { i f ( i s N o t B r e a k a b l e ( s t a r t , s c , s o , e c , e o ) ) { b r e a k ; } 
 s t a r t = s t a r t . p a r e n t N o d e ; } 
 v a r   l a s t F i l t e r E n d ; v a r   e n d = k e e p _ e n d ? s c : e c ; w h i l e ( e n d ) { i f ( s t a r t = = = e n d ) { b r e a k ; } 
 i f ( i s N o t B r e a k a b l e ( e n d , s c , s o , e c , e o ) ) { l a s t F i l t e r E n d = e n d ; } 
 e n d = e n d . p a r e n t N o d e ; } 
 i f ( l a s t F i l t e r E n d ) { e n d = l a s t F i l t e r E n d ; } 
 i f ( ! e n d ) { e n d = d o c u m e n t . g e t E l e m e n t s B y T a g N a m e ( ' b o d y ' ) [ 0 ] ; } 
 i f ( s t a r t = = = e n d | | ! s t a r t ) { r e t u r n   t h i s ; } 
 i f ( $ . c o n t a i n s ( s t a r t , e n d ) ) { i f ( k e e p _ e n d ) { s c = d o m . l a s t C h i l d ( d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( e n d ) ) | | s c ) ; s o = s c . t e x t C o n t e n t . l e n g t h ; } e l s e   i f ( ! e o ) { e c = d o m . l a s t C h i l d ( d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( e n d ) ) | | e c ) ; e o = e c . t e x t C o n t e n t . l e n g t h ; } e l s e { e c = d o m . f i r s t C h i l d ( d o m . h a s C o n t e n t A f t e r ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( e n d ) ) | | e c ) ; e o = 0 ; } } e l s e { i f ( k e e p _ e n d ) { s c = d o m . f i r s t C h i l d ( s t a r t ) ; s o = 0 ; } e l s e { e c = d o m . l a s t C h i l d ( s t a r t ) ; e o = e c . t e x t C o n t e n t . l e n g t h ; } } 
 r e t u r n   n e w   r a n g e . W r a p p e d R a n g e ( s c , s o , e c , e o ) ; } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . i s O n I m g = f u n c t i o n ( ) { i f ( t h i s . s c = = = t h i s . e c & & t h i s . s o = = = t h i s . e o ) { r e t u r n   d o m . a n c e s t o r ( t h i s . s c , d o m . i s I m g ) ; } 
 v a r   s t a r t P o i n t = { n o d e : t h i s . s c , o f f s e t : t h i s . s o } ; v a r   e n d P o i n t = { n o d e : t h i s . e c , o f f s e t : t h i s . e o } ; v a r   n b = 0 ; v a r   i m a g e ; v a r   t e x t N o d e ; d o m . w a l k P o i n t ( s t a r t P o i n t , e n d P o i n t , f u n c t i o n ( p o i n t ) { i f ( d o m . h a s C h i l d r e n ( p o i n t . n o d e ) ) { r e t u r n ; } 
 v a r   p o i n t I m g = d o m . a n c e s t o r ( p o i n t . n o d e , d o m . i s I m g ) ; v a r   i s T e x t = d o m . i s T e x t ( p o i n t . n o d e ) ; i f ( p o i n t I m g ? ( i m a g e ! = = p o i n t I m g ) : ( ( ! d o m . i s B R ( p o i n t . n o d e ) & & ! i s T e x t ) | | ( t e x t N o d e = = = p o i n t . n o d e & & p o i n t . n o d e . t e x t C o n t e n t . m a t c h ( / \ S | \ u 0 0 A 0 / ) ) ) ) { n b + + ; } 
 i f ( p o i n t I m g ) { i m a g e = p o i n t I m g ; } 
 i f ( i s T e x t ) { t e x t N o d e = p o i n t . n o d e ; } } ) ; r e t u r n   n b = = = 1 & & i m a g e ; } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . d e l e t e C o n t e n t s = f u n c t i o n ( t o w r i t e ) { i f ( t h i s . s c = = = t h i s . e c & & t h i s . s o = = = t h i s . e o ) { r e t u r n   t h i s ; } 
 v a r   r ; v a r   i m a g e = t h i s . i s O n I m g ( ) ; i f ( i m a g e ) { v a r   p a r e n t N o d e = i m a g e . p a r e n t N o d e ; v a r   i n d e x = _ . i n d e x O f ( p a r e n t N o d e . c h i l d N o d e s , i m a g e ) ; p a r e n t N o d e . r e m o v e C h i l d ( i m a g e ) ; r = n e w   r a n g e . W r a p p e d R a n g e ( p a r e n t N o d e , i n d e x , p a r e n t N o d e , i n d e x ) ; } e l s e { r = d o m . r e m o v e B e t w e e n ( t h i s . s c , t h i s . s o , t h i s . e c , t h i s . e o , t o w r i t e ) ; } 
 $ ( d o m . n o d e ( r . s c ) ) . t r i g g e r ( " c l i c k " ) ; r e t u r n   n e w   r a n g e . W r a p p e d R a n g e ( r . s c , r . s o , r . e c , r . e o ) ; } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . c l e a n = f u n c t i o n ( m e r g e F i l t e r , a l l ) { v a r   n o d e = d o m . n o d e ( t h i s . s c = = = t h i s . e c ? t h i s . s c : t h i s . c o m m o n A n c e s t o r ( ) ) ; n o d e = n o d e | | $ ( t h i s . s c ) . c l o s e s t ( ' [ c o n t e n t e d i t a b l e ] ' ) [ 0 ] ; i f ( n o d e . c h i l d N o d e s . l e n g t h < = 1 ) { r e t u r n   t h i s ; } 
 v a r   m e r g e = d o m . m e r g e ( n o d e , t h i s . s c , t h i s . s o , t h i s . e c , t h i s . e o , m e r g e F i l t e r , a l l ) ; v a r   r e m = d o m . r e m o v e S p a c e ( n o d e . p a r e n t N o d e , m e r g e . s c , m e r g e . s o , m e r g e . e c , m e r g e . e o ) ; i f ( m e r g e . m e r g e d | | r e m . r e m o v e d ) { r e t u r n   r a n g e . c r e a t e ( r e m . s c , r e m . s o , r e m . e c , r e m . e o ) ; } 
 r e t u r n   t h i s ; } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . r e m o v e = f u n c t i o n ( m e r g e F i l t e r ) { } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . i s O n C e l l F i r s t = f u n c t i o n ( ) { v a r   n o d e = d o m . a n c e s t o r ( t h i s . s c , f u n c t i o n ( n o d e ) { r e t u r n [ " L I " , " D I V " , " T D " , " T H " ] . i n d e x O f ( n o d e . t a g N a m e ) ! = = - 1 ; } ) ; r e t u r n   n o d e & & [ " T D " , " T H " ] . i n d e x O f ( n o d e . t a g N a m e ) ! = = - 1 ; } ; r a n g e . W r a p p e d R a n g e . p r o t o t y p e . i s C o n t e n t E d i t a b l e = f u n c t i o n ( ) { r e t u r n   d o m . i s C o n t e n t E d i t a b l e ( t h i s . s c ) & & ( t h i s . s c = = = t h i s . e c | | d o m . i s C o n t e n t E d i t a b l e ( t h i s . e c ) ) ; } ; r e n d e r e r . t p l B u t t o n I n f o . f o n t s i z e = f u n c t i o n ( l a n g , o p t i o n s ) { v a r   i t e m s = o p t i o n s . f o n t S i z e s . r e d u c e ( f u n c t i o n ( m e m o , v ) { r e t u r n   m e m o + ' < a   d a t a - e v e n t = " f o n t S i z e "   h r e f = " # "   c l a s s = " d r o p d o w n - i t e m "   d a t a - v a l u e = " ' + v + ' " > ' + ' < i   c l a s s = " f a   f a - c h e c k " > < / i >   ' + v + ' < / a > ' ; } , ' ' ) ; v a r   s L a b e l = ' < s p a n   c l a s s = " n o t e - c u r r e n t - f o n t s i z e " > 1 1 < / s p a n > ' ; r e t u r n   r e n d e r e r . g e t T e m p l a t e ( ) . b u t t o n ( s L a b e l , { t i t l e : l a n g . f o n t . s i z e , d r o p d o w n : ' < d i v   c l a s s = " d r o p d o w n - m e n u " > ' + i t e m s + ' < / d i v > ' } ) ; } ; r e n d e r e r . t p l B u t t o n I n f o . c o l o r = f u n c t i o n ( l a n g , o p t i o n s ) { v a r   f o r e C o l o r B u t t o n L a b e l = ' < i   c l a s s = " ' + o p t i o n s . i c o n P r e f i x + o p t i o n s . i c o n s . c o l o r . r e c e n t + ' " > < / i > ' ; v a r   b a c k C o l o r B u t t o n L a b e l = ' < i   c l a s s = " ' + o p t i o n s . i c o n P r e f i x + ' p a i n t - b r u s h " > < / i > ' ; v a r   r e c e n t C o l o r B u t t o n = r e n d e r e r . g e t T e m p l a t e ( ) . b u t t o n ( f o r e C o l o r B u t t o n L a b e l , { c l a s s N a m e : ' n o t e - r e c e n t - c o l o r   d - n o n e ' , t i t l e : l a n g . c o l o r . f o r e g r o u n d , e v e n t : ' c o l o r ' , v a l u e : ' { " b a c k C o l o r " : " # B 3 5 E 9 B " } ' } ) ; v a r   f o r e C o l o r B u t t o n = r e n d e r e r . g e t T e m p l a t e ( ) . b u t t o n ( f o r e C o l o r B u t t o n L a b e l , { c l a s s N a m e : ' n o t e - f o r e - c o l o r - p r e v i e w ' , t i t l e : l a n g . c o l o r . f o r e g r o u n d , d r o p d o w n : r e n d e r e r . g e t T e m p l a t e ( ) . d r o p d o w n ( ' < l i > < d i v   d a t a - e v e n t - n a m e = " f o r e C o l o r "   c l a s s = " c o l o r P a l e t t e " / > < / l i > ' ) , } ) ; v a r   b a c k C o l o r B u t t o n = r e n d e r e r . g e t T e m p l a t e ( ) . b u t t o n ( b a c k C o l o r B u t t o n L a b e l , { c l a s s N a m e : ' n o t e - b a c k - c o l o r - p r e v i e w ' , t i t l e : l a n g . c o l o r . b a c k g r o u n d , d r o p d o w n : r e n d e r e r . g e t T e m p l a t e ( ) . d r o p d o w n ( ' < l i > < d i v   d a t a - e v e n t - n a m e = " b a c k C o l o r "   c l a s s = " c o l o r P a l e t t e " / > < / l i > ' ) , } ) ; r e t u r n   r e c e n t C o l o r B u t t o n + f o r e C o l o r B u t t o n + b a c k C o l o r B u t t o n ; } ; r e n d e r e r . t p l B u t t o n I n f o . c h e c k l i s t = f u n c t i o n ( l a n g , o p t i o n s ) { r e t u r n ' < b u t t o n   ' + ' t y p e = " b u t t o n "   ' + ' c l a s s = " b t n   b t n - s e c o n d a r y   b t n - s m "   ' + ' t i t l e = " ' + _ t ( ' C h e c k l i s t ' ) + ' "   ' + ' d a t a - e v e n t = " i n s e r t C h e c k L i s t "   ' + ' t a b i n d e x = " - 1 "   ' + ' d a t a - n a m e = " u l "   ' + ' > < i   c l a s s = " f a   f a - c h e c k - s q u a r e " > < / i > < / b u t t o n > ' ; } ; k e y . n a m e F r o m C o d e [ 4 6 ] = ' D E L E T E ' ; k e y . n a m e F r o m C o d e [ 2 7 ] = ' E S C A P E ' ; o p t i o n s . k e y M a p . p c [ ' B A C K S P A C E ' ] = ' b a c k s p a c e ' ; o p t i o n s . k e y M a p . p c [ ' D E L E T E ' ] = ' d e l e t e ' ; o p t i o n s . k e y M a p . p c [ ' E N T E R ' ] = ' e n t e r ' ; o p t i o n s . k e y M a p . p c [ ' E S C A P E ' ] = ' c a n c e l ' ; o p t i o n s . k e y M a p . m a c [ ' S H I F T + T A B ' ] = ' u n t a b ' ; o p t i o n s . k e y M a p . p c [ ' U P ' ] = ' u p ' ; o p t i o n s . k e y M a p . p c [ ' D O W N ' ] = ' d o w n ' ; o p t i o n s . k e y M a p . m a c [ ' B A C K S P A C E ' ] = ' b a c k s p a c e ' ; o p t i o n s . k e y M a p . m a c [ ' D E L E T E ' ] = ' d e l e t e ' ; o p t i o n s . k e y M a p . m a c [ ' E N T E R ' ] = ' e n t e r ' ; o p t i o n s . k e y M a p . m a c [ ' E S C A P E ' ] = ' c a n c e l ' ; o p t i o n s . k e y M a p . m a c [ ' U P ' ] = ' u p ' ; o p t i o n s . k e y M a p . m a c [ ' D O W N ' ] = ' d o w n ' ; o p t i o n s . s t y l e T a g s = w e D e f a u l t O p t i o n s . s t y l e T a g s ; $ . s u m m e r n o t e . p l u g i n E v e n t s . i n s e r t T a b l e = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , s D i m ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . f o c u s ( ) ; v a r   d i m e n s i o n = s D i m . s p l i t ( ' x ' ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; r = r . d e l e t e C o n t e n t s ( t r u e ) ; v a r   t a b l e = e d i t o r . t a b l e . c r e a t e T a b l e ( d i m e n s i o n [ 0 ] , d i m e n s i o n [ 1 ] ) ; v a r   p a r e n t = r . s c ; w h i l e ( d o m . i s T e x t ( p a r e n t . p a r e n t N o d e ) | | d o m . i s R e m o v a b l e E m p t y N o d e ( p a r e n t . p a r e n t N o d e ) ) { p a r e n t = p a r e n t . p a r e n t N o d e ; } 
 v a r   n o d e = d o m . s p l i t T r e e ( p a r e n t , { ' n o d e ' : r . s c , ' o f f s e t ' : r . s o } ) | | r . s c ; n o d e . p a r e n t N o d e . i n s e r t B e f o r e ( t a b l e , n o d e ) ; i f ( $ ( n o d e ) . t e x t ( ) = = = ' ' | | n o d e . t e x t C o n t e n t = = = ' \ u 0 0 A 0 ' ) { n o d e . p a r e n t N o d e . r e m o v e C h i l d ( n o d e ) ; } 
 e d i t o r . a f t e r C o m m a n d ( $ e d i t a b l e ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . t a b = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , o u t d e n t ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e , ' t a b ' ) ; v a r   r = r a n g e . c r e a t e ( ) ; o u t d e n t = o u t d e n t | | f a l s e ; e v e n t . p r e v e n t D e f a u l t ( ) ; i f ( r & & ( d o m . a n c e s t o r ( r . s c , d o m . i s C e l l ) | | d o m . a n c e s t o r ( r . e c , d o m . i s C e l l ) ) ) { i f ( r . i s C o l l a p s e d ( ) & & r . i s O n C e l l ( ) & & r . i s O n C e l l F i r s t ( ) ) { v a r   t d = d o m . a n c e s t o r ( r . s c , d o m . i s C e l l ) ; i f ( ! o u t d e n t & & ! d o m . n e x t E l e m e n t S i b l i n g ( t d ) & & ! d o m . n e x t E l e m e n t S i b l i n g ( t d . p a r e n t N o d e ) ) { v a r   l a s t = d o m . l a s t C h i l d ( t d ) ; r a n g e . c r e a t e ( l a s t , d o m . n o d e L e n g t h ( l a s t ) , l a s t , d o m . n o d e L e n g t h ( l a s t ) ) . s e l e c t ( ) ; $ . s u m m e r n o t e . p l u g i n E v e n t s . e n t e r ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } e l s e   i f ( o u t d e n t & & ! d o m . p r e v i o u s E l e m e n t S i b l i n g ( t d ) & & ! $ ( t d . p a r e n t N o d e ) . t e x t ( ) . m a t c h ( / \ S / ) ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . b a c k s p a c e ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } e l s e { e d i t o r . t a b l e . t a b ( r , o u t d e n t ) ; } } e l s e { $ . s u m m e r n o t e . p l u g i n E v e n t s . i n d e n t ( e v e n t , e d i t o r , l a y o u t I n f o , o u t d e n t ) ; } } e l s e   i f ( r & & r . i s C o l l a p s e d ( ) ) { i f ( ! r . s c . t e x t C o n t e n t . s l i c e ( 0 , r . s o ) . m a t c h ( / \ S / ) & & r . i s O n L i s t ( ) ) { i f ( o u t d e n t ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . o u t d e n t ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } e l s e { $ . s u m m e r n o t e . p l u g i n E v e n t s . i n d e n t ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } } e l s e { v a r   n e x t ; i f ( ! o u t d e n t ) { i f ( d o m . i s T e x t ( r . s c ) ) { n e x t = r . s c . s p l i t T e x t ( r . s o ) ; } e l s e { n e x t = d o c u m e n t . c r e a t e T e x t N o d e ( ' ' ) ; $ ( r . s c . c h i l d N o d e s [ r . s o ] ) . b e f o r e ( n e x t ) ; } 
 e d i t o r . t y p i n g . i n s e r t T a b ( $ e d i t a b l e , r , o p t i o n s . t a b s i z e ) ; r = r a n g e . c r e a t e ( n e x t , 0 , n e x t , 0 ) ; r = d o m . m e r g e ( r . s c . p a r e n t N o d e , r . s c , r . s o , r . e c , r . e o , n u l l , t r u e ) ; r a n g e . c r e a t e ( r . s c , r . s o , r . e c , r . e o ) . s e l e c t ( ) ; } e l s e { r = d o m . m e r g e ( r . s c . p a r e n t N o d e , r . s c , r . s o , r . e c , r . e o , n u l l , t r u e ) ; r = r a n g e . c r e a t e ( r . s c , r . s o , r . e c , r . e o ) ; i f ( r . s c . s p l i t T e x t ) { n e x t = r . s c . s p l i t T e x t ( r . s o ) ; r . s c . t e x t C o n t e n t = r . s c . t e x t C o n t e n t . r e p l a c e ( / ( \ u 0 0 A 0 ) + $ / g , ' ' ) ; n e x t . t e x t C o n t e n t = n e x t . t e x t C o n t e n t . r e p l a c e ( / ^ ( \ u 0 0 A 0 ) + / g , ' ' ) ; r a n g e . c r e a t e ( r . s c , r . s c . t e x t C o n t e n t . l e n g t h , r . s c , r . s c . t e x t C o n t e n t . l e n g t h ) . s e l e c t ( ) ; } } } } 
 r e t u r n   f a l s e ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . u n t a b = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { r e t u r n   $ . s u m m e r n o t e . p l u g i n E v e n t s . t a b ( e v e n t , e d i t o r , l a y o u t I n f o , t r u e ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . u p = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { v a r   r = r a n g e . c r e a t e ( ) ; v a r   n o d e = d o m . f i r s t C h i l d ( r . s c . c h i l d N o d e s [ r . s o ] | | r . s c ) ; i f ( ! r . i s O n C e l l ( ) ) { r e t u r n ; } 
 v a r   a n c e s t o r = d o m . a n c e s t o r ( n o d e , f u n c t i o n ( a n c e s t o r N o d e ) { r e t u r n   d o m . h a s C o n t e n t B e f o r e ( a n c e s t o r N o d e ) | | d o m . i s C e l l ( a n c e s t o r N o d e ) ; } ) ; i f ( ! d o m . i s C e l l ( a n c e s t o r ) & & ( ! d o m . i s B R ( d o m . h a s C o n t e n t B e f o r e ( a n c e s t o r ) ) | | ! d o m . i s T e x t ( n o d e ) | | d o m . i s V i s i b l e T e x t ( n o d e ) | | d o m . h a s C o n t e n t B e f o r e ( d o m . h a s C o n t e n t B e f o r e ( a n c e s t o r ) ) ) ) { r e t u r n ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; v a r   t d = d o m . a n c e s t o r ( r . s c , d o m . i s C e l l ) ; v a r   t r = t d . p a r e n t N o d e ; v a r   t a r g e t = t r . p r e v i o u s E l e m e n t S i b l i n g & & t r . p r e v i o u s E l e m e n t S i b l i n g . c h i l d r e n [ _ . i n d e x O f ( t r . c h i l d r e n , t d ) ] ; i f ( ! t a r g e t ) { t a r g e t = ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( t r ) | | t r ) . p r e v i o u s S i b l i n g ; } 
 i f ( t a r g e t ) { r a n g e . c r e a t e ( d o m . l a s t C h i l d ( t a r g e t ) , d o m . l a s t C h i l d ( t a r g e t ) . t e x t C o n t e n t . l e n g t h ) . s e l e c t ( ) ; } } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . d o w n = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { v a r   r = r a n g e . c r e a t e ( ) ; v a r   n o d e = d o m . f i r s t C h i l d ( r . s c . c h i l d N o d e s [ r . s o ] | | r . s c ) ; i f ( ! r . i s O n C e l l ( ) ) { r e t u r n ; } 
 v a r   a n c e s t o r = d o m . a n c e s t o r ( n o d e , f u n c t i o n ( a n c e s t o r N o d e ) { r e t u r n   d o m . h a s C o n t e n t A f t e r ( a n c e s t o r N o d e ) | | d o m . i s C e l l ( a n c e s t o r N o d e ) ; } ) ; i f ( ! d o m . i s C e l l ( a n c e s t o r ) & & ( ! d o m . i s B R ( d o m . h a s C o n t e n t A f t e r ( a n c e s t o r ) ) | | ! d o m . i s T e x t ( n o d e ) | | d o m . i s V i s i b l e T e x t ( n o d e ) | | d o m . h a s C o n t e n t A f t e r ( d o m . h a s C o n t e n t A f t e r ( a n c e s t o r ) ) ) ) { r e t u r n ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; v a r   t d = d o m . a n c e s t o r ( r . s c , d o m . i s C e l l ) ; v a r   t r = t d . p a r e n t N o d e ; v a r   t a r g e t = t r . n e x t E l e m e n t S i b l i n g & & t r . n e x t E l e m e n t S i b l i n g . c h i l d r e n [ _ . i n d e x O f ( t r . c h i l d r e n , t d ) ] ; i f ( ! t a r g e t ) { t a r g e t = ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( t r ) | | t r ) . n e x t S i b l i n g ; } 
 i f ( t a r g e t ) { r a n g e . c r e a t e ( d o m . f i r s t C h i l d ( t a r g e t ) , 0 ) . s e l e c t ( ) ; } } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . e n t e r = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e , ' e n t e r ' ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r . i s C o n t e n t E d i t a b l e ( ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 i f ( ! r . i s C o l l a p s e d ( ) ) { r = r . d e l e t e C o n t e n t s ( ) ; r . s e l e c t ( ) ; } 
 v a r   b r = $ ( " < b r / > " ) [ 0 ] ; v a r   e l e m = d o m . i s B R ( e l e m ) ? e l e m . p a r e n t N o d e : d o m . n o d e ( r . s c ) ; i f ( e l e m . t a g N a m e = = = " A " ) { i f ( r . s o = = = 0 & & d o m . f i r s t C h i l d ( e l e m ) = = = r . s c ) { r . e c = r . s c = d o m . h a s C o n t e n t B e f o r e ( e l e m ) | | $ ( d o m . c r e a t e T e x t ( ' ' ) ) . i n s e r t B e f o r e ( e l e m ) [ 0 ] ; r . e o = r . s o = d o m . n o d e L e n g t h ( r . s c ) ; r . s e l e c t ( ) ; } e l s e   i f ( d o m . n o d e L e n g t h ( r . s c ) = = = r . s o & & d o m . l a s t C h i l d ( e l e m ) = = = r . s c ) { r . e c = r . s c = d o m . h a s C o n t e n t A f t e r ( e l e m ) | | d o m . i n s e r t A f t e r ( d o m . c r e a t e T e x t ( ' ' ) , e l e m ) ; r . e o = r . s o = 0 ; r . s e l e c t ( ) ; } } 
 v a r   n o d e ; v a r   $ n o d e ; v a r   $ c l o n e ; v a r   c o n t e n t B e f o r e = r . s c . t e x t C o n t e n t . s l i c e ( 0 , r . s o ) . m a t c h ( / \ S | \ u 0 0 A 0 / ) ; i f ( ! c o n t e n t B e f o r e & & d o m . i s T e x t ( r . s c ) ) { n o d e = r . s c . p r e v i o u s S i b l i n g ; w h i l e ( ! c o n t e n t B e f o r e & & n o d e & & d o m . i s T e x t ( n o d e ) ) { c o n t e n t B e f o r e = d o m . i s V i s i b l e T e x t ( n o d e ) ; n o d e = n o d e . p r e v i o u s S i b l i n g ; } } 
 n o d e = d o m . n o d e ( r . s c ) ; v a r   e x i s t = r . s c . c h i l d N o d e s [ r . s o ] | | r . s c ; e x i s t = d o m . i s V i s i b l e T e x t ( e x i s t ) | | d o m . i s B R ( e x i s t ) ? e x i s t : d o m . h a s C o n t e n t A f t e r ( e x i s t ) | | ( d o m . h a s C o n t e n t B e f o r e ( e x i s t ) | | e x i s t ) ; v a r   t d = d o m . a n c e s t o r ( n o d e , d o m . i s C e l l ) ; i f ( t d & & ! d o m . n e x t E l e m e n t S i b l i n g ( n o d e ) & & ! d o m . n e x t E l e m e n t S i b l i n g ( t d ) & & ! d o m . n e x t E l e m e n t S i b l i n g ( t d . p a r e n t N o d e ) & & ( ! d o m . i s T e x t ( r . s c ) | | ! r . s c . t e x t C o n t e n t . s l i c e ( r . s o ) . m a t c h ( / \ S | \ u 0 0 A 0 / ) ) ) { $ n o d e = $ ( t d . p a r e n t N o d e ) ; $ c l o n e = $ n o d e . c l o n e ( ) ; $ c l o n e . c h i l d r e n ( ) . h t m l ( d o m . b l a n k ) ; $ n o d e . a f t e r ( $ c l o n e ) ; n o d e = d o m . f i r s t E l e m e n t C h i l d ( $ c l o n e [ 0 ] ) | | $ c l o n e [ 0 ] ; r a n g e . c r e a t e ( n o d e , 0 , n o d e , 0 ) . s e l e c t ( ) ; d o m . s c r o l l I n t o V i e w I f N e e d e d ( b r ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 v a r   l a s t = n o d e ; w h i l e ( n o d e & & d o m . i s S p l i t a b l e ( n o d e ) & & ! d o m . i s L i s t ( n o d e ) ) { l a s t = n o d e ; n o d e = n o d e . p a r e n t N o d e ; } 
 i f ( l a s t = = = n o d e & & ! d o m . i s B R ( n o d e ) ) { n o d e = r . i n s e r t N o d e ( b r , t r u e ) ; i f ( i s F o r m a t N o d e ( l a s t . f i r s t C h i l d ) & & $ ( l a s t ) . c l o s e s t ( o p t i o n s . s t y l e T a g s . j o i n ( ' , ' ) ) . l e n g t h ) { d o m . m o v e C o n t e n t ( l a s t . f i r s t C h i l d , l a s t ) ; l a s t . r e m o v e C h i l d ( l a s t . f i r s t C h i l d ) ; } 
 d o { n o d e = d o m . h a s C o n t e n t A f t e r ( n o d e ) ; } w h i l e ( n o d e & & d o m . i s B R ( n o d e ) ) ; i f ( ! n o d e & & ( ! b r . n e x t E l e m e n t S i b l i n g | | ! d o m . i s B R ( b r . n e x t E l e m e n t S i b l i n g ) ) ) { $ ( b r ) . b e f o r e ( $ ( " < b r / > " ) [ 0 ] ) ; } 
 n o d e = b r . n e x t S i b l i n g | | b r ; } e l s e   i f ( l a s t = = = n o d e & & d o m . i s B R ( n o d e ) ) { $ ( n o d e ) . a f t e r ( b r ) ; n o d e = b r ; } e l s e   i f ( ! r . s o & & r . i s O n L i s t ( ) & & ! r . s c . t e x t C o n t e n t . l e n g t h & & ! d o m . a n c e s t o r ( r . s c , d o m . i s L i ) . n e x t E l e m e n t S i b l i n g ) { $ ( ' < p > < / p > ' ) . a p p e n d ( b r ) . i n s e r t A f t e r ( d o m . a n c e s t o r ( r . s c , d o m . i s L i s t ) ) ; n o d e = b r ; } e l s e   i f ( d o m . i s B R ( e x i s t ) & & $ ( r . s c ) . c l o s e s t ( ' b l o c k q u o t e ,   p r e ' ) . l e n g t h & & ! d o m . h a s C o n t e n t A f t e r ( $ ( e x i s t . p a r e n t N o d e ) . c l o s e s t ( ' b l o c k q u o t e   * ,   p r e   * ' ) . l e n g t h ? e x i s t . p a r e n t N o d e : e x i s t ) ) { $ ( ' < p > < / p > ' ) . a p p e n d ( b r ) . i n s e r t A f t e r ( $ ( r . s c ) . c l o s e s t ( ' b l o c k q u o t e ,   p r e ' ) ) ; n o d e = b r ; } e l s e   i f ( d o m . i s E d i t a b l e ( d o m . n o d e ( r . s c ) ) ) { n o d e = n u l l ; } e l s e   i f ( l a s t = = = r . s c ) { i f ( d o m . i s B R ( l a s t ) ) { l a s t = l a s t . p a r e n t N o d e ; } 
 $ n o d e = $ ( l a s t ) ; $ c l o n e = $ n o d e . c l o n e ( ) . t e x t ( " " ) ; $ n o d e . a f t e r ( $ c l o n e ) ; n o d e = d o m . n o d e ( d o m . f i r s t E l e m e n t C h i l d ( $ c l o n e [ 0 ] ) | | $ c l o n e [ 0 ] ) ; $ ( n o d e ) . h t m l ( b r ) ; n o d e = b r ; } e l s e { n o d e = d o m . s p l i t T r e e ( l a s t , { ' n o d e ' : r . s c , ' o f f s e t ' : r . s o } ) | | r . s c ; i f ( ! c o n t e n t B e f o r e ) { v a r   c u r = d o m . n o d e ( d o m . l a s t C h i l d ( n o d e . p r e v i o u s S i b l i n g ) ) ; i f ( ! d o m . i s B R ( c u r ) ) { $ ( c u r ) . h t m l ( c u r . i n n e r H T M L + b r . o u t e r H T M L ) ; } } 
 i f ( ! d o m . i s V i s i b l e T e x t ( n o d e ) ) { n o d e = d o m . f i r s t C h i l d ( n o d e ) ; $ ( d o m . n o d e ( d o m . i s B R ( n o d e ) ? n o d e . p a r e n t N o d e : n o d e ) ) . h t m l ( b r ) ; n o d e = b r ; } } 
 i f ( n o d e ) { n o d e = d o m . f i r s t C h i l d ( n o d e ) ; i f ( d o m . i s B R ( n o d e ) ) { r a n g e . c r e a t e F r o m N o d e ( n o d e ) . s e l e c t ( ) ; } e l s e { r a n g e . c r e a t e ( n o d e , 0 ) . s e l e c t ( ) ; } 
 d o m . s c r o l l I n t o V i e w I f N e e d e d ( n o d e ) ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . v i s i b l e = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e , " v i s i b l e " ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; i f ( ! r . i s C o l l a p s e d ( ) ) { i f ( ( d o m . i s C e l l ( d o m . n o d e ( r . s c ) ) | | d o m . i s C e l l ( d o m . n o d e ( r . e c ) ) ) & & d o m . n o d e ( r . s c ) ! = = d o m . n o d e ( r . e c ) ) { r e m o v e _ t a b l e _ c o n t e n t ( r ) ; r = r a n g e . c r e a t e ( r . e c , 0 ) ; } 
 r . s e l e c t ( ) ; } 
 v a r   n o d e = d o m . f i r s t C h i l d ( r . s c . t a g N a m e & & r . s o ? r . s c . c h i l d N o d e s [ r . s o ] | | r . s c : r . s c ) ; w h i l e ( n o d e . p a r e n t N o d e ) { i f ( d o m . i s F o r b i d d e n N o d e ( n o d e ) ) { v a r   t e x t = n o d e . p r e v i o u s S i b l i n g ; i f ( t e x t & & d o m . i s T e x t ( t e x t ) & & d o m . i s V i s i b l e T e x t ( t e x t ) ) { r a n g e . c r e a t e ( t e x t , t e x t . t e x t C o n t e n t . l e n g t h , t e x t , t e x t . t e x t C o n t e n t . l e n g t h ) . s e l e c t ( ) ; } e l s e { t e x t = n o d e . p a r e n t N o d e . i n s e r t B e f o r e ( d o c u m e n t . c r e a t e T e x t N o d e ( " . " ) , n o d e ) ; r a n g e . c r e a t e ( t e x t , 1 , t e x t , 1 ) . s e l e c t ( ) ; s e t T i m e o u t ( f u n c t i o n ( ) { v a r   t e x t = r a n g e . c r e a t e ( ) . s c ; t e x t . t e x t C o n t e n t = t e x t . t e x t C o n t e n t . r e p l a c e ( / ^ . / , ' ' ) ; r a n g e . c r e a t e ( t e x t , t e x t . t e x t C o n t e n t . l e n g t h , t e x t , t e x t . t e x t C o n t e n t . l e n g t h ) . s e l e c t ( ) ; } , 0 ) ; } 
 b r e a k ; } 
 n o d e = n o d e . p a r e n t N o d e ; } 
 r e t u r n   t r u e ; } ; f u n c t i o n   r e m o v e _ t a b l e _ c o n t e n t ( r ) { v a r   n o d e s = d o m . l i s t B e t w e e n ( r . s c , r . e c , r . s o , r . e o ) ; i f ( d o m . i s T e x t ( r . s c ) ) { r . s c . t e x t C o n t e n t = r . s c . t e x t C o n t e n t . s l i c e ( 0 , r . s o ) ; } 
 i f ( d o m . i s T e x t ( r . e c ) ) { r . e c . t e x t C o n t e n t = r . e c . t e x t C o n t e n t . s l i c e ( r . e o ) ; } 
 f o r ( v a r   i   i n   n o d e s ) { v a r   n o d e = n o d e s [ i ] ; i f ( n o d e = = = r . s c | | n o d e = = = r . e c | | $ . c o n t a i n s ( n o d e , r . s c ) | | $ . c o n t a i n s ( n o d e , r . e c ) ) { c o n t i n u e ; } e l s e   i f ( d o m . i s C e l l ( n o d e ) ) { $ ( n o d e ) . h t m l ( " < b r / > " ) ; } e l s e   i f ( n o d e . p a r e n t N o d e ) { d o { v a r   p a r e n t = n o d e . p a r e n t N o d e ; p a r e n t . r e m o v e C h i l d ( n o d e ) ; n o d e = p a r e n t ; } w h i l e ( ! d o m . i s V i s i b l e T e x t ( n o d e ) & & ! d o m . f i r s t E l e m e n t C h i l d ( n o d e ) & & ! d o m . i s C e l l ( n o d e ) & & n o d e . p a r e n t N o d e & & ! $ ( n o d e . p a r e n t N o d e ) . h a s C l a s s ( ' o _ e d i t a b l e ' ) ) ; } } 
 r e t u r n   f a l s e ; } 
 $ . s u m m e r n o t e . p l u g i n E v e n t s . d e l e t e = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e , " d e l e t e " ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; i f ( ! r . i s C o n t e n t E d i t a b l e ( ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 i f ( ! r . i s C o l l a p s e d ( ) ) { i f ( d o m . i s C e l l ( d o m . n o d e ( r . s c ) ) | | d o m . i s C e l l ( d o m . n o d e ( r . e c ) ) ) { r e m o v e _ t a b l e _ c o n t e n t ( r ) ; r a n g e . c r e a t e ( r . e c , 0 ) . s e l e c t ( ) ; } e l s e { r = r . d e l e t e C o n t e n t s ( ) ; r . s e l e c t ( ) ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 v a r   t a r g e t = r . e c ; v a r   o f f s e t = r . e o ; i f ( t a r g e t . t a g N a m e & & t a r g e t . c h i l d N o d e s [ o f f s e t ] ) { t a r g e t = t a r g e t . c h i l d N o d e s [ o f f s e t ] ; o f f s e t = 0 ; } 
 v a r   n o d e = d o m . n o d e ( t a r g e t ) ; v a r   d a t a = d o m . m e r g e ( n o d e , t a r g e t , o f f s e t , t a r g e t , o f f s e t , n u l l , t r u e ) ; d a t a = d o m . r e m o v e S p a c e ( n o d e . p a r e n t N o d e , d a t a . s c , d a t a . s o , d a t a . e c , d a t a . e o ) ; r = r a n g e . c r e a t e ( d a t a . s c , d a t a . s o ) ; r . s e l e c t ( ) ; t a r g e t = r . s c ; o f f s e t = r . s o ; w h i l e ( ! d o m . h a s C o n t e n t A f t e r ( n o d e ) & & ! d o m . h a s C o n t e n t B e f o r e ( n o d e ) & & ! d o m . i s I m g ( n o d e ) ) { n o d e = n o d e . p a r e n t N o d e ; } 
 v a r   c o n t e n t A f t e r = t a r g e t . t e x t C o n t e n t . s l i c e ( o f f s e t , I n f i n i t y ) . m a t c h ( / \ S | \ u 0 0 A 0 / ) ; v a r   c o n t e n t = t a r g e t . t e x t C o n t e n t . r e p l a c e ( / [   \ t \ r \ n ] + $ / , ' ' ) ; v a r   t e m p ; v a r   t e m p 2 ; v a r   n e x t ; i f ( d o m . i s I m g ( n o d e ) | | ( ! c o n t e n t A f t e r & & d o m . i s I m g ( d o m . h a s C o n t e n t A f t e r ( n o d e ) ) ) ) { v a r   p a r e n t ; v a r   i n d e x ; i f ( ! d o m . i s I m g ( n o d e ) ) { n o d e = d o m . h a s C o n t e n t A f t e r ( n o d e ) ; } 
 w h i l e ( d o m . i s I m g ( n o d e ) ) { p a r e n t = n o d e . p a r e n t N o d e ; i n d e x = d o m . p o s i t i o n ( n o d e ) ; i f ( i n d e x > 0 ) { n e x t = n o d e . p r e v i o u s S i b l i n g ; r = r a n g e . c r e a t e ( n e x t , n e x t . t e x t C o n t e n t . l e n g t h ) ; } e l s e { r = r a n g e . c r e a t e ( p a r e n t , 0 ) ; } 
 i f ( ! d o m . h a s C o n t e n t A f t e r ( n o d e ) & & ! d o m . h a s C o n t e n t B e f o r e ( n o d e ) ) { p a r e n t . a p p e n d C h i l d ( $ ( ' < b r / > ' ) [ 0 ] ) ; } 
 p a r e n t . r e m o v e C h i l d ( n o d e ) ; n o d e = p a r e n t ; r . s e l e c t ( ) ; } } 
 e l s e   i f ( ! c o n t e n t . l e n g t h & & t a r g e t . t a g N a m e & & d o m . i s R e m o v a b l e E m p t y N o d e ( d o m . i s B R ( t a r g e t ) ? t a r g e t . p a r e n t N o d e : t a r g e t ) ) { i f ( n o d e = = = $ e d i t a b l e [ 0 ] | | $ . c o n t a i n s ( n o d e , $ e d i t a b l e [ 0 ] ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 v a r   b e f o r e = f a l s e ; n e x t = d o m . h a s C o n t e n t A f t e r ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( n o d e ) ) ; i f ( ! d o m . i s C o n t e n t E d i t a b l e ( n e x t ) ) { b e f o r e = t r u e ; n e x t = d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( n o d e ) ) ; } 
 d o m . r e m o v e S p a c e ( n e x t . p a r e n t N o d e , n e x t , 0 , n e x t , 0 ) ; n e x t = d o m . f i r s t C h i l d ( n e x t ) ; n o d e . p a r e n t N o d e . r e m o v e C h i l d ( n o d e ) ; r a n g e . c r e a t e ( n e x t , b e f o r e ? n e x t . t e x t C o n t e n t . l e n g t h : 0 ) . s e l e c t ( ) ; } 
 e l s e   i f ( c o n t e n t A f t e r ) { r e t u r n   t r u e ; } 
 e l s e   i f ( d o m . i s T e x t ( t a r g e t ) & & ( t e m p = d o m . h a s C o n t e n t A f t e r ( t a r g e t ) ) & & d o m . i s T e x t ( t e m p ) ) { r e t u r n   t r u e ; } 
 e l s e   i f ( ( t e m p = d o m . a n c e s t o r H a v e N e x t S i b l i n g ( t a r g e t ) ) & & ! r . i s O n C e l l ( ) & & d o m . i s M e r g a b l e ( t e m p ) & & d o m . i s M e r g a b l e ( t e m p 2 = d o m . h a s C o n t e n t A f t e r ( t e m p ) ) & & t e m p . t a g N a m e = = = t e m p 2 . t a g N a m e & & ( t e m p . t a g N a m e ! = = " L I " | | ! $ ( ' u l , o l ' , t e m p ) . l e n g t h ) & & ( t e m p 2 . t a g N a m e ! = = " L I " | | ! $ ( ' u l , o l ' , t e m p 2 ) . l e n g t h ) & & ! d o m . i s N o t B r e a k a b l e ( t e m p ) & & ! d o m . i s N o t B r e a k a b l e ( t e m p 2 ) ) { d o m . a u t o M e r g e ( t a r g e t , f a l s e ) ; n e x t = d o m . f i r s t C h i l d ( d o m . h a s C o n t e n t A f t e r ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( t a r g e t ) ) ) ; i f ( d o m . i s B R ( n e x t ) ) { i f ( d o m . p o s i t i o n ( n e x t ) = = = 0 ) { r a n g e . c r e a t e ( n e x t . p a r e n t N o d e , 0 ) . s e l e c t ( ) ; } 
 e l s e { r a n g e . c r e a t e ( n e x t . p r e v i o u s S i b l i n g , n e x t . p r e v i o u s S i b l i n g . t e x t C o n t e n t . l e n g t h ) . s e l e c t ( ) ; } 
 n e x t . p a r e n t N o d e . r e m o v e C h i l d ( n e x t ) ; } e l s e { r a n g e . c r e a t e ( n e x t , 0 ) . s e l e c t ( ) ; } } 
 e l s e   i f ( ( t e m p = d o m . a n c e s t o r H a v e N e x t S i b l i n g ( t a r g e t ) ) & & ( t e m p 2 = d o m . h a s C o n t e n t A f t e r ( t e m p ) ) & & d o m . i s C o n t e n t E d i t a b l e ( t e m p 2 ) ) { d o m . r e m o v e S p a c e ( t e m p 2 . p a r e n t N o d e , t e m p 2 , 0 , t e m p , 0 ) ; t e m p 2 = d o m . f i r s t C h i l d ( t e m p 2 ) ; r = r a n g e . c r e a t e ( t e m p 2 , 0 ) ; r . s e l e c t ( ) ; i f ( ( d o m . i s T e x t ( t e m p ) | | d o m . g e t C o m p u t e d S t y l e ( t e m p ) . d i s p l a y = = = " i n l i n e " ) & & ( d o m . i s T e x t ( t e m p 2 ) | | d o m . g e t C o m p u t e d S t y l e ( t e m p 2 ) . d i s p l a y = = = " i n l i n e " ) ) { i f ( d o m . i s T e x t ( t e m p 2 ) ) { t e m p 2 . t e x t C o n t e n t = t e m p 2 . t e x t C o n t e n t . r e p l a c e ( / ^ \ s * \ S / , ' ' ) ; } e l s e { $ . s u m m e r n o t e . p l u g i n E v e n t s . d e l e t e ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } } } 
 $ ( d o m . n o d e ( r . s c ) ) . t r i g g e r ( " c l i c k " ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . b a c k s p a c e = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e , " b a c k s p a c e " ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; i f ( ! r . i s C o n t e n t E d i t a b l e ( ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 i f ( ! r . i s C o l l a p s e d ( ) ) { i f ( d o m . i s C e l l ( d o m . n o d e ( r . s c ) ) | | d o m . i s C e l l ( d o m . n o d e ( r . e c ) ) ) { r e m o v e _ t a b l e _ c o n t e n t ( r ) ; r a n g e . c r e a t e ( r . s c , d o m . n o d e L e n g t h ( r . s c ) ) . s e l e c t ( ) ; } e l s e { r = r . d e l e t e C o n t e n t s ( ) ; r . s e l e c t ( ) ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 v a r   t a r g e t = r . s c ; v a r   o f f s e t = r . s o ; i f ( t a r g e t . t a g N a m e & & t a r g e t . c h i l d N o d e s [ o f f s e t ] ) { t a r g e t = t a r g e t . c h i l d N o d e s [ o f f s e t ] ; o f f s e t = 0 ; } 
 v a r   n o d e = d o m . n o d e ( t a r g e t ) ; v a r   d a t a = d o m . m e r g e ( n o d e , t a r g e t , o f f s e t , t a r g e t , o f f s e t , n u l l , t r u e ) ; d a t a = d o m . r e m o v e S p a c e ( n o d e . p a r e n t N o d e , d a t a . s c , d a t a . s o , d a t a . e c , d a t a . e o ) ; r = d o m . i s V o i d ( d a t a . s c ) ? r a n g e . c r e a t e F r o m N o d e ( d a t a . s c ) : r a n g e . c r e a t e ( d a t a . s c , d a t a . s o ) ; r . s e l e c t ( ) ; t a r g e t = r . s c ; o f f s e t = r . s o ; i f ( t a r g e t . t a g N a m e & & t a r g e t . c h i l d N o d e s [ o f f s e t ] ) { t a r g e t = t a r g e t . c h i l d N o d e s [ o f f s e t ] ; o f f s e t = 0 ; n o d e = d o m . n o d e ( t a r g e t ) ; } 
 w h i l e ( n o d e . p a r e n t N o d e & & ! d o m . h a s C o n t e n t A f t e r ( n o d e ) & & ! d o m . h a s C o n t e n t B e f o r e ( n o d e ) & & ! d o m . i s I m g ( n o d e ) ) { n o d e = n o d e . p a r e n t N o d e ; } 
 v a r   c o n t e n t B e f o r e = t a r g e t . t e x t C o n t e n t . s l i c e ( 0 , o f f s e t ) . m a t c h ( / \ S | \ u 0 0 A 0 / ) ; v a r   c o n t e n t = t a r g e t . t e x t C o n t e n t . r e p l a c e ( / [   \ t \ r \ n ] + $ / , ' ' ) ; v a r   t e m p ; v a r   t e m p 2 ; v a r   p r e v ; i f ( d o m . i s I m g ( n o d e ) | | ( ! c o n t e n t B e f o r e & & d o m . i s I m g ( d o m . h a s C o n t e n t B e f o r e ( n o d e ) ) ) ) { i f ( ! d o m . i s I m g ( n o d e ) ) { n o d e = d o m . h a s C o n t e n t B e f o r e ( n o d e ) ; } 
 r a n g e . c r e a t e F r o m N o d e ( n o d e ) . s e l e c t ( ) ; $ . s u m m e r n o t e . p l u g i n E v e n t s . d e l e t e ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } 
 e l s e   i f ( r . i s O n C e l l ( ) & & ! o f f s e t & & ( t a r g e t = = = ( t e m p = d o m . a n c e s t o r ( t a r g e t , d o m . i s C e l l ) ) | | t a r g e t = = = t e m p . f i r s t C h i l d | | ( d o m . i s T e x t ( t e m p . f i r s t C h i l d ) & & ! d o m . i s V i s i b l e T e x t ( t e m p . f i r s t C h i l d ) & & t a r g e t = = = t e m p . f i r s t C h i l d . n e x t S i b l i n g ) ) ) { i f ( d o m . p r e v i o u s E l e m e n t S i b l i n g ( t e m p ) ) { v a r   t d = d o m . p r e v i o u s E l e m e n t S i b l i n g ( t e m p ) ; n o d e = t d . l a s t C h i l d | | t d ; } e l s e { v a r   t r = t e m p . p a r e n t N o d e ; v a r   p r e v T r = d o m . p r e v i o u s E l e m e n t S i b l i n g ( t r ) ; i f ( ! $ ( t e m p . p a r e n t N o d e ) . t e x t ( ) . m a t c h ( / \ S | \ u 0 0 A 0 / ) ) { i f ( p r e v T r ) { n o d e = d o m . l a s t C h i l d ( d o m . l a s t E l e m e n t C h i l d ( p r e v T r ) ) ; } e l s e { n o d e = d o m . l a s t C h i l d ( d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( t r ) ) | | $ e d i t a b l e . g e t ( 0 ) ) ; } 
 $ ( t r ) . e m p t y ( ) ; i f ( ! $ ( t r ) . c l o s e s t ( ' t a b l e ' ) . h a s ( ' t d ,   t h ' ) . l e n g t h ) { $ ( t r ) . c l o s e s t ( ' t a b l e ' ) . r e m o v e ( ) ; } 
 $ ( t r ) . r e m o v e ( ) ; r a n g e . c r e a t e ( n o d e , n o d e . t e x t C o n t e n t . l e n g t h , n o d e , n o d e . t e x t C o n t e n t . l e n g t h ) . s e l e c t ( ) ; } e l s e { n o d e = d o m . l a s t E l e m e n t C h i l d ( p r e v T r ) . l a s t C h i l d | | d o m . l a s t E l e m e n t C h i l d ( p r e v T r ) ; } } 
 i f ( d o m . i s B R ( n o d e ) ) { r a n g e . c r e a t e F r o m N o d e ( n o d e ) . s e l e c t ( ) ; } e l s e { r a n g e . c r e a t e ( n o d e , d o m . n o d e L e n g t h ( n o d e ) ) . s e l e c t ( ) ; } } 
 e l s e   i f ( ! c o n t e n t . l e n g t h & & t a r g e t . t a g N a m e & & d o m . i s R e m o v a b l e E m p t y N o d e ( t a r g e t ) ) { i f ( n o d e = = = $ e d i t a b l e [ 0 ] | | $ . c o n t a i n s ( n o d e , $ e d i t a b l e [ 0 ] ) ) { e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } 
 v a r   b e f o r e = t r u e ; p r e v = d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( n o d e ) ) ; i f ( ! d o m . i s C o n t e n t E d i t a b l e ( p r e v ) ) { b e f o r e = f a l s e ; p r e v = d o m . h a s C o n t e n t A f t e r ( d o m . a n c e s t o r H a v e N e x t S i b l i n g ( n o d e ) ) ; } 
 d o m . r e m o v e S p a c e ( p r e v . p a r e n t N o d e , p r e v , 0 , p r e v , 0 ) ; p r e v = d o m . l a s t C h i l d ( p r e v ) ; n o d e . p a r e n t N o d e . r e m o v e C h i l d ( n o d e ) ; r a n g e . c r e a t e F r o m N o d e ( p r e v ) . s e l e c t ( ) ; r a n g e . c r e a t e ( p r e v , b e f o r e ? p r e v . t e x t C o n t e n t . l e n g t h : 0 ) . s e l e c t ( ) ; } 
 e l s e   i f ( c o n t e n t B e f o r e ) { r e t u r n   t r u e ; } 
 e l s e   i f ( d o m . i s T e x t ( t a r g e t ) & & ( t e m p = d o m . h a s C o n t e n t B e f o r e ( t a r g e t ) ) & & ( d o m . i s T e x t ( t e m p ) | | d o m . i s B R ( t e m p ) ) ) { r e t u r n   t r u e ; } 
 e l s e   i f ( ( t e m p = d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( t a r g e t ) ) & & d o m . i s M e r g a b l e ( t e m p ) & & d o m . i s M e r g a b l e ( t e m p 2 = d o m . h a s C o n t e n t B e f o r e ( t e m p ) ) & & t e m p . t a g N a m e = = = t e m p 2 . t a g N a m e & & ( t e m p . t a g N a m e ! = = " L I " | | ! $ ( ' u l , o l ' , t e m p ) . l e n g t h ) & & ( t e m p 2 . t a g N a m e ! = = " L I " | | ! $ ( ' u l , o l ' , t e m p 2 ) . l e n g t h ) & & ! d o m . i s N o t B r e a k a b l e ( t e m p ) & & ! d o m . i s N o t B r e a k a b l e ( t e m p 2 ) ) { p r e v = d o m . f i r s t C h i l d ( t a r g e t ) ; d o m . a u t o M e r g e ( t a r g e t , t r u e ) ; r a n g e . c r e a t e ( p r e v , 0 ) . s e l e c t ( ) ; } 
 e l s e   i f ( ( t e m p = d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( t a r g e t ) ) & & ( t e m p 2 = d o m . h a s C o n t e n t B e f o r e ( t e m p ) ) & & d o m . i s C o n t e n t E d i t a b l e ( t e m p 2 ) ) { d o m . r e m o v e S p a c e ( t e m p 2 . p a r e n t N o d e , t e m p 2 , 0 , t e m p , 0 ) ; t e m p 2 = d o m . l a s t C h i l d ( t e m p 2 ) ; r = r a n g e . c r e a t e ( t e m p 2 , t e m p 2 . t e x t C o n t e n t . l e n g t h , t e m p 2 , t e m p 2 . t e x t C o n t e n t . l e n g t h ) ; r . s e l e c t ( ) ; i f ( ( d o m . i s T e x t ( t e m p ) | | d o m . g e t C o m p u t e d S t y l e ( t e m p ) . d i s p l a y = = = " i n l i n e " ) & & ( d o m . i s T e x t ( t e m p 2 ) | | d o m . g e t C o m p u t e d S t y l e ( t e m p 2 ) . d i s p l a y = = = " i n l i n e " ) ) { i f ( d o m . i s T e x t ( t e m p 2 ) ) { t e m p 2 . t e x t C o n t e n t = t e m p 2 . t e x t C o n t e n t . r e p l a c e ( / \ S \ s * $ / , ' ' ) ; } e l s e { $ . s u m m e r n o t e . p l u g i n E v e n t s . b a c k s p a c e ( e v e n t , e d i t o r , l a y o u t I n f o ) ; } } } 
 r = r a n g e . c r e a t e ( ) ; i f ( r ) { $ ( d o m . n o d e ( r . s c ) ) . t r i g g e r ( " c l i c k " ) ; d o m . s c r o l l I n t o V i e w I f N e e d e d ( r . s c . p a r e n t N o d e . p r e v i o u s E l e m e n t S i b l i n g | | r . s c ) ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; f u n c t i o n   i s F o r m a t N o d e ( n o d e ) { r e t u r n   n o d e . t a g N a m e & & o p t i o n s . s t y l e T a g s . i n d e x O f ( n o d e . t a g N a m e . t o L o w e r C a s e ( ) ) ! = = - 1 ; } 
 $ . s u m m e r n o t e . p l u g i n E v e n t s . i n s e r t U n o r d e r e d L i s t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , t y p e ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . f o c u s ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e ) ; t y p e = t y p e | | " U L " ; v a r   s o r t e d = t y p e = = = " O L " ; v a r   p a r e n t ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; v a r   n o d e = r . s c ; w h i l e ( n o d e & & n o d e ! = = $ e d i t a b l e [ 0 ] ) { p a r e n t = n o d e . p a r e n t N o d e ; i f ( n o d e . t a g N a m e = = = ( s o r t e d ? " U L " : " O L " ) ) { v a r   u l = d o c u m e n t . c r e a t e E l e m e n t ( s o r t e d ? " o l " : " u l " ) ; u l . c l a s s N a m e = n o d e . c l a s s N a m e ; i f ( t y p e ! = = ' c h e c k l i s t ' ) { u l . c l a s s L i s t . r e m o v e ( ' o _ c h e c k l i s t ' ) ; } e l s e { u l . c l a s s L i s t . a d d ( ' o _ c h e c k l i s t ' ) ; } 
 p a r e n t . i n s e r t B e f o r e ( u l , n o d e ) ; w h i l e ( n o d e . f i r s t C h i l d ) { u l . a p p e n d C h i l d ( n o d e . f i r s t C h i l d ) ; } 
 p a r e n t . r e m o v e C h i l d ( n o d e ) ; r . s e l e c t ( ) ; r e t u r n ; } e l s e   i f ( n o d e . t a g N a m e = = = ( s o r t e d ? " O L " : " U L " ) ) { i f ( t y p e = = = ' c h e c k l i s t ' & & ! n o d e . c l a s s L i s t . c o n t a i n s ( ' o _ c h e c k l i s t ' ) ) { n o d e . c l a s s L i s t . a d d ( ' o _ c h e c k l i s t ' ) ; r e t u r n ; } e l s e   i f ( t y p e = = = ' U L ' & & n o d e . c l a s s L i s t . c o n t a i n s ( ' o _ c h e c k l i s t ' ) ) { n o d e . c l a s s L i s t . r e m o v e ( ' o _ c h e c k l i s t ' ) ; r e t u r n ; } 
 v a r   l i s = [ ] ; f o r ( v a r   i = 0 ; i < n o d e . c h i l d r e n . l e n g t h ; i + + ) { l i s . p u s h ( n o d e . c h i l d r e n [ i ] ) ; } 
 i f ( p a r e n t . t a g N a m e = = = " L I " ) { n o d e = p a r e n t ; p a r e n t = n o d e . p a r e n t N o d e ; _ . e a c h ( l i s , f u n c t i o n ( l i ) { p a r e n t . i n s e r t B e f o r e ( l i , n o d e ) ; } ) ; } e l s e { _ . e a c h ( l i s , f u n c t i o n ( l i ) { w h i l e ( l i . f i r s t C h i l d ) { p a r e n t . i n s e r t B e f o r e ( l i . f i r s t C h i l d , n o d e ) ; } } ) ; } 
 p a r e n t . r e m o v e C h i l d ( n o d e ) ; r . s e l e c t ( ) ; r e t u r n ; } 
 n o d e = p a r e n t ; } 
 v a r   p 0 = r . s c ; w h i l e ( p 0 & & p 0 . p a r e n t N o d e & & p 0 . p a r e n t N o d e ! = = $ e d i t a b l e [ 0 ] & & ! i s F o r m a t N o d e ( p 0 ) ) { p 0 = p 0 . p a r e n t N o d e ; } 
 i f ( ! p 0 ) r e t u r n ; v a r   p 1 = r . e c ; w h i l e ( p 1 & & p 1 . p a r e n t N o d e & & p 1 . p a r e n t N o d e ! = = $ e d i t a b l e [ 0 ] & & ! i s F o r m a t N o d e ( p 1 ) ) { p 1 = p 1 . p a r e n t N o d e ; } 
 i f ( ! p 0 . p a r e n t N o d e | | p 0 . p a r e n t N o d e ! = = p 1 . p a r e n t N o d e ) { r e t u r n ; } 
 p a r e n t = p 0 . p a r e n t N o d e ; u l = d o c u m e n t . c r e a t e E l e m e n t ( s o r t e d ? " o l " : " u l " ) ; i f ( t y p e = = = ' c h e c k l i s t ' ) { u l . c l a s s L i s t . a d d ( ' o _ c h e c k l i s t ' ) ; } 
 p a r e n t . i n s e r t B e f o r e ( u l , p 0 ) ; v a r   c h i l d N o d e s = p a r e n t . c h i l d N o d e s ; v a r   b r s = [ ] ; v a r   b e g i n = f a l s e ; f o r ( i = 0 ; i < c h i l d N o d e s . l e n g t h ; i + + ) { i f ( b e g i n & & d o m . i s B R ( c h i l d N o d e s [ i ] ) ) { p a r e n t . r e m o v e C h i l d ( c h i l d N o d e s [ i ] ) ; i - - ; } 
 i f ( ( ! d o m . i s T e x t ( c h i l d N o d e s [ i ] ) & & ! i s F o r m a t N o d e ( c h i l d N o d e s [ i ] ) ) | | ( ! u l . f i r s t C h i l d & & c h i l d N o d e s [ i ] ! = = p 0 ) | | $ . c o n t a i n s ( u l , c h i l d N o d e s [ i ] ) | | ( d o m . i s T e x t ( c h i l d N o d e s [ i ] ) & & ! c h i l d N o d e s [ i ] . t e x t C o n t e n t . m a t c h ( / \ S | u 0 0 A 0 / ) ) ) { c o n t i n u e ; } 
 b e g i n = t r u e ; v a r   l i = d o c u m e n t . c r e a t e E l e m e n t ( ' l i ' ) ; u l . a p p e n d C h i l d ( l i ) ; l i . a p p e n d C h i l d ( c h i l d N o d e s [ i ] ) ; i f ( l i . f i r s t C h i l d = = = p 1 ) { b r e a k ; } 
 i - - ; } 
 i f ( d o m . i s B R ( c h i l d N o d e s [ i ] ) ) { p a r e n t . r e m o v e C h i l d ( c h i l d N o d e s [ i ] ) ; } 
 f o r ( i = 0 ; i < b r s . l e n g t h ; i + + ) { p a r e n t . r e m o v e C h i l d ( b r s [ i ] ) ; } 
 r . c l e a n ( ) . s e l e c t ( ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . i n s e r t O r d e r e d L i s t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . i n s e r t U n o r d e r e d L i s t ( e v e n t , e d i t o r , l a y o u t I n f o , " O L " ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . i n s e r t C h e c k L i s t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . i n s e r t U n o r d e r e d L i s t ( e v e n t , e d i t o r , l a y o u t I n f o , " c h e c k l i s t " ) ; $ ( r a n g e . c r e a t e ( ) . s c . p a r e n t N o d e ) . t r i g g e r ( ' i n p u t ' ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . i n d e n t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , o u t d e n t ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; v a r   f l a g = f a l s e ; f u n c t i o n   i n d e n t U L ( U L , s t a r t , e n d ) { v a r   n e x t ; v a r   p r e v i o u s ; v a r   t a g N a m e = U L . t a g N a m e ; v a r   n o d e = U L . f i r s t C h i l d ; v a r   u l = d o c u m e n t . c r e a t e E l e m e n t ( t a g N a m e ) ; u l . c l a s s N a m e = U L . c l a s s N a m e ; v a r   l i = d o c u m e n t . c r e a t e E l e m e n t ( " l i " ) ; l i . c l a s s L i s t . a d d ( ' o _ i n d e n t ' ) ; l i . a p p e n d C h i l d ( u l ) ; i f ( f l a g ) { f l a g = 1 ; } 
 w h i l e ( n o d e ) { i f ( f l a g = = = 1 | | n o d e = = = s t a r t | | $ . c o n t a i n s ( n o d e , s t a r t ) ) { f l a g = t r u e ; i f ( p r e v i o u s ) { i f ( d o m . i s L i s t ( p r e v i o u s . l a s t C h i l d ) ) { u l = p r e v i o u s . l a s t C h i l d ; } e l s e { p r e v i o u s . a p p e n d C h i l d ( u l ) ; } } e l s e { n o d e . p a r e n t N o d e . i n s e r t B e f o r e ( l i , n o d e ) ; } } 
 n e x t = d o m . n e x t E l e m e n t S i b l i n g ( n o d e ) ; i f ( f l a g ) { u l . a p p e n d C h i l d ( n o d e ) ; } 
 i f ( n o d e = = = e n d | | $ . c o n t a i n s ( n o d e , e n d ) ) { f l a g = f a l s e ; b r e a k ; } 
 p r e v i o u s = n o d e ; n o d e = n e x t ; } 
 v a r   t e m p ; v a r   p r e v = d o m . p r e v i o u s E l e m e n t S i b l i n g ( l i ) ; i f ( p r e v & & p r e v . t a g N a m e = = = " L I " & & ( t e m p = d o m . f i r s t E l e m e n t C h i l d ( p r e v ) ) & & t e m p . t a g N a m e = = = t a g N a m e & & ( ( d o m . f i r s t E l e m e n t C h i l d ( p r e v ) | | p r e v . f i r s t C h i l d ) ! = = u l ) ) { d o m . d o M e r g e ( d o m . f i r s t E l e m e n t C h i l d ( p r e v ) | | p r e v . f i r s t C h i l d , u l ) ; l i = p r e v ; l i . p a r e n t N o d e . r e m o v e C h i l d ( d o m . n e x t E l e m e n t S i b l i n g ( l i ) ) ; } 
 n e x t = d o m . n e x t E l e m e n t S i b l i n g ( l i ) ; i f ( n e x t & & n e x t . t a g N a m e = = = " L I " & & ( t e m p = d o m . f i r s t E l e m e n t C h i l d ( n e x t ) ) & & t e m p . t a g N a m e = = = t a g N a m e & & ( d o m . f i r s t E l e m e n t C h i l d ( l i ) ! = = d o m . f i r s t E l e m e n t C h i l d ( n e x t ) ) ) { d o m . d o M e r g e ( d o m . f i r s t E l e m e n t C h i l d ( l i ) , d o m . f i r s t E l e m e n t C h i l d ( n e x t ) ) ; l i . p a r e n t N o d e . r e m o v e C h i l d ( d o m . n e x t E l e m e n t S i b l i n g ( l i ) ) ; } } 
 f u n c t i o n   o u t d e n t t U L ( U L , s t a r t , e n d ) { v a r   n e x t ; v a r   n o d e = U L . f i r s t C h i l d ; v a r   p a r e n t = U L . p a r e n t N o d e ; v a r   l i = U L . p a r e n t N o d e . t a g N a m e = = = " L I " ? U L . p a r e n t N o d e : U L ; v a r   u l = U L . p a r e n t N o d e . t a g N a m e = = = " L I " ? U L . p a r e n t N o d e . p a r e n t N o d e : U L . p a r e n t N o d e ; s t a r t = d o m . a n c e s t o r ( s t a r t , d o m . i s L i ) ; e n d = d o m . a n c e s t o r ( e n d , d o m . i s L i ) ; i f ( u l . t a g N a m e ! = = " U L " & & u l . t a g N a m e ! = = " O L " ) r e t u r n ; w h i l e ( n o d e ) { i f ( n o d e = = = s t a r t | | $ . c o n t a i n s ( n o d e , s t a r t ) ) { f l a g = t r u e ; i f ( d o m . p r e v i o u s E l e m e n t S i b l i n g ( n o d e ) & & l i . t a g N a m e = = = " L I " ) { l i = d o m . s p l i t T r e e ( l i , d o m . p r e v P o i n t ( { ' n o d e ' : n o d e , ' o f f s e t ' : 0 } ) ) ; } } 
 n e x t = d o m . n e x t E l e m e n t S i b l i n g ( n o d e ) ; i f ( f l a g ) { v a r   $ s u c c e e d i n g = $ ( n o d e ) . n e x t A l l ( ) ; u l = n o d e . p a r e n t N o d e ; i f ( d o m . p r e v i o u s E l e m e n t S i b l i n g ( u l ) ) { d o m . i n s e r t A f t e r ( n o d e , l i ) ; } e l s e { l i . p a r e n t N o d e . i n s e r t B e f o r e ( n o d e , l i ) ; } 
 $ s u c c e e d i n g . i n s e r t A f t e r ( n o d e ) ; i f ( ! u l . c h i l d r e n . l e n g t h ) { i f ( u l . p a r e n t N o d e . t a g N a m e = = = " L I " & & ! d o m . p r e v i o u s E l e m e n t S i b l i n g ( u l ) ) { u l = u l . p a r e n t N o d e ; } 
 u l . p a r e n t N o d e . r e m o v e C h i l d ( u l ) ; } 
 f l a g = f a l s e ; b r e a k ; } 
 i f ( n o d e = = = e n d | | $ . c o n t a i n s ( n o d e , e n d ) ) { f l a g = f a l s e ; b r e a k ; } 
 n o d e = n e x t ; } 
 d o m . m e r g e ( p a r e n t , s t a r t , 0 , e n d , 1 , n u l l , t r u e ) ; } 
 f u n c t i o n   i n d e n t O t h e r ( p , s t a r t , e n d ) { i f ( p = = = s t a r t | | $ . c o n t a i n s ( p , s t a r t ) | | $ . c o n t a i n s ( s t a r t , p ) ) { f l a g = t r u e ; } 
 i f ( f l a g ) { i f ( o u t d e n t ) { d o m . o u t d e n t ( p ) ; } e l s e { d o m . i n d e n t ( p ) ; } } 
 i f ( p = = = e n d | | $ . c o n t a i n s ( p , e n d ) | | $ . c o n t a i n s ( e n d , p ) ) { f l a g = f a l s e ; } } 
 v a r   a n c e s t o r = r . c o m m o n A n c e s t o r ( ) ; v a r   $ d o m = $ ( a n c e s t o r ) ; i f ( ! d o m . i s L i s t ( a n c e s t o r ) ) { i f ( d o m . i s L i s t ( a n c e s t o r . p a r e n t N o d e ) ) { $ d o m = $ ( a n c e s t o r . p a r e n t N o d e ) ; } e l s e { $ d o m = $ ( d o m . n o d e ( a n c e s t o r ) ) . c h i l d r e n ( ) ; } } 
 i f ( ! $ d o m . n o t ( ' b r ' ) . l e n g t h ) { $ d o m = $ ( d o m . a n c e s t o r ( r . s c , d o m . i s L i s t ) ) ; i f ( ! $ d o m . l e n g t h ) { $ d o m = $ ( r . s c ) . c l o s e s t ( o p t i o n s . s t y l e T a g s . j o i n ( ' , ' ) + ' , t d ' ) ; } } 
 $ d o m = $ d o m . m a p ( f u n c t i o n ( ) { r e t u r n   t h i s . t a g N a m e = = = " T R " ? d o m . f i r s t E l e m e n t C h i l d ( t h i s ) : t h i s ; } ) ; $ d o m . e a c h ( f u n c t i o n ( ) { i f ( f l a g | | $ . c o n t a i n s ( t h i s , r . s c ) ) { i f ( d o m . i s L i s t ( t h i s ) ) { i f ( o u t d e n t ) { o u t d e n t t U L ( t h i s , r . s c , r . e c ) ; } e l s e { i n d e n t U L ( t h i s , r . s c , r . e c ) ; } } e l s e   i f ( i s F o r m a t N o d e ( t h i s ) | | d o m . a n c e s t o r ( t h i s , d o m . i s C e l l ) ) { i n d e n t O t h e r ( t h i s , r . s c , r . e c ) ; } } } ) ; i f ( $ d o m . l e n g t h ) { v a r   $ p a r e n t = $ d o m . p a r e n t ( ) ; v a r   $ u l = $ p a r e n t . f i n d ( ' u l ,   o l ' ) ; i f ( ! $ u l . l e n g t h ) { $ u l = $ ( d o m . a n c e s t o r ( r . s c , d o m . i s L i s t ) ) ; } 
 $ u l . e a c h ( f u n c t i o n ( ) { i f ( t h i s . p r e v i o u s S i b l i n g & & t h i s . p r e v i o u s S i b l i n g ! = = d o m . p r e v i o u s E l e m e n t S i b l i n g ( t h i s ) & & ! t h i s . p r e v i o u s S i b l i n g . t e x t C o n t e n t . m a t c h ( / \ S / ) ) { t h i s . p a r e n t N o d e . r e m o v e C h i l d ( t h i s . p r e v i o u s S i b l i n g ) ; } 
 i f ( t h i s . n e x t S i b l i n g & & t h i s . n e x t S i b l i n g ! = = d o m . n e x t E l e m e n t S i b l i n g ( t h i s ) & & ! t h i s . n e x t S i b l i n g . t e x t C o n t e n t . m a t c h ( / \ S / ) ) { t h i s . p a r e n t N o d e . r e m o v e C h i l d ( t h i s . n e x t S i b l i n g ) ; } } ) ; r = d o m . m e r g e ( $ p a r e n t [ 0 ] , r . s c , r . s o , r . e c , r . e o , f u n c t i o n ( p r e v , c u r ) { i f ( p r e v & & d o m . i s L i s t ( p r e v ) & & d o m . i s E q u a l ( p r e v , c u r ) ) { r e t u r n   t r u e ; } } , t r u e ) ; r a n g e . c r e a t e ( r . s c , r . s o , r . e c , r . e o ) . s e l e c t ( ) ; } 
 e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . o u t d e n t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o ) { r e t u r n   $ . s u m m e r n o t e . p l u g i n E v e n t s . i n d e n t ( e v e n t , e d i t o r , l a y o u t I n f o , t r u e ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . f o r m a t B l o c k = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , s T a g N a m e ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . a p p l y F o n t ( e v e n t , e d i t o r , l a y o u t I n f o , n u l l , n u l l , " D e f a u l t " ) ; v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . f o c u s ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) { r e t u r n ; } 
 i f ( r . s o = = = 0 ) { r . s c = d o m . f i r s t C h i l d ( r . s c ) ; } 
 i f ( d o m . n o d e L e n g t h ( r . e c ) > = r . e o ) { r . e c = d o m . l a s t C h i l d ( r . e c ) ; r . e o = d o m . n o d e L e n g t h ( r . e c ) ; } 
 r = r a n g e . c r e a t e ( r . s c , r . s o , r . e c , r . e o ) ; r . r e R a n g e ( ) . s e l e c t ( ) ; i f ( s T a g N a m e = = = " b l o c k q u o t e " | | s T a g N a m e = = = " p r e " ) { s T a g N a m e = $ . s u m m e r n o t e . c o r e . a g e n t . i s M S I E ? ' < ' + s T a g N a m e + ' > ' : s T a g N a m e ; d o c u m e n t . e x e c C o m m a n d ( ' F o r m a t B l o c k ' , f a l s e , s T a g N a m e ) ; r e t u r n ; } 
 v a r   n o d e s = d o m . l i s t B e t w e e n ( r . s c , r . e c , r . s o , r . e o ) ; f o r ( v a r   i = 0 ; i < n o d e s . l e n g t h ; i + + ) { i f ( d o m . i s B R ( n o d e s [ i ] ) | | ( d o m . i s T e x t ( n o d e s [ i ] ) & & d o m . i s V i s i b l e T e x t ( n o d e s [ i ] ) ) | | d o m . i s B ( n o d e s [ i ] ) | | d o m . i s U ( n o d e s [ i ] ) | | d o m . i s S ( n o d e s [ i ] ) | | d o m . i s I ( n o d e s [ i ] ) | | d o m . i s F o n t ( n o d e s [ i ] ) ) { v a r   a n c e s t o r = d o m . a n c e s t o r ( n o d e s [ i ] , i s F o r m a t N o d e ) ; i f ( $ ( a n c e s t o r ) . p a r e n t ( ) . i s ( ' b l o c k q u o t e ' ) ) { $ ( a n c e s t o r ) . u n w r a p ( ) ; } 
 i f ( ! a n c e s t o r ) { d o m . w r a p ( n o d e s [ i ] , s T a g N a m e ) ; } e l s e   i f ( a n c e s t o r . t a g N a m e . t o L o w e r C a s e ( ) ! = = s T a g N a m e ) { v a r   t a g = d o c u m e n t . c r e a t e E l e m e n t ( s T a g N a m e ) ; a n c e s t o r . p a r e n t N o d e . i n s e r t B e f o r e ( t a g , a n c e s t o r ) ; d o m . m o v e C o n t e n t ( a n c e s t o r , t a g ) ; i f ( a n c e s t o r . c l a s s N a m e ) { t a g . c l a s s N a m e = a n c e s t o r . c l a s s N a m e ; } 
 a n c e s t o r . p a r e n t N o d e . r e m o v e C h i l d ( a n c e s t o r ) ; } } } 
 r . s e l e c t ( ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . r e m o v e F o r m a t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , v a l u e ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; v a r   n o d e = r a n g e . c r e a t e ( ) . s c . p a r e n t N o d e ; d o c u m e n t . e x e c C o m m a n d ( ' r e m o v e F o r m a t ' ) ; d o c u m e n t . e x e c C o m m a n d ( ' r e m o v e F o r m a t ' ) ; r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; r = d o m . m e r g e ( n o d e , r . s c , r . s o , r . e c , r . e o , n u l l , t r u e ) ; r a n g e . c r e a t e ( r . s c , r . s o , r . e c , r . e o ) . s e l e c t ( ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; r e t u r n   f a l s e ; } ; e v e n t H a n d l e r . m o d u l e s . e d i t o r . u n d o = f u n c t i o n ( $ p o p o v e r ) { i f ( ! $ p o p o v e r . a t t r ( ' d i s a b l e d ' ) ) $ p o p o v e r . d a t a ( ' N o t e H i s t o r y ' ) . u n d o ( ) ; } ; e v e n t H a n d l e r . m o d u l e s . e d i t o r . r e d o = f u n c t i o n ( $ p o p o v e r ) { i f ( ! $ p o p o v e r . a t t r ( ' d i s a b l e d ' ) ) $ p o p o v e r . d a t a ( ' N o t e H i s t o r y ' ) . r e d o ( ) ; } ; v a r   f n _ f r o m _ n o d e = e v e n t H a n d l e r . m o d u l e s . e d i t o r . s t y l e . f r o m N o d e ; e v e n t H a n d l e r . m o d u l e s . e d i t o r . s t y l e . f r o m N o d e = f u n c t i o n ( $ n o d e ) { v a r   s t y l e I n f o = f n _ f r o m _ n o d e . a p p l y ( t h i s , a r g u m e n t s ) ; s t y l e I n f o [ ' c o l o r ' ] = $ n o d e . c s s ( ' c o l o r ' ) ; s t y l e I n f o [ ' b a c k g r o u n d - c o l o r ' ] = $ n o d e . c s s ( ' b a c k g r o u n d - c o l o r ' ) ; r e t u r n   s t y l e I n f o ; } ; v a r   f n _ e d i t o r _ c u r r e n t s t y l e = e v e n t H a n d l e r . m o d u l e s . e d i t o r . c u r r e n t S t y l e ; e v e n t H a n d l e r . m o d u l e s . e d i t o r . c u r r e n t S t y l e = f u n c t i o n ( t a r g e t ) { v a r   s t y l e I n f o = f n _ e d i t o r _ c u r r e n t s t y l e . a p p l y ( t h i s , a r g u m e n t s ) ; i f ( ! s t y l e I n f o . i m a g e | | ! d o m . i s E d i t a b l e ( s t y l e I n f o . i m a g e ) ) { s t y l e I n f o . i m a g e = u n d e f i n e d ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( r ) 
 s t y l e I n f o . i m a g e = r . i s O n I m g ( ) ; } 
 i f ( s t y l e I n f o . a n c h o r ) { s t y l e I n f o [ ' t e x t - a l i g n ' ] = $ ( s t y l e I n f o . a n c h o r ) . p a r e n t ( ) . c s s ( ' t e x t - a l i g n ' ) ; } 
 r e t u r n   s t y l e I n f o ; } ; o p t i o n s . f o n t S i z e s = w e D e f a u l t O p t i o n s . f o n t S i z e s ; $ . s u m m e r n o t e . p l u g i n E v e n t s . a p p l y F o n t = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , c o l o r , b g c o l o r , s i z e ) { v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; v a r   s t a r t P o i n t = r . g e t S t a r t P o i n t ( ) ; v a r   e n d P o i n t = r . g e t E n d P o i n t ( ) ; i f ( r . i s C o l l a p s e d ( ) & & ! d o m . i s F o n t ( r . s c ) ) { r e t u r n { s c : s t a r t P o i n t . n o d e , s o : s t a r t P o i n t . o f f s e t , e c : e n d P o i n t . n o d e , o f f s e t : e n d P o i n t . o f f s e t } ; } 
 i f ( s t a r t P o i n t . n o d e . t a g N a m e & & s t a r t P o i n t . n o d e . c h i l d N o d e s [ s t a r t P o i n t . o f f s e t ] ) { s t a r t P o i n t . n o d e = s t a r t P o i n t . n o d e . c h i l d N o d e s [ s t a r t P o i n t . o f f s e t ] ; s t a r t P o i n t . o f f s e t = 0 ; } 
 i f ( e n d P o i n t . n o d e . t a g N a m e & & e n d P o i n t . n o d e . c h i l d N o d e s [ e n d P o i n t . o f f s e t ] ) { e n d P o i n t . n o d e = e n d P o i n t . n o d e . c h i l d N o d e s [ e n d P o i n t . o f f s e t ] ; e n d P o i n t . o f f s e t = 0 ; } 
 v a r   a n c e s t o r ; v a r   n o d e ; i f ( e n d P o i n t . o f f s e t & & e n d P o i n t . o f f s e t ! = = d o m . n o d e L e n g t h ( e n d P o i n t . n o d e ) ) { a n c e s t o r = d o m . a n c e s t o r ( e n d P o i n t . n o d e , d o m . i s F o n t ) | | e n d P o i n t . n o d e ; d o m . s p l i t T r e e ( a n c e s t o r , e n d P o i n t ) ; } 
 i f ( s t a r t P o i n t . o f f s e t & & s t a r t P o i n t . o f f s e t ! = = d o m . n o d e L e n g t h ( s t a r t P o i n t . n o d e ) ) { a n c e s t o r = d o m . a n c e s t o r ( s t a r t P o i n t . n o d e , d o m . i s F o n t ) | | s t a r t P o i n t . n o d e ; n o d e = d o m . s p l i t T r e e ( a n c e s t o r , s t a r t P o i n t ) ; i f ( e n d P o i n t . n o d e = = = s t a r t P o i n t . n o d e ) { e n d P o i n t . n o d e = n o d e ; e n d P o i n t . o f f s e t = d o m . n o d e L e n g t h ( n o d e ) ; } 
 s t a r t P o i n t . n o d e = n o d e ; s t a r t P o i n t . o f f s e t = 0 ; } 
 v a r   n o d e s = [ ] ; d o m . w a l k P o i n t ( s t a r t P o i n t , e n d P o i n t , f u n c t i o n ( p o i n t ) { v a r   n o d e = p o i n t . n o d e ; i f ( ( ( d o m . i s T e x t ( n o d e ) & & d o m . i s V i s i b l e T e x t ( n o d e ) ) | | ( d o m . i s F o n t ( n o d e ) & & ! d o m . i s V i s i b l e T e x t ( n o d e ) ) ) & & ( n o d e ! = = e n d P o i n t . n o d e | | e n d P o i n t . o f f s e t ) ) { n o d e s . p u s h ( p o i n t . n o d e ) ; } } ) ; n o d e s = l i s t . u n i q u e ( n o d e s ) ; i f ( r . i s C o l l a p s e d ( ) ) { n o d e s . p u s h ( s t a r t P o i n t . n o d e ) ; } 
 v a r   f o n t , $ f o n t , f o n t s = [ ] , c l a s s N a m e ; v a r   i ; i f ( c o l o r | | b g c o l o r | | s i z e ) { f o r ( i = 0 ; i < n o d e s . l e n g t h ; i + + ) { n o d e = n o d e s [ i ] ; f o n t = d o m . a n c e s t o r ( n o d e , d o m . i s F o n t ) ; i f ( ! f o n t ) { i f ( n o d e . t e x t C o n t e n t . m a t c h ( / ^ [   ] | [   ] $ / ) ) { n o d e . t e x t C o n t e n t = n o d e . t e x t C o n t e n t . r e p l a c e ( / ^ [   ] | [   ] $ / g , ' \ u 0 0 A 0 ' ) ; } 
 f o n t = d o m . c r e a t e ( " f o n t " ) ; n o d e . p a r e n t N o d e . i n s e r t B e f o r e ( f o n t , n o d e ) ; f o n t . a p p e n d C h i l d ( n o d e ) ; } 
 f o n t s . p u s h ( f o n t ) ; c l a s s N a m e = f o n t . c l a s s N a m e . s p l i t ( / \ s + / ) ; v a r   k ; i f ( c o l o r ) { f o r ( k = 0 ; k < c l a s s N a m e . l e n g t h ; k + + ) { i f ( c l a s s N a m e [ k ] . l e n g t h & & c l a s s N a m e [ k ] . s l i c e ( 0 , 5 ) = = = " t e x t - " ) { c l a s s N a m e . s p l i c e ( k , 1 ) ; k - - ; } } 
 i f ( c o l o r . i n d e x O f ( ' t e x t - ' ) ! = = - 1 ) { f o n t . c l a s s N a m e = c l a s s N a m e . j o i n ( "   " ) + "   " + c o l o r ; f o n t . s t y l e . c o l o r = " i n h e r i t " ; } e l s e { f o n t . c l a s s N a m e = c l a s s N a m e . j o i n ( "   " ) ; f o n t . s t y l e . c o l o r = c o l o r ; } } 
 i f ( b g c o l o r ) { f o r ( k = 0 ; k < c l a s s N a m e . l e n g t h ; k + + ) { i f ( c l a s s N a m e [ k ] . l e n g t h & & c l a s s N a m e [ k ] . s l i c e ( 0 , 3 ) = = = " b g - " ) { c l a s s N a m e . s p l i c e ( k , 1 ) ; k - - ; } } 
 i f ( b g c o l o r . i n d e x O f ( ' b g - ' ) ! = = - 1 ) { f o n t . c l a s s N a m e = c l a s s N a m e . j o i n ( "   " ) + "   " + b g c o l o r ; f o n t . s t y l e . b a c k g r o u n d C o l o r = " i n h e r i t " ; } e l s e { f o n t . c l a s s N a m e = c l a s s N a m e . j o i n ( "   " ) ; f o n t . s t y l e . b a c k g r o u n d C o l o r = b g c o l o r ; } } 
 i f ( s i z e ) { f o n t . s t y l e . f o n t S i z e = " i n h e r i t " ; i f ( ! i s N a N ( s i z e ) & & M a t h . a b s ( p a r s e I n t ( d o m . g e t C o m p u t e d S t y l e ( f o n t ) . f o n t S i z e , 1 0 ) - s i z e ) / s i z e > 0 . 0 5 ) { f o n t . s t y l e . f o n t S i z e = s i z e + " p x " ; } } } } 
 f o r ( i = 0 ; i < f o n t s . l e n g t h ; i + + ) { f o n t = f o n t s [ i ] ; i f ( f o n t . s t y l e . b a c k g r o u n d C o l o r = = = " i n h e r i t " ) { f o n t . s t y l e . b a c k g r o u n d C o l o r = " " ; } 
 i f ( f o n t . s t y l e . c o l o r = = = " i n h e r i t " ) { f o n t . s t y l e . c o l o r = " " ; } 
 i f ( f o n t . s t y l e . f o n t S i z e = = = " i n h e r i t " ) { f o n t . s t y l e . f o n t S i z e = " " ; } 
 $ f o n t = $ ( f o n t ) ; i f ( ! $ f o n t . c s s ( " c o l o r " ) & & ! $ f o n t . c s s ( " b a c k g r o u n d - c o l o r " ) & & ! $ f o n t . c s s ( " f o n t - s i z e " ) ) { $ f o n t . r e m o v e A t t r ( " s t y l e " ) ; } 
 i f ( ! f o n t . c l a s s N a m e . l e n g t h ) { $ f o n t . r e m o v e A t t r ( " c l a s s " ) ; } } 
 n o d e s = [ ] ; d o m . w a l k P o i n t ( s t a r t P o i n t , e n d P o i n t , f u n c t i o n ( p o i n t ) { n o d e s . p u s h ( p o i n t . n o d e . c h i l d N o d e s [ p o i n t . o f f s e t ] | | p o i n t . n o d e ) ; } ) ; n o d e s = l i s t . u n i q u e ( n o d e s ) ; f u n c t i o n   r e m o v e ( n o d e , t o ) { i f ( n o d e = = = e n d P o i n t . n o d e ) { e n d P o i n t = d o m . p r e v P o i n t ( e n d P o i n t ) ; } 
 i f ( t o ) { d o m . m o v e C o n t e n t ( n o d e , t o ) ; } 
 d o m . r e m o v e ( n o d e ) ; } 
 v a r   c l a s s N a m e 2 , s t y l e , s t y l e 2 ; f o r ( i = 0 ; i < n o d e s . l e n g t h ; i + + ) { n o d e = n o d e s [ i ] ; i f ( d o m . i s T e x t ( n o d e ) & & ! n o d e . n o d e V a l u e ) { r e m o v e ( n o d e ) ; c o n t i n u e ; } 
 f o n t = d o m . a n c e s t o r ( n o d e , d o m . i s F o n t ) ; n o d e = f o n t | | d o m . a n c e s t o r ( n o d e , d o m . i s S p a n ) ; i f ( ! n o d e ) { c o n t i n u e ; } 
 $ f o n t = $ ( n o d e ) ; c l a s s N a m e = d o m . o r d e r C l a s s ( n o d e ) ; s t y l e = d o m . o r d e r S t y l e ( n o d e ) ; i f ( ! c l a s s N a m e & & ! s t y l e ) { r e m o v e ( n o d e , n o d e . p a r e n t N o d e ) ; c o n t i n u e ; } 
 i f ( f o n t = d o m . a n c e s t o r ( n o d e . p r e v i o u s S i b l i n g , d o m . i s F o n t ) ) { c l a s s N a m e 2 = f o n t . g e t A t t r i b u t e ( ' c l a s s ' ) ; s t y l e 2 = f o n t . g e t A t t r i b u t e ( ' s t y l e ' ) ; i f ( n o d e ! = = f o n t & & c l a s s N a m e = = = c l a s s N a m e 2 & & s t y l e = = = s t y l e 2 ) { r e m o v e ( n o d e , f o n t ) ; c o n t i n u e ; } } } 
 r a n g e . c r e a t e ( s t a r t P o i n t . n o d e , s t a r t P o i n t . o f f s e t , e n d P o i n t . n o d e , e n d P o i n t . o f f s e t ) . s e l e c t ( ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . f o n t S i z e = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , v a l u e ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; e v e n t . p r e v e n t D e f a u l t ( ) ; $ . s u m m e r n o t e . p l u g i n E v e n t s . a p p l y F o n t ( e v e n t , e d i t o r , l a y o u t I n f o , n u l l , n u l l , v a l u e ) ; e d i t o r . a f t e r C o m m a n d ( $ e d i t a b l e ) ; } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . c o l o r = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , s O b j C o l o r ) { v a r   o C o l o r = J S O N . p a r s e ( s O b j C o l o r ) ; v a r   f o r e C o l o r = o C o l o r . f o r e C o l o r , b a c k C o l o r = o C o l o r . b a c k C o l o r ; i f ( f o r e C o l o r ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . f o r e C o l o r ( e v e n t , e d i t o r , l a y o u t I n f o , f o r e C o l o r ) ; } 
 i f ( b a c k C o l o r ) { $ . s u m m e r n o t e . p l u g i n E v e n t s . b a c k C o l o r ( e v e n t , e d i t o r , l a y o u t I n f o , b a c k C o l o r ) ; } } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . f o r e C o l o r = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , f o r e C o l o r , p r e v i e w ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; $ . s u m m e r n o t e . p l u g i n E v e n t s . a p p l y F o n t ( e v e n t , e d i t o r , l a y o u t I n f o , f o r e C o l o r , n u l l , n u l l ) ; i f ( ! p r e v i e w ) { e d i t o r . a f t e r C o m m a n d ( $ e d i t a b l e ) ; } } ; $ . s u m m e r n o t e . p l u g i n E v e n t s . b a c k C o l o r = f u n c t i o n ( e v e n t , e d i t o r , l a y o u t I n f o , b a c k C o l o r , p r e v i e w ) { v a r   $ e d i t a b l e = l a y o u t I n f o . e d i t a b l e ( ) ; v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! r ) r e t u r n ; i f ( r . i s C o l l a p s e d ( ) & & r . i s O n C e l l ( ) ) { v a r   c e l l = d o m . a n c e s t o r ( r . s c , d o m . i s C e l l ) ; c e l l . c l a s s N a m e = c e l l . c l a s s N a m e . r e p l a c e ( n e w   R e g E x p ( ' ( ^ | \ \ s + ) b g - [ ^ \ \ s ] + ( \ \ s + | $ ) ' , ' g i ' ) , ' ' ) ; c e l l . s t y l e . b a c k g r o u n d C o l o r = " " ; i f ( b a c k C o l o r . i n d e x O f ( ' b g - ' ) ! = = - 1 ) { c e l l . c l a s s N a m e + = '   ' + b a c k C o l o r ; } e l s e   i f ( b a c k C o l o r ! = = ' i n h e r i t ' ) { c e l l . s t y l e . b a c k g r o u n d C o l o r = b a c k C o l o r ; } 
 r e t u r n ; } 
 $ . s u m m e r n o t e . p l u g i n E v e n t s . a p p l y F o n t ( e v e n t , e d i t o r , l a y o u t I n f o , n u l l , b a c k C o l o r , n u l l ) ; i f ( ! p r e v i e w ) { e d i t o r . a f t e r C o m m a n d ( $ e d i t a b l e ) ; } } ; o p t i o n s . o n C r e a t e L i n k = f u n c t i o n ( s L i n k U r l ) { i f ( s L i n k U r l . i n d e x O f ( ' m a i l t o : ' ) = = = 0 | | s L i n k U r l . i n d e x O f ( ' t e l : ' ) = = = 0 ) { s L i n k U r l = s L i n k U r l . r e p l a c e ( / ^ t e l : ( [ 0 - 9 ] + ) $ / , ' t e l : / / $ 1 ' ) ; } e l s e   i f ( s L i n k U r l . i n d e x O f ( ' @ ' ) ! = = - 1 & & s L i n k U r l . i n d e x O f ( ' : ' ) = = = - 1 ) { s L i n k U r l = ' m a i l t o : ' + s L i n k U r l ; } e l s e   i f ( s L i n k U r l . i n d e x O f ( ' : / / ' ) = = = - 1 & & s L i n k U r l [ 0 ] ! = = ' / ' & & s L i n k U r l [ 0 ] ! = = ' # ' & & s L i n k U r l . s l i c e ( 0 , 2 ) ! = = ' $ { ' ) { s L i n k U r l = ' h t t p : / / ' + s L i n k U r l ; } 
 r e t u r n   s L i n k U r l ; } ; f u n c t i o n   s u m m e r n o t e _ t a b l e _ s c r o l l ( e v e n t ) { v a r   r = r a n g e . c r e a t e ( ) ; i f ( r & & r . i s O n C e l l ( ) ) { $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; } } 
 f u n c t i o n   s u m m e r n o t e _ t a b l e _ u p d a t e ( o S t y l e ) { v a r   r = r a n g e . c r e a t e ( ) ; i f ( ! o S t y l e . r a n g e | | ! r | | ! r . i s O n C e l l ( ) | | ! r . i s O n C e l l F i r s t ( ) ) { $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; r e t u r n ; } 
 v a r   t a b l e = d o m . a n c e s t o r ( o S t y l e . r a n g e . s c , d o m . i s T a b l e ) ; i f ( ! t a b l e ) { r e t u r n ; } 
 v a r   $ e d i t a b l e = $ ( t a b l e ) . c l o s e s t ( ' . o _ e d i t a b l e ' ) ; $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; v a r   $ d e l s = $ ( ) ; v a r   $ a d d s = $ ( ) ; v a r   $ t d s = $ ( ' t r : f i r s t ' , t a b l e ) . c h i l d r e n ( ) ; $ t d s . e a c h ( f u n c t i o n ( ) { v a r   $ t d = $ ( t h i s ) ; v a r   p o s = $ t d . o f f s e t ( ) ; v a r   $ d e l = $ ( ' < s p a n   c l a s s = " o _ t a b l e _ h a n d l e r   f a   f a - m i n u s - s q u a r e " / > ' ) . a p p e n d T o ( ' b o d y ' ) ; $ d e l . d a t a ( ' t d ' , t h i s ) ; $ d e l s = $ d e l s . a d d ( $ d e l ) ; $ d e l . c s s ( { l e f t : ( ( p o s . l e f t + $ t d . o u t e r W i d t h ( ) / 2 ) - 6 ) + " p x " , t o p : ( p o s . t o p - 6 ) + " p x " } ) ; v a r   $ a d d = $ ( ' < s p a n   c l a s s = " o _ t a b l e _ h a n d l e r   f a   f a - p l u s - s q u a r e " / > ' ) . a p p e n d T o ( ' b o d y ' ) ; $ a d d . d a t a ( ' t d ' , t h i s ) ; $ a d d s = $ a d d s . a d d ( $ a d d ) ; $ a d d . c s s ( { l e f t : ( p o s . l e f t - 6 ) + " p x " , t o p : ( p o s . t o p - 6 ) + " p x " } ) ; } ) ; v a r   $ l a s t = $ t d s . l a s t ( ) ; v a r   p o s = $ l a s t . o f f s e t ( ) ; v a r   $ a d d = $ ( ' < s p a n   c l a s s = " o _ t a b l e _ h a n d l e r   f a   f a - p l u s - s q u a r e " / > ' ) . a p p e n d T o ( ' b o d y ' ) ; $ a d d s = $ a d d s . a d d ( $ a d d ) ; $ a d d . c s s ( { l e f t : ( p o s . l e f t + $ l a s t . o u t e r W i d t h ( ) - 6 ) + " p x " , t o p : ( p o s . t o p - 6 ) + " p x " } ) ; v a r   $ t a b l e = $ ( t a b l e ) ; $ d e l s . d a t a ( ' t a b l e ' , t a b l e ) . o n ( ' m o u s e d o w n ' , f u n c t i o n ( e v e n t ) { v a r   t d = $ ( t h i s ) . d a t a ( ' t d ' ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e ) ; v a r   n e w T d ; i f ( $ ( t d ) . s i b l i n g s ( ) . l e n g t h ) { v a r   e q = $ ( t d ) . i n d e x ( ) ; $ t a b l e . f i n d ( ' t r ' ) . e a c h ( f u n c t i o n ( ) { $ ( ' >   t d : e q ( ' + e q + ' ) ' , t h i s ) . r e m o v e ( ) ; } ) ; n e w T d = $ t a b l e . f i n d ( ' t r : f i r s t   >   t d : e q ( ' + e q + ' ) ,   t r : f i r s t   >   t d : l a s t ' ) . f i r s t ( ) ; } e l s e { v a r   p r e v = d o m . l a s t C h i l d ( d o m . h a s C o n t e n t B e f o r e ( d o m . a n c e s t o r H a v e P r e v i o u s S i b l i n g ( $ t a b l e [ 0 ] ) ) ) ; $ t a b l e . r e m o v e ( ) ; $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; r = r a n g e . c r e a t e ( p r e v , p r e v . t e x t C o n t e n t . l e n g t h ) ; r . s e l e c t ( ) ; $ ( r . s c ) . t r i g g e r ( ' m o u s e u p ' ) ; r e t u r n ; } 
 $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; r a n g e . c r e a t e ( n e w T d [ 0 ] , 0 , n e w T d [ 0 ] , 0 ) . s e l e c t ( ) ; n e w T d . t r i g g e r ( ' m o u s e u p ' ) ; } ) ; $ a d d s . d a t a ( ' t a b l e ' , t a b l e ) . o n ( ' m o u s e d o w n ' , f u n c t i o n ( e v e n t ) { v a r   t d = $ ( t h i s ) . d a t a ( ' t d ' ) ; $ e d i t a b l e . d a t a ( ' N o t e H i s t o r y ' ) . r e c o r d U n d o ( $ e d i t a b l e ) ; v a r   n e w T d ; i f ( t d ) { v a r   e q = $ ( t d ) . i n d e x ( ) ; $ t a b l e . f i n d ( ' t r ' ) . e a c h ( f u n c t i o n ( ) { $ ( ' t d : e q ( ' + e q + ' ) ' , t h i s ) . b e f o r e ( ' < t d > ' + d o m . b l a n k + ' < / t d > ' ) ; } ) ; n e w T d = $ t a b l e . f i n d ( ' t r : f i r s t   t d : e q ( ' + e q + ' ) ' ) ; } e l s e { $ t a b l e . f i n d ( ' t r ' ) . e a c h ( f u n c t i o n ( ) { $ ( t h i s ) . a p p e n d ( ' < t d > ' + d o m . b l a n k + ' < / t d > ' ) ; } ) ; n e w T d = $ t a b l e . f i n d ( ' t r : f i r s t   t d : l a s t ' ) ; } 
 $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; r a n g e . c r e a t e ( n e w T d [ 0 ] , 0 , n e w T d [ 0 ] , 0 ) . s e l e c t ( ) ; n e w T d . t r i g g e r ( ' m o u s e u p ' ) ; } ) ; $ d e l s . c s s ( { ' p o s i t i o n ' : ' a b s o l u t e ' , ' c u r s o r ' : ' p o i n t e r ' , ' b a c k g r o u n d - c o l o r ' : ' # f f f ' , ' c o l o r ' : ' # f f 0 0 0 0 ' } ) ; $ a d d s . c s s ( { ' p o s i t i o n ' : ' a b s o l u t e ' , ' c u r s o r ' : ' p o i n t e r ' , ' b a c k g r o u n d - c o l o r ' : ' # f f f ' , ' c o l o r ' : ' # 0 0 f f 0 0 ' } ) ; } 
 v a r   f n _ p o p o v e r _ u p d a t e = e v e n t H a n d l e r . m o d u l e s . p o p o v e r . u p d a t e ; e v e n t H a n d l e r . m o d u l e s . p o p o v e r . u p d a t e = f u n c t i o n ( $ p o p o v e r , o S t y l e , i s A i r M o d e ) { f n _ p o p o v e r _ u p d a t e . c a l l ( t h i s , $ p o p o v e r , o S t y l e , i s A i r M o d e ) ; i f ( ( i s A i r M o d e ? $ p o p o v e r : $ p o p o v e r . p a r e n t ( ) ) . f i n d ( ' . n o t e - t a b l e ' ) . l e n g t h ) { s u m m e r n o t e _ t a b l e _ u p d a t e ( o S t y l e ) ; } } ; f u n c t i o n   m o u s e D o w n C h e c k l i s t ( e ) { i f ( ! d o m . i s L i ( e . t a r g e t ) | | ! $ ( e . t a r g e t ) . p a r e n t ( ' u l . o _ c h e c k l i s t ' ) . l e n g t h | | e . o f f s e t X > 0 ) { r e t u r n ; } 
 e . s t o p P r o p a g a t i o n ( ) ; e . p r e v e n t D e f a u l t ( ) ; v a r   c h e c k e d = $ ( e . t a r g e t ) . h a s C l a s s ( ' o _ c h e c k e d ' ) ; $ ( e . t a r g e t ) . t o g g l e C l a s s ( ' o _ c h e c k e d ' , ! c h e c k e d ) ; v a r   $ s u b l e v e l = $ ( e . t a r g e t ) . n e x t ( ' u l . o _ c h e c k l i s t ,   l i : h a s ( >   u l . o _ c h e c k l i s t ) ' ) . f i n d ( ' >   l i ,   u l . o _ c h e c k l i s t   >   l i ' ) ; v a r   $ p a r e n t s = $ ( e . t a r g e t ) . p a r e n t s ( ' u l . o _ c h e c k l i s t ' ) . m a p ( f u n c t i o n ( ) { r e t u r n   t h i s . p a r e n t N o d e . t a g N a m e = = = ' L I ' ? t h i s . p a r e n t N o d e : t h i s ; } ) ; i f ( c h e c k e d ) { $ s u b l e v e l . r e m o v e C l a s s ( ' o _ c h e c k e d ' ) ; d o { $ p a r e n t s = $ p a r e n t s . p r e v ( ' u l . o _ c h e c k l i s t   l i ' ) . r e m o v e C l a s s ( ' o _ c h e c k e d ' ) ; } w h i l e ( $ p a r e n t s . l e n g t h ) ; } e l s e { $ s u b l e v e l . a d d C l a s s ( ' o _ c h e c k e d ' ) ; v a r   $ l i s ; d o { $ l i s = $ p a r e n t s . n o t ( ' : h a s ( l i [ i d ^ = " c h e c k l i s t - i d " ] : n o t ( . o _ c h e c k e d ) ) ' ) . p r e v ( ' u l . o _ c h e c k l i s t   l i : n o t ( . o _ c h e c k e d ) ' ) ; $ l i s . a d d C l a s s ( ' o _ c h e c k e d ' ) ; } w h i l e ( $ l i s . l e n g t h ) ; } } 
 v a r   f n _ a t t a c h = e v e n t H a n d l e r . a t t a c h ; e v e n t H a n d l e r . a t t a c h = f u n c t i o n ( o L a y o u t I n f o , o p t i o n s ) { v a r   $ e d i t a b l e = o L a y o u t I n f o . e d i t o r ( ) . h a s C l a s s ( ' n o t e - e d i t a b l e ' ) ? o L a y o u t I n f o . e d i t o r ( ) : o L a y o u t I n f o . e d i t o r ( ) . f i n d ( ' . n o t e - e d i t a b l e ' ) ; f n _ a t t a c h . c a l l ( t h i s , o L a y o u t I n f o , o p t i o n s ) ; $ e d i t a b l e . o n ( " s c r o l l " , s u m m e r n o t e _ t a b l e _ s c r o l l ) ; $ e d i t a b l e . o n ( " m o u s e d o w n " , m o u s e D o w n C h e c k l i s t ) ; } ; v a r   f n _ d e t a c h = e v e n t H a n d l e r . d e t a c h ; e v e n t H a n d l e r . d e t a c h = f u n c t i o n ( o L a y o u t I n f o , o p t i o n s ) { v a r   $ e d i t a b l e = o L a y o u t I n f o . e d i t o r ( ) . h a s C l a s s ( ' n o t e - e d i t a b l e ' ) ? o L a y o u t I n f o . e d i t o r ( ) : o L a y o u t I n f o . e d i t o r ( ) . f i n d ( ' . n o t e - e d i t a b l e ' ) ; f n _ d e t a c h . c a l l ( t h i s , o L a y o u t I n f o , o p t i o n s ) ; $ e d i t a b l e . o f f ( " s c r o l l " , s u m m e r n o t e _ t a b l e _ s c r o l l ) ; $ e d i t a b l e . o f f ( " m o u s e d o w n " , m o u s e D o w n C h e c k l i s t ) ; $ ( ' . o _ t a b l e _ h a n d l e r ' ) . r e m o v e ( ) ; } ; o p t i o n s . i c o n s . i m a g e . i m a g e = " f i l e - i m a g e - o " ; $ . s u m m e r n o t e . l a n g [ ' e n - U S ' ] . i m a g e . i m a g e = " F i l e   /   I m a g e " ; r e t u r n   $ . s u m m e r n o t e ; } ) ; ; 
 
 / *   < i n l i n e   a s s e t >   d e f i n e d   i n   b u n d l e   ' w e b _ e d i t o r . a s s e t s _ s u m m e r n o t e '   * / 
 w i n d o w . d e f i n e = o d o o . _ _ d e f i n e _ _ ; d e l e t e   o d o o . _ _ d e f i n e _ _ ; d e l e t e   o d o o . w e b s i t e _ n e x t _ d e f i n e ; d e l e t e   o d o o . _ _ e n a b l e _ s u m m e r n o t e _ _ ;    O       http://hr.deerom.com/web/content/218-ee131e4/1/web_editor.assets_summernote.js     %     %                       C6   Q      Q    =   6   Q      =       Q    =   6   Q      =       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =	   6   Q      P	   
    Q    =
   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P       Q    =   6   Q      P        Q    =   6   Q      Z    !    Q    =   6   Q      P"   #    Q    =   6   Q      Z    $    Q    =   6   Q      P%   &    Q    =   6   Q      P'   (    Q    =   6   Q      P)   *    Q    =   6   Q      P+   ,    Q    =   6   Q      P-   .    Q    =   6   Q      P/   0    Q    =   6   Q      P1   2    Q    =   6   Q      =   3    Q    =    6   Q      P4   5    Q       
=!   6    Q"       5#   6   Q    %#   Q    %   Q    %   Q
),/7:=twz}         y    " 	   odoo+   __enable_summernote__+   summernote/core/async'   website_next_define   define)   summernote/core/func+   summernote/core/agent)   summernote/core/list'   summernote/core/dom'   summernote/core/key+   summernote/core/range3   summernote/editing/Bullet5   summernote/editing/History1   summernote/editing/Style1   summernote/editing/Table3   summernote/editing/Typing1   summernote/module/Editor1   summernote/module/Button7   summernote/module/Clipboard5   summernote/module/Codeview;   summernote/module/DragAndDrop9   summernote/module/Fullscreen1   summernote/module/Handle9   summernote/module/HelpDialog;   summernote/module/ImageDialog9   summernote/module/LinkDialog3   summernote/module/Popover7   summernote/module/Statusbar3   summernote/module/Toolbar'   summernote/Renderer/   summernote/EventHandler'   summernote/defaults+   summernote/summernote+   web_editor.summernote   window   __define__!!            +H!!        C   G                                                  s     s                           
=        Q>   Q       5   0   Q      0   Q0	u 	   odoo   define   jquery   window   __define__!!      uniqId         +H!!        C                                                      "    "     6                  9	    $!!              +H;      5!!    	      window.definec          b                                     e  q  ]  q                  	W  Q    5          5   5      
V  l W   QV      
:  W  QV   >7U  QT     r*  =      #   W  Q    V  V  9Q=   W  Q=	   V  =
   V  =   W  QV  =   W  Q>W  Q `   mV  =      #   =   T  V  7=   W  QV  =      =   W  QV  #W  QQV  T     V  =   W  Q       
    5      A=   V  V  ,  R  Q          
T  V   Q  s  *	'6&`Ro6%L 	   odoo+   __enable_summernote__   Array   prototype   slice	   call   pop)   summernote_factorie_      var fn = odoo.   ;
delete odoo.   ;
   return fn(   var a    = require("	   ");
   a   ,    length   null);   define'   website_next_define   Function   require!!      id	   args   factorie	   name	   head   fn   k   arguments       +H;       o   A      5 ;5!!       C                                                       b    b                       :  W   QV   .  !!      async         +H!!           async<c   -                                                    P    P                       W   Q   W  Q[   V   ]    V  ]   D  c$ #   readFileAsDataURL   createImage!!   #   readFileAsDataURL   createImage         +H!!       #   readFileAsDataURLB            ^           	   file    B                          deferred   B   S    S               5    B  d  ~  \  ~              5 55!!          createImageB   
    
     Z  0       	   sUrl    filename   B              0          deferred 	   $img    B    P    P              5    B  l    d       
         5 55!!       !!#   readFileAsDataURL!!!!   createImage!!    ;5;5!!       C                                                     s    k                         :  W   QV   -  !!   	   func         +H!!           func<c             V                                          z    z                       W   Q   W  Q   W  Q   W  Q   W  Q   W  Q   W  Q   W  Q>   Q   W  Q	   W	  Q
   W
  Q   W  Q[   V   ]    V  ]   V  ]   V  ]   V  ]   V  ]   V  ]   V  ]   V  ]   V	  ]	   V
  ]
   V  ]   BG5f #FL Q    


#    eq   eq2	   peq2   ok	   fail	   self   not   and   uniqueId   rect2bnd   invertObject!   namespaceToCamel!!      eq   eq2	   peq2   ok	   fail   not   and	   self   idCounter   uniqueId   rect2bnd   invertObject!   namespaceToCamel        +H!!           eqB            M              itemA    B            d          5 5!!          eq2B   	    	               5!!       	   peq2B 	  l	  	  l	                   propName   B 2	  j	  *	  j	               5 5!!          okB  |	  	  t	  	     /         5 !!       	   failB  	  	  	  	     Q         5 !!          notC                                                  	  	  	  	                         w0 !!      f       +H!!          not/<b  	  	  	  	              5;5!!          andC                                                  
  A
  	  A
                         2 !!      fA   fB       +H!!          and/<b 
  ?
  
  ?
              5;5!!       	   selfB S
  a
  K
  a
              5 !!          uniqueIdB 
  
  
  
     :         5 !!          rect2bndB 
    
                5 !!          invertObjectC W                                                         O            [    W   QT  K5   mW  T      
V  :    V   T  V  7V  8QQLMQNV    Y8:    hasOwnProperty!!      obj   inverted   key       +H!!            ;      <   0       5 !!       !   namespaceToCamelB +    #       /             B     w                 5 5!!       !!   eq!!!!   eq2!!!!	   peq2!!!!   ok!!!!	   fail!!!!	   self!!!!   not!!!!   and!!!!   uniqueId!!!!   rect2bnd!!!!   invertObject!!!!!   namespaceToCamel!!    ;5 ;5!!      !!   jquery    !!       C  c      #                            6                                         5   5           5       6   Q=       5   5   I       5      6   Q    5   5           5      6   Q   '=   HE   Q   5   W   Q   W  Q   5	   W  Q   
   
V  : W  QV  {         
V  : W  QV           V  ?7: W  Q      
V  : W  QV           V  ?7: W  Q[
      5      
=   : ]   V  ]      
   
V  : ]      
   
V  : ]   	   
   
V  : ]   V  ]            5   5   : ]   V   ]   V            
=   :       5     ]   V  ]       5!     ]"   W  QV  !'+ "/'      Array   prototype   reduce   function   filter   map   define   amd   navigator   userAgent	   test	   exec   parseFloat   appVersion   indexOf   Mac   isMac   isMSIE	   isFF   isWebkit   isSafari   browserVersion   fn   jquery   jqueryVersion   isSupportAmd   require   specified   CodeMirror   window   hasCodeMirror   isFontInstalled   document   createRange#   isW3CRangeSupport!!      $   isSupportAmd   isFontInstalled   userAgent   isMSIE   browserVersion   matches   agent      +H!!       -   Array.prototype.reduceb            Y   s       5 !!       -   Array.prototype.filterb U  +  M  +     N   C       5!!       '   Array.prototype.mapb c    [    !   5   c       5 !!          isFontInstalledB Y    Q    '   T          5!!   MSIE|Trident   !!!   MSIE (\d+[.]\d+)    !!I   Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})    !!   firefox   !!   webkit   !!   safari   !!       !!   isMac!!!!   isMSIE!!!!	   isFF!!!!   isWebkit!!!!   isSafari!!!!   browserVersion!!!!   jqueryVersion!!!!   isSupportAmd!!!!   hasCodeMirror!!!!   isFontInstalled!!!!#   isW3CRangeSupport!!    ;5!!      !!)   summernote/core/func    !!       C                                                    8     8   /                     :  W   QV   37   !!   	   func	   list      +H!!           list<c   $         d                                         '     '   /       
                 Q      Q   W   Q      Q   W  Q   W  Q      Q      Q   W  Q	   W  Q
   W  Q   W  Q   W  Q   W  Q   W	  Q[      ]       ]   V   ]      ]   V	  ]   V  ]   V  ]      ]   V  ]   V  ]	   V  ]
   V  ]   V  ]   V  ]   H+8C1@Dj3%






 	   head	   last   initial	   tail	   prev	   next	   find   contains   all   sum	   from   clusterBy   compact   unique!!   	   head	   last   initial	   tail	   find   all   indexOf   contains   sum	   from   clusterBy   compact   unique	   next	   prev     
   +H!!        	   headB )  B  !  B  /   U          5 !!       	   lastB T  z  L  z  /             5 !!          initialB         /             5!!       	   tailB         /             5 !!       	   findB    m    m  /   ,  0       5 !!          allB ~    v    /     0       5!!          indexOfB   ,    ,  0   "          5!!          containsB B  p  :  p  0   c          5 !!          sumB     y    0                 fn    B         0             5 5!!       	   fromB   h    h  0             5!!          clusterByB   a  w  a  1   &   0          fn   B   N    N  2   2   0       5 5!!          compactB v    n    3   5   0       5!!          uniqueB 
        4   $   0       5 !!       	   nextB         5   "           5!!       	   prevB   s    s  6   '           5!!       !!	   head!!!!	   last!!!!   initial!!!!	   tail!!!!	   prev!!!!	   next!!!!	   find!!!!   contains!!!!   all!!!!   sum!!!!	   from!!!!   clusterBy!!!!   compact!!!!   unique!!    ;5 ;5!!      !!)   summernote/core/func!!)   summernote/core/list!!+   summernote/core/agent    !!        C  9                                               x!  Y  p!  Y  =                         
X :    Q=      Q    :     Q   m
"t     String   fromCharCode    !!   	   func	   list   agent   NBSP_CHAR)   ZERO_WIDTH_NBSP_CHAR   dom       +H!!        	   dom<c         e   7      =                  A              !  Y  !  Y  =          #              Q   W  Q      Q   W  Q   W  Q    "  Q    #  Q      QV  =    :    Q   W  QV  =   :    Q	      Q
      QV  =   :    Q      QV  =   :    Q    '  QV  =   : W  Q   W  Q   W  QV  =   : W   Q   W  Q   W  Q  5   E   Q  5      =      =	      Q      Q      Q      Q    !  Q   W  Q       Q   W  Q   W  Q   W  Q      Q   W  Q   W  Q    
  Q      Q      Q       Q!      Q"      Q#      Q$   W  Q%   W  Q&      Q'      Q(      Q)    	  Q*      Q+   W  Q,   W	  Q-   W  Q.   W  Q/   W  Q0   W  Q1   W  Q2    %  Q3    $  Q4   W
  Q5      Q6   W  Q7    &  Q8   W  Q9   W  QV  =
   :    Q:      Q;   W  Q[<     ]     ]      ]   =      =   ]   V  ]      ]   V  ]      ]   V  ]    "  ]    #  ]      ]   V  ]      ]        
   : ]   V  ]   V   ]   V  ]      ]       ]!      ]"      ]#    '  ]$   V  ]%   V  =&   : ]'      ](   V  =)   : ]*   V  =+   : ],   V  =-   : ].   V  =/   : ]0   V  =1   : ]2   V  =3   : ]4   V  =5   : ]6      ]7      ]8     9   
V     : ]:   V  ];   V  ]<      ]=      ]>      ]?      ]@      ]A      ]B   V  ]C   V  ]D      ]E    	  ]F      ]G   V  ]H   V	  ]I   V  ]J   V  ]K   V  ]L    !  ]M   V  ]N       ]O   V  ]P      ]Q   V  ]R   V  ]S   V  ]T   V  ]U    
  ]V      ]W      ]X      ]Y   V  ]Z   V  ][    $  ]\   V
  ]]      ]^   V  ]_    &  ]`   V  ]a   V  ]b   V  ]c      ]d     OZ B?&  ;jKA   UU%_	QPmBD$eGK*qOQ~  v>TYUWruYZ&\&j^`b_    gick2HEo;rq#*!&   
"( "$&(
"
    LI   TABLE   HR   BLOCKQUOTE   A	   BODY   isMSIE   browserVersion   &nbsp;	   <br>   TEXTAREA   NBSP_CHAR)   ZERO_WIDTH_NBSP_CHAR   blank   <p>	   </p>   emptyPara%   makePredByNodeName   isEditable   isControlSizing   buildLayoutInfo   makeLayoutInfo   isText   isVoid   isPara   isPurePara   isInline   not   isBlock   isBodyInline   isBody   isParaInline   isList   isTable   isCell   isBlockquote   isBodyContainer   isAnchor   DIV   isDiv	   isLi   BR	   isBR	   SPAN   isSpan   B   isB   U   isU   S   isS   I   isI   IMG   isImg   isTextarea   isEmpty   and   isEmptyAnchor!   isClosestSibling'   withClosestSiblings   nodeLength   isLeftEdgePoint!   isRightEdgePoint   isEdgePoint   isLeftEdgeOf   isRightEdgeOf#   isLeftEdgePointOf%   isRightEdgePointOf   prevPoint   nextPoint   isSamePoint   isVisiblePoint   prevPointUntil   nextPointUntil   isCharPoint   walkPoint   ancestor'   singleChildAncestor   listAncestor   lastAncestor   listNext   listPrev   listDescendant   commonAncestor	   wrap   insertAfter!   appendChildNodes   position   hasChildren   makeOffsetPath   fromOffsetPath   splitTree   splitPoint   create   createText   remove   removeWhile   replace	   html   value!!D      nodeLength   hasChildren   isBlockquote   position   isEmpty!   paddingBlankHTML   isTextarea   isBody   nextPoint   walkPoint   insertAfter   isSamePoint'   withClosestSiblings	   html	   isHr   commonAncestor   isBodyInline   value   makeLayoutInfo   prevPoint   isAnchor   buildLayoutInfo   createText   prevPointUntil   splitPoint   listDescendant   isCell   isVisiblePoint   isLeftEdgePoint   listNext   isEditable   isList   listPrev   isInline   isControlSizing	   isLi   isPara   nextPointUntil!   appendChildNodes   replace   fromOffsetPath   create   isLeftEdgeOf'   singleChildAncestor!   isClosestSibling   isRightEdgeOf   removeWhile%   isRightEdgePointOf   isPurePara!   isRightEdgePoint	   wrap   blankHTML   isTable   isEdgePoint   listAncestor%   makePredByNodeName   isParaInline   isCharPoint#   isLeftEdgePointOf   ancestor   isText   lastAncestor   isVoid   splitTree   splitNode   makeOffsetPath   remove   isBodyContainer        +H!!           isEditableB !  5"  !  5"  =             5 !!          isControlSizingB R"  "  J"  "  =   1         5!!          buildLayoutInfoB "  &  "  &  =     P          $editor    id    B :#  r#  2#  r#  =                sIdPrefix    B  U#  p#  M#  p#  =   4         5 5   B  #  #  #  #  =   h         5    B  #  #  #  #  =            5    B  #  #  #  #  =            5    B y$  $  q$  $  =   X  0          className    $base    B  $  $  $  $  =            5 5   B  V%  i%  N%  i%  =   5         5    B  y%  %  q%  %  =   X         5 5!!          makeLayoutInfoB &  3(  &  3(  =     @       5!!       %   makePredByNodeNameC                                                S(  (  K(  (  ?                         
:     Q    L	L    toUpperCase!!      nodeName       +H!!        )   makePredByNodeName/<b (  (  (  (  ?   {          5 ;5!!          isTextB (  )  (  )  ?             5 !!          isVoidB )  p)  )  p)  ?            5 !!          isParaB )  )  |)  )  ?   r          5!!          isPureParaB /*  X*  '*  X*  @             5 !!          isInlineB *  +  *  +  @             5 !!          isListB +  `+  +  `+  @   p         5 !!          isCellB +  +  +  +  @            5 !!          isBodyContainerB &,  h,  ,  h,  @   w         5!!          isParaInlineB ,  ,  ,  ,  @            5 !!          isBodyInlineB ,  .-  ,  .-  @   I         5 !!       !   isClosestSiblingB r-  -  j-  -  @            5 !!       '   withClosestSiblingsB -  .  -  .  @   3  0       5!!          nodeLengthB </  /  4/  /  B   m           5!!          isEmptyB /  0  /  0  C   4   @       5 !!       !   paddingBlankHTMLB 0  0  0  0  D   ,           5!!          ancestorB 0  u1  0  u1  D      @       5!!       '   singleChildAncestorB 1  B2  1  B2  G   .   P       5!!          listAncestorB \2  2  T2  2  K   '   0       	   pred    ancestors   B 2  2  2  2  K   o           55!!          lastAncestorB 3  h3  	3  h3  L   ?          5 !!          commonAncestorB 3  4  |3  4  L      0       5 !!          listPrevB #4  4  4  4  M   #   0       5 !!          listNextB 4  M5  4  M5  O   $   0       5 !!          listDescendantB i5  l6  a5  l6  Q   *   @       	   node 	   pred    descendents       fnWalkB 5  P6  5  P6  Q   l   @       55!!       	   wrapB ~6  7  v6  7  R             5 !!          insertAfterB 77  7  /7  7  R   D  0       5!!       !   appendChildNodesB 7  O8  7  O8  S   +           	   node   B 8  @8  8  @8  S   O          5 5!!          isLeftEdgePointB l8  8  d8  8  S             5!!       !   isRightEdgePointB 8  8  8  8  S             5 !!          isEdgePointB 8  :9  8  :9  S   .         5!!          isLeftEdgeOfB T9  9  L9  9  S     0       5 !!          isRightEdgeOfB 9  y:  9  y:  U   (   0       5!!       #   isLeftEdgePointOfB :  :  :  :  W   ,          5!!       %   isRightEdgePointOfB ;  `;  ;  `;  W             5 !!          positionB v;  ;  n;  ;  W   
          5!!          hasChildrenB ;  !<  ;  !<  X   (          5!!          prevPointB 8<  =  0<  =  X      P       5!!          nextPointB =  8?  =  8?  Z   8   P       5!!          isSamePointB Q?  ?  I?  ?  \   :          5!!          isVisiblePointB ?  @  ?  @  \      0       5 !!          prevPointUntilB @  YA  @  YA  ^   *   0       5 !!          nextPointUntilB uA  A  mA  A  `   )   0       5 !!          isCharPointB A  vB  A  vB  b   &           5 !!          walkPointB B  C  B  C  c   q   0       5!!          makeOffsetPathB C  "D  C  "D  d             5 !!          fromOffsetPathB >D  2E  6D  2E  d   (  @       5!!          splitNodeB IE  G  AE  G  e   '   p       5!!          splitTreeB G  VI  G  VI  g   &   P          point    options   B H  SI  H  SI  h               55!!          splitPointB nI  K  fI  K  i   v   @       5!!          createB K  K  K  K  k   A          5 !!          createTextB K  &L  K  &L  k             5 !!          removeB :L  M  2L  M  k      `       5!!          removeWhileB M  9N  M  9N  o   3   0       5!!          replaceB NN  pO  FN  pO  p   K   0       5!!          valueB O  BP  O  BP  r              5 !!       	   htmlB TP  "R  LP  "R  s                B P  Q  P  Q  s             5 5!!    N   !!   NBSP_CHAR!!!!)   ZERO_WIDTH_NBSP_CHAR!!!!   blank!!!!   emptyPara!!!!%   makePredByNodeName!!!!   isEditable!!!!   isControlSizing!!!!   buildLayoutInfo!!!!   makeLayoutInfo!!!!   isText!!!!   isVoid!!!!   isPara!!!!   isPurePara!!!!   isInline!!!!   isBlock!!!!   isBodyInline!!!!   isBody!!!!   isParaInline!!!!   isList!!!!   isTable!!!!   isCell!!!!   isBlockquote!!!!   isBodyContainer!!!!   isAnchor!!!!   isDiv!!!!	   isLi!!!!	   isBR!!!!   isSpan!!!!   isB!!!!   isU!!!!   isS!!!!   isI!!!!   isImg!!!!   isTextarea!!!!   isEmpty!!!!   isEmptyAnchor!!!!!   isClosestSibling!!!!'   withClosestSiblings!!!!   nodeLength!!!!   isLeftEdgePoint!!!!!   isRightEdgePoint!!!!   isEdgePoint!!!!   isLeftEdgeOf!!!!   isRightEdgeOf!!!!#   isLeftEdgePointOf!!!!%   isRightEdgePointOf!!!!   prevPoint!!!!   nextPoint!!!!   isSamePoint!!!!   isVisiblePoint!!!!   prevPointUntil!!!!   nextPointUntil!!!!   isCharPoint!!!!   walkPoint!!!!   ancestor!!!!'   singleChildAncestor!!!!   listAncestor!!!!   lastAncestor!!!!   listNext!!!!   listPrev!!!!   listDescendant!!!!   commonAncestor!!!!	   wrap!!!!   insertAfter!!!!!   appendChildNodes!!!!   position!!!!   hasChildren!!!!   makeOffsetPath!!!!   fromOffsetPath!!!!   splitTree!!!!   splitPoint!!!!   create!!!!   createText!!!!   remove!!!!   removeWhile!!!!   replace!!!!	   html!!!!   value!!    ;5 ;5!!      !!)   summernote/core/list!!)   summernote/core/func    !!       C                                                  Z  ]  Z  ]  z                     :  W   QV   O u !!   	   list	   func   key      +H!!        	   key<c   4      &   \                                       [  u]  [  u]  z                  [    ]    	]   ]    ]   %]   &]   ']   (]   0]   1]	   2]
   3]   4]   5]   6]   7]   8]   B]   E]   I]   J]   K]   L]   R]   S]   U]   V]   Y]   Z]   X ]   X ]   X ]   X ]       Q[      ]!      ]"     #   
   : ]$      ]%   c










qj    BACKSPACE   TAB   ENTER   SPACE	   LEFT   UP   RIGHT	   DOWN	   NUM0	   NUM1	   NUM2	   NUM3	   NUM4	   NUM5	   NUM6	   NUM7	   NUM8   B   E   I   J   K   L   R   S   U   V   Y   Z   SLASH   LEFTBRACKET   BACKSLASH   RIGHTBRACKET   isEdit   isMove   invertObject   nameFromCode	   code!!      keyMap         +H!!    !   !!   BACKSPACE!!!!   TAB!!!!   ENTER!!!!   SPACE!!!!	   LEFT!!!!   UP!!!!   RIGHT!!!!	   DOWN!!!!	   NUM0!!!!	   NUM1!!!!	   NUM2!!!!	   NUM3!!!!	   NUM4!!!!	   NUM5!!!!	   NUM6!!!!	   NUM7!!!!	   NUM8!!!!   B!!!!   E!!!!   I!!!!   J!!!!   K!!!!   L!!!!   R!!!!   S!!!!   U!!!!   V!!!!   Y!!!!   Z!!!!   SLASH!!!!   LEFTBRACKET!!!!   BACKSLASH!!!!   RIGHTBRACKET!!    !!           isEditB t\  \  l\  \  z            5 !!          isMoveB \  ?]  \  ?]  z   5         5 !!       !!   isEdit!!!!   isMove!!!!   nameFromCode!!!!	   code!!    ;5;5!!      !!+   summernote/core/agent!!)   summernote/core/func!!)   summernote/core/list!!'   summernote/core/dom    !!       C                                                  ^    ^                         :  W   QV         !!      agent	   func	   list   dom   range      +H!!           range<c   n          C       
                                _     _                             Q      Q      Q[	      ]       ]      ]      ]      ]      ]      ]       + 6   '"VQ       WrappedRange   create   createFromNode)   createFromNodeBefore'   createFromNodeAfter%   createFromBookmark-   createFromParaBookmark!!   !   textRangeToPoint!   pointToTextRange   WrappedRange         +H!!        !   textRangeToPointB (_  Bd   _  Bd        p       5 !!       !   pointToTextRangeB `d  g  Xd  g     D              textRangeInfo    B d  f  zd  f     f   @       55!!          WrappedRangeB g    g       K  b          sc    so    ec    eo    nativeRange    B  g  i  g  i       0       5    B  i  Ci  i  Ci              5    B  _i  }i  Wi  }i              5    B  i  i  i  i     E         5    B  i  j  i  j     x  B       5   B  j  n  j  n     %             B j  	n  j  	n     D   @       55   B o  q  n  q       b       	   pred    includeAncestor    fullyContains    nodes    leftEdgeNodes   B p  q  p  q              55   B  q  q  q  q     g          5    B q  s  q  s        B       5   B s  Tt  s  Tt     y   0       5    B  lt  "v  dt  "v       B       5   B  fv  x  ^v  x        R          nodes    point    emptyParents    B w  ?w  w  ?w               5    B jw  w  bw  w                5   B x  9x  x  9x     6          5 5   B x  y  x  y                	   pred   B  x  y  x  y               5 5   B y  dz  y  dz       "       5   B  ~z  z  vz  z     k          5    B  z  ~  z  ~               5   B ~  *  ~  *     2   2          B g    _                 5 5   B B  S  :  S     %   "          rng    B   F    F               5 5   B  j    b       M         5    B   ]    ]       2          B t    l       3          5    B                      5 5   B t    l       q          5    B 	                    5    B                      5 5!!          createB 8  .  0  .     5         5!!          createFromNodeB F  r  >  r     >   B       5!!       )   createFromNodeBeforeB            ?          5 !!       '   createFromNodeAfterB                      5!!       %   createFromBookmarkB 5  	  -  	               5 !!       -   createFromParaBookmarkB )  
  !  
              5 !!       !!   WrappedRange!!!!   create!!!!   createFromNode!!!!)   createFromNodeBefore!!!!'   createFromNodeAfter!!!!%   createFromBookmark!!!!-   createFromParaBookmark!!    ;5 ;5!!      !!)   summernote/core/list!!)   summernote/core/func!!'   summernote/core/dom!!+   summernote/core/range    !!       C                                                       y                         W   QV       !!   	   list	   func   dom   range   Bullet      +H!!          BulletC  p         '                                          w    w                   W   QV       6    QV      6   QV      6   QV      6   QV      6   QV      6   QV      6   Q  :<  8  #   insertOrderedList'   insertUnorderedList   indent   outdent   toggleList   wrapList   releaseList!!      .this         +H!!        ;   Bullet/this.insertOrderedListb                       5!!       ?   Bullet/this.insertUnorderedListb    "     "               5!!       %   Bullet/this.indentb  7    /       #  "       	   self   B              0          B            t            B                     5 555!!       '   Bullet/this.outdentb               "       	   self    B              0          B H    @       4            B t    l       `         5 555!!       -   Bullet/this.toggleListb                        listName 	   self    wrappedParas   B   b    b              5    B                     5    B (  W     W              5 5!!       )   Bullet/this.wrapListb            N             B   =    =     s         5 5!!       /   Bullet/this.releaseListb   u    u     (   0          isEscapseToBody    releasedParas   B :  ]  2  ]     t   0          headList    B                     5    B            *          5    B i  0  a  0                  B   -    -     &          5555;5;5!!      !!+   summernote/core/range!!'   summernote/core/dom    !!       C                                                                                W   QV   O     !!      range   dom   History      +H!!          HistoryB            _      	       $editable    stack    stackOffset    editable    makeSnapshot    applySnapshot 	   last    B  8    0                 5    B '             0       5    B    q    q     p   2       5    B             Z          5    B                        5   B    C    C               5    B  e  O  ]  O     8  @       5   B  g  v  _  v     B          5    B             e          5 5;5!!      !!+   summernote/core/agent!!)   summernote/core/func!!)   summernote/core/list!!'   summernote/core/dom    !!       C                                                   H    @                         W   QV          !!      agent	   func	   list   dom   Style      +H!!           StyleC  N         &                                        p    h                     W   Q       QV      6    QV      6   QV      6   QV      6   Q  +           fromNode   stylePara   styleNodes   current!!      jQueryCSS   .this        +H!!           jQueryCSSB   a    a        @       	   $obj    result    B   %    %     
         5 5!!       '   Style/this.fromNodeb x  S  p  S     A          5!!       )   Style/this.styleParab k    c       4             styleInfo    B                     5 5!!       +   Style/this.styleNodesb                        nodeName 	   pred    nodesInRange    B {    s       k          5    B 1  a  )  a     !         5    B ~  k  v  k                	   head   B   M    M               5 55!!       %   Style/this.currentb            3  R       5 ;5;5!!      !!'   summernote/core/dom!!+   summernote/core/range!!)   summernote/core/list    !!       C             
                                                                   W   QV   k^ !!      dom   range	   list   Table      +H!!           TableC  %                                                 7    /                     W   QV       6    QV      6   Q| \    tab   createTable!!      .this         +H!!          Table/this.tabb K  N  C  N                5!!       -   Table/this.createTableb h    `         0       5 ;5;5!!      !!'   summernote/core/dom!!+   summernote/core/range!!3   summernote/editing/Bullet    !!        C             	                                        &    &                       W   QV   r2 !!      dom   range   Bullet   Typing      +H!!           TypingC  8                                                3    +                     W   Q  A,  R     QV       6    QV      6   Q    0    insertTab   insertParagraph!!      bullet   .this        +H!!        +   Typing/this.insertTabb e    ]                 5!!       7   Typing/this.insertParagraphb  :    2         p         B )  J  !  J     w         5 5;5;5!!   
   !!+   summernote/core/agent!!)   summernote/core/func!!)   summernote/core/list!!'   summernote/core/dom!!+   summernote/core/range!!+   summernote/core/async!!1   summernote/editing/Style!!3   summernote/editing/Typing!!1   summernote/editing/Table!!3   summernote/editing/Bullet    !!       C 
                                        
         $  `    `                   =       Q    W   QV    K        bogus!!      agent	   func	   list   dom   range   async   Style   Typing   Table   Bullet   KEY_BOGUS   Editor 
 
    +H!!           EditorC      .   9      -                               P    P            
       W  QV     Q  A,  R     Q	  A,  R     Q  A,  R     Q
  A,  R     QV     6    QV     6   QV     6   QV     6   QV      6   QV     6   QV     6   QV     6   QV     6   QV     6	   QV     6
   Q      Q    	  QV  	   6   QV  
   6   QV     6    
  QV     6      Qf   W   Q>W  QV      W  Q 5   mV  V   V  7   V   V  7: 8QV  #W  QQV  V  V     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   QV     6   Q?W  Q 1   mV  =   V     V  : 8QV  #W  QQV  V     6   QV     6   QV     6    QV      6!   QV  !   6"   QV  "   6#   QV  #   6$   QV  $   6%   QV  %   6&   QV  &   6'   QV  '   6(   QV  (   6)   QV  )   6*   QV  *   6+   QV  +   6,   QV  ,   6-   Q ~S^$t  F        r     5'@#    ~    ln         {&1#:z "    ) /  5    Ff    style   table   typing   bullet   createRange   saveRange   saveNode   restoreRange   restoreNode   currentStyle   styleFromNode	   undo	   redo   beforeCommand   afterCommand   length   tab   untab   insertParagraph#   insertOrderedList'   insertUnorderedList   indent   outdent   insertImage   insertNode   insertText   pasteHTML   formatBlock   formatPara   formatH   fontSize)   insertHorizontalRule   removeBogus   lineHeight   unlink   createLink   getLinkInfo   color   insertTable   floatMe   imageShape   resize   resizeTo   removeMedia   focus   isEmpty!!      handler	   self   style   table   typing   bullet+   triggerOnBeforeChange   triggerOnChange   beforeCommand   afterCommand   commands   idx   len   .this      +H!!       /   Editor/this.createRangeb ^    V       E         5!!       +   Editor/this.saveRangeb              0       5!!       )   Editor/this.saveNodeb   H    H     t           5!!       1   Editor/this.restoreRangeb c    [       >   "       5!!       /   Editor/this.restoreNodeb   y    y                5 !!       1   Editor/this.currentStyleb   =    =     o          5!!       3   Editor/this.styleFromNodeb Y    Q       .          5!!       +   triggerOnBeforeChangeB   L    L     w          5!!          triggerOnChangeB i    a       >         5!!       !   Editor/this.undob                     5 !!       !   Editor/this.redob            t         5 !!       3   Editor/this.beforeCommandb ;    3                5!!       1   Editor/this.afterCommandb   &    &               5!!      !!	   bold!!   italic!!   underline!!   strikethrough!!   superscript!!   subscript!!   justifyLeft!!   justifyCenter!!   justifyRight!!   justifyFull!!   formatBlock!!   removeFormat!!   backColor!!   foreColor!!   fontName   !!       7   Editor/this[commands[idx]]<c                                                   E    =                           !   !!   	   sCmd       +H!!       ;   Editor/this[commands[idx]]</<b [    S       0         5;5!!          Editor/this.tabb               2       5!!       #   Editor/this.untabb   G    G        "       5 !!       7   Editor/this.insertParagraphb e    ]                5!!       ;   Editor/this.insertOrderedListb   G    G              5!!       ?   Editor/this.insertUnorderedListb i    a                5!!       %   Editor/this.indentb   9    9              5 !!       '   Editor/this.outdentb O    G       o         5!!       /   Editor/this.insertImageb   ~    ~                  $editable   B 	           )         5    B    {    {              5 5!!       -   Editor/this.insertNodeb   #    #              5 !!       -   Editor/this.insertTextb <    4       \         5 !!       +   Editor/this.pasteHTMLb            -         5!!       /   Editor/this.formatBlockb   w    w              5!!       -   Editor/this.formatParab                     5 !!        C                                                   '  o    o                         	MA !!      idx       +H!!        B <  m  4  m     \	         5 ;5!!       )   Editor/this.fontSizeb   W    W     	  @       5!!       A   Editor/this.insertHorizontalRuleb z  I  r  I               5!!       /   Editor/this.removeBogusb c    [       3   @       5 !!       -   Editor/this.lineHeightb   X    X     :          5 !!       %   Editor/this.unlinkb m  _  e  _        "       5!!       -   Editor/this.createLinkb x    p                   linkInfo    linkUrl    isNewWindow   B   p    p        0       5 5!!       /   Editor/this.getLinkInfob            B         5!!       #   Editor/this.colorb            k  0       5!!       /   Editor/this.insertTableb -    %       3          5!!       '   Editor/this.floatMeb 	                     5 !!       -   Editor/this.imageShapeb            M           5!!       %   Editor/this.resizeb   -    -     .          5 !!       )   Editor/this.resizeTob D  S  <  S        0       5 !!       /   Editor/this.removeMediab m  %  e  %     2          5!!       #   Editor/this.focusb 9    1          0       5!!       '   Editor/this.isEmptyb   N    N     [          5;      @         :   5;5!!      !!)   summernote/core/list!!+   summernote/core/agent    !!        C                                                                                W   QV   Q  !!   	   list   agent   Button      +H!!          ButtonC  %                                                                          W   QV       6    QV      6   Qc *     update#   updateRecentColor!!      .this         +H!!       %   Button/this.updateb            w             $container    styleInfo 	   $img    imgFloat    style    B                          value    B  D    <                 5 5   B   &    &     }         5    B             M         5    B    A    A              5    B             ?         5    B    C    C              5    B             T         5    B  
  (    (              5    B  m    e                5    B    4    4              5    B  w    o       $         5    B    )    )              5    B  @  k  8  k     W         5    B                      5    B    4    4              5    B  l    d                5    B                      5    B  L    D       c         5    B                      5    B  >  l  6  l     U         5    B                      5    B    5    5              5    B  s    k                5    B                      5 5!!       ;   Button/this.updateRecentColorb 2    *       I         5;5;5!!      !!)   summernote/core/list!!'   summernote/core/dom!!'   summernote/core/key!!+   summernote/core/agent!!+   summernote/core/range    !!       C                                                   ,    $                         W   QV        !!   	   list   dom   key   agent   range   Clipboard      +H!!           ClipboardC !                                               ]    U                     W   Q       QV      6    Q  3R    attach!!      handler   pasteByEvent   .this      +H!!           pasteByEventB     x          @       5!!       +   Clipboard/this.attachb            G          5;5;5!!      !!+   summernote/core/agent!!'   summernote/core/dom    !!       C  i          %                                     *   "                      5    N      5   -         Z   =   `         Q      5      Q   W   QV   O	;N    hasCodeMirror   isSupportAmd   require   CodeMirror   window!!      agent   dom   CodeMirror   Codeview      +H!!       B                     5 !!          CodeviewC R                                                                     W   QV       6    QV      6   QV      6   QV      6   QV      6   Q  l  UL 	   sync   isActivated   toggle   activate   deactivate!!      handler   .this      +H!!       %   Codeview/this.syncb            1           5!!       3   Codeview/this.isActivatedb                     5!!       )   Codeview/this.toggleb "          S  2       5 !!       -   Codeview/this.activateb   	   	     @          server   B                    5 5!!       1   Codeview/this.deactivateb "      m   0       5 ;5;5!!      !!'   summernote/core/dom    !!        C                                                   0 ` ( `                     W   QV   1   !!      dom   DragAndDrop      +H!!           DragAndDropC =                                              N K F K                 W   Q           :    QV       6   QV      6   QS
        $   document   attach-   attachDragAndDropEvent!!      handler   $document   .this      +H!!       /   DragAndDrop/this.attachb  9 ~ 9   }   2         B                 5 5!!       O   DragAndDrop/this.attachDragAndDropEventb ^ I V I   U  p          layoutInfo    options    collection    $editor    $dropzone !   $dropzoneMessage    B                 5   B  	  	   >           5   B  	 R	 	 R	             5    B  u	 	 m	 	   	         5    B  	 E
 	 E
   z         5    B c
 1 [
 1               layoutInfo   B        W         5 55;5;5!!       C              	                                        m  e                      W   QV   E !!      Fullscreen         +H!!          FullscreenC F                                                                  W   Q           :    Q        =   :    QV       6   Q:C    $   window   html, body   toggle!!      handler   $window   $scrollbar   .this      +H!!        -   Fullscreen/this.toggleb          p          $toolbar    $editable    $codable    resize   B v 	 n 	             5   B        b         5 5;5;5!!      !!'   summernote/core/dom    !!        C                                                   
                        W   QV   1  !!      dom   Handle      +H!!          HandleC W                                              #                    W   Q           :    Q       QV      6   QV      6   QV      6   QN
 X 8    $   document   attach   update	   hide!!      handler   $document!   hHandleMousedown   .this      +H!!       !   hHandleMousedownB d  \                 $handle    $popover    $editable    target    $target    posStart    scrollTop    isAirMode   B D T < T   a         5    B  l  d             5 5!!       %   Handle/this.attachb ' j  j   D         5 !!       %   Handle/this.updateb   w      0       5 !!       !   Handle/this.hideb                5 ;5;5!!       C                                                                               W   QV     !!      HelpDialog         +H!!          HelpDialogC %                                                                    W   QV       6    QV      6   Q6        showHelpDialog	   show!!      handler   .this      +H!!       =   HelpDialog/this.showHelpDialogb        R              $dialog    B J  B                   deferred   B                   5 55!!       )   HelpDialog/this.showb        /  "          $editable    B                  5 5;5;5!!      !!'   summernote/core/key    !!        C                                                    %  % &                    W   QV   1  !!      key   ImageDialog      +H!!          ImageDialogC ;                                               ; $ 3 $ &                W   Q       Q      QV      6    QV      6   QSo     	   show   showImageDialog!!      handler   toggleBtn   bindEnterKey   .this      +H!!           toggleBtnB [  S  &  e          5!!          bindEnterKeyB  >  > &             	   $btn   B  ;  ; &            55!!       +   ImageDialog/this.showb Q   I   &  [  2          layoutInfo    $editable    B         &  
  0       5    B          &           5 5!!       A   ImageDialog/this.showImageDialogb ! $ ! $ &  "             $dialog    B F! $ >! $ &  P  `          deferred    $imageDialog    $imageInput    $imageUrl    $imageBtn    B  5" 8$ -" 8$ &  ?            B  x" " p" " &           5    B " @# " @# &           5    B e# # ]# # &  o  0       5 5   B  X$ $ P$ $ '  x           555;5;5!!      !!'   summernote/core/key    !!        C                                                   4& . ,& . -                    W   QV   1 " !!      key   LinkDialog      +H!!           LinkDialogC ;                                               Q& . I& . -                W   Q       Q      QV      6    QV      6   QRo    I    showLinkDialog	   show!!      handler   toggleBtn   bindEnterKey   .this      +H!!           toggleBtnB q& & i& & -  d          5!!          bindEnterKeyB & T' & T' -             	   $btn   B ' Q' ' Q' -            55!!       =   LinkDialog/this.showLinkDialogb q' , i' , -  d  0          $dialog    linkInfo   B ' , ' , -    p          deferred    $linkDialog    $linkText    $linkUrl    $linkBtn !   $openInNewWindow    B  ( + ( + -              B  ) e) ) e) -           5    B  ) I* ) I* .             5   B + + + + .  Q         5 5   B  + {, + {, .  +          555!!       )   LinkDialog/this.showb , . , . .    B          $editable    $popover    options   B - . - . .  6         5    B  . . . . .           5 5;5;5!!      !!)   summernote/core/func!!)   summernote/core/list!!1   summernote/module/Button    !!       C                                                   G0 G7 ?0 G7 4                    W   QV   q  !!   	   func	   list   Button   Popover      +H!!           PopoverC  t         *                                       n0 67 f0 67 4                W   Q  A,  R     QV      6    Q       Q      Q   QV      6   QV      6   QV      6   Q   Hc [k:    button   update#   updateRecentColor	   hide!!      button%   posFromPlaceholder   showPopover3   PX_POPOVER_ARROW_OFFSET_X   .this        +H!!       %   posFromPlaceholderB 0 1 0 1 4            5 !!          showPopoverB 1 F2 1 F2 4           5!!       '   Popover/this.updateb |2 6 t2 6 4           5 !!       =   Popover/this.updateRecentColorb 6 6 6 6 7  z         5 !!       #   Popover/this.hideb 7 47 7 47 7           5;5;5!!      !!'   summernote/core/dom    !!        C                                                   g8 ; _8 ; =                   Q    W   QV   1 H !!      dom!   EDITABLE_PADDING   Statusbar      +H!!           StatusbarC  9                                                8 ; 8 ; =                W   Q           :    QV       6   Q      Qb
       $   document   attach!!      $document'   hStatusbarMousedown   .this        +H!!       +   Statusbar/this.attachb 8 ?9 8 ?9 =             5 !!       '   hStatusbarMousedownB `9 ; X9 ; =     @          $editable    editableTop    options   B : ; : ; =  d         5    B  ; ; ; ; =  l         5 5;5;5!!      !!)   summernote/core/list!!'   summernote/core/dom!!1   summernote/module/Button    !!        C                                                   1= A )= A C                    W   QV   o  !!   	   list   dom   Button   Toolbar      +H!!           ToolbarC        	   3                                       W= A O= A C                W   Q  A,  R     QV      6    QV       6   QV      6   QV      6   QV      6   QV      6   QV      6   QV      6   QV      6   Q  Msxw            button   update#   updateRecentColor   activate   deactivate!   updateFullscreen   updateCodeview   get   setButtonState!!      button   .this        +H!!       '   Toolbar/this.updateb = = = = C            5!!       =   Toolbar/this.updateRecentColorb = D> = D> C           5 !!       +   Toolbar/this.activateb [> > S> > C           5!!       /   Toolbar/this.deactivateb > 3? > 3? C           5!!       ;   Toolbar/this.updateFullscreenb R? ? J? ? C  z         5!!       7   Toolbar/this.updateCodeviewb ? @ ? @ C    2       5!!       !   Toolbar/this.getb @ 7A @ 7A C           5 !!       7   Toolbar/this.setButtonStateb TA A LA A C  |         5;5;5!!      !!+   summernote/core/agent!!'   summernote/core/dom!!)   summernote/core/func!!)   summernote/core/list    !!       C                                                   KC  CC  I                    W   QV      y C !!      agent   dom	   func	   list   Renderer      +H!!          RendererC       &   _      ;                                vC p nC p I                W  Q       Q      Q      Q      Q      Q[      ]       ]      ]      ]   	   ]   
   ]      ]      ]      ]      ]	      ]
      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      Q   W   QV     6   QV  V   6   Q      Q     	  Q!    
  Q"      Q#      Q$      Q%      Q&      Q'      Q[+   (   ]   )   ]   *   ]      Q,      Q-      Q.      Q/      Q0   W  QV  V  6   QV  1   6   QV  2   6   QV  3   6   QV  4   6   QV  5   6    QV  6   6!   QV  7   6"   QV  8   6#   QV  9   6$   QV  :   6%   Q   U   `L           -                   z             !!j     ' y f7J] g       w -! f w  Z    E/vNN    picture	   link   table   style   fontname   fontsize   color	   bold   italic   underline   strikethrough   superscript   subscript   clear   ul   ol   paragraph   height	   help   fullscreen   codeview	   undo	   redo   hr   tplButtonInfo   tplPopovers   image   createPalette+   createLayoutByAirMode'   createLayoutByFrame   hasNoteEditor)   noteEditorFromHolder   createLayout)   layoutInfoFromHolder   removeLayout   getTemplate   addButtonInfo   addDialogInfo!!      tplButton   tplIconButton   tplPopover   tplDialog   tplDropdown   tplButtonInfo   tplPopovers   tplHandles   tplShortcut   tplShortcutText#   tplShortcutAction   tplShortcutPara!   tplShortcutStyle#   tplExtraShortcuts!   tplShortcutTable   replaceMacKeys   tplDialogInfo   tplDialogs   tplStatusbar#   representShortcut   createTooltip   createPalette   .this        +H!!          tplButtonB C OF C OF I            5!!          tplIconButtonB jF F bF F U  3          5!!          tplPopoverB F G F G U            5 !!          tplDialogB G I G I U           5!!          tplDropdownB I J I J W  t           5 !!          pictureB 	K K K K X  k          5!!       	   linkB K .L K .L X           5 !!          tableB =L N 5L N X           5!!          styleB +N O #N O X            	   lang    B eN >O ]N >O X           5 5!!          fontnameB O R O R Y     0          options    realFontList   B P NQ P NQ Y  #          55!!          fontsizeB R BT R BT [                options    B R S R S [            5 5!!          colorB QT X IT X [  =         5!!       	   boldB X 2Y X 2Y \  :         5 !!          italicB BY Y :Y Y \           5 !!          underlineB Y TZ Y TZ \  M         5!!          strikethroughB kZ Z cZ Z \           5!!          superscriptB [ [ [ [ \           5!!          subscriptB [ 1\ [ 1\ \  *         5!!          clearB @\ \ 8\ \ \           5!!          ulB \ [] \ [] \  H         5 !!          olB g] ] _] ] \           5 !!          paragraphB ^ kb ] kb \  	         5!!          heightB {b c sb c \               options    B b hc b hc \  4         5 5!!       	   helpB d d c d \  ~         5 !!          fullscreenB d 1e d 1e \  !         5 !!          codeviewB Ce e ;e e \           5 !!       	   undoB e Sf e Sf \  U         5 !!       	   redoB af f Yf f \           5 !!          hrB f mg f mg \  e         5 !!       !!   picture!!!!	   link!!!!   table!!!!   style!!!!   fontname!!!!   fontsize!!!!   color!!!!	   bold!!!!   italic!!!!   underline!!!!   strikethrough!!!!   superscript!!!!   subscript!!!!   clear!!!!   ul!!!!   ol!!!!   paragraph!!!!   height!!!!	   help!!!!   fullscreen!!!!   codeview!!!!	   undo!!!!	   redo!!!!   hr!!    !!          tplPopoversB g 3t g 3t \    @       	   lang    options   B  g i g i \  .         5    B  i q i q ]  n          5    B  q bs q bs ]    0       5 5!!          tplHandlesB t v t v `  k          5 !!          tplShortcutB v tx v tx b  ~   0       5!!          tplShortcutTextB x ky x ky c            5!!       #   tplShortcutActionB y z y z c           5!!          tplShortcutParaB z | z | c           5!!       !   tplShortcutStyleB )| q} !| q} c           5 !!       #   tplExtraShortcutsB } e~ } e~ c    0       5!!       !   tplShortcutTableB ~  {~  d  P           5!!          replaceMacKeysB     f  a          5 !!          imageB 1  )  f             5 !!       	   linkB  z  z h  t         5 !!       	   helpB     j            5 !!       !!   image!!!!	   link!!!!	   help!!    !!           tplDialogsB     k    @       	   lang    options    dialogs   B $ V  V k           5 5!!          tplStatusbarB   D  D k  l         5 !!       #   representShortcutB c  [  k  )          5 !!          createTooltipB 8  0  l                invertedKeyMap    B  p  p l    0          sShortcut   B 6 l . l l           5 5   B      l  "         5 5!!          createPaletteB     l  \             colorInfo   B  m  e  l    2       5 5!!       G   Renderer/this.createLayoutByAirModeb     n  q            B  S  K  o           5 5!!       C   Renderer/this.createLayoutByFrameb  Y  Y o             B   *  * w           5 5!!       7   Renderer/this.hasNoteEditorb u  m  w  ;         5!!       E   Renderer/this.noteEditorFromHolderb  q  q w    @       5!!       5   Renderer/this.createLayoutb     w  R  2       5 !!       E   Renderer/this.layoutInfoFromHolderb 3  +  w    "       5!!       5   Renderer/this.removeLayoutb  \  \ x  _   @       5!!       3   Renderer/this.getTemplateb  v  n  y  H          5!!       7   Renderer/this.addButtonInfob       y            5!!       7   Renderer/this.addDialogInfob < n 4 n y           5;5;5!!      !!+   summernote/core/agent!!)   summernote/core/func!!'   summernote/core/dom!!+   summernote/core/async!!'   summernote/core/key!!)   summernote/core/list!!5   summernote/editing/History!!1   summernote/module/Editor!!3   summernote/module/Toolbar!!7   summernote/module/Statusbar!!3   summernote/module/Popover!!1   summernote/module/Handle!!9   summernote/module/Fullscreen!!5   summernote/module/Codeview!!;   summernote/module/DragAndDrop!!7   summernote/module/Clipboard!!9   summernote/module/LinkDialog!!;   summernote/module/ImageDialog!!9   summernote/module/HelpDialog    !!       C                                                    "  "                     W   QV       !!      agent	   func   dom   async   key	   list   History   Editor   Toolbar   Statusbar   Popover   Handle   Fullscreen   Codeview   DragAndDrop   Clipboard   LinkDialog   ImageDialog   HelpDialog   EventHandler      +H!!          EventHandlerC  K                                               D  <                  W   QV      QV   [    	  AV   ,  R ]    
  AV   ,  R ]     AV   ,  R ]     AV   ,  R ]     AV   ,  R ]     AV   ,  R ]     AV   ,  R ]     AV   ,  R ]     AV   ,  R ]     AV   ,  R ]	     AV   ,  R ]
     AV   ,  R ]   6      QV      6   QV      6   QV      6      QV      6   Q[
      ]      ]      ]      ]   	   ]      Q      Q      QV      6   Q      Q    	  Q    
  Q      Q   Q      QV      6   QV      6   QV      6   QV      6   Q 
	
 _C 
JLJHIU    6     &,          editor   toolbar   statusbar   popover   handle   fullscreen   codeview   dragAndDrop   clipboard   linkDialog   imageDialog   helpDialog   modules   invoke   getModule   bindCustomEvent   insertImages   showLinkDialog   showImageDialog   showHelpDialog   updateStyleInfo   bindKeyMap   attach#   attachCustomEvent   detach!!   	   self   modules   bindCustomEvent   commands   hMousedown!   hKeyupAndMouseup1   hToolbarAndPopoverUpdate   hScroll7   hToolbarAndPopoverMousedown/   hToolbarAndPopoverClick   PX_PER_EM)   hDimensionPickerMove   .this        +H!!       !!   editor!!!!   toolbar!!!!   statusbar!!!!   popover!!!!   handle!!!!   fullscreen!!!!   codeview!!!!   dragAndDrop!!!!   clipboard!!!!   linkDialog!!!!   imageDialog!!!!   helpDialog!!    !!        1   EventHandler/this.invokeb   h  h   q         5 !!       7   EventHandler/this.getModuleb   x             5!!       C   EventHandler/this.bindCustomEventb         @          $holder    callbacks    eventNamespace    B  '        !       55!!       =   EventHandler/this.insertImagesb       ]   p          $editable    $holder    callbacks    options    B +  #      @          filename   B , p $ p            5    B    w             5 55!!          showLinkDialogB  H  H   u         5 !!          showImageDialogB a  Y             5!!          showHelpDialogB                5 !!          fullscreenB  &  &   Q         5 !!          codeviewB 8 j 0 j            5 !!       !!   showLinkDialog!!!!   showImageDialog!!!!   showHelpDialog!!!!   fullscreen!!!!   codeview!!    !!           hMousedownB   {              5!!       !   hKeyupAndMouseupB  ~  ~   =         5 !!       C   EventHandler/this.updateStyleInfob         0       5!!       1   hToolbarAndPopoverUpdateB          0          event    target   B  -  %       P       5 5!!          hScrollB  X  X   F          5!!       7   hToolbarAndPopoverMousedownB   y              5 !!       /   hToolbarAndPopoverClickB  j   j            5 !!       )   hDimensionPickerMoveB  4  4   T   P       5 !!       9   EventHandler/this.bindKeyMapb M  E    D   P          layoutInfo    keyMap    $editor    $editable    B                 55!!       1   EventHandler/this.attachb         R          options   B v  n             5    B   7  7            5 5!!       G   EventHandler/this.attachCustomEventb                   layoutInfo    $holder    $editable    callbacks   B *  "      "       5   B                 5    B       N          5    B   $  $   h          5 5!!       1   EventHandler/this.detachb  
  
              5;5;5!!       C         9        0                                 0  (                  [/   =    ]   [    @]   @]   @]   @]   B]   ]   C]   B]	   B]
   B]   B]   C]   C]   B]   C]   =   ]   [   [    =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   ]   [   =   ]   =   ]    =!   ]"   =#   ]$   =%   ]&   ='   ](   =   ])   =*   ]+   =,   ]-   ]   [   =.   ].   =/   ]/   =0   ]0   ].   [   =1   ]1   ]1   [   =2   ]3   ]4   [   =5   ]6   ]6   [   =7   ]8   =9   ]:   ];   [   =<   ]=   =>   ]?   =@   ]A   ]B   [   =   ]C   =D   ]D   =E   ]E   =   ]F   =G   ]H   =!   ]I   =#   ]J   ]C   [	   =   ]K   ]L   [
   =M   ]M   =N   ]O   ]P   [   =Q   ]Q   ]R   ]S   B]T   [   =U   ]V   C]W   C]X   ]Y   =Z   ][   @]\   Z   Z   =6   `    Z   =6   `    `   `    Z   =   `    Z   =   `    =   `   =   `   =   `   `   `   Z   =]   `    Z   =]   `    `   `   Z   =^   `    Z   =^   `    `   `   Z   =L   `    Z   =L   `    `   `   Z   =_   `    Z   =`   `    =a   `   =C   `   `   `   Z   =   `    Z   =   `    `   `   Z   =1   `    Z   =1   `    `   `   Z   =3   `    Z   =.   `    =b   `   =4   `   `   `   Z   =c   `    Z   =?   `    =A   `   `   `	   Z   ==   `    Z   ==   `    `   `
   ]d   [   ]e   B]f   Z   Z   =L   `    Z   =L   `    `   `    Z   =   `    Z   =   `    =   `   =   `   `   `   Z   =_   `    Z   =`   `    =C   `   `   `   Z   =1   `    Z   =1   `    `   `   Z   =3   `    Z   =.   `    =b   `   `   `   ]g   f   ]h   =i   ]j   f   ]k   Z    ]l   f   ]m   Z   f   `    f   `   f   `   f   `   f   `   f   `   f   `   f   `   ]n   f   ]o   [   
]p   
]q   ]r   @]s   @]t   @]u   @]v   @]w   @]x   @]y   @]z   @]{   @]|   @]}   @]~      ]   [   [   =   ]   =M   ]   =O   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =D   ]   =E   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   ]   [   =   ]   =M   ]   =O   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =D   ]   =E   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   ]   ]   ]B   [.   [-   [!   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   ]   ["   =   ]   =   ]3   =   ]   =   ]   =   ]   =   ]    =   ]"   =   ]$   =   ]&   =   ](   =   ])   =   ]+   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]-   ]   [#   =   ].   =   ]3   =   ]/   =   ]0   =   ]   =   ]   =   ]   ].   [$   =   ]1   ]1   [%   =   ]3   ]4   [&   =   ]6   =   ]   =   ]   =  ]  =  ]  =  ]  =  ]  =	  ]
  =  ]  =  ]  ]6   ['   =  ]8   =  ]:   ];   [(   =  ]=   =  ]?   =  ]A   ]B   [)   =   ]C   =  ]D   =  ]E   =  ]F   =  ]H   =  ]I   =  ]J   ]C   [*   =  ]K   =  ]  =  ]  =  ]   =!  ]"  =#  ]$  =%  ]&  ='  ](  ]L   [+   =)  ]   =*  ]+  =,  ]-  =.  ]/  =0  ]1  =2  ]3  =4  ]5  ]6  [,   =7  ]M   =8  ]O   ]P   ]Z   ][   W   QV   ,
	
			
	

	
	





	A!  7RRRRRRRS> (&$'%#	"($$3 '&!	!#
!+	    @VERSION   version   width   height   minHeight   maxHeight   focus   tabsize   styleWithSpan#   disableLinkTarget%   disableDragAndDrop'   disableResizeEditor%   disableResizeImage   shortcuts!   textareaAutoSync   placeholder   prettifyHtml   fa fa-   iconPrefix	   bold   italic   underline   eraser   clear   text-height   strikethrough   superscript   subscript	   font   picture-o   image   align-left   floatLeft   align-right   floatRight   align-justify   floatNone   square   shapeRounded   circle-o   shapeCircle   shapeThumbnail   times   shapeNone   trash-o   remove	   link   unlink	   edit   table   minus   insert   hr   magic   style   list-ul   unordered   list-ol   ordered   lists   question	   help   arrows-alt   fullscreen	   code   codeview   options   paragraph   outdent   indent	   left   align-center   center   right   justify   recent   color	   undo   repeat	   redo   history   check	   misc   icons   dialogsInBody   text/html	   mode   htmlMode   lineNumbers   codemirror   en-US	   lang   direction   fontname   fontsize	   para   ul   ol   picture	   view   toolbar   plugin   airMode   airPopover   styleTags   Helvetica Neue   defaultFontName   fontNames)   fontNamesIgnoreCheck   fontSizes   colors   lineHeights   col   row%   insertTableMaxSize)   maximumImageFileSize   oninit   onfocus   onblur   onenter   onkeyup   onkeydown   onImageUpload%   onImageUploadError   onMediaDelete   onToolbarClick   onsubmit   onCreateLink   insertParagraph   ENTER   CTRL+Z   CTRL+Y   tab   TAB   untab   SHIFT+TAB   CTRL+B   CTRL+I   CTRL+U   CTRL+SHIFT+S   removeFormat   CTRL+BACKSLASH   justifyLeft   CTRL+SHIFT+L   justifyCenter   CTRL+SHIFT+E   justifyRight   CTRL+SHIFT+R   justifyFull   CTRL+SHIFT+J'   insertUnorderedList   CTRL+SHIFT+NUM7#   insertOrderedList   CTRL+SHIFT+NUM8!   CTRL+LEFTBRACKET#   CTRL+RIGHTBRACKET   formatPara   CTRL+NUM0   formatH1   CTRL+NUM1   formatH2   CTRL+NUM2   formatH3   CTRL+NUM3   formatH4   CTRL+NUM4   formatH5   CTRL+NUM5   formatH6   CTRL+NUM6)   insertHorizontalRule   CTRL+ENTER   showLinkDialog   CTRL+K   pc   CMD+Z   CMD+SHIFT+Z   CMD+B   CMD+I   CMD+U   CMD+SHIFT+S   CMD+BACKSLASH   CMD+SHIFT+L   CMD+SHIFT+E   CMD+SHIFT+R   CMD+SHIFT+J   CMD+SHIFT+NUM7   CMD+SHIFT+NUM8   CMD+LEFTBRACKET!   CMD+RIGHTBRACKET   CMD+NUM0   CMD+NUM1   CMD+NUM2   CMD+NUM3   CMD+NUM4   CMD+NUM5   CMD+NUM6   CMD+ENTER   CMD+K   mac   keyMap	   Bold   Italic   Underline#   Remove Font Style   Line Height   Font Family	   name   Strikethrough   Subscript   Superscript   Font Size	   size   Picture   Insert Image   Resize Full   resizeFull   Resize Half   resizeHalf   Resize Quarter   resizeQuarter   Float Left   Float Right   Float None   Shape: Rounded   Shape: Circle!   Shape: Thumbnail   Shape: None/   Drag image or text here   dragImageHere%   Drop image or Text   dropImage#   Select from files   selectFromFiles#   Maximum file size   maximumFileSize7   Maximum file size exceeded.)   maximumFileSizeError   Image URL   url   Remove Image	   Link   Insert Link   Unlink	   Edit   Text to display   textToDisplayA   To what URL should this link go?%   Open in new window   openInNewWindow   Table-   Insert Horizontal Rule   Style   Paragraph   normal   Quote   blockquote	   Code   pre   Header 1   h1   Header 2   h2   Header 3   h3   Header 4   h4   Header 5   h5   Header 6   h6   Unordered list   Ordered list	   Help   Full Screen   Code View   Outdent   Indent   Align left   Align center   Align right   Justify full   Recent Color   More Color	   more!   Background Color   background!   Foreground Color   foreground   Transparent   transparent   Set transparent   setTransparent   Reset   reset!   Reset to default   resetToDefault%   Keyboard shortcuts   Close   close   Text formatting   textFormatting   Action   action)   Paragraph formatting'   paragraphFormatting   Document Style   documentStyle   Extra keys   extraKeys   shortcut	   Undo	   Redo!!      defaults         +H!!       !!	   bold!!!!   italic!!!!   underline!!!!   clear!!!!   height!!!!   strikethrough!!!!   superscript!!!!   subscript!!    !!    	   !!   image!!!!   floatLeft!!!!   floatRight!!!!   floatNone!!!!   shapeRounded!!!!   shapeCircle!!!!   shapeThumbnail!!!!   shapeNone!!!!   remove!!    !!       !!	   link!!!!   unlink!!!!	   edit!!    !!       !!   table!!    !!       !!   insert!!    !!       !!   style!!    !!       !!   unordered!!!!   ordered!!    !!       !!	   help!!!!   fullscreen!!!!   codeview!!    !!       !!   paragraph!!!!   outdent!!!!   indent!!!!	   left!!!!   center!!!!   right!!!!   justify!!    !!       !!   recent!!    !!       !!	   undo!!!!	   redo!!    !!       !!   check!!    !!       !!	   font!!!!   image!!!!	   link!!!!   table!!!!   hr!!!!   style!!!!   lists!!!!   options!!!!   paragraph!!!!   color!!!!   history!!!!	   misc!!    !!       !!	   mode!!!!   htmlMode!!!!   lineNumbers!!    !!            !!   	   !!   p!!   blockquote!!   pre!!   h1!!   h2!!   h3!!   h4!!   h5!!   h6   !!      !!   Arial!!   Arial Black!!   Comic Sans MS!!   Courier New!!   Helvetica Neue!!   Helvetica!!   Impact!!   Lucida Grande!!   Tahoma!!   Times New Roman!!   Verdana   !!   	   !!   8!!   9!!   10!!   11!!   12!!   14!!   18!!   24!!   36   !!      !!   #000000!!   #424242!!   #636363!!   #9C9C94!!   #CEC6CE!!   #EFEFEF!!   #F7F7F7!!   #FFFFFF   !!      !!   #FF0000!!   #FF9C00!!   #FFFF00!!   #00FF00!!   #00FFFF!!   #0000FF!!   #9C00FF!!   #FF00FF   !!      !!   #F7C6CE!!   #FFE7CE!!   #FFEFC6!!   #D6EFD6!!   #CEDEE7!!   #CEE7F7!!   #D6D6E7!!   #E7D6DE   !!      !!   #E79C9C!!   #FFC69C!!   #FFE79C!!   #B5D6A5!!   #A5C6CE!!   #9CC6EF!!   #B5A5D6!!   #D6A5BD   !!      !!   #E76363!!   #F7AD6B!!   #FFD663!!   #94BD7B!!   #73A5AD!!   #6BADDE!!   #8C7BC6!!   #C67BA5   !!      !!   #CE0000!!   #E79439!!   #EFC631!!   #6BA54A!!   #4A7B8C!!   #3984C6!!   #634AA5!!   #A54A7B   !!      !!   #9C0000!!   #B56308!!   #BD9400!!   #397B21!!   #104A5A!!   #085294!!   #311873!!   #731842   !!      !!   #630000!!   #7B3900!!   #846300!!   #295218!!   #083139!!   #003163!!   #21104A!!   #4A1031   !!      !!   1.0!!   1.2!!   1.4!!   1.5!!   1.6!!   1.8!!   2.0!!   3.0   !!       !!   col!!!!   row!!    !!          onCreateLinkB :  2    /          5!!       !!   ENTER!!!!   CTRL+Z!!!!   CTRL+Y!!!!   TAB!!!!   SHIFT+TAB!!!!   CTRL+B!!!!   CTRL+I!!!!   CTRL+U!!!!   CTRL+SHIFT+S!!!!   CTRL+BACKSLASH!!!!   CTRL+SHIFT+L!!!!   CTRL+SHIFT+E!!!!   CTRL+SHIFT+R!!!!   CTRL+SHIFT+J!!!!   CTRL+SHIFT+NUM7!!!!   CTRL+SHIFT+NUM8!!!!!   CTRL+LEFTBRACKET!!!!#   CTRL+RIGHTBRACKET!!!!   CTRL+NUM0!!!!   CTRL+NUM1!!!!   CTRL+NUM2!!!!   CTRL+NUM3!!!!   CTRL+NUM4!!!!   CTRL+NUM5!!!!   CTRL+NUM6!!!!   CTRL+ENTER!!!!   CTRL+K!!    !!       !!   ENTER!!!!   CMD+Z!!!!   CMD+SHIFT+Z!!!!   TAB!!!!   SHIFT+TAB!!!!   CMD+B!!!!   CMD+I!!!!   CMD+U!!!!   CMD+SHIFT+S!!!!   CMD+BACKSLASH!!!!   CMD+SHIFT+L!!!!   CMD+SHIFT+E!!!!   CMD+SHIFT+R!!!!   CMD+SHIFT+J!!!!   CMD+SHIFT+NUM7!!!!   CMD+SHIFT+NUM8!!!!   CMD+LEFTBRACKET!!!!!   CMD+RIGHTBRACKET!!!!   CMD+NUM0!!!!   CMD+NUM1!!!!   CMD+NUM2!!!!   CMD+NUM3!!!!   CMD+NUM4!!!!   CMD+NUM5!!!!   CMD+NUM6!!!!   CMD+ENTER!!!!   CMD+K!!    !!       !!   pc!!!!   mac!!    !!    /   !!   width!!!!   height!!!!   minHeight!!!!   maxHeight!!!!   focus!!!!   tabsize!!!!   styleWithSpan!!!!#   disableLinkTarget!!!!%   disableDragAndDrop!!!!'   disableResizeEditor!!!!%   disableResizeImage!!!!   shortcuts!!!!!   textareaAutoSync!!!!   placeholder!!!!   prettifyHtml!!!!   iconPrefix!!!!   icons!!!!   dialogsInBody!!!!   codemirror!!!!	   lang!!!!   direction!!!!   toolbar!!!!   plugin!!!!   airMode!!!!   airPopover!!!!   styleTags!!!!   defaultFontName!!!!   fontNames!!!!)   fontNamesIgnoreCheck!!!!   fontSizes!!!!   colors!!!!   lineHeights!!!!%   insertTableMaxSize!!!!)   maximumImageFileSize!!!!   oninit!!!!   onfocus!!!!   onblur!!!!   onenter!!!!   onkeyup!!!!   onkeydown!!!!   onImageUpload!!!!%   onImageUploadError!!!!   onMediaDelete!!!!   onToolbarClick!!!!   onsubmit!!!!   onCreateLink!!!!   keyMap!!    !!    
   !!	   bold!!!!   italic!!!!   underline!!!!   clear!!!!   height!!!!	   name!!!!   strikethrough!!!!   subscript!!!!   superscript!!!!	   size!!    !!       !!   image!!!!   insert!!!!   resizeFull!!!!   resizeHalf!!!!   resizeQuarter!!!!   floatLeft!!!!   floatRight!!!!   floatNone!!!!   shapeRounded!!!!   shapeCircle!!!!   shapeThumbnail!!!!   shapeNone!!!!   dragImageHere!!!!   dropImage!!!!   selectFromFiles!!!!   maximumFileSize!!!!)   maximumFileSizeError!!!!   url!!!!   remove!!    !!       !!	   link!!!!   insert!!!!   unlink!!!!	   edit!!!!   textToDisplay!!!!   url!!!!   openInNewWindow!!    !!       !!   table!!    !!       !!   insert!!    !!    
   !!   style!!!!   normal!!!!   blockquote!!!!   pre!!!!   h1!!!!   h2!!!!   h3!!!!   h4!!!!   h5!!!!   h6!!    !!       !!   unordered!!!!   ordered!!    !!       !!	   help!!!!   fullscreen!!!!   codeview!!    !!       !!   paragraph!!!!   outdent!!!!   indent!!!!	   left!!!!   center!!!!   right!!!!   justify!!    !!       !!   recent!!!!	   more!!!!   background!!!!   foreground!!!!   transparent!!!!   setTransparent!!!!   reset!!!!   resetToDefault!!    !!       !!   shortcuts!!!!   close!!!!   textFormatting!!!!   action!!!!'   paragraphFormatting!!!!   documentStyle!!!!   extraKeys!!    !!       !!	   undo!!!!	   redo!!    !!       !!	   font!!!!   image!!!!	   link!!!!   table!!!!   hr!!!!   style!!!!   lists!!!!   options!!!!   paragraph!!!!   color!!!!   shortcut!!!!   history!!    !!       !!   en-US!!    !!       !!   version!!!!   options!!!!	   lang!!    ;5 !!      !!+   summernote/core/agent!!)   summernote/core/list!!'   summernote/core/dom!!+   summernote/core/range!!'   summernote/defaults!!/   summernote/EventHandler!!'   summernote/Renderer!!'   summernote/core/key    !!        C  ,         j       	                              G  ?                           5   D   Q[    6   Q       
    5   T  QT A,  R     QT A,  R     Q       
    5   [      ]      ]   [   T  ]      ]      ]   T ]   T ]	   ]
   [   ]   Z    ]    Q    5      6   Q    5      
[      ]      ]      ]    Q $	
	t  D   D       $   summernote   extend   renderer   eventHandler   agent	   list   dom   range   key	   core   pluginEvents   plugins   addPlugin   fn	   code   destroy!!
      agent	   list   dom   range   defaults   EventHandler   Renderer   key   renderer   eventHandler       +H!!            !!       !!   agent!!!!	   list!!!!   dom!!!!   range!!!!   key!!    !!            !!       !!   renderer!!!!   eventHandler!!!!	   core!!!!   pluginEvents!!!!   plugins!!    !!        -   $.summernote.addPluginb       :  `         B  F  F            5    B {  s    1          5    B       /          5    B F  >    -           55!!          summernoteB   =  =   d             options    B   {               55!!       	   codeB K  C       R       	   html    B                  55!!          destroyB                    B                  55!!       !!   summernote!!!!	   code!!!!   destroy!!    ;5 !!       C  
      z   Y      U                               c | c                        Q      Q      Q      Q      QT  =    : W   QT  =    QT  =   : W  QV   5      Q   5   5   5      Q   5   5   5      Q   5   5   5	      Q   5   5   5
   W  Q   5   5   W  QV  5   5      Q   5   5      Q   5   5      Q[    	  Q      
Z   =   `    =   `   =   `   =   `       Q      0   Q      0   Q   	   0   Q   
   0   Q      0   Q      0   Q      0   Q      0   Q      0   Q      0   Q      0    Q      0!   Q      0"   Q      0#   Q      0$   Q      0%   Q      0&   Q      0'   Q      0(   Q      0)   Q      0*   Q      0+   Q      0,   Q      0-   Q      0.   Q       0/   Q   !   00   Q   "   01   Q   #   02   Q   $   03   Q   %   04   Q   &   05   Q   '   06   Q   57    
  Q   (   07   Q   )   08   Q   *   09   Q   +   0:   Q   ,   0;   Q   -   0<   Q   5=   5>   .   0?   Q   5=   5>   /   0@   Q   5=   5>   0   0A   Q   5=   5>   1   0B   Q   5=   5>   2   0C   Q   5=   5>   3   0D   Q   5=   5>   4   03   Q   5E   5   0F   Q   5E   6   0G   Q   5E   7   0H   QV  5I   .=J   9QV  5I   =K   9Q   5L   5M   =N   0O   Q   5L   5M   =P   0J   Q   5L   5M   =Q   0R   Q   5L   5M   =S   0K   Q   5L   5T   =U   0V   Q   5L   5M   =W   0X   Q   5L   5M   =Y   0Z   Q   5L   5T   =N   0O   Q   5L   5T   =P   0J   Q   5L   5T   =Q   0R   Q   5L   5T   =S   0K   Q   5L   5T   =W   0X   Q   5L   5T   =Y   0Z   Q   V  5[   0[   Q   5   5\   8   0]   Q   5   5\   9   0^   Q   5   5\   :   0U   Q   5   5\   ;   0W   Q   5   5\   <   0Y   Q   5   5\   =   0Q   Q   5   5\   >   0_   Q   5   5\   ?   0P   Q   5   5\   @   0N   Q   5   5\   A   0`   Q   5   5\   B   0a   Q   5   5\   C   0b   Q   5   5\   D   0)   Q   5   5\   E   0*   Q   5   5\   F   0c   Q   5   5\   G   0d   QV  5   5   H   0e   QV  5   5   I   0f   QV  5   5   5g   5h      QV  5   5   5g   J   0h   QV  5   5   5i      QV  5   5   K   0i   Q   V  5j   0j   Q   5   5\   L   0k   Q   5   5\   M   0l   Q   5   5\   N   0G   Q   5   5\   O   0m   Q   5   5\   P   0n   Q   Q   0o   QV  5   5p   5q      QV  5   5p   R   0q   QV  5r      QV  S   0r   QV  5s      QV  T   0s   Q   5t   5u   =v   0u   Q   5   5w   5x   5u   =y   0u   Q   5   G%2" +'#!            g   5 z    "     	1      X tz A[&no  G  p -:X<       +%#%(!,&$&"-E  d> && / AI V g9     ~&    x|8  @- Y  X     6 ; X)6    web.core+   summernote/summernoteE   web_editor.wysiwyg.default_options   _t   $   summernote	   core   dom   range	   list   key   eventHandler   modules   editor   renderer   options   _	   each	   Left   Right	   Full   Center   hasContentAfter!   hasContentBefore/   ancestorHaveNextSibling7   ancestorHavePreviousSibling%   nextElementSibling-   previousElementSibling   lastChild   firstChild!   lastElementChild#   firstElementChild   isEqual   hasOnlyStyle)   hasProgrammaticStyle   mergeFilter   doMerge   merge   autoMerge   removeSpace   removeBetween   indent   outdent-   scrollIntoViewIfNeeded   moveTo   isMergable   isSplitable)   isRemovableEmptyNode   isForbiddenNode   listBetween   isNotBreakable#   isContentEditable-   isContentEditableFalse   isFont   isVisibleText   isVisiblePoint   orderStyle   orderClass	   node   moveContent!   getComputedStyle   WrappedRange   prototype   reRange   isOnImg   deleteContents   clean   remove   isOnCellFirst   tplButtonInfo   fontsize   color   checklist   nameFromCode   DELETE   ESCAPE   keyMap   pc   backspace   BACKSPACE   delete   enter   ENTER   cancel   mac   untab   SHIFT+TAB   up   UP	   down	   DOWN   styleTags   pluginEvents   insertTable   tab   visible'   insertUnorderedList#   insertOrderedList   insertCheckList   formatBlock   removeFormat	   undo	   redo   style   fromNode   currentStyle   fontSizes   applyFont   fontSize   foreColor   backColor   onCreateLink   popover   update   attach   detach   icons   image   file-image-o	   lang   en-US   File / Image!!      require	   core!   weDefaultOptions   _t   dom   range	   list   key   eventHandler   editor   renderer   options   oldJustify%   old_isVisiblePoint)   remove_table_content   isFormatNode   fn_from_node-   fn_editor_currentstyle/   summernote_table_scroll/   summernote_table_update#   fn_popover_update%   mouseDownChecklist   fn_attach   fn_detach      +H!!        )   remove_table_content ar t Dr t +  +          5!!          isFormatNode     U  ;          5 !!       /   summernote_table_scroll       2           5 !!       /   summernote_table_update #                    r    $editable    $dels    $adds    $table    B   4  4             5    B Z  R    p  B          eq   B  
 1  1             5 5   B           B          eq   B        4         5    B  + X # X            5 55!!       %   mouseDownChecklist       =  `         B  |  t    /         5 5!!            !!        C  5                                                 y                   	       =       79Q  =           9Q 1*~    justify!!      align       +H!!        B       {  #         $align   B   Z  Z            5    B                 55;5!!       '   dom.hasContentAfterb     
                 5 !!       )   dom.hasContentBeforeb         i          5!!       7   dom.ancestorHaveNextSiblingb  G  G   D          5 !!       ?   dom.ancestorHavePreviousSiblingb p  h    6           5 !!       -   dom.nextElementSiblingb # y  y   -   0       5 !!       5   dom.previousElementSiblingb       1   0       5 !!          dom.lastChildb  N  N   $           5 !!          dom.firstChildb f  ^    %           5!!       )   dom.lastElementChildb  @  @   +          5 !!       +   dom.firstElementChildb _  W              5!!          dom.isEqualb       Q  `             strip                 55!!       !   dom.hasOnlyStyleb       '   0       5 !!       1   dom.hasProgrammaticStyleb  s	  s	   /   0       5 !!          dom.mergeFilterb 	 / 	 /   '          5 !!          dom.doMergeb D  <    {          5 !!          dom.mergeb  r  r      0         begin    so    end    eo    mergeFilter    all    _merged    add    __merge       __merge  $  $      @      5 5!!          dom.autoMergeb  (  (   K          5 !!          dom.removeSpaceb A s 9 s               begin    so    end    eo    removed    add       __remove_spaceB                 5 5!!       #   dom.removeBetweenb  )  )              before    after    B $ $ $ $   A          5 5!!          dom.indentb ) * ) *   5          5 !!          dom.outdentb * P+ * P+             5!!       5   dom.scrollIntoViewIfNeededb t+ . l+ .            5!!          dom.moveTob . / . /      @       5!!          dom.isMergableb / x0 / x0   H          5 !!          dom.isSplitableb 0 1 0 1             5!!       1   dom.isRemovableEmptyNodeb :1 1 21 1            5 !!       '   dom.isForbiddenNodeb 1 2 1 2   :         5!!          dom.listBetweenb 12 53 )2 53     P          sc    ec    nodes    ancestor    B 2 3 2 3             55!!       %   dom.isNotBreakableb Q3 3 I3 3            5 !!       +   dom.isContentEditableb 3 (4 3 (4   0         5!!       5   dom.isContentEditableFalseb L4 4 D4 4            5 !!          dom.isFontb 4 5 4 5            5 !!       #   dom.isVisibleTextb 5 :6 5 :6   [         5!!       %   dom.isVisiblePointb 6 6 x6 6            5 !!          dom.orderStyleb 6 28 6 28   G          5!!          dom.orderClassb J8 9 B8 9              5!!          dom.nodeb 9 
: 9 
:             5 !!          dom.moveContentb #: : : :      `       5 !!       )   dom.getComputedStyleb ; _; ; _;             5 !!       I   range.WrappedRange.prototype.reRangeb ; ? ; ?   I        5!!       I   range.WrappedRange.prototype.isOnImgb  ? %B ? %B   Z   R          nb    image    textNode   B @ B @ B      P       5 5!!       W   range.WrappedRange.prototype.deleteContentsb ZB D RB D   n   B       5 !!       E   range.WrappedRange.prototype.cleanb 7D E /D E      2       5 !!       G   range.WrappedRange.prototype.removeb F F F F   :          5!!       U   range.WrappedRange.prototype.isOnCellFirstb  SF F KF F   }             B |F F tF F             5 5!!       ]   range.WrappedRange.prototype.isContentEditableb  +G G #G G   U         5 !!       ?   renderer.tplButtonInfo.fontsizeb G 4I G 4I              B G yH G yH            5 5!!       9   renderer.tplButtonInfo.colorb ZI L RI L            5 !!       A   renderer.tplButtonInfo.checklistb "M 	N M 	N   L         5 !!       K   $.summernote.pluginEvents.insertTableb {P R sP R   
  0       5!!       ;   $.summernote.pluginEvents.tabb S Z 
S Z   k         5!!       ?   $.summernote.pluginEvents.untabb 5Z Z -Z Z   7          5!!       9   $.summernote.pluginEvents.upb Z ] Z ]      P          B _[ [ W[ [   '          5 5!!       =   $.summernote.pluginEvents.downb ] ` ] `      P          B ^ ^ ^ ^   '          5 5!!       ?   $.summernote.pluginEvents.enterb ` Ln ` Ln   f         5!!       C   $.summernote.pluginEvents.visibleb wn Cr on Cr &  P   p         B  nq r fq r (           5 5!!       A   $.summernote.pluginEvents.deleteb t  t  /  )         5 !!       G   $.summernote.pluginEvents.backspaceb     A  u         5!!       [   $.summernote.pluginEvents.insertUnorderedListb G  ?  V  6            parent 	   node    B `  X  Z  P          5    B     Z             55!!       W   $.summernote.pluginEvents.insertOrderedListb  "  " g  m          5!!       S   $.summernote.pluginEvents.insertCheckListb U  M  g           5!!       A   $.summernote.pluginEvents.indentb     g              outdent    r 	   flag    indentUL    outdenttUL    indentOther       indentUL     g           5      outdenttUL     n            5      indentOther     v     `       5    B   1  1 {            5    B  E  =  {  j   b       5   B      |     2       5    B @  8  }             55!!       C   $.summernote.pluginEvents.outdentb  p  p ~  P          5!!       K   $.summernote.pluginEvents.formatBlockb     ~            5!!       M   $.summernote.pluginEvents.removeFormatb       <          5 !!       A   eventHandler.modules.editor.undob  "  "            5 !!       A   eventHandler.modules.editor.redob L  D             5 !!       U   eventHandler.modules.editor.style.fromNodeb 
      D         5 !!       Q   eventHandler.modules.editor.currentStyleb - k % k   g  3       5 !!       G   $.summernote.pluginEvents.applyFontb  E  E   l   `         endPoint    nodes   B 6  .    7           5   B       3          5       remove 0  !       0       5 5!!       E   $.summernote.pluginEvents.fontSizeb q 9 i 9             5 !!       ?   $.summernote.pluginEvents.colorb b  Z    u  0       5!!       G   $.summernote.pluginEvents.foreColorb                  5 !!       G   $.summernote.pluginEvents.backColorb         P       5!!       )   options.onCreateLinkb          @       5!!       G   eventHandler.modules.popover.updateb       f   "       5 !!       '   eventHandler.attachb Z t R t   >          5!!       '   eventHandler.detachb                5;5;+V      
`!-`!-B&Ca   O    :http://hr.deerom.com/web/content/218-ee131e4/1/web_editor.assets_summernote.js necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Server: nginx/1.18.0 (Ubuntu)
Date: Wed, 03 Feb 2021 10:36:10 GMT
Content-Type: application/javascript
Content-Length: 189545
X-Content-Type-Options: nosniff
ETag: dd4cffb1f952a33bbf5c08b5d98f088c05878e7b
Cache-Control: max-age=31536000
 original-response-headers Server: nginx/1.18.0 (Ubuntu)
Date: Wed, 03 Feb 2021 10:36:10 GMT
Content-Type: application/javascript
Content-Length: 189545
Connection: keep-alive
X-Content-Type-Options: nosniff
ETag: dd4cffb1f952a33bbf5c08b5d98f088c05878e7b
Cache-Control: max-age=31536000
Set-Cookie: session_id=e3bcac1b45e33606ae06175f0b91fc65add6d2a6; Expires=Tue, 04-May-2021 10:36:10 GMT; Max-Age=7776000; HttpOnly; Path=/
 uncompressed-len 0 net-response-time-onstart 148 net-response-time-onstop 429 alt-data 1;189545,javascript/moz-bytecode-20190327091201 alt-data-from-child 1  
A